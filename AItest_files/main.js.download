function o_(e,t,r){e=e.split("."),r=r||o_a,e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||void 0===t?r=r[i]?r[i]:r[i]={}:r[i]=t}if(!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function r(e){var t=e.length,r=Z.type(e);return"function"!==r&&!Z.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e))}function i(e,t,r){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==r});if(t.nodeType)return Z.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(se.test(t))return Z.filter(t,e,r);t=Z.filter(t,e)}return Z.grep(e,function(e){return B.call(t,e)>=0!==r})}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function n(e){var t=fe[e]={};return Z.each(e.match(he)||[],function(e,r){t[r]=!0}),t}function o(){J.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function c(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(Ee,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:be.test(r)?Z.parseJSON(r):r)}catch(e){}ye.set(e,t,r)}else r=void 0;return r}function l(){return!0}function d(){return!1}function u(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=ke.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var r=0,i=e.length;i>r;r++)ve.set(e[r],"globalEval",!t||ve.get(t[r],"globalEval"))}function g(e,t){var r,i,a,n,o,s,c,l;if(1===t.nodeType){if(ve.hasData(e)&&(n=ve.access(e),o=ve.set(t,n),l=n.events)){delete o.handle,o.events={};for(a in l)for(r=0,i=l[a].length;i>r;r++)Z.event.add(t,a,l[a][r])}ye.hasData(e)&&(s=ye.access(e),c=Z.extend({},s),ye.set(t,c))}}function v(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],r):r}function y(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Ce.test(e.type)?t.checked=e.checked:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}function b(t,r){var i,a=Z(r.createElement(t)).appendTo(r.body),n=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(a[0]))?i.display:Z.css(a[0],"display");return a.detach(),n}function E(e){var t=J,r=He[e];return r||(r=b(e,t),"none"!==r&&r||(Ge=(Ge||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ge[0].contentDocument,t.write(),t.close(),r=b(e,t),Ge.detach()),He[e]=r),r}function I(e,t,r){var i,a,n,o,s=e.style;return r=r||je(e),r&&(o=r.getPropertyValue(t)||r[t]),r&&(""!==o||Z.contains(e.ownerDocument,e)||(o=Z.style(e,t)),Ye.test(o)&&Ve.test(t)&&(i=s.width,a=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=r.width,s.width=i,s.minWidth=a,s.maxWidth=n)),void 0!==o?o+"":o}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,a=ze.length;a--;)if(t=ze[a]+r,t in e)return t;return i}function C(e,t,r){var i=$e.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function S(e,t,r,i,a){for(var n=r===(i?"border":"content")?4:"width"===t?1:0,o=0;4>n;n+=2)"margin"===r&&(o+=Z.css(e,r+Te[n],!0,a)),i?("content"===r&&(o-=Z.css(e,"padding"+Te[n],!0,a)),"margin"!==r&&(o-=Z.css(e,"border"+Te[n]+"Width",!0,a))):(o+=Z.css(e,"padding"+Te[n],!0,a),"padding"!==r&&(o+=Z.css(e,"border"+Te[n]+"Width",!0,a)));return o}function A(e,t,r){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,n=je(e),o="border-box"===Z.css(e,"boxSizing",!1,n);if(0>=a||null==a){if(a=I(e,t,n),(0>a||null==a)&&(a=e.style[t]),Ye.test(a))return a;i=o&&(Q.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+S(e,t,r||(o?"border":"content"),i,n)+"px"}function _(e,t){for(var r,i,a,n=[],o=0,s=e.length;s>o;o++)i=e[o],i.style&&(n[o]=ve.get(i,"olddisplay"),r=i.style.display,t?(n[o]||"none"!==r||(i.style.display=""),""===i.style.display&&Pe(i)&&(n[o]=ve.access(i,"olddisplay",E(i.nodeName)))):(a=Pe(i),"none"===r&&a||ve.set(i,"olddisplay",a?r:Z.css(i,"display"))));for(o=0;s>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?n[o]||"":"none"));return e}function O(e,t,r,i,a){return new O.prototype.init(e,t,r,i,a)}function R(){return setTimeout(function(){Qe=void 0}),Qe=Z.now()}function N(e,t){var r,i=0,a={height:e};for(t=t?1:0;4>i;i+=2-t)r=Te[i],a["margin"+r]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function D(e,t,r){for(var i,a=(rt[t]||[]).concat(rt["*"]),n=0,o=a.length;o>n;n++)if(i=a[n].call(r,t,e))return i}function L(e,t,r){var i,a,n,o,s,c,l,d,u=this,p={},h=e.style,f=e.nodeType&&Pe(e),m=ve.get(e,"fxshow");r.queue||(s=Z._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,Z.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],l=Z.css(e,"display"),d="none"===l?ve.get(e,"olddisplay")||E(e.nodeName):l,"inline"===d&&"none"===Z.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}));for(i in t)if(a=t[i],Xe.exec(a)){if(delete t[i],n=n||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;f=!0}p[i]=m&&m[i]||Z.style(e,i)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?E(e.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(f=m.hidden):m=ve.access(e,"fxshow",{}),n&&(m.hidden=!f),f?Z(e).show():u.done(function(){Z(e).hide()}),u.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(i in p)o=D(f?m[i]:0,i,u),i in m||(m[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function w(e,t){var r,i,a,n,o;for(r in e)if(i=Z.camelCase(r),a=t[i],n=e[r],Z.isArray(n)&&(a=n[1],n=e[r]=n[0]),r!==i&&(e[i]=n,delete e[r]),o=Z.cssHooks[i],o&&"expand"in o){n=o.expand(n),delete e[i];for(r in n)r in e||(e[r]=n[r],t[r]=a)}else t[i]=a}function M(e,t,r){var i,a,n=0,o=tt.length,s=Z.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=Qe||R(),r=Math.max(0,l.startTime+l.duration-t),i=r/l.duration||0,n=1-i,o=0,c=l.tweens.length;c>o;o++)l.tweens[o].run(n);return s.notifyWith(e,[l,n,r]),1>n&&c?r:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Qe||R(),duration:r.duration,tweens:[],createTween:function(t,r){var i=Z.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var r=0,i=t?l.tweens.length:0;if(a)return this;for(a=!0;i>r;r++)l.tweens[r].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),d=l.props;for(w(d,l.opts.specialEasing);o>n;n++)if(i=tt[n].call(l,e,d,l.opts))return i;return Z.map(d,D,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function x(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,a=0,n=t.toLowerCase().match(he)||[];if(Z.isFunction(r))for(;i=n[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function k(e,t,r,i){function a(s){var c;return n[s]=!0,Z.each(e[s]||[],function(e,s){var l=s(t,r,i);return"string"!=typeof l||o||n[l]?o?!(c=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),c}var n={},o=e===bt;return a(t.dataTypes[0])||!n["*"]&&a("*")}function U(e,t){var r,i,a=Z.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:i||(i={}))[r]=t[r]);return i&&Z.extend(!0,e,i),e}function F(e,t,r){for(var i,a,n,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){c.unshift(a);break}if(c[0]in r)n=c[0];else{for(a in r){if(!c[0]||e.converters[a+" "+c[0]]){n=a;break}o||(o=a)}n=n||o}return n?(n!==c[0]&&c.unshift(n),r[n]):void 0}function G(e,t,r,i){var a,n,o,s,c,l={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(n=d.shift();n;)if(e.responseFields[n]&&(r[e.responseFields[n]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=n,n=d.shift())if("*"===n)n=c;else if("*"!==c&&c!==n){if(o=l[c+" "+n]||l["* "+n],!o)for(a in l)if(s=a.split(" "),s[1]===n&&(o=l[c+" "+s[0]]||l["* "+s[0]])){o===!0?o=l[a]:l[a]!==!0&&(n=s[0],d.unshift(s[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+n}}}return{state:"success",data:t}}function H(e,t,r,i){var a;if(Z.isArray(t))Z.each(t,function(t,a){r||Ct.test(e)?i(e,a):H(e+"["+("object"==typeof a?t:"")+"]",a,r,i)});else if(r||"object"!==Z.type(t))i(e,t);else for(a in t)H(e+"["+a+"]",t[a],r,i)}function V(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],j=Y.slice,q=Y.concat,$=Y.push,B=Y.indexOf,W={},K=W.toString,z=W.hasOwnProperty,Q={},J=e.document,X="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,re=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:X,constructor:Z,selector:"",length:0,toArray:function(){return j.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:j.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:Y.sort,splice:Y.splice},Z.extend=Z.fn.extend=function(){var e,t,r,i,a,n,o=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||Z.isFunction(o)||(o={}),s===c&&(o=this,s--);c>s;s++)if(null!=(e=arguments[s]))for(t in e)r=o[t],i=e[t],o!==i&&(l&&i&&(Z.isPlainObject(i)||(a=Z.isArray(i)))?(a?(a=!1,n=r&&Z.isArray(r)?r:[]):n=r&&Z.isPlainObject(r)?r:{},o[t]=Z.extend(l,n,i)):void 0!==i&&(o[t]=i));return o},Z.extend({expando:"jQuery"+(X+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===Z.type(e)&&!e.nodeType&&!Z.isWindow(e)&&!(e.constructor&&!z.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[K.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(te,"ms-").replace(re,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var a,n=0,o=e.length,s=r(e);if(i){if(s)for(;o>n&&(a=t.apply(e[n],i),a!==!1);n++);else for(n in e)if(a=t.apply(e[n],i),a===!1)break}else if(s)for(;o>n&&(a=t.call(e[n],n,e[n]),a!==!1);n++);else for(n in e)if(a=t.call(e[n],n,e[n]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(r(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):$.call(i,e)),i},inArray:function(e,t,r){return null==t?-1:B.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,a=e.length;r>i;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,r){for(var i,a=[],n=0,o=e.length,s=!r;o>n;n++)i=!t(e[n],n),i!==s&&a.push(e[n]);return a},map:function(e,t,i){var a,n=0,o=e.length,s=r(e),c=[];if(s)for(;o>n;n++)a=t(e[n],n,i),null!=a&&c.push(a);else for(n in e)a=t(e[n],n,i),null!=a&&c.push(a);return q.apply([],c)},guid:1,proxy:function(e,t){var r,i,a;return"string"==typeof t&&(r=e[t],t=e,e=r),Z.isFunction(e)?(i=j.call(arguments,2),a=function(){return e.apply(t||this,i.concat(j.call(arguments)))},a.guid=e.guid=e.guid||Z.guid++,a):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var ae=function(e){function t(e,t,r,i){var a,n,o,s,c,l,u,h,f,m;if((t?t.ownerDocument||t:H)!==L&&D(t),t=t||L,r=r||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return r;if(!i&&M){if(11!==s&&(a=ye.exec(e)))if(o=a[1]){if(9===s){if(n=t.getElementById(o),!n||!n.parentNode)return r;if(n.id===o)return r.push(n),r}else if(t.ownerDocument&&(n=t.ownerDocument.getElementById(o))&&F(t,n)&&n.id===o)return r.push(n),r}else{if(a[2])return X.apply(r,t.getElementsByTagName(e)),r;if((o=a[3])&&I.getElementsByClassName)return X.apply(r,t.getElementsByClassName(o)),r}if(I.qsa&&(!x||!x.test(e))){if(h=u=G,f=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=S(e),(u=t.getAttribute("id"))?h=u.replace(Ee,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=l.length;c--;)l[c]=h+p(l[c]);f=be.test(e)&&d(t.parentNode)||t,m=l.join(",")}if(m)try{return X.apply(r,f.querySelectorAll(m)),r}catch(e){}finally{u||t.removeAttribute("id")}}}return _(e.replace(ce,"$1"),t,r,i)}function r(){function e(r,i){return t.push(r+" ")>T.cacheLength&&delete e[t.shift()],e[r+" "]=i}var t=[];return e}function i(e){return e[G]=!0,e}function a(e){var t=L.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function n(e,t){for(var r=e.split("|"),i=e.length;i--;)T.attrHandle[r[i]]=t}function o(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return function(t){var r=t.nodeName.toLowerCase();return"input"===r&&t.type===e}}function c(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(r,i){for(var a,n=e([],r.length,t),o=n.length;o--;)r[a=n[o]]&&(r[a]=!(i[a]=r[a]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function p(e){for(var t=0,r=e.length,i="";r>t;t++)i+=e[t].value;return i}function h(e,t,r){var i=t.dir,a=r&&"parentNode"===i,n=Y++;return t.first?function(t,r,n){for(;t=t[i];)if(1===t.nodeType||a)return e(t,r,n)}:function(t,r,o){var s,c,l=[V,n];if(o){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,r,o))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(c=t[G]||(t[G]={}),(s=c[i])&&s[0]===V&&s[1]===n)return l[2]=s[2];if(c[i]=l,l[2]=e(t,r,o))return!0}}}function f(e){return e.length>1?function(t,r,i){for(var a=e.length;a--;)if(!e[a](t,r,i))return!1;return!0}:e[0]}function m(e,r,i){for(var a=0,n=r.length;n>a;a++)t(e,r[a],i);return i}function g(e,t,r,i,a){for(var n,o=[],s=0,c=e.length,l=null!=t;c>s;s++)(n=e[s])&&(!r||r(n,i,a))&&(o.push(n),l&&t.push(s));return o}function v(e,t,r,a,n,o){return a&&!a[G]&&(a=v(a)),n&&!n[G]&&(n=v(n,o)),i(function(i,o,s,c){var l,d,u,p=[],h=[],f=o.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,p,e,s,c),b=r?n||(i?e:f||a)?[]:o:y;if(r&&r(y,b,s,c),a)for(l=g(b,h),a(l,[],s,c),d=l.length;d--;)(u=l[d])&&(b[h[d]]=!(y[h[d]]=u));if(i){if(n||e){if(n){for(l=[],d=b.length;d--;)(u=b[d])&&l.push(y[d]=u);n(null,b=[],l,c)}for(d=b.length;d--;)(u=b[d])&&(l=n?ee(i,u):p[d])>-1&&(i[l]=!(o[l]=u))}}else b=g(b===o?b.splice(f,b.length):b),n?n(null,o,b,c):X.apply(o,b)})}function y(e){for(var t,r,i,a=e.length,n=T.relative[e[0].type],o=n||T.relative[" "],s=n?1:0,c=h(function(e){return e===t},o,!0),l=h(function(e){return ee(t,e)>-1},o,!0),d=[function(e,r,i){var a=!n&&(i||r!==O)||((t=r).nodeType?c(e,r,i):l(e,r,i));return t=null,a}];a>s;s++)if(r=T.relative[e[s].type])d=[h(f(d),r)];else{if(r=T.filter[e[s].type].apply(null,e[s].matches),r[G]){for(i=++s;a>i&&!T.relative[e[i].type];i++);return v(s>1&&f(d),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ce,"$1"),r,i>s&&y(e.slice(s,i)),a>i&&y(e=e.slice(i)),a>i&&p(e))}d.push(r)}return f(d)}function b(e,r){var a=r.length>0,n=e.length>0,o=function(i,o,s,c,l){var d,u,p,h=0,f="0",m=i&&[],v=[],y=O,b=i||n&&T.find.TAG("*",l),E=V+=null==y?1:Math.random()||.1,I=b.length;for(l&&(O=o!==L&&o);f!==I&&null!=(d=b[f]);f++){if(n&&d){for(u=0;p=e[u++];)if(p(d,o,s)){c.push(d);break}l&&(V=E)}a&&((d=!p&&d)&&h--,i&&m.push(d))}if(h+=f,a&&f!==h){for(u=0;p=r[u++];)p(m,v,o,s);if(i){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=Q.call(c));v=g(v)}X.apply(c,v),l&&!i&&v.length>0&&h+r.length>1&&t.uniqueSort(c)}return l&&(V=E,O=y),m};return a?i(o):o}var E,I,T,P,C,S,A,_,O,R,N,D,L,w,M,x,k,U,F,G="sizzle"+1*new Date,H=e.document,V=0,Y=0,j=r(),q=r(),$=r(),B=function(e,t){return e===t&&(N=!0),0},W=1<<31,K={}.hasOwnProperty,z=[],Q=z.pop,J=z.push,X=z.push,Z=z.slice,ee=function(e,t){for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=ie.replace("w","w#"),ne="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+re+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",se=new RegExp(re+"+","g"),ce=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),de=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),ue=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),pe=new RegExp(oe),he=new RegExp("^"+ae+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Ee=/'|\\/g,Ie=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Te=function(e,t,r){var i="0x"+t-65536;return i!==i||r?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Pe=function(){D()};try{X.apply(z=Z.call(H.childNodes),H.childNodes),z[H.childNodes.length].nodeType}catch(e){X={apply:z.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}I=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,r,i=e?e.ownerDocument||e:H;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,w=i.documentElement,r=i.defaultView,r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",Pe,!1):r.attachEvent&&r.attachEvent("onunload",Pe)),M=!C(i),I.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),I.getElementsByTagName=a(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),I.getElementsByClassName=ve.test(i.getElementsByClassName),I.getById=a(function(e){return w.appendChild(e).id=G,!i.getElementsByName||!i.getElementsByName(G).length}),I.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},T.filter.ID=function(e){var t=e.replace(Ie,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(Ie,Te);return function(e){var r="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),T.find.TAG=I.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):I.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],a=0,n=t.getElementsByTagName(e);if("*"===e){for(;r=n[a++];)1===r.nodeType&&i.push(r);return i}return n},T.find.CLASS=I.getElementsByClassName&&function(e,t){return M?t.getElementsByClassName(e):void 0},k=[],x=[],(I.qsa=ve.test(i.querySelectorAll))&&(a(function(e){w.appendChild(e).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&x.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||x.push("\\["+re+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+G+"-]").length||x.push("~="),e.querySelectorAll(":checked").length||x.push(":checked"),e.querySelectorAll("a#"+G+"+*").length||x.push(".#.+[+~]")}),a(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&x.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||x.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),x.push(",.*:")})),(I.matchesSelector=ve.test(U=w.matches||w.webkitMatchesSelector||w.mozMatchesSelector||w.oMatchesSelector||w.msMatchesSelector))&&a(function(e){I.disconnectedMatch=U.call(e,"div"),U.call(e,"[s!='']:x"),k.push("!=",oe)}),x=x.length&&new RegExp(x.join("|")),k=k.length&&new RegExp(k.join("|")),t=ve.test(w.compareDocumentPosition),F=t||ve.test(w.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=t?function(e,t){if(e===t)return N=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!I.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===H&&F(H,e)?-1:t===i||t.ownerDocument===H&&F(H,t)?1:R?ee(R,e)-ee(R,t):0:4&r?-1:1)}:function(e,t){if(e===t)return N=!0,0;var r,a=0,n=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!n||!s)return e===i?-1:t===i?1:n?-1:s?1:R?ee(R,e)-ee(R,t):0;if(n===s)return o(e,t);for(r=e;r=r.parentNode;)c.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;c[a]===l[a];)a++;return a?o(c[a],l[a]):c[a]===H?-1:l[a]===H?1:0},i):L},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==L&&D(e),r=r.replace(ue,"='$1']"),!(!I.matchesSelector||!M||k&&k.test(r)||x&&x.test(r)))try{var i=U.call(e,r);if(i||I.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(r,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&D(e);var r=T.attrHandle[t.toLowerCase()],i=r&&K.call(T.attrHandle,t.toLowerCase())?r(e,t,!M):void 0;return void 0!==i?i:I.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],i=0,a=0;if(N=!I.detectDuplicates,R=!I.sortStable&&e.slice(0),e.sort(B),N){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return R=null,e},P=t.getText=function(e){var t,r="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=P(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)r+=P(t);return r},T=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ie,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(Ie,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&pe.test(r)&&(t=S(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ie,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,i){return function(a){var n=t.attr(a,e);return null==n?"!="===r:!r||(n+="","="===r?n===i:"!="===r?n!==i:"^="===r?i&&0===n.indexOf(i):"*="===r?i&&n.indexOf(i)>-1:"$="===r?i&&n.slice(-i.length)===i:"~="===r?(" "+n.replace(se," ")+" ").indexOf(i)>-1:"|="===r&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,r,i,a){var n="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,r,c){var l,d,u,p,h,f,m=n!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(g){if(n){for(;m;){for(u=t;u=u[m];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(d=g[G]||(g[G]={}),l=d[e]||[],h=l[0]===V&&l[1],p=l[0]===V&&l[2],u=h&&g.childNodes[h];u=++h&&u&&u[m]||(p=h=0)||f.pop();)if(1===u.nodeType&&++p&&u===t){d[e]=[V,h,p];break}}else if(y&&(l=(t[G]||(t[G]={}))[e])&&l[0]===V)p=l[1];else for(;(u=++h&&u&&u[m]||(p=h=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++p||(y&&((u[G]||(u[G]={}))[e]=[V,p]),u!==t)););return p-=a,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,r){var a,n=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return n[G]?n(r):n.length>1?(a=[e,e,"",r],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=n(e,r),o=a.length;o--;)i=ee(e,a[o]),e[i]=!(t[i]=a[o])}):function(e){return n(e,0,a)}):n}},pseudos:{not:i(function(e){var t=[],r=[],a=A(e.replace(ce,"$1"));return a[G]?i(function(e,t,r,i){for(var n,o=a(e,null,i,[]),s=e.length;s--;)(n=o[s])&&(e[s]=!(t[s]=n))}):function(e,i,n){return t[0]=e,a(t,null,n,r),t[0]=null,!r.pop()}}),has:i(function(e){return function(r){return t(e,r).length>0}}),contains:i(function(e){return e=e.replace(Ie,Te),function(t){return(t.textContent||t.innerText||P(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ie,Te).toLowerCase(),function(t){var r;do if(r=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===w},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,r){return[0>r?r+t:r]}),even:l(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:l(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:l(function(e,t,r){for(var i=0>r?r+t:r;--i>=0;)e.push(i);return e}),gt:l(function(e,t,r){for(var i=0>r?r+t:r;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})T.pseudos[E]=c(E);return u.prototype=T.filters=T.pseudos,T.setFilters=new u,S=t.tokenize=function(e,r){var i,a,n,o,s,c,l,d=q[e+" "];if(d)return r?0:d.slice(0);for(s=e,c=[],l=T.preFilter;s;){(!i||(a=le.exec(s)))&&(a&&(s=s.slice(a[0].length)||s),c.push(n=[])),i=!1,(a=de.exec(s))&&(i=a.shift(),n.push({value:i,type:a[0].replace(ce," ")}),s=s.slice(i.length));for(o in T.filter)!(a=fe[o].exec(s))||l[o]&&!(a=l[o](a))||(i=a.shift(),n.push({value:i,type:o,matches:a}),s=s.slice(i.length));if(!i)break}return r?s.length:s?t.error(e):q(e,c).slice(0)},A=t.compile=function(e,t){var r,i=[],a=[],n=$[e+" "];if(!n){for(t||(t=S(e)),r=t.length;r--;)n=y(t[r]),n[G]?i.push(n):a.push(n);n=$(e,b(a,i)),n.selector=e}return n},_=t.select=function(e,t,r,i){var a,n,o,s,c,l="function"==typeof e&&e,u=!i&&S(e=l.selector||e);if(r=r||[],1===u.length){if(n=u[0]=u[0].slice(0),n.length>2&&"ID"===(o=n[0]).type&&I.getById&&9===t.nodeType&&M&&T.relative[n[1].type]){if(t=(T.find.ID(o.matches[0].replace(Ie,Te),t)||[])[0],!t)return r;l&&(t=t.parentNode),e=e.slice(n.shift().value.length)}for(a=fe.needsContext.test(e)?0:n.length;a--&&(o=n[a],!T.relative[s=o.type]);)if((c=T.find[s])&&(i=c(o.matches[0].replace(Ie,Te),be.test(n[0].type)&&d(t.parentNode)||t))){if(n.splice(a,1),e=i.length&&p(n),!e)return X.apply(r,i),r;break}}return(l||A(e,u))(i,t,!M,r,be.test(e)&&d(t.parentNode)||t),r},I.sortStable=G.split("").sort(B).join("")===G,I.detectDuplicates=!!N,D(),I.sortDetached=a(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||n("type|href|height|width",function(e,t,r){return r?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),I.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||n("value",function(e,t,r){return r||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||n(te,function(e,t,r){var i;return r?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=ae,Z.expr=ae.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ae.uniqueSort,Z.text=ae.getText,Z.isXMLDoc=ae.isXML,Z.contains=ae.contains;var ne=Z.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){
return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,r=this.length,i=[],a=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;r>t;t++)if(Z.contains(a[t],this))return!0}));for(t=0;r>t;t++)Z.find(e,a[t],i);return i=this.pushStack(r>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ne.test(e)?Z(e):e||[],!1).length}});var ce,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,de=Z.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||ce).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),oe.test(r[1])&&Z.isPlainObject(t))for(r in t)Z.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=J.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ce.ready?ce.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};de.prototype=Z.fn,ce=Z(J);var ue=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,r){for(var i=[],a=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Z(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),Z.fn.extend({has:function(e){var t=Z(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,a=this.length,n=[],o=ne.test(e)||"string"!=typeof e?Z(e,t||this.context):0;a>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&Z.find.matchesSelector(r,e))){n.push(r);break}return this.pushStack(n.length>1?Z.unique(n):n)},index:function(e){return e?"string"==typeof e?B.call(Z(e),this[0]):B.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,r){return Z.dir(e,"parentNode",r)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,r){return Z.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return Z.dir(e,"previousSibling",r)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(r,i){var a=Z.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(a=Z.filter(i,a)),this.length>1&&(pe[e]||Z.unique(a),ue.test(e)&&a.reverse()),this.pushStack(a)}});var he=/\S+/g,fe={};Z.Callbacks=function(e){e="string"==typeof e?fe[e]||n(e):Z.extend({},e);var t,r,i,a,o,s,c=[],l=!e.once&&[],d=function(n){for(t=e.memory&&n,r=!0,s=a||0,a=0,o=c.length,i=!0;c&&o>s;s++)if(c[s].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,c&&(l?l.length&&d(l.shift()):t?c=[]:u.disable())},u={add:function(){if(c){var r=c.length;!function t(r){Z.each(r,function(r,i){var a=Z.type(i);"function"===a?e.unique&&u.has(i)||c.push(i):i&&i.length&&"string"!==a&&t(i)})}(arguments),i?o=c.length:t&&(a=r,d(t))}return this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var r;(r=Z.inArray(t,c,r))>-1;)c.splice(r,1),i&&(o>=r&&o--,s>=r&&s--)}),this},has:function(e){return e?Z.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||u.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||r&&!l||(t=t||[],t=[e,t.slice?t.slice():t],i?l.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(r){Z.each(t,function(t,n){var o=Z.isFunction(e[t])&&e[t];a[n[1]](function(){var e=o&&o.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[n[0]+"With"](this===i?r.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},a={};return i.pipe=i.then,Z.each(t,function(e,n){var o=n[2],s=n[3];i[n[1]]=o.add,s&&o.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),a[n[0]]=function(){return a[n[0]+"With"](this===a?i:this,arguments),this},a[n[0]+"With"]=o.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,r,i,a=0,n=j.call(arguments),o=n.length,s=1!==o||e&&Z.isFunction(e.promise)?o:0,c=1===s?e:Z.Deferred(),l=function(e,r,i){return function(a){r[e]=this,i[e]=arguments.length>1?j.call(arguments):a,i===t?c.notifyWith(r,i):--s||c.resolveWith(r,i)}};if(o>1)for(t=new Array(o),r=new Array(o),i=new Array(o);o>a;a++)n[a]&&Z.isFunction(n[a].promise)?n[a].promise().done(l(a,i,n)).fail(c.reject).progress(l(a,r,t)):--s;return s||c.resolveWith(i,n),c.promise()}});var me;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(me.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return me||(me=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),me.promise(t)},Z.ready.promise();var ge=Z.access=function(e,t,r,i,a,n,o){var s=0,c=e.length,l=null==r;if("object"===Z.type(r)){a=!0;for(s in r)Z.access(e,t,s,r[s],!0,n,o)}else if(void 0!==i&&(a=!0,Z.isFunction(i)||(o=!0),l&&(o?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(Z(e),r)})),t))for(;c>s;s++)t(e[s],r,o?i:i.call(e[s],s,t(e[s],r)));return a?e:l?t.call(e):c?t(e[0],r):n};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=s.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,Z.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,a=this.key(e),n=this.cache[a];if("string"==typeof t)n[t]=r;else if(Z.isEmptyObject(n))Z.extend(this.cache[a],t);else for(i in t)n[i]=t[i];return n},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,a,n=this.key(e),o=this.cache[n];if(void 0===t)this.cache[n]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(a=Z.camelCase(t),t in o?i=[t,a]:(i=a,i=i in o?[i]:i.match(he)||[])),r=i.length;for(;r--;)delete o[i[r]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new s,ye=new s,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,r){return ye.access(e,t,r)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,r){return ve.access(e,t,r)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var r,i,a,n=this[0],o=n&&n.attributes;if(void 0===e){if(this.length&&(a=ye.get(n),1===n.nodeType&&!ve.get(n,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&(i=o[r].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),c(n,i,a[i])));ve.set(n,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ge(this,function(t){var r,i=Z.camelCase(e);if(n&&void 0===t){if(r=ye.get(n,e),void 0!==r)return r;if(r=ye.get(n,i),void 0!==r)return r;if(r=c(n,i,void 0),void 0!==r)return r}else this.each(function(){var r=ye.get(this,i);ye.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),r&&(!i||Z.isArray(r)?i=ve.access(e,t,Z.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=Z.queue(e,t),i=r.length,a=r.shift(),n=Z._queueHooks(e,t),o=function(){Z.dequeue(e,t)};"inprogress"===a&&(a=r.shift(),i--),a&&("fx"===t&&r.unshift("inprogress"),delete n.stop,a.call(e,o,n)),!i&&n&&n.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ve.get(e,r)||ve.access(e,r,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",r])})})}}),Z.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?Z.queue(this[0],e):void 0===t?this:this.each(function(){var r=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,a=Z.Deferred(),n=this,o=this.length,s=function(){--i||a.resolveWith(n,[n])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)r=ve.get(n[o],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(s));return s(),a.promise(t)}});var Ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Pe=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ce=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),r=J.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";Q.focusinBubbles="onfocusin"in e;var Ae=/^key/,_e=/^(?:mouse|pointer|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,Re=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,r,i,a){var n,o,s,c,l,d,u,p,h,f,m,g=ve.get(e);if(g)for(r.handler&&(n=r,r=n.handler,a=n.selector),r.guid||(r.guid=Z.guid++),(c=g.events)||(c=g.events={}),(o=g.handle)||(o=g.handle=function(t){return typeof Z!==Se&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],l=t.length;l--;)s=Re.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h&&(u=Z.event.special[h]||{},h=(a?u.delegateType:u.bindType)||h,u=Z.event.special[h]||{},d=Z.extend({type:h,origType:m,data:i,handler:r,guid:r.guid,selector:a,needsContext:a&&Z.expr.match.needsContext.test(a),namespace:f.join(".")},n),(p=c[h])||(p=c[h]=[],p.delegateCount=0,u.setup&&u.setup.call(e,i,f,o)!==!1||e.addEventListener&&e.addEventListener(h,o,!1)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?p.splice(p.delegateCount++,0,d):p.push(d),Z.event.global[h]=!0)},remove:function(e,t,r,i,a){var n,o,s,c,l,d,u,p,h,f,m,g=ve.hasData(e)&&ve.get(e);if(g&&(c=g.events)){for(t=(t||"").match(he)||[""],l=t.length;l--;)if(s=Re.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h){for(u=Z.event.special[h]||{},h=(i?u.delegateType:u.bindType)||h,p=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=n=p.length;n--;)d=p[n],!a&&m!==d.origType||r&&r.guid!==d.guid||s&&!s.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(p.splice(n,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(e,d));o&&!p.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||Z.removeEvent(e,h,g.handle),delete c[h])}else for(h in c)Z.event.remove(e,h+t[l],r,i,!0);Z.isEmptyObject(c)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,r,i,a){var n,o,s,c,l,d,u,p=[i||J],h=z.call(t,"type")?t.type:t,f=z.call(t,"namespace")?t.namespace.split("."):[];if(o=s=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Oe.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),l=h.indexOf(":")<0&&"on"+h,t=t[Z.expando]?t:new Z.Event(h,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),r=null==r?[t]:Z.makeArray(r,[t]),u=Z.event.special[h]||{},a||!u.trigger||u.trigger.apply(i,r)!==!1)){if(!a&&!u.noBubble&&!Z.isWindow(i)){for(c=u.delegateType||h,Oe.test(c+h)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(i.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||e)}for(n=0;(o=p[n++])&&!t.isPropagationStopped();)t.type=n>1?c:u.bindType||h,d=(ve.get(o,"events")||{})[t.type]&&ve.get(o,"handle"),d&&d.apply(o,r),d=l&&o[l],d&&d.apply&&Z.acceptData(o)&&(t.result=d.apply(o,r),t.result===!1&&t.preventDefault());return t.type=h,a||t.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),r)!==!1||!Z.acceptData(i)||l&&Z.isFunction(i[h])&&!Z.isWindow(i)&&(s=i[l],s&&(i[l]=null),Z.event.triggered=h,i[h](),Z.event.triggered=void 0,s&&(i[l]=s)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,r,i,a,n,o=[],s=j.call(arguments),c=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(o=Z.event.handlers.call(this,e,c),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(n=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((Z.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,a,n,o=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(i=[],r=0;s>r;r++)n=t[r],a=n.selector+" ",void 0===i[a]&&(i[a]=n.needsContext?Z(a,this).index(c)>=0:Z.find(a,this,null,[c]).length),i[a]&&i.push(n);i.length&&o.push({elem:c,handlers:i})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,a,n=t.button;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||J,i=r.documentElement,a=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),e.which||void 0===n||(e.which=1&n?1:2&n?3:4&n?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,r,i,a=e.type,n=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=_e.test(a)?this.mouseHooks:Ae.test(a)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new Z.Event(n),t=i.length;t--;)r=i[t],e[r]=n[r];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,n):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var a=Z.extend(new Z.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(a,null,t):Z.event.dispatch.call(t,a),a.isDefaultPrevented()&&r.preventDefault()}},Z.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:d):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,a=e.relatedTarget,n=e.handleObj;return(!a||a!==i&&!Z.contains(i,a))&&(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=ve.access(i,t);a||i.addEventListener(e,r,!0),ve.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=ve.access(i,t)-1;a?ve.access(i,t,a):(i.removeEventListener(e,r,!0),ve.remove(i,t))}}}),Z.fn.extend({on:function(e,t,r,i,a){var n,o;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(o in e)this.on(o,t,r,e[o],a);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=d;else if(!i)return this;return 1===a&&(n=i,i=function(e){return Z().off(e),n.apply(this,arguments)},i.guid=n.guid||(n.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,r,t)})},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=d),this.each(function(){Z.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?Z.event.trigger(e,t,r,!0):void 0}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,Le=/<|&#?\w+;/,we=/<(?:script|style|link)/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,xe=/^$|\/(?:java|ecma)script/i,ke=/^true\/(.*)/,Ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Z.extend({clone:function(e,t,r){var i,a,n,o,s=e.cloneNode(!0),c=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(o=v(s),n=v(e),i=0,a=n.length;a>i;i++)y(n[i],o[i]);if(t)if(r)for(n=n||v(e),o=o||v(s),i=0,a=n.length;a>i;i++)g(n[i],o[i]);else g(e,s);return o=v(s,"script"),o.length>0&&m(o,!c&&v(e,"script")),s},buildFragment:function(e,t,r,i){for(var a,n,o,s,c,l,d=t.createDocumentFragment(),u=[],p=0,h=e.length;h>p;p++)if(a=e[p],a||0===a)if("object"===Z.type(a))Z.merge(u,a.nodeType?[a]:a);else if(Le.test(a)){for(n=n||d.appendChild(t.createElement("div")),o=(De.exec(a)||["",""])[1].toLowerCase(),s=Fe[o]||Fe._default,n.innerHTML=s[1]+a.replace(Ne,"<$1></$2>")+s[2],l=s[0];l--;)n=n.lastChild;Z.merge(u,n.childNodes),n=d.firstChild,n.textContent=""}else u.push(t.createTextNode(a));for(d.textContent="",p=0;a=u[p++];)if((!i||-1===Z.inArray(a,i))&&(c=Z.contains(a.ownerDocument,a),n=v(d.appendChild(a),"script"),c&&m(n),r))for(l=0;a=n[l++];)xe.test(a.type||"")&&r.push(a);return d},cleanData:function(e){for(var t,r,i,a,n=Z.event.special,o=0;void 0!==(r=e[o]);o++){if(Z.acceptData(r)&&(a=r[ve.expando],a&&(t=ve.cache[a]))){if(t.events)for(i in t.events)n[i]?Z.event.remove(r,i):Z.removeEvent(r,i,t.handle);ve.cache[a]&&delete ve.cache[a]}delete ye.cache[r[ye.expando]]}}}),Z.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?Z.filter(e,this):this,a=0;null!=(r=i[a]);a++)t||1!==r.nodeType||Z.cleanData(v(r)),r.parentNode&&(t&&Z.contains(r.ownerDocument,r)&&m(v(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!Fe[(De.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ne,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var r,i,a,n,o,s,c=0,l=this.length,d=this,u=l-1,p=e[0],m=Z.isFunction(p);if(m||l>1&&"string"==typeof p&&!Q.checkClone&&Me.test(p))return this.each(function(r){var i=d.eq(r);m&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t)});if(l&&(r=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(a=Z.map(v(r,"script"),h),n=a.length;l>c;c++)o=r,c!==u&&(o=Z.clone(o,!0,!0),n&&Z.merge(a,v(o,"script"))),t.call(this[c],o,c);if(n)for(s=a[a.length-1].ownerDocument,Z.map(a,f),c=0;n>c;c++)o=a[c],xe.test(o.type||"")&&!ve.access(o,"globalEval")&&Z.contains(s,o)&&(o.src?Z._evalUrl&&Z._evalUrl(o.src):Z.globalEval(o.textContent.replace(Ue,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var r,i=[],a=Z(e),n=a.length-1,o=0;n>=o;o++)r=o===n?this:this.clone(!0),Z(a[o])[t](r),$.apply(i,r.get());return this.pushStack(i)}});var Ge,He={},Ve=/^margin/,Ye=new RegExp("^("+Ie+")(?!px)[a-z%]+$","i"),je=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",a.appendChild(n);var t=e.getComputedStyle(o,null);r="1%"!==t.top,i="4px"===t.width,a.removeChild(n)}var r,i,a=J.documentElement,n=J.createElement("div"),o=J.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===o.style.backgroundClip,n.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",n.appendChild(o),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),r},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,r=o.appendChild(J.createElement("div"));return r.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",o.style.width="1px",a.appendChild(n),t=!parseFloat(e.getComputedStyle(r,null).marginRight),a.removeChild(n),o.removeChild(r),t}}))}(),Z.swap=function(e,t,r,i){var a,n,o={};for(n in t)o[n]=e.style[n],e.style[n]=t[n];a=r.apply(e,i||[]);for(n in t)e.style[n]=o[n];return a};var qe=/^(none|table(?!-c[ea]).+)/,$e=new RegExp("^("+Ie+")(.*)$","i"),Be=new RegExp("^([+-])=("+Ie+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},ze=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=I(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,n,o,s=Z.camelCase(t),c=e.style;return t=Z.cssProps[s]||(Z.cssProps[s]=P(c,s)),o=Z.cssHooks[t]||Z.cssHooks[s],void 0===r?o&&"get"in o&&void 0!==(a=o.get(e,!1,i))?a:c[t]:(n=typeof r,"string"===n&&(a=Be.exec(r))&&(r=(a[1]+1)*a[2]+parseFloat(Z.css(e,t)),n="number"),void(null!=r&&r===r&&("number"!==n||Z.cssNumber[s]||(r+="px"),Q.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(c[t]=r))))}},css:function(e,t,r,i){var a,n,o,s=Z.camelCase(t);return t=Z.cssProps[s]||(Z.cssProps[s]=P(e.style,s)),o=Z.cssHooks[t]||Z.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,r)),void 0===a&&(a=I(e,t,i)),"normal"===a&&t in Ke&&(a=Ke[t]),""===r||r?(n=parseFloat(a),r===!0||Z.isNumeric(n)?n||0:a):a}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,r,i){return r?qe.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,We,function(){return A(e,t,i)}):A(e,t,i):void 0},set:function(e,r,i){var a=i&&je(e);return C(e,r,i?S(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,a),a):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},I,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(r){for(var i=0,a={},n="string"==typeof r?r.split(" "):[r];4>i;i++)a[e+Te[i]+t]=n[i]||n[i-2]||n[0];return a}},Ve.test(e)||(Z.cssHooks[e+t].set=C)}),Z.fn.extend({css:function(e,t){return ge(this,function(e,t,r){var i,a,n={},o=0;if(Z.isArray(t)){for(i=je(e),a=t.length;a>o;o++)n[t[o]]=Z.css(e,t[o],!1,i);return n}return void 0!==r?Z.style(e,t,r):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Pe(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=O,O.prototype={constructor:O,init:function(e,t,r,i,a,n){this.elem=e,this.prop=r,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=n||(Z.cssNumber[r]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,r=O.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=O.prototype.init,Z.fx.step={};var Qe,Je,Xe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+Ie+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[L],rt={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),a=Ze.exec(t),n=a&&a[3]||(Z.cssNumber[e]?"":"px"),o=(Z.cssNumber[e]||"px"!==n&&+i)&&Ze.exec(Z.css(r.elem,e)),s=1,c=20;if(o&&o[3]!==n){n=n||o[3],a=a||[],o=+i||1;do s=s||".5",o/=s,Z.style(r.elem,e,o+n);while(s!==(s=r.cur()/i)&&1!==s&&--c)}return a&&(o=r.start=+o||+i||0,r.unit=n,r.end=a[1]?o+(a[1]+1)*a[2]:+a[2]),r}]};Z.Animation=Z.extend(M,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,a=e.length;a>i;i++)r=e[i],rt[r]=rt[r]||[],rt[r].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,r){var i=e&&"object"==typeof e?Z.extend({},e):{complete:r||!r&&t||Z.isFunction(e)&&e,duration:e,easing:r&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,r,i){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var a=Z.isEmptyObject(e),n=Z.speed(t,r,i),o=function(){var t=M(this,Z.extend({},e),n);(a||ve.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||n.queue===!1?this.each(o):this.queue(n.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",n=Z.timers,o=ve.get(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&et.test(a)&&i(o[a]);for(a=n.length;a--;)n[a].elem!==this||null!=e&&n[a].queue!==e||(n[a].anim.stop(r),t=!1,n.splice(a,1));(t||!r)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=ve.get(this),i=r[e+"queue"],a=r[e+"queueHooks"],n=Z.timers,o=i?i.length:0;
for(r.finish=!0,Z.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=n.length;t--;)n[t].elem===this&&n[t].queue===e&&(n[t].anim.stop(!0),n.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var r=Z.fn[t];Z.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(N(t,!0),e,i,a)}}),Z.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,r=Z.timers;for(Qe=Z.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||Z.fx.stop(),Qe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),r=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=r.selected,t.disabled=!0,Q.optDisabled=!r.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var it,at,nt=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return ge(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,r){var i,a,n=e.nodeType;if(e&&3!==n&&8!==n&&2!==n)return typeof e.getAttribute===Se?Z.prop(e,t,r):(1===n&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?at:it)),void 0===r?i&&"get"in i&&null!==(a=i.get(e,t))?a:(a=Z.find.attr(e,t),null==a?void 0:a):null!==r?i&&"set"in i&&void 0!==(a=i.set(e,r,t))?a:(e.setAttribute(t,r+""),r):void Z.removeAttr(e,t))},removeAttr:function(e,t){var r,i,a=0,n=t&&t.match(he);if(n&&1===e.nodeType)for(;r=n[a++];)i=Z.propFix[r]||r,Z.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),at={set:function(e,t,r){return t===!1?Z.removeAttr(e,r):e.setAttribute(r,r),r}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var r=nt[t]||Z.find.attr;nt[t]=function(e,t,i){var a,n;return i||(n=nt[t],nt[t]=a,a=null!=r(e,t,i)?t.toLowerCase():null,nt[t]=n),a}});var ot=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return ge(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,a,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return n=1!==o||!Z.isXMLDoc(e),n&&(t=Z.propFix[t]||t,a=Z.propHooks[t]),void 0!==r?a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:e[t]=r:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ot.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,r,i,a,n,o,s="string"==typeof e&&e,c=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>c;c++)if(r=this[c],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(st," "):" ")){for(n=0;a=t[n++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o=Z.trim(i),r.className!==o&&(r.className=o)}return this},removeClass:function(e){var t,r,i,a,n,o,s=0===arguments.length||"string"==typeof e&&e,c=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>c;c++)if(r=this[c],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(st," "):"")){for(n=0;a=t[n++];)for(;i.indexOf(" "+a+" ")>=0;)i=i.replace(" "+a+" "," ");o=e?Z.trim(i):"",r.className!==o&&(r.className=o)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(r){Z(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r)for(var t,i=0,a=Z(this),n=e.match(he)||[];t=n[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(r===Se||"boolean"===r)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;i>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var ct=/\r/g;Z.fn.extend({val:function(e){var t,r,i,a=this[0];return arguments.length?(i=Z.isFunction(e),this.each(function(r){var a;1===this.nodeType&&(a=i?e.call(this,r,Z(this).val()):e,null==a?a="":"number"==typeof a?a+="":Z.isArray(a)&&(a=Z.map(a,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=Z.valHooks[a.type]||Z.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(a,"value"))?r:(r=a.value,"string"==typeof r?r.replace(ct,""):null==r?"":r)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,r,i=e.options,a=e.selectedIndex,n="select-one"===e.type||0>a,o=n?null:[],s=n?a+1:i.length,c=0>a?s:n?a:0;s>c;c++)if(r=i[c],!(!r.selected&&c!==a||(Q.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&Z.nodeName(r.parentNode,"optgroup"))){if(t=Z(r).val(),n)return t;o.push(t)}return o},set:function(e,t){for(var r,i,a=e.options,n=Z.makeArray(t),o=a.length;o--;)i=a[o],(i.selected=Z.inArray(i.value,n)>=0)&&(r=!0);return r||(e.selectedIndex=-1),n}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var lt=Z.now(),dt=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var ut=/#.*$/,pt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},Et="*/".concat("*"),It=e.location.href,Tt=vt.exec(It.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It,type:"GET",isLocal:ft.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?U(U(e,Z.ajaxSettings),t):U(Z.ajaxSettings,e)},ajaxPrefilter:x(yt),ajaxTransport:x(bt),ajax:function(e,t){function r(e,t,r,o){var c,d,v,y,E,T=t;2!==b&&(b=2,s&&clearTimeout(s),i=void 0,n=o||"",I.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(y=F(u,I,r)),y=G(u,y,I,c),c?(u.ifModified&&(E=I.getResponseHeader("Last-Modified"),E&&(Z.lastModified[a]=E),E=I.getResponseHeader("etag"),E&&(Z.etag[a]=E)),204===e||"HEAD"===u.type?T="nocontent":304===e?T="notmodified":(T=y.state,d=y.data,v=y.error,c=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),I.status=e,I.statusText=(t||T)+"",c?f.resolveWith(p,[d,T,I]):f.rejectWith(p,[I,T,v]),I.statusCode(g),g=void 0,l&&h.trigger(c?"ajaxSuccess":"ajaxError",[I,u,c?d:v]),m.fireWith(p,[I,T]),l&&(h.trigger("ajaxComplete",[I,u]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,a,n,o,s,c,l,d,u=Z.ajaxSetup({},t),p=u.context||u,h=u.context&&(p.nodeType||p.jquery)?Z(p):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=u.statusCode||{},v={},y={},b=0,E="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=ht.exec(n);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?n:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return b||(e=y[r]=y[r]||e,v[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else I.always(e[I.status]);return this},abort:function(e){var t=e||E;return i&&i.abort(t),r(0,t),this}};if(f.promise(I).complete=m.add,I.success=I.done,I.error=I.fail,u.url=((e||u.url||It)+"").replace(ut,"").replace(gt,Tt[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=Z.trim(u.dataType||"*").toLowerCase().match(he)||[""],null==u.crossDomain&&(c=vt.exec(u.url.toLowerCase()),u.crossDomain=!(!c||c[1]===Tt[1]&&c[2]===Tt[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Z.param(u.data,u.traditional)),k(yt,u,t,I),2===b)return I;l=Z.event&&u.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!mt.test(u.type),a=u.url,u.hasContent||(u.data&&(a=u.url+=(dt.test(a)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=pt.test(a)?a.replace(pt,"$1_="+lt++):a+(dt.test(a)?"&":"?")+"_="+lt++)),u.ifModified&&(Z.lastModified[a]&&I.setRequestHeader("If-Modified-Since",Z.lastModified[a]),Z.etag[a]&&I.setRequestHeader("If-None-Match",Z.etag[a])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&I.setRequestHeader("Content-Type",u.contentType),I.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Et+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)I.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(u.beforeSend.call(p,I,u)===!1||2===b))return I.abort();E="abort";for(d in{success:1,error:1,complete:1})I[d](u[d]);if(i=k(bt,u,t,I)){I.readyState=1,l&&h.trigger("ajaxSend",[I,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){I.abort("timeout")},u.timeout));try{b=1,i.send(v,r)}catch(e){if(!(2>b))throw e;r(-1,e)}}else r(-1,"No Transport");return I},getJSON:function(e,t,r){return Z.get(e,t,r,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,r,i,a){return Z.isFunction(r)&&(a=a||i,i=r,r=void 0),Z.ajax({url:e,type:t,dataType:a,data:r,success:i})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(r){Z(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Pt=/%20/g,Ct=/\[\]$/,St=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var r,i=[],a=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){a(this.name,this.value)});else for(r in e)H(r,e[r],t,a);return i.join("&").replace(Pt,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&_t.test(this.nodeName)&&!At.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var r=Z(this).val();return null==r?null:Z.isArray(r)?Z.map(r,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:r.replace(St,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ot=0,Rt={},Nt={0:200,1223:204},Dt=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Rt)Rt[e]()}),Q.cors=!!Dt&&"withCredentials"in Dt,Q.ajax=Dt=!!Dt,Z.ajaxTransport(function(e){var t;return Q.cors||Dt&&!e.crossDomain?{send:function(r,i){var a,n=e.xhr(),o=++Ot;if(n.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)n[a]=e.xhrFields[a];e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)n.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(delete Rt[o],t=n.onload=n.onerror=null,"abort"===e?n.abort():"error"===e?i(n.status,n.statusText):i(Nt[n.status]||n.status,n.statusText,"string"==typeof n.responseText?{text:n.responseText}:void 0,n.getAllResponseHeaders()))}},n.onload=t(),n.onerror=t("error"),t=Rt[o]=t("abort");try{n.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,a){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&a("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Lt=[],wt=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,r,i){var a,n,o,s=t.jsonp!==!1&&(wt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&wt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(wt,"$1"+a):t.jsonp!==!1&&(t.url+=(dt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||Z.error(a+" was not called"),o[0]},t.dataTypes[0]="json",n=e[a],e[a]=function(){o=arguments},i.always(function(){e[a]=n,t[a]&&(t.jsonpCallback=r.jsonpCallback,Lt.push(a)),o&&Z.isFunction(n)&&n(o[0]),o=n=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||J;var i=oe.exec(e),a=!r&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,a),a&&a.length&&Z(a).remove(),Z.merge([],i.childNodes))};var Mt=Z.fn.load;Z.fn.load=function(e,t,r){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var i,a,n,o=this,s=e.indexOf(" ");return s>=0&&(i=Z.trim(e.slice(s)),e=e.slice(0,s)),Z.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&Z.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){n=arguments,o.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){o.each(r,n||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var xt=e.document.documentElement;Z.offset={setOffset:function(e,t,r){var i,a,n,o,s,c,l,d=Z.css(e,"position"),u=Z(e),p={};"static"===d&&(e.style.position="relative"),s=u.offset(),n=Z.css(e,"top"),c=Z.css(e,"left"),l=("absolute"===d||"fixed"===d)&&(n+c).indexOf("auto")>-1,l?(i=u.position(),o=i.top,a=i.left):(o=parseFloat(n)||0,a=parseFloat(c)||0),Z.isFunction(t)&&(t=t.call(e,r,s)),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):u.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,r,i=this[0],a={top:0,left:0},n=i&&i.ownerDocument;return n?(t=n.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==Se&&(a=i.getBoundingClientRect()),r=V(n),{top:a.top+r.pageYOffset-t.clientTop,left:a.left+r.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===Z.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(r,"marginTop",!0),left:t.left-i.left-Z.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||xt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||xt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var i="pageYOffset"===r;Z.fn[t]=function(a){return ge(this,function(t,a,n){var o=V(t);return void 0===n?o?o[r]:t[a]:void(o?o.scrollTo(i?e.pageXOffset:n,i?n:e.pageYOffset):t[a]=n)},t,a,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,r){return r?(r=I(e,t),Ye.test(r)?Z(e).position()[t]+"px":r):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){Z.fn[i]=function(i,a){var n=arguments.length&&(r||"boolean"!=typeof i),o=r||(i===!0||a===!0?"margin":"border");return ge(this,function(t,r,i){var a;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?Z.css(t,r,o):Z.style(t,r,i,o)},t,n?i:void 0,n,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var kt=e.jQuery,Ut=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Ut),t&&e.jQuery===Z&&(e.jQuery=kt),Z},typeof t===Se&&(e.jQuery=e.$=Z),Z}),define("spinner",["knockout","imagesloaded"],function(e,t){"use strict";function r(){var e=this;e.spinnerId="cc-spinner",e.spinnerContainer="cc-spinner",e.spinnerCSS="cc-spinner-css",e.spinnerTimeOutId=null,e.create=function(t){return e.time=(new Date).getTime(),e.parent=t.parent,e.selector=t.selector?t.selector:t.parent,e.centerOn=t.centerOn,e.posTop=t.posTop?t.posTop:"50%",e.posLeft=t.posLeft?t.posLeft:"44%",e.loadingText=t.loadingText?t.loadingText:"Loading...",e.processingText=t.processingText,e.processingPosTop=t.processingPosTop?t.processingPosTop:"5%",e.textWidth=t.textWidth?t.textWidth:"100%",!!e.parent&&("body"===e.parent&&(e.centerOn&&0!==$(e.centerOn).length?(e.posTop=$(e.centerOn).height()/2-27+$(e.centerOn).position().top+"px",e.processingPosTop=$(e.centerOn).height()/2-54+$(e.centerOn).position().top+"px",e.posLeft=$(e.centerOn).width()/2-27+$(e.centerOn).position().left+"px"):(e.posTop=$(window).height()/2-27+"px",e.processingPosTop=$(window).height()/2-54+"px",e.posLeft=$(window).width()/2-27+"px")),void(0===$(e.selector).find("."+e.spinnerContainer).not(".cc-spinner-exclude").length&&(e.buildCSS(e.selector,e.posTop,e.posLeft),t.createWithTimeout&&e.setDestroyTimeout(t.waitTime,t.callBackFn,t.context))))},e.buildCSS=function(t,r,i){var a,n;a=$("<div />").attr({id:e.spinnerId,class:e.spinnerContainer}),n=$("<div />").attr({class:e.spinnerCSS,style:"top:"+r+";left:"+i});for(var o=1;o<13;o++)$(n).append($("<div />").attr({class:e.spinnerCSS+"-"+o}));e.processingText?$(a).prepend($("<div/>").css("padding-top",e.processingPosTop).append($('<span class="center-block"/>').css("width",e.textWidth).text(e.processingText))):$(n).prepend($('<span class="ie-show">').text(e.loadingText)),$(a).append(n),"body"===t?$(t).prepend(a):$(t).append(a)},e.loadCheck=function(t,r){var i=e.parent,a=e.selector;r&&(i=r.parent?r.parent:r.parent,a=r.selector?r.selector:i),(t||0==t)&&(0===$(a).find("."+e.spinnerContainer).length&&e.buildCSS(a,e.posTop,e.posLeft),$(i+" img")?$(i+" img").imagesLoaded(function(){0!==$(a).find("."+e.spinnerContainer).not(".cc-spinner-exclude").length&&e.destroy(t,i,a)}):e.destroy(t,i,a))},e.destroy=function(t,r,i){var a,n,i=i?i:e.parent,r=r?r:e.parent;e.spinnerContainer;a=e.time+250-(new Date).getTime(),$(r).children().length===t?a>0?n=setTimeout(e.destroyWithoutDelay,a):e.destroyWithoutDelay(i):t&&null!==t?setTimeout(e.destroy,1):a>0?n=setTimeout(e.destroyWithoutDelay(i),a):e.destroyWithoutDelay(i)},e.destroyWithoutDelay=function(t){var r=t?t:e.selector,i=e.spinnerContainer;$(r).find("."+i).remove()},e.createWithTimeout=function(t,r,i,a){t.waitTime=r,t.callBackFn=i,t.context=a,t.createWithTimeout=!0,e.create(t)},e.destroyAndClearTimeout=function(t,r){e.destroyWithoutDelay(),null!=e.spinnerTimeOutId&&clearTimeout(e.spinnerTimeOutId),null!=t&&t.call(r)},e.destroyAndClearCreateTimeout=function(t){e.destroyWithoutDelay(t),null!=e.spinnerTimeOutId&&clearTimeout(e.spinnerTimeOutId)},e.setDestroyTimeout=function(t,r,i){e.spinnerTimeOutId=setTimeout(function(){e.destroyWithoutDelay(),null!=r&&r.call(i)},t)},e.createAndReturnWithTimeout=function(t,r,i,a){return e.create(t),e.setDestroyTimeout(r,i,a),e.spinnerTimeOutId},e.destroyAndClearTimeoutWithId=function(t,r,i,a){e.destroyWithoutDelay(t),null!=r&&clearTimeout(r),null!=i&&i.call(a)}}return new r}),define("pubsubImpl",["jquery"],function(){"use strict";function e(){this.topics={}}return e.prototype.topic=function(e){var t,r=e&&this.topics[e],i="unique";return r||(/\.memory/.test(e)&&(i+=" memory"),t=$.Callbacks(i),window.pubsubevents=t,r={publish:t.fire,publishWith:t.fireWith,subscribe:t.add,unsubscribe:t.remove},e&&(this.topics[e]=r)),r},e}),define("pubsub",["pubsubImpl","jquery"],function(e){"use strict";var t={REGISTER_SUBMIT:"register.submit",REGISTER_SUCCESS:"register.success",REGISTER_FAILURE:"register.failure",CART_ADD:"cart.add",CART_REMOVE:"cart.remove",CART_UPDATE_QUANTITY:"cart.updatequantity",CART_READY:"cart.ready",CART_UPDATED:"cart.updated",CART_UPDATED_PENDING_PAYMENT:"cart.updated.pendingpayment",CART_ADD_SUCCESS:"cart.add.success",CART_UPDATE_SUCCESS:"cart.update.success",CART_PRICE_COMPLETE:"cart.price.complete",CART_EDIT_ADD_ON:"cart.edit.add.on",CART_SAVE_ADD_ON:"cart.save.add.on",CART_DELETE_ADD_ON:"cart.delete.add.on",CART_EDIT_ADD_ONS_AT_CART:"cart.edit.add.ons.at.cart",CART_SAVE_ADD_ONS_AT_CART:"cart.save.add.ons.at.cart",REFRESH_USER_CART:"cart.refresh",REMOVE_INVALID_ITEMS:"cart.remove.invalid.items",CART_REMOVE_SUCCESS:"cart.remove.success",CART_UPDATE_QUANTITY_SUCCESS:"cart.updatequantity.success",MINI_CART_SHOW:"mini.cart.show",MINI_CART_HIDE:"mini.cart.hide",USER_LOAD_CART:"user.cart.load",CART_ADD_SUCCESS_CPQ:"cart.add.success.cpq",CART_CHILD_ITEM_SELECTED:"cart.child.item.selected",CART_DETAILS_CHILD_ITEM_SELECTED:"cart.details.child.item.selected",CART_PRICE_SUCCESS:"cart.price.success",PAGE_VIEW_CHANGED:"page.view.changed",PAGE_CONTEXT_CHANGED:"page.context.changed",PAGE_CHANGED:"page.changed.memory",PAGE_READY:"page.ready.memory",PAGE_METADATA_CHANGED:"page.metadata.changed",PAGE_LAYOUT_LOADED:"page.layout.loaded.memory",PAGE_LAYOUT_SERVER_ERROR:"page.layout.server.error",PAGE_LAYOUT_UPDATED:"page.layout.updated.memory",PAGE_PARAMETERS_CHANGED:"page.parameters.changed",PAGE_PARAMETERS:"page.parameters.memory",PAGE_PAGINATION_CHANGE:"page.pagination.change.memory",PAGE_PAGINATION_CALCULATED:"page.pagination.calculated.memory",RECORD_PAGINATION_PAGE_CHANGE:"record.pagination.page.changed",UPDATE_HASH_CHANGES:"update.hash.changes.memory",HISTORY_PUSH_STATE:"history.push.state.memory",REGION_METADATA_CHANGED:"region.metadata.changed.memory",AUTH_LOGIN_SUBMIT:"auth.login.submit",AUTH_LOGIN_SUCCESS:"auth.login.success",AUTH_LOGIN_FAILURE:"auth.login.failure",AUTH_LOGOUT_SUBMIT:"auth.logout.submit",AUTH_LOGOUT_SUCCESS:"auth.logout.success",AUTH_LOGOUT_FAILURE:"auth.logout.failure",AUTH_REQUEST_FAILURE:"auth.request.failure",USER_CREATION_FAILURE:"user.creation.failure.memory",USER_LOGIN_SUCCESSFUL:"user.login.successful",USER_LOGIN_FAILURE:"user.login.failure",USER_LOGOUT_SUCCESSFUL:"user.logout.successful",USER_LOGOUT_FAILURE:"user.logout.failure",USER_REGISTRATION_SUBMIT:"user.registration.submit",USER_LOGOUT_SUBMIT:"user.logout.submit",USER_LOGIN_SUBMIT:"user.login.submit",USER_LOGIN_CANCEL:"user.login.cancel",USER_LOAD_SHIPPING:"user.load.shipping",USER_PROFILE_LOADED:"user.profile.loaded",USER_PROFILE_UPDATE_SUCCESSFUL:"user.profile.update.successful.memory",USER_PROFILE_PASSWORD_UPDATE_SUCCESSFUL:"user.profile.pwd.update.successful",USER_PROFILE_PASSWORD_UPDATE_FAILURE:"user.profile.pwd.update.failure",USER_PROFILE_UPDATE_FAILURE:"user.profile.update.failure.memory",USER_PROFILE_UPDATE_SUBMIT:"user.profile.update.submit",USER_PROFILE_UPDATE_CANCEL:"user.profile.update.cancel",USER_PROFILE_UPDATE_INVALID:"user.profile.update.invalid",USER_PROFILE_UPDATE_NOCHANGE:"user.profile.update.nochange",USER_PROFILE_ADDRESSES_REMOVED:"user.profile.addresses.removed",USER_AUTO_LOGIN_SUCCESSFUL:"user.auto.login.successful",AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL:"auto.login.and.get.user.data.successful",USER_AUTO_LOGIN_FAILURE:"user.auto.login.failure.memory",USER_PROFILE_PASSWORD_UPDATE:"user.profile.password.update",USER_UNAUTHORIZED:"user.unauthorized.memory",USER_SESSION_EXPIRED:"user.session.expired.memory",USER_SESSION_VALID:"user.session.validated.memory",USER_SESSION_RESET:"user.session.reset",USER_PROFILE_SESSION_RESET:"user.profile.session.reset",USER_CLEAR_CART:"user.clear.cart",USER_RESET_PASSWORD_FAILURE:"user.reset.password.failure",USER_RESET_PASSWORD_SUCCESS:"user.reset.password.success",USER_PASSWORD_EXPIRED:"user.password.expired",USER_PASSWORD_GENERATED:"user.password.generated",USER_NETWORK_ERROR:"user.network.error",USER_LOCALE_NOT_SUPPORTED:"user.locale.not.supported",UPDATE_USER_LOCALE_NOT_SUPPORTED_ERROR:"update.user.locale.not.supported.error.memory",DISCARD_ADDRESS_CHANGES:"discard.address.changes",USER_LOYALTY_DETAILS_UPDATED:"user.loyalty.details.updated",PURCHASE_LIST_FETCH_SUCCESS:"purchase.list.fetch.success",FETCH_PURCHASE_LIST_AFTER_DELETE:"fetch.purchase.list.after.delete",ADD_TO_PURCHASE_LIST:"add.to.purchase.list",PRODUCT_ADDED_TO_PURCHASE_LIST_SUCCESS:"product.added.to.purchase.list.success",PRODUCT_VIEWED:"product.viewed.memory",SKU_SELECTED:"sku.selected",PRODUCTS_PER_ROW_CHANGES:"products.per.row.changed",UPDATE_FOCUS:"update.focus.memory",UPDATE_LISTING_FOCUS:"update.listing.focus.memory",ITEM_TRIGGER_RECONFIGURE:"item.trigger.reconfigure",CHECKOUT_BILLING_ADDRESS:"checkout.billing.address",CHECKOUT_SHIPPING_ADDRESS:"checkout.shipping.address",CHECKOUT_SHIPPING_ADDRESS_UPDATED:"checkout.shipping.address.updated",PAYPAL_SHIPPING_ADDRESS_ALTERED:"paypal.shipping.address.altered",ADD_NEW_CHECKOUT_SHIPPING_ADDRESS:"add.new.checkout.shipping.address",CART_SHIPPING_ADDRESS_UPDATED:"cart.shipping.address.updated",BILLING_ADDRESS_POPULATED:"billing.address.populated.memory",SHIPPING_ADDRESS_POPULATED:"shipping.address.populated.memory",PAYPAL_CHECKOUT_SHIPPING_ADDRESS:"paypal.checkout_shipping_address",EXTERNAL_CHECKOUT_BILLING_ADDRESS:"external.checkout_billing_address",LOADED_ORDER_SHIPPING_ADDRESS:"loaded.order.shipping.address.memory",GET_INITIAL_ORDER_FAIL:"order.retrieval.fail",WEB_CHECKOUT_SHIPPING_ADDRESS:"web.checkout.shipping.address",CHECKOUT_SAVE_SHIPPING_ADDRESS:"checkout.save.shipping.address",LOAD_ORDER_RESET_ADDRESS:"load.order.reset.address",CONTINUE_TO_PAYPAL:"continue.to.paypal",PAYPAL_EMAIL_VALIDATION:"paypal.email.validation",CHECKOUT_SHIPPING_ADDRESS_INVALID:"checkout.shipping.address.invalid",CHECKOUT_SHIPPING_METHOD:"checkout.shipping.method",PAYPAL_CHECKOUT_SHIPPING_METHOD_VALUE:"paypal.checkout.shipping.method.value",PAYPAL_CHECKOUT_NO_SHIPPING_METHOD:"paypal.checkout.no.shipping.method",CHECKOUT_RESET_SHIPPING_METHOD:"checkout.reset.shipping.method",CHECKOUT_EMAIL_ADDRESS:"checkout.email.address.memory",CHECKOUT_VALIDATE_NOW:"checkout.validate.now",CHECKOUT_NOT_VALID:"checkout.not.valid",CHECKOUT_PAYMENT_DETAILS:"checkout.payment.details",CHECKOUT_REGISTER_USER:"checkout.register.user",CHECKOUT_USER_LOCALE:"checkout.user.locale",ORDER_CREATE:"order.create",ORDER_CREATED:"order.created",ORDER_CREATED_INITIAL:"order.created.initial",ORDER_RETRIEVED_INITIAL:"order.retrieved.initial",ORDER_COMPLETED:"order.completed",ORDER_SUBMISSION_FAIL:"order.submission.fail",ORDER_SUBMISSION_SUCCESS:"order.submission.success",ORDER_AUTHORIZE_PAYMENT:"order.payment.auth.memory",ORDER_SECONDARY_INFO_LOADED:"order.secondary.info.loaded.memory",ORDER_PRICING_FAILED:"order.pricing.failed",ORDER_PRICING_SUCCESS:"order.pricing.success",DESTROY_SHIPPING_METHODS_SPINNER:"destroy_shipping_methods_spinner",ORDERS_GET_HISTORY_FAILED:"orders.getOrderHistory.failed",ORDERS_GET_PENDING_APPROVAL_LIST_FAILED:"orders.getPendingApprovalList.failed",POPULATE_SHIPPING_METHODS:"populate.shipping.methods",PAYMENT_AUTH_SUCCESS:"payment.auth.success",PAYMENT_AUTH_DECLINED:"payment.auth.declined",PAYMENT_AUTH_TIMED_OUT:"payment.auth.timedout",PAYMENT_GET_AUTH_RESPONSE:"payment.auth.getresponse",PAYMENTS_DISABLED:"payments.disabled",PAYULATAM_WEB_CHECKOUT:"payulatam.web.checkout",SCHEDULE_ORDERS_LIST_FAILED:"scheduleorders.scheduleOrderList.failed",SCHEDULED_ORDER_SUBMISSION_SUCCESS:"scheduledorder.submission.success",SCHEDULED_ORDER_LOAD_SCUCCESS:"scheduledorder.load.success",SCHEDULED_ORDER_LOAD_ERROR:"scheduledorder.load.error",ADD_TO_QUICK_ORDER:"quick.order.add.item",SEARCH_CREATE:"search.create",SEARCH_CREATE_CATEGORY_LISTING:"search.create.listing",SEARCH_RESULTS_UPDATED:"search.results.updated.memory",SEARCH_RESULTS_FOR_CATEGORY_UPDATED:"search.results.category.updated.memory",SEARCH_TYPEAHEAD:"search.typeahead",SEARCH_TYPEAHEAD_UPDATED:"search.typeahead.updated",
SEARCH_TYPEAHEAD_CANCEL:"search.typeahead.cancel",SEARCH_TERM:"search.terms.memory",SEARCH_FAILED_TO_PERFORM:"search.failed.memory",OVERLAYED_GUIDEDNAVIGATION_HIDE:"overlayed.guidednavigation.hide",OVERLAYED_GUIDEDNAVIGATION_SHOW:"overlayed.guidednavigation.show",OVERLAYED_GUIDEDNAVIGATION_CLEAR:"guidednavigation.clear.memory",COUPON_ADD_CLEAR_INPUT:"add.coupon.clearInput",COUPON_APPLY_SUCCESSFUL:"add.coupon.successful",COUPON_DELETE_SUCCESSFUL:"delete.coupon.successful",GIFTCARD_UPDATE_FROM_CART:"giftcard.updateGiftCards",UPDATE_AMOUNT_REMAINING:"giftcard.update.amountRemaining",GIFTCARD_PRICING_FAILED:"giftcard.pricing.failed",GIFTCARD_REAPPLY_PINS:"giftcard.reapply.pins",SHOW_GIFT_CARD_ERROR_PANEL:"giftcard.error.panel",UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT:"giftcard.update.amountRemainingPendingPayment",ADMIN_CONTENT_LANGUAGE_CHANGED:"admin.content.language.changed",ADMIN_USER_UPDATE:"admin.user.update",ADMIN_TOUR_REQUESTED:"admin.tour.requested",ADMIN_TOUR_STARTED:"admin.tour.started",ADMIN_TOUR_ENDED:"admin.tour.ended",ADMIN_TOUR_CANCELED:"admin.tour.canceled",ADMIN_AUTH_API_UNAUTHORIZED:"admin.auth.api-unauthorized",ADMIN_AUTH_SSO_REFRESH:"admin.auth.sso-refresh",ADMIN_AUTH_SSO_SUCCESS:"admin.auth.sso-refresh-success",ADMIN_AUTH_SSO_FAILURE:"admin.auth.sso-refresh-failure",PRODUCT_EDIT:"catalog.product.edit",PRODUCT_EDIT_CREATE_PERSIST:"catalog.product.persist",PRODUCT_EDIT_CREATE_SUCCESS:"catalog.product.success",PRODUCT_EDIT_CREATE_ERROR:"catalog.product.error",PRODUCT_FILTER_MODE:"catalog.product.filter.mode",PRODUCT_VIEW_UPDATE_REQUESTED:"catalog.view.updateRequested",PRODUCT_VIEW_UPDATED:"catalog.view.updated",PRODUCT_VIEW_CLEAR_DATA:"catalog.view.clearData",PRODUCT_VIEW_SET_DATA:"catalog.view.setData",PRODUCT_PRICE_CHANGED:"product.price.changed",PRODUCT_SKUS_UPDATED:"product.skus.updated",PRODUCT_LISTING_CONFIGS_UPDATED:"product.listingConfigs.updated",CATALOG_VIEW_MODE_CHANGED:"catalog.view.mode.changed",COLLECTION_EDIT:"catalog.collection.edit",COLLECTION_CREATE:"catalog.collection.create",COLLECTION_REFRESH_GRID:"catalog.collection.refresh.grid",COLLECTION_EDIT_CREATE_PERSIST:"catalog.collection.persist",COLLECTION_EDIT_CREATE_SUCCESS:"catalog.collection.editcreate.success",COLLECTION_DELETE_SUCCESS:"catalog.collection.delete.success",COLLECTION_EDIT_CREATE_ERROR:"catalog.collection.error",COLLECTION_REMOVE_PRODUCT:"catalog.collection.remove.product",COLLECTION_REORDER_PRODUCTS:"catalog.collection.reorder.products",COLLECTION_REORDER_PRODUCTS_SUCCESS:"catalog.collection.reorder.products.success",COLLECTION_REORDER_PRODUCTS_ERROR:"catalog.collection.reorder.products.error",COLLECTION_RELOAD_PRODUCTLIST:"catalog.collection.reload.productlist",COLLECTION_IMPORT:"catalog.category.import",PRODUCT_TO_CATEGORY_DROP:"catalog.product.category.drop",PRODUCT_DEFINITION_UPDATE:"catalog.product.definition.update",PRODUCT_SHOPPER_INPUT_DEFINITION_UPDATE:"catalog.product.shopperInput.definition.update",TYPE_PROPERTY_UPDATE:"property.definition.update",PRODUCT_SKU_DEFINITION_UPDATE:"catalog.product.sku.definition.update",LOCALE_AWARE_PRODUCT_DEFINITION_UPDATE:"catalog.product.localeAwareDefinition.update",LOCALE_AWARE_SHOPPER_INPUT_DEFINITION_UPDATE:"catalog.product.localeAwareShopperInputDefinition.update",LOCALE_AWARE_SKU_UPDATE:"catalog.product.localeAwareSku.update",PRODUCT_DEFINITION_UPDATE_PROPERTIES:"catalog.product.definition.update.properties",COLLECTION_DEFINITION_UPDATE:"catalog.collection.definition.update",PRODUCT_TYPE_EDIT_CREATE_PERSIST:"product.type.persist",PRODUCT_TYPE_EDIT_CREATE_SUCCESS:"product.type.success",PRODUCT_TYPE_EDIT_CREATE_ERROR:"product.type.error",PRODUCT_TYPE_UPDATE:"product.type.update",PRODUCT_TYPE_MANAGE_UPDATE:"product.type.manage.update",PRICE_LIST_GROUP_UPDATE:"price.list.group.update",ACCOUNTS_LIST_REFRESH:"accounts.list.refresh",CONTACTS_LIST_REFRESH:"contacts.list.refresh",CONTRACTS_LIST_REFRESH:"contracts.list.refresh",CONTACT_ROLE_CHANGED:"contact.role.changed",ACCOUNT_CONTACTS_LIST_REFRESH:"accounts.contacts.list.refresh",REFRESH_OVERLAY_FOR_CREATE:"refresh.overlay.for.create",REFRESH_OVERLAY_FOR_EDIT:"refresh.overlay.for.edit",REFRESH_ACCOUNT_ADDRESSES:"refresh.account.addresses",REGISTRATION_REQUESTS_LIST_REFRESH:"registration.requests.list.refresh",INVENTORY_REFRESH:"inventory.update",PROMOTION_EDIT:"marketing.promotion.edit",PROMOTION_CLONE:"marketing.promotion.clone",PROMOTION_SELECTION:"marketing.promotion.selection",PROMOTION_LIST_REFRESH:"marketing.promotion.listRefresh",PROMOTION_TEMPLATE_EDITOR_HIDE:"marketing.promotion.templateEditorHide",PROMOTION_TEMPLATE_EDITOR_SHOW:"marketing.promotion.templateEditorShow",PROMOTION_TEMPLATE_EDITOR_CHANGE_VALUE:"marketing.promotion.templateEditorChangeValue",STACKING_RULE_LOAD_CREATE:"marketing.stackingRule.loadCreate",STACKING_RULE_LIST_REFRESH:"marketing.stackingRule.listRefresh",AUDIENCE_LOAD_CREATE:"marketing.audience.loadCreate",AUDIENCE_LIST_REFRESH:"marketing.audience.listRefresh",LAYOUT_EDIT:"sitestudio.layout.edit",LAYOUT_CLONE:"sitestudio.layout.clone",LAYOUT_EDIT_CREATE_PERSIST:"sitestudio.layout.persist",LAYOUT_EDIT_CREATE_SUCCESS:"sitestudio.layout.success",LAYOUT_EDIT_CREATE_ERROR:"sitestudio.layout.error",LAYOUT_DELETE_SUCCESS:"sitestudio.layout.delete.success",LAYOUT_DEFINITION_UPDATE:"sitestudio.layout.definition.update",LAYOUT_LIST_UPDATE:"sitestudio.layout.list.update",LAYOUT_LIST_HIDE:"sitestudio.layout.list.hide",LAYOUT_REFRESH_DISPLAY:"sitestudio.layout.refresh.display",LAYOUT_REFRESH_COMPLETE:"sitestudio.layout.refresh.complete",LAYOUT_WIDGET_LOADED:"sitestudio.layout.widget.loaded",LAYOUT_STACK_LOADED:"sitestudio.layout.stack.loaded",LAYOUT_SELECTED:"sitestudio.layout.selected",WIDGET_LAYOUT_EDIT:"sitestudio.widget.layout.edit.memory",WIDGET_LIBRARY_HIDE:"sitestudio.widget.library.hide",THEME_UPDATE:"sitestudio.theme.update",CODE_VIEW_MAXIMIZE:"sitestudio.codeview.maximize",CODE_VIEW_MINIMIZE:"sitestudio.codeview.minimize",ORGANIZE_MODE_STATE:"organize.state",STOP_ORGANIZE_MODE:"organize.stop",NOTIFICATION_ADD:"notification.message.add",NOTIFICATION_DELETE:"notification.message.delete",NOTIFICATION_TEMPLATE_ADD:"notification.template.add",ALL_COLLECTIONS_UPDATED:"catalog.allcollections.updated",EXCEPTION_HANDLER:"exception.handler",ONERROR_EXCEPTION_HANDLER:"onerror.exception.handler",LOADING_INDICATOR_ADD:"loading.indicator.add",ARIA_ANNOUNCEMENT_REQUESTED:"aria.announcement.requested",SHIPPING_METHODS_LOADED:"shipping.method.loaded",LOAD_SHIPPING_METHODS_FAILED:"load.shipping.methods.failed",SHIPPING_METHOD_SUCCESS:"shipping.method.success",SHIPPING_METHOD_EDIT:"shipping.method.edit",SHIPPING_METHOD_DEFINITION_UPDATE:"shipping.method.definition.update",RELOAD_SHIPPING_METHODS:"shipping.method.reload",NO_SHIPPING_METHODS:"no.shipping.methods.available",VERIFY_SHIPPING_METHODS:"verify.shipping.methods",INVALID_SHIPPING_METHOD:"invalid.shipping.method",SHIPPING_REGION_LOADED:"shipping.region.loaded",SHIPPING_REGION_SUCCESS:"shipping.region.success",SHIPPING_REGION_EDIT:"shipping.region.edit",SHIPPING_REGION_DEFINITION_UPDATE:"shipping.region.definition.update",RELOAD_SHIPPING_REGIONS:"shipping.region.reload",CATEGORY_GROUP_CHANGED:"category.group.changed",CATEGORY_UPDATED:"category.updated",CATEGORY_CRUMB_UPDATED:"send.category.memory",SHOPPINGCART_VALIDATE_NOW:"shoppingcart.validate.now",LOAD_CHECKOUT:"redirect.checkout.cart",ADMIN_CONTAINER_CONFIGURATION_LOADED:"admin.container.configuration.loaded",EXTERNAL_SERVICE_CONFIGURATION_LOADED:"external.service.configuration.loaded",EXTERNAL_SERVICE_EXPERIMENTS_SIGNON:"external.service.experiments.signon",SOCIAL_SPACE_ADD:"social.space.add",SOCIAL_SPACE_ADD_TO_SELECTED_SPACE:"social.space.add.selected",SOCIAL_SPACE_ADD_SUCCESS:"social.space.add.success",SOCIAL_SPACE_SELECTOR_ADD:"social.space.selector.add",SOCIAL_SPACE_PRODUCT_REMOVED:"social.space.product.removed",SOCIAL_SPACE_PRODUCT_MOVED:"social.space.product.moved",SOCIAL_SPACE_SELECT:"social.space.select",SOCIAL_SPACE_UNAVAILABLE:"social.space.unavailable",SOCIAL_SPACE_DELETED:"social.space.deleted",SOCIAL_SPACE_MEMBER_JOIN:"social.space.member.join",SOCIAL_SPACE_MEMBER_LEFT:"social.space.member.left",SOCIAL_SPACE_MODEL_MEMBERS_CHANGED:"social.space.model.members.changed",SOCIAL_SPACE_MEMBERS_INFO_CHANGED:"social.space.member.info.changed",SOCIAL_REFRESH_SPACES:"social.refresh.spaces",SOCIAL_CURRENT_USER:"social.current.user",SOCIAL_POST_MESSAGE:"social.space.post.message",SOCIAL_FACEBOOK_JS_READY:"social.facebook.js.ready",RECS_WANT_RECS:"recs.display.want.recs.memory",RECS_WHO_WANT_RECS:"recs.display.who.want.recs.memory",RECS_HAVE_RECS:"recs.display.have.recs.memory",RECS_RECOMMENDATIONS_CHANGED:"recs.display.recommendations.changed",ORDER_EDIT_POST_ACTION:"edit.order.post.action",ORDER_EDIT_INIT_ACTION:"edit.order.init.action",RETURN_CCI18N_RESOURCE_LOADED:"return.cci18n.resource.loaded",AGENT_UNSELECT_SHIPPING_METHOD:"shipping.unselect.price.order",SEARCH_SELECTED:"search.selected",LOAD_DEFAULT_CATEGORY:"load.default.category",LOCALE_SET:"cc.locale.set",LOCALE_READY:"cc.locale.ready.memory",SUPPORTED_LOCALES_UPDATE:"supported.locales.update",PAGINATION_PAGE_CHANGE:"pagination.page.change",REPORTING_TIMEFRAME_UPDATED:"reporting.timeframe.updated",REPORTING_SELECTED_SUMMARY_METRIC:"reporting.selected.summaryMetric",REPORTING_FILTER_CHANGES:"reporting.filter.changes.memory",REPORTING_DATA_LOADED:"reporting.data.loaded.memory",REPORTING_MULTIPLE_DAYS_RANGE_SELECTED:"reporting.validdate.selected",REPORTING_SINGLE_DAY_RANGE_SELECTED:"reporting.invaliddate.selected",REPORTING_APPLIED_USER_SELECTIONS_UPDATED:"reporting.applied.user.selections.updated",REPORTING_CURRENCY_LOADED:"reporting.currency.loaded",REPORTING_RESET_FILTERS:"reporting.reset.filters",COLLECTION_SELECTION_CHANGED:"collection.selection.changed",GWP_QUALIFIED_MESSAGE:"gwp.qualified.message",GWP_INVALIDATED_MESSAGE:"gwp.invalidated.message",GWP_CLEAR_QUALIFIED_MESSAGE:"gwp.clear.qualified.message",PLACE_HOLDER_REMOVE:"place.holder.remove",GET_GIFT_CHOICES_SUCCESSFUL:"get.gift.choices.successful",GET_GIFT_CHOICES_FAILURE:"get.gift.choices.failure",GIFT_CHOICES_NOT_AVAILABLE:"gift.choices.not.available",GWP_FAILURE_MESSAGE:"gwp.failure.message",GUIDED_SEARCH_INDEX_FIELDS_REFRESH:"guided.search.index.fields.refresh",ADD_PRODUCTS_TAB_TO_PRICE_GROUP:"add.products.tab.to.price.group",ADD_NEW_NAVIGATION:"add.new.navigation",UPDATE_NAVIGATION:"update.navigation",REMOVE_NAVIGATION:"remove.navigation",NAVIGATE_TO_INTERCEPTED_LINK:"go.to.intercepted.link",SET_IS_NEW_FLAG:"set.is.new.flag",PRICE_GROUP_LIST_REFRESH:"price.groups.list.refresh",DELEGATED_CONTACTS_LIST_FAILED:"delegated.contacts.list.failed",UPDATE_STOREFRONT_ROLE_SUCCESS:"update.storefront.role.success",ACCOUNT_LOGO_ITEM_IMAGE_DELETED:"account.logo.item.image.deleted",DEFAULT_ACCOUNT_MODIFIED:"default.account.modified",SHOPPER_CONTEXT_LOAD_ERROR:"shopper.context.load.failed",OPTION_DATA_RECEIVED:"option.data.received",SITE_ADDED:"site.added",SITE_SELECTION_RESET:"site.selection.reset",SITE_SELECTION_CHANGED:"site.selection.changed"},r=new e;return r.topicNames=t,$.Topic=r.topic.bind(r),r}),define("xDomainProxy",["jquery"],function(e){"use strict";function t(e,r,i){var a=this;a.profileType=e,a.httpPort=r||"8080",a.httpsPort=i||"8443",a.parentURL=t.getCrossDomainURL(e,t.HTTP_PROTOCOL,a.httpPort,!1),document.referrer&&t.urlProtocolOnly(document.referrer)!=t.HTTPS_PROTOCOL&&null!=window&&null!=window.parent&&window.parent.postMessage(JSON.stringify({id:t.IFRAME_INIT_COMPLETE_EVENT,success:!0,payload:null}),a.parentURL)}return t.POST="POST",t.GET="GET",t.DELETE="DELETE",t.METHOD="method",t.URL="url",t.DATA="data",t.SUCCESS="success",t.FAILURE="failure",t.HEADERS="headers",t.CONTENT_TYPE="Content-Type",t.ACCEPT="Accept",t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json",t.JSON="json",t.ETAG="ETag",t.ETAG_PROPERTY="___etag___",t.LAST_PUBLISHED_TIME="LastPublishedTime",t.LAST_PUBLISHED_TIME_PROPERTY="lastPublishedTime",t.XSTATEDATA="X-OCStateData",t.STATEDATA_PROPERTY="__stateData__",t.AMPERSAND="&",t.EQUALS="=",t.DOUBLE_SLASH="//",t.SLASH="/",t.EMPTY_STRING="",t.PROTOCOL_SEP="://",t.COLON=":",t.QUESTION_MARK="?",t.SPACE=" ",t.SEMICOLON=";",t.DASH="-",t.CURLY_BRACES="{}",t.PERIOD=".",t.OAUTH_ACCESS_TOKEN_PARAM="access_token",t.LOGIN_SERVICE_PATH="/ccstoreui/v1/login/",t.ADMIN_LOGIN_SERVICE_PATH="/ccadminui/v1/mfalogin/",t.AGENT_LOGIN_SERVICE_PATH="/ccagentui/v1/login/",t.HTTP_PROTOCOL="http",t.HTTPS_PROTOCOL="https",t.HTTPS_FRAME_PATH="/https/https.html",t.HTTPS_ADMIN_FRAME_PATH="/https/httpsAdmin.html",t.GRANT_TYPE_PARAM="grant_type",t.PASSWORD_GRANT_TYPE_VALUE="password",t.USERNAME_PARAM="username",t.PASSWORD_PARAM="password",t.TOTP_CODE_PARAM="totp_code",t.SAML_GRANT_TYPE_VALUE="saml_credentials",t.SAML_RESPONSE_PARAM="saml_response",t.AUTH_HEADER_NAME="Authorization",t.AUTH_HEADER_PREFIX="Bearer ",t.PROFILE_TYPE_HEADER_NAME="X-CCProfileType",t.IFRAME_INIT_COMPLETE_EVENT="iframeInitComplete",t.ASSET_LANGUAGE_HEADER_NAME="X-CCAsset-Language",t.PRICE_LIST_GROUP_ID="X-CCPriceListGroup",t.ORGANIZATION_ID="X-CCOrganization",t.AGENT_CONTEXT="X-CCAgentContext",t.VIEWPORT_HEADER_NAME="X-CCViewport",t.SITE_ID="x-ccsite",t.VISIT_ID="X-CCVisitId",t.VISITOR_ID="X-CCVisitorId",t.prototype.init=function(){var e=this;e.targetMap={login:function(t,r,i){e.loginRequest(t.user,t.password,r,i)},auth:function(t,r,i){e.request(t.url,t.data,r,i,t.method,t.clientProps)},noauth:function(t,r,i){e.request(t.url,t.data,r,i,t.method)}};var t=function(t){var r=t.origin;if(r==e.parentURL){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,n=i.target,o=i.payload,s=function(e,i){var n={};n.id=a,n.success=e,n.payload=i,t.source.postMessage(JSON.stringify(n),r)},c=function(e){s(!0,e)},l=function(e){s(!1,e)},d=e.targetMap[n];d&&d(o,c,l)}};window.addEventListener("message",t,!1)},t.prototype.loginRequest=function(e,t,r,i,a){this.mfaLoginRequest(e,t,null,r,i,a)},t.prototype.mfaLoginRequest=function(e,r,i,a,n,o){var s=this,c={};c[t.USERNAME_PARAM]=e,c[t.PASSWORD_PARAM]=r,i&&(c[t.TOTP_CODE_PARAM]=i),c[t.GRANT_TYPE_PARAM]=t.PASSWORD_GRANT_TYPE_VALUE,s.loginRequestInternal(c,a,n,o)},t.prototype.samlLoginRequest=function(e,r,i,a){var n=this,o={};o[t.SAML_RESPONSE_PARAM]=e,o[t.GRANT_TYPE_PARAM]=t.SAML_GRANT_TYPE_VALUE,n.loginRequestInternal(o,r,i,a)},t.prototype.loginRequestInternal=function(r,i,a,n){var o=this,s=t.LOGIN_SERVICE_PATH;"admin"==o.profileType||"adminUI"==o.profileType?s=t.ADMIN_LOGIN_SERVICE_PATH:"agent"!=o.profileType&&"agentUI"!=o.profileType||(s=t.AGENT_LOGIN_SERVICE_PATH);var c={};c[t.GRANT_TYPE_PARAM]=r[t.GRANT_TYPE_PARAM],r[t.GRANT_TYPE_PARAM]==t.PASSWORD_GRANT_TYPE_VALUE?(c[t.USERNAME_PARAM]=r[t.USERNAME_PARAM],c[t.PASSWORD_PARAM]=r[t.PASSWORD_PARAM],r[t.TOTP_CODE_PARAM]&&null!==r[t.TOTP_CODE_PARAM]&&(c[t.TOTP_CODE_PARAM]=r[t.TOTP_CODE_PARAM])):r[t.GRANT_TYPE_PARAM]==t.SAML_GRANT_TYPE_VALUE&&(c[t.SAML_RESPONSE_PARAM]=r[t.SAML_RESPONSE_PARAM]);var l=function(e){var t=e.data;i(t)},d=function(e){var t=e.jqXHR.responseText;t&&(t=JSON.parse(t)),a(t)},u=null,p=!1;if(n&&(p=n.suppressProfileType),o.profileType&&!p&&(u={},u[t.PROFILE_TYPE_HEADER_NAME]=o.profileType),n&&n.tokenSecret){u||(u={});var h=t.AUTH_HEADER_PREFIX+n.tokenSecret;u[t.AUTH_HEADER_NAME]=h}var f={type:t.POST,dataType:t.JSON,url:s,data:c,processData:!0,success:function(e,t,r){l({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){d({jqXHR:e,textStatus:t,errorThrown:r})}};u&&(f.headers=u),e.ajax(f)},t.prototype.request=function(r,i,a,n,o,s,c,l,d){var u=this,p=r;p=encodeURI(p);var h=o;h||(h=t.GET);var f=null;i&&(h===t.GET||h===t.DELETE?p=t.addQueryParams(p,i,!0):f=JSON.stringify(i)),d&&(p=t.addQueryParams(p,d,!0)),h===t.GET&&(p=t.fixIECaching(p));var m=function(e){var r=e.data,i=e.jqXHR.getResponseHeader(t.ETAG),n=e.jqXHR.getResponseHeader(t.XSTATEDATA);i&&r&&(i=i.replace(/["]+/g,""),r[t.ETAG_PROPERTY]=i),n&&r&&(r[t.STATEDATA_PROPERTY]=n);var o=e.jqXHR.getResponseHeader(t.LAST_PUBLISHED_TIME);r&&o&&(r[t.LAST_PUBLISHED_TIME_PROPERTY]=Number(o)),a(r)},g=function(e){var r=e.jqXHR.status,i=e.jqXHR.responseText,a=e.jqXHR.getResponseHeader(t.XSTATEDATA);if(i)try{i=JSON.parse(i)}catch(e){i={}}a&&i&&(i[t.STATEDATA_PROPERTY]=a),n(i,r)},v={dataType:t.JSON,contentType:t.APPLICATION_JSON,type:h,url:p,processData:!1,success:function(e,t,r){m({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){g({jqXHR:e,textStatus:t,errorThrown:r})},beforeSend:l},y=null,b=!1;if(s&&(b=s.suppressProfileType),u.profileType&&!b&&(y={},y[t.PROFILE_TYPE_HEADER_NAME]=u.profileType),c){y||(y={});for(var E in c)c.hasOwnProperty(E)&&(c[E]instanceof Object?y[E]=JSON.stringify(c[E]):y[E]=c[E])}if(s&&s.tokenSecret){y||(y={});var I=t.AUTH_HEADER_PREFIX+s.tokenSecret;y[t.AUTH_HEADER_NAME]=I}f&&(v.data=f),y&&(v.headers=y),e.ajax(v)},t.parseQueryParams=function(e){if(null===e)return null;for(var r=e.split(t.AMPERSAND),i={},a=0;a<r.length;a++){var n=r[a].split(t.EQUALS);i[n[0]]=n[1]}return i},t.addQueryParams=function(e,t,r){if(!e)return null;if(!t)return e;var i=Object.keys(t);if(i&&0===i.length)return e;var a=e,n=!0;a.indexOf("?")!==-1&&(n=!1);for(var o=0;o<i.length;o++){var s=i[o],c=t[i[o]];r&&(s=encodeURIComponent(s),c=encodeURIComponent(c));var l=s+"="+c,d="&";n&&(d="?",n=!1),a+=d+l}return a},t.getTimestamp=function(e){var t=new Date/1e3,r=parseInt(e,10),i=t+r;return parseInt(+i,10)},t.getCrossDomainURL=function(e,r,i,a){var n=r+t.PROTOCOL_SEP+t.urlHostnameOnly(window.location.href)+t.COLON+i;return a===!0&&("storefront"===e||"storefrontUI"==e?n+=t.HTTPS_FRAME_PATH:"admin"!==e&&"adminUI"!=e||(n+=t.HTTPS_ADMIN_FRAME_PATH)),n},t.convertUrl=function(e){if(null!=e&&e.charAt(0)!=t.SLASH)return[e];var r=t.urlPathPortionOnly(e),i=r.split(t.SLASH);if(1==i.length)return[t.SLASH];i[0]||(i=i.slice(1));var a=new Array(i.length+1);a[0]=t.SLASH,a[1]=i[0];for(var n=1;n<i.length;n++)a[n+1]=t.SLASH+i[n];return a},t.urlNoProtocolOrQueryParams=function(e){if(null==e)return null;var r=e.split(t.QUESTION_MARK),i=null;return i=r.length>1?r[0]:e,r=i.split(t.PROTOCOL_SEP),r.length>1&&(i=r[1]),i},t.urlPathPortionOnly=function(e){var r=t.urlNoProtocolOrQueryParams(e);return r.substring(0,1)!==t.SLASH&&(r=t.removeBeforeFirstSlash(r)),r},t.urlHostnamePortPortionOnly=function(e){var r=t.urlNoProtocolOrQueryParams(e);if(r.substring(0,1)==t.SLASH)return null;var i=r.split(t.SLASH);return i[0]},t.urlHostnameOnly=function(e){var r=t.urlHostnamePortPortionOnly(e),i=r.split(t.COLON);return i[0]},t.urlProtocolOnly=function(e){var r=e.split(t.PROTOCOL_SEP);return r[0]},t.removeBeforeFirstSlash=function(e){var r=e.split(t.SLASH),i=e.substring(r[0].length);return i},t.fixIECaching=function(e){return e},t.insertAuthHeadersAsQueryParams=function(e,t,r){return uri},t.parseClaimsFromAccessToken=function(e){if(!e)return null;var r=e.split(t.PERIOD),i=r[1],a=t.decodeBase64(i),n=JSON.parse(a);return n},t.decodeBase64=function(e){var t,r,i,a,n={},o=0,s=0,c="",l=String.fromCharCode,d=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;t<64;t++)n[u.charAt(t)]=t;for(i=0;i<d;i++)for(r=n[e.charAt(i)],o=(o<<6)+r,s+=6;s>=8;)((a=o>>>(s-=8)&255)||i<d-2)&&(c+=l(a));return c},t}),define("storageApi",["knockout","xDomainProxy"],function(e,t){"use strict";function r(){if(r.singleInstance)throw new Error("Cannot instantiate more than one StorageApi, use getInstance()");var e=this;e.data={},e.validSyncSessionKeyPrefixes=["oauth_token_secret"];try{e.storage=window.localStorage,e.sessionStorage=window.sessionStorage}catch(e){}if(e.sessionStorageSupported=!1,e.localStorageSupported=!1,e.isIE=function(){return!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/Edge/))},e.isIE())try{e.sessionStorage=window.localStorage}catch(e){}e.url=t.urlHostnamePortPortionOnly(document.URL),e.isSessionStorageSynced=!1,e.hasLocalStorageSupport=function(){try{var t=new Date,r="test-"+t.toUTCString();e.storage.setItem(r,r);var i=e.storage.getItem(r);if(r===i)return e.storage.removeItem(r),!0}catch(e){}return!1},e.hasSessionStorageSupport=function(){if(e.isIE())return!1;try{var t=new Date,r="test-"+t.toUTCString();e.sessionStorage.setItem(r,r);var i=e.sessionStorage.getItem(r);if(r===i)return e.sessionStorage.removeItem(r),!0}catch(e){}return!1},e.localStorageSupported=e.hasLocalStorageSupport(),e.saveToLocalStorage=function(t,r){try{e.storage.setItem(t,r);var i={};return i[t]=r,!0}catch(e){}return!1},e.readFromLocalStrorage=function(t){try{return e.storage.getItem(t)}catch(e){}return null},e.saveToSessionStorage=function(t,r){try{e.sessionStorage.setItem(t,r);var i={};return i[t]=r,window.localStorage.setItem("sendSessionStorage",JSON.stringify(i)),!0}catch(e){}return!1},e.readFromSessionStorage=function(t){try{var r=e.sessionStorage.getItem(t);return r}catch(e){}return null},e.hasCookiesSupport=function(){try{return window.navigator&&window.navigator.cookieEnabled}catch(e){return!1}},e.saveToCookies=function(e,t,r){try{var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);var a="; expires="+i.toUTCString(),n="; path=/";return document.cookie=e+"="+t+a+n,!0}catch(e){}return!1},e.saveToSessionCookies=function(e,t){try{var r="; path=/";return document.cookie=e+"="+t+r,!0}catch(e){}return!1},e.readFromCookies=function(e){try{var t=null;if(""!==document.cookie){var r=document.cookie.split("; ");if(void 0!==r)for(var i=0;i<r.length;i++){var a=r[i].split("="),n=a[0],o=a[1];if(n==e){t=o;break}}}return t}catch(e){}return null},e.saveToMemory=function(t,r){r=e.encodeData(r),e.data[t]=r},e.readFromMemory=function(t){return e.data.hasOwnProperty(t)?e.decodeData(e.data[t]):null},e.removeFromMemory=function(t){e.data[t]="",delete e.data[t]},e.removeItem=function(t){try{var r=null;return e.localStorageSupported&&(r=e.readFromLocalStrorage(t)),r?(e.saveToLocalStorage(t,""),e.storage.removeItem(t)):e.hasCookiesSupport()&&e.readFromCookies(t)?e.saveToCookies(t,"",-1):e.removeFromMemory(t),!0}catch(e){}return!1},e.setItem=function(t,r){try{var i=!1;return e.localStorageSupported&&(i=e.saveToLocalStorage(t,r)),!i&&e.hasCookiesSupport()&&(r=e.encodeData(r),i=e.saveToCookies(t,r,365)),i||saveToMemory(t,r),!0}catch(e){}return!1},e.getItem=function(t){var r=null;return e.localStorageSupported&&(r=e.readFromLocalStrorage(t)),!r&&e.hasCookiesSupport()&&(r=e.decodeData(e.readFromCookies(t))),null===r&&(r=e.readFromMemory(t)),r},e.removeSessionItem=function(t){try{var r=null;return e.sessionStorageSupported&&(r=e.readFromSessionStrorage(t)),r?(e.saveToSessionStorage(t,""),e.sessionStorage.removeItem(t)):e.removeSessionCookieItem(t),!0}catch(e){}return!1},e.setSessionItem=function(t,r){try{var i=!1;return e.sessionStorageSupported&&(i=e.saveToSessionStorage(t,r)),i||e.setSessionCookieItem(t,r),!0}catch(e){}return!1},e.getSessionItem=function(t){var r=null;return e.sessionStorageSupported&&(r=e.readFromSessionStrorage(t)),null===r&&(r=e.getSessionCookieItem(t)),r},e.removeSessionCookieItem=function(t){e.hasCookiesSupport()&&e.readFromCookies(t)?e.saveToSessionCookies(t,""):(e.data[t]="",delete e.data[t])},e.setSessionCookieItem=function(t,r){var i=!1;r=e.encodeData(r),e.hasCookiesSupport()&&(i=e.saveToSessionCookies(t,r)),i||(e.data[t]=r)},e.getSessionCookieItem=function(t){var r=null;return e.hasCookiesSupport()&&(r=e.decodeData(e.readFromCookies(t))),null===r&&(r=e.decodeData(e.data[t])),r},e.encodeData=function(e){try{e&&(e=encodeURIComponent(JSON.stringify(e)))}catch(e){}return e},e.decodeData=function(e){try{if(e)return e=JSON.parse(decodeURIComponent(e))}catch(e){}return null},e.initSyncing=function(r){if(!e.localStorageSupported||!e.sessionStorageSupported)return void(r&&r());var i=function(i){i||(i=window.event);var a=t.urlHostnamePortPortionOnly(i.url);if(a==e.url&&i.newValue)if("getSessionStorage"==i.key){var n=JSON.stringify(e.sessionStorage);window.localStorage.setItem("sendSessionStorage",n)}else if("sendSessionStorage"==i.key){var n=JSON.parse(i.newValue);for(var o in n){for(var s=!1,c=0;c<e.validSyncSessionKeyPrefixes.length&&0==s;c++){var l=e.validSyncSessionKeyPrefixes[c];0===o.lastIndexOf(l,0)&&(s=!0)}s&&e.sessionStorage.setItem(o,n[o])}r&&!e.isSessionStorageSynced&&r(),e.isSessionStorageSynced=!0}};window.addEventListener?window.addEventListener("storage",i,!1):window.attachEvent("onstorage",i);var a=new Date,n="test-"+a.toUTCString();try{window.localStorage.setItem("getSessionStorage",n)}catch(e){}}}return r.getInstance=function(){return r.singleInstance||(r.singleInstance=new r),r.singleInstance},r}),define("viewportHelper",["jquery","knockout","ccConstants"],function(e,t,r){"use strict";function i(){if(i.singleInstance)throw new Error("Cannot instantiate more than one ViewportHelper, use getInstance()");var r=this;return this.viewportMode=t.observable(null),this.viewportDesignation=t.observable(null),this.layoutViewports=t.observable(null),this.setViewport(e(window)[0].innerWidth||e(window).width()),e(window).resize(function(){r.setViewport(e(window)[0].innerWidth||e(window).width())}),this}return i.XS_CLASS="col-xs-",i.SM_CLASS="col-sm-",i.MD_CLASS="col-md-",i.LG_CLASS="col-lg-",i.XS_OFFSET="col-xs-offset-",i.SM_OFFSET="col-sm-offset-",i.MD_OFFSET="col-md-offset-",i.LG_OFFSET="col-lg-offset-",i.prototype.setViewport=function(e){e>=r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?this.viewportMode()!==r.LARGE_DESKTOP_VIEW&&(this.viewportMode(r.LARGE_DESKTOP_VIEW),this.viewportDesignation(r.VIEWPORT_LARGE)):e>r.VIEWPORT_TABLET_UPPER_WIDTH&&e<r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?this.viewportMode()!==r.DESKTOP_VIEW&&(this.viewportMode(r.DESKTOP_VIEW),this.viewportDesignation(r.VIEWPORT_MEDIUM)):e>=r.VIEWPORT_TABLET_LOWER_WIDTH&&e<=r.VIEWPORT_TABLET_UPPER_WIDTH?this.viewportMode()!==r.TABLET_VIEW&&(this.viewportMode(r.TABLET_VIEW),this.viewportDesignation(r.VIEWPORT_SMALL)):this.viewportMode()!==r.PHONE_VIEW&&(this.viewportMode(r.PHONE_VIEW),this.viewportDesignation(r.VIEWPORT_XS))},i.prototype.getWidthClass=function(e,t){var a=i.SM_CLASS,n=i.SM_OFFSET;return!e||""===e||isNaN(e)?"":(this.layoutViewports&&null!=this.layoutViewports()&&""!==this.layoutViewports()&&(this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_XS.toLowerCase())!==-1?(a=i.XS_CLASS,n=i.XS_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_SMALL.toLowerCase())!==-1?(a=i.SM_CLASS,n=i.SM_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_MEDIUM.toLowerCase())!==-1?(a=i.MD_CLASS,n=i.MD_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_LARGE.toLowerCase())!==-1&&(a=i.LG_CLASS,n=i.LG_OFFSET)),a+=e,t&&""!==t&&!isNaN(t)&&(a+=" "+n+t),a)},i.getInstance=function(){return i.singleInstance||(i.singleInstance=new i),i.singleInstance},i.getInstance()}),define("ccStoreConfiguration",["knockout"],function(e){"use strict";function t(){if(t.prototype.singleInstance)throw new Error("Cannot instantiate more than one CCStoreConfiguration. Use getInstance() method")}return t.prototype.filterMap={getCollection:{megaMenuNavigation:{ccFilterConfigKey:"categoryNavData"},categoryNavigation:{ccFilterConfigKey:"categoryNavData"}},listProducts:{productListingData:{ccFilterConfigKey:"PLPData"},collectionWidget:{ccFilterConfigKey:"collectionData"},getProductData:{ccFilterConfigKey:"productData"},getProductDataAndRedirect:{ccFilterConfigKey:"productData"},listProductsForAddons:{ccFilterConfigKey:"addonProductsData"}}},t.prototype.priorityList=["endpoint","page","identifier"],t.prototype.filterEnabled=!1,t.prototype.resetShippingGroupRelationships=!0,t.prototype.allowSiteSwitchingOnProduction=e.observable(!1),t.prototype.getFilterToUse=function(e){var t=this;if(t.filterEnabled&&null!=e&&e.constructor===Object){for(var r=Object.keys(e).length,i=t.filterMap,a="",n=null,o=0;o<t.priorityList.length;o++)if(a=t.priorityList[o],e[a]){if(r--,n=i[e[a]],null!=n&&n.constructor===Object&&n.ccFilterConfigKey&&0==r)return n.ccFilterConfigKey;if(null!=n&&n.constructor===Object)i=n;else{if(null!=n||!i.default)return null!=n&&0!=r||!i.ccFilterConfigKey?null:i.ccFilterConfigKey;if(n=i.default,n.constructor===Object&&n.ccFilterConfigKey&&0==r)return n.ccFilterConfigKey;if(n.constructor!==Object)return null!=n&&0!=r||!i.ccFilterConfigKey?null:i.ccFilterConfigKey;i=n}}if(null!=n&&n.constructor===Object&&n.ccFilterConfigKey)return n.ccFilterConfigKey}return null},t.prototype.enableFilter=function(){this.filterEnabled=!0},t.prototype.disableFilter=function(){this.filterEnabled=!1},t.prototype.updateFiltersToUse=function(e){var t=this;if(null!=e&&e.constructor===Object)for(var r=Object.keys(e),i=0;i<r.length;i++)t.filterMap[r[i]]=e[r[i]]},t.prototype.replaceAllFiltersToUse=function(e){var t=this;null!=e&&e.constructor===Object&&(t.filterMap=e)},t.prototype.addDataToPriorityList=function(e){var t=this;if(null!=e&&e.constructor===Array)for(var r=0;r<e.length;r++)t.priorityList.push(e[r])},t.prototype.replacePriorityList=function(e){var t=this;null!=e&&e.constructor===Array&&(t.priorityList=e)},t.prototype.layoutIdsRendered=[],t.prototype.layoutsRenderedArraySize=15,t.prototype.refreshAfter=e.observable(600),t.prototype.enableLayoutsRenderedForLayout=!1,t.prototype.getLayoutIdsRendered=function(){return this.layoutIdsRendered},t.prototype.storeLayoutIdsRendered=function(e){var t=this;e&&e.layout&&null!=e.layout&&t.layoutIdsRendered.indexOf(e.layout)==-1&&(t.layoutIdsRendered.length==t.layoutsRenderedArraySize&&t.layoutIdsRendered.shift(),t.layoutIdsRendered.push(e.layout))},t.getInstance=function(){return t.singleInstance||(t.singleInstance=new t),t.singleInstance},t}),define("ccRestClientConstructor",["xDomainProxy","ccConstants","jquery","pubsub","storageApi","viewportHelper","ccStoreConfiguration"],function(e,t,r,i,a,n,o){"use strict";function s(a,n){var o=this;o.profileId=null,o.profileRoles=null,o.tokenSecret=null,o.endpointRegistry=null,o.loggedIn=!1,o.initComplete=!1,o.initCompleteCallbacks=[],o.initCompleteCallbacksDone=!1,o.storageSyncCallbacks=[],o.storageSyncDone=!1,o.loginUpdateCallbacks=[],o.logoutUpdateCallbacks=[],o.loginAdminUpdateCallbacks=[],o.logoutAdminUpdateCallbacks=[],o.iframeLoadCompleteCallbacks=[],o.initIframeLoadComplete=!1,o.initIframeLoadCompleteDone=!1,o.profileType=a,o.previewMode=!1,o.allowSiteSwitchingOnProduction=!1,o.initFailed=!1,o.disableLoginErrorRedirect=!1,o.commonErrorCallback=n,o.url=e.urlHostnamePortPortionOnly(document.URL),o.urlProtocol=e.urlProtocolOnly(document.URL),o.NULL=s.NULL,o.currentRequestId=0,o.storeRequestWasMade=!1,o.etagCache=[],o.handleSessionExpiry=function(){r.Topic(i.topicNames.USER_SESSION_EXPIRED).publish()},o.isRefreshRequired=!1,o.lastPublishedTimeStamp=null,o.isNotStore=!(!window.isPreviewMode&&o.profileType==t.PROFILE_TYPE_STOREFRONT),o.external=!1}return s.NULL="cc-rest-null",s.LOCAL_STORAGE_TOKEN="oauth_token_secret",s.LOCAL_STORAGE_LAST_UPDATE="oauth_last_update",s.LOCAL_STORAGE_EXPIRES=";expires=",s.LOCAL_STORAGE_LIFE_DAYS=1,s.TOKEN_FRESH_TIME=36e5,s.HTTP_UNAUTHORIZED_ERROR="401",s.DELETE="delete",s.ADMIN_LOGOUT_SERVICE_PATH="/ccadminui/v1/logout",s.ADMIN_REFRESH_SERVICE_PATH="/ccadminui/v1/refresh",s.ADMIN_ENDPOINT_REGISTRY_SERVICE_PATH="/ccadminui/v1/registry",s.ADMIN_VERIFY_SERVICE_PATH="/ccadminui/v1/verify",s.ADMIN_LOGIN_SCREEN_URL="/occs-admin",s.LOGOUT_SERVICE_PATH="/ccstoreui/v1/logout",s.REFRESH_SERVICE_PATH="/ccstoreui/v1/refresh",s.ENDPOINT_REGISTRY_SERVICE_PATH="/ccstoreui/v1/registry",s.VERIFY_SERVICE_PATH="/ccstoreui/v1/verify",s.SAML_AUTHN_REQUEST_SERVICE_URL="/ccstoreui/v1/samlAuthnRequest?encode=true",s.AGENT_LOGOUT_SERVICE_PATH="/ccagentui/v1/logout",s.AGENT_REFRESH_SERVICE_PATH="/ccagentui/v1/refresh",s.AGENT_ENDPOINT_REGISTRY_SERVICE_PATH="/ccagentui/v1/registry",s.AGENT_VERIFY_SERVICE_PATH="/ccagentui/v1/verify",s.AGENT_LOGIN_SCREEN_URL="/occs-agent",s.LOCAL_STORAGE_LOGIN_KEY="cc.login.update.",s.LOCAL_STORAGE_LOGOUT_KEY="cc.logout.update.",s.INPUT_ELEMENT="input",s.IFRAME_ELEMENT="iframe",s.ZERO="0",s.IFRAME_STYLE="width: 0; height: 0; border: none;",s.IFRAME_NAME="https_iframe",s.ID_ATTRIBUTE="id",s.NAME_ATTRIBUTE="name",s.WIDTH_ATTRIBUTE="width",
s.HEIGHT_ATTRIBUTE="height",s.BORDER_ATTRIBUTE="border",s.STYLE_ATTRIBUTE="style",s.SRC_ATTRIBUTE="src",s.MAX_INT=4294967295,s.LOCALE_HINT="localeHint",s.HINT_BROWSER="browser",s.HINT_ASSET_LANGUAGE_OPTIONAL="assetLanguageOptional",s.HINT_ASSET_LANGUAGE_REQUIRED="assetLanguageRequired",s.BEFORE_SEND_NOT_SUPPORTED="Before-send callback not supported for proxy requests.",s.LAST_PUBLISHED_TIME_STAMP="lastPublishedTimeStamp",s.prototype.initProxy=function(t,r){var i=this,a=t,n=r;a||(a=location.port),n||(n=location.port),i.crossDomainURL=e.getCrossDomainURL(i.profileType,e.HTTPS_PROTOCOL,n,!0),i.crossDomainURLNoPath=e.getCrossDomainURL(i.profileType,e.HTTPS_PROTOCOL,n,!1),i.proxy=new e(i.profileType,a,n)},s.prototype.registerInitFailCallback=function(e){var t=this;t.initFailCallback=e,t.initFailed&&t.initFailCallback()},s.prototype.registerStorageSyncCallback=function(e){var t=this;t.storageSyncDone?e():t.storageSyncCallbacks.push(e)},s.prototype.registerInitCallback=function(e){var t=this;t.initComplete?e():t.initCompleteCallbacks.push(e)},s.prototype.registerLoginUpdateCallback=function(e){var t=this;t.loginUpdateCallbacks.push(e)},s.prototype.registerLogoutUpdateCallback=function(e){var t=this;t.logoutUpdateCallbacks.push(e)},s.prototype.registerLoginAdminUpdateCallback=function(e){var t=this;t.loginAdminUpdateCallbacks.push(e)},s.prototype.registerLogoutAdminUpdateCallback=function(e){var t=this;t.logoutAdminUpdateCallbacks.push(e)},s.prototype.init=function(r,i,n){var o=this,s=function(){if(!o.initCompleteCallbacksDone){o.initComplete=!0;for(var e=0;e<o.initCompleteCallbacks.length;e++)o.initCompleteCallbacks[e]();o.initCompleteCallbacks.length=0,o.initCompleteCallbacksDone=!0}},c=function(){o.refresh(s,s)},l=function(){for(var e=0;e<o.storageSyncCallbacks.length;e++)o.storageSyncCallbacks[e]();o.storageSyncDone=!0};a.getInstance().initSyncing(function(){o.reloadStoredValueAuth(),o.proxy&&o.refresh(l,l)}),o.reloadStoredValueAuth(),o.registerAsLoginLogoutEventListener();var d=function(){if(o.urlProtocol!=e.HTTPS_PROTOCOL&&o.crossDomainRequestsEnabled===!0){o.useIframe=!0,o.eventHandlerMap={},o.eventHandlerMap[e.IFRAME_INIT_COMPLETE_EVENT]={success:c,error:c},o.initXDomainMessageListener();var t=o.createCrossDomainIFrame();null!=t&&(o.proxyFrame=t.contentWindow)}else o.useIframe=!1,c()};window.urlLocale?o.setStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE,window.urlLocale):o.clearStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE);var u=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))};if(o.previewMode||o.allowSiteSwitchingOnProduction){var p=u(t.URL_SITE_PARAM);p&&o.setStoredValue(t.LOCAL_STORAGE_SITE_ID,p)}else window.siteId&&o.setStoredValue(t.LOCAL_STORAGE_SITE_ID,window.siteId);var h=function(){if(null==o.endpointRegistry){var e=function(e){o.initProxy(e.httpPort,e.httpsPort),d()},t=function(e){var t=JSON.parse(e);"401"==t.status&&o.redirectToAdminLoginScreen(),null!=o.initFailCallback&&o.initFailCallback(),o.initFailed=!0};o.requestEndpointRegistry(e,t)}else d()},f=function(){if(o.profileType==t.PROFILE_TYPE_STOREFRONT&&!o.previewMode){var e=function(e){"401"==e.status&&o.redirectToAdminLoginScreen()};o.request(t.ENDPOINT_GET_MERCHANT_TIMEZONE,{},function(e){},e)}};if(r){if(n){var m=n;"string"==typeof n&&(m=JSON.parse(n)),o.endpointRegistry=m.endpointMap,o.crossDomainRequestsEnabled=m.crossDomainRequestsEnabled,o.profileType==t.PROFILE_TYPE_STOREFRONT&&o.initializeLastPublishedTimeStamp()}window.isPreviewMode&&(o.previewMode=window.isPreviewMode),o.initProxy(location.port,location.port),c()}else h(),i||f()},s.prototype.initXDomainMessageListener=function(){var e=this;window.addEventListener("message",function(t){var r=t.origin;if(r==e.crossDomainURLNoPath){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,n=i.success,o=i.payload,s=e.eventHandlerMap[a];s&&(n?s.success(o):s.error(o))}},!1)},s.prototype.proxyRequest=function(e,t,r,i,a){var n=this;n.currentRequestId>=s.MAX_INT?n.currentRequestId=0:n.currentRequestId++;var o=n.currentRequestId;n.eventHandlerMap[o]={success:r,error:i};var c={};c.id=o,c.target=e,c.payload=t,n.proxyFrame.postMessage(JSON.stringify(c),n.crossDomainURL,a)},s.prototype.proxyRequestRequired=function(e){var t=this;return!(!e||e.httpsRequired!==!0||"https"==t.urlProtocol)},s.prototype.login=function(e,t,r,i){var a={user:e,password:t};this.loginInternal(a,r,i)},s.prototype.mfaLogin=function(e,t,r,i,a){var n={user:e,password:t,totp_code:r};this.loginInternal(n,i,a)},s.prototype.samlLogin=function(e,t,r){var i=this,a={samlResponse:e};i.loginInternal(a,t,r)},s.prototype.loginInternal=function(a,n,o){var c=this,l=function(t){c.tokenSecret=t[e.OAUTH_ACCESS_TOKEN_PARAM],c.parseAndStoreClaims(),c.storeToken(c.tokenSecret),c.loggedIn=!0,n()},d=function(e){c.loggedIn=!1,e?o(e):r.Topic(i.topicNames.USER_NETWORK_ERROR).publish([{message:"failure"}])},u={};c.previewMode?(c.resetAdminPreviewToken(),u.tokenSecret=c.tokenSecret):c.clearSessionStoredValue(s.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_LAYOUT_PREVIEW),null!=a.samlResponse?c.doSamlLogin(a.samlResponse,l,d,u):a.totp_code&&null!==a.totp_code?c.doMFALogin(a.user,a.password,a.totp_code,l,d,u):c.doLogin(a.user,a.password,l,d,u)},s.prototype.doLogin=function(e,t,r,i,a){var n=this;n.useIframe&&n.proxyRequestRequired({httpsRequired:!0})?n.proxyRequest("login",{user:e,password:t},r,i):n.proxy.loginRequest(e,t,r,i,a)},s.prototype.doMFALogin=function(e,t,r,i,a,n){var o=this;o.useIframe&&o.proxyRequestRequired({httpsRequired:!0})?o.proxyRequest("login",{user:e,password:t},i,a):o.proxy.mfaLoginRequest(e,t,r,i,a,n)},s.prototype.doSamlLogin=function(e,t,r,i){var a=this;a.useIframe&&a.proxyRequestRequired({httpsRequired:!0})?a.proxyRequest("login",{samlResponse:e},t,r):a.proxy.samlLoginRequest(e,t,r,i)},s.prototype.generateSamlAuthnRequest=function(t,r){var i=this;i.authenticatedRequest(s.SAML_AUTHN_REQUEST_SERVICE_URL,{},t,r,e.POST)},s.prototype.logout=function(r,i){var a=this,n=s.LOGOUT_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN?n=s.ADMIN_LOGOUT_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(n=s.AGENT_LOGOUT_SERVICE_PATH);var o=function(){a.clearStoredValues(),a.clearValues(),a.loggedIn=!1,a.resetAdminPreviewToken()},c=function(e){o(),r()},l=function(e){o(),i(e)};a.authenticatedRequest(n,{},c,l,e.POST)},s.prototype.verify=function(r,i){var a=this,n=function(){a.loggedIn=!0,r()},o=function(e){a.clearStoredValues(),a.clearValues(),a.resetAdminPreviewToken(),i(e)},c=s.VERIFY_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN?c=s.ADMIN_VERIFY_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(c=s.AGENT_VERIFY_SERVICE_PATH),a.tokenSecret?a.authenticatedRequest(c,{},n,o,e.POST):o()},s.prototype.refresh=function(r,i){var a=this,n=s.REFRESH_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN||a.profileType==t.PROFILE_TYPE_LAYOUT_PREVIEW?n=s.ADMIN_REFRESH_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(n=s.AGENT_REFRESH_SERVICE_PATH);var o=function(t){a.tokenSecret=t[e.OAUTH_ACCESS_TOKEN_PARAM],a.parseAndStoreClaims(),a.storeToken(a.tokenSecret),a.loggedIn=!0,r(t)},c=function(e){e&&(a.handleSessionExpiry(),a.clearStoredValues(),a.clearValues(),a.resetAdminPreviewToken()),i(e)};if(a.external&&a.tokenSecret){var l=this.readToken();l||a.clearValues()}a.tokenSecret?a.authenticatedRequest(n,{},o,c,e.POST,!1,!0):c()},s.prototype.registerAsLoginLogoutEventListener=function(){var r=this,i=function(i){i||(i=window.event);var a=e.urlHostnamePortPortionOnly(i.url);if(a==r.url)if(i.key==r.getStoredValueName(s.LOCAL_STORAGE_TOKEN)){var n=!1;if(i.newValue&&(n=!0,r.tokenSecret=i.newValue,r.parseAndStoreClaims()),n){r.loggedIn=!0;for(var o=0;o<r.loginUpdateCallbacks.length;o++)r.loginUpdateCallbacks[o]()}else{r.clearValues();for(var c=0;c<r.logoutUpdateCallbacks.length;c++)r.logoutUpdateCallbacks[c]()}}else if(r.previewMode&&i.key==r.getStoredValueName(s.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_ADMIN))if(!i.newValue&&i.oldValue)for(var c=0;c<r.logoutAdminUpdateCallbacks.length;c++)r.logoutAdminUpdateCallbacks[c]();else for(var o=0;o<r.loginAdminUpdateCallbacks.length;o++)r.loginAdminUpdateCallbacks[o]()};window.addEventListener?window.addEventListener("storage",i,!1):window.attachEvent("onstorage",i)},s.prototype.reloadStoredValueAuth=function(){var e=this.readToken();return e?(this.tokenSecret=e,this.parseAndStoreClaims(),this.checkPreviewWhenLoggedIn(),!0):this.resetAdminPreviewToken()},s.prototype.checkPreviewWhenLoggedIn=function(){return this.resetAdminPreviewToken(!0)},s.prototype.resetAdminPreviewToken=function(e){var r=this;e=e&&"boolean"==typeof e;var i=r.getStoredValueName(s.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_ADMIN),n=r.getSessionStoredValue(i);return!(!n||r.profileType!=t.PROFILE_TYPE_STOREFRONT&&r.profileType!=t.PROFILE_TYPE_LAYOUT_PREVIEW||!r.isNotStore)&&(e||(r.tokenSecret=n),r.previewMode||(r.registerLoginAdminUpdateCallback(function(){r.resetAdminPreviewToken()}),r.registerLogoutAdminUpdateCallback(function(){r.clearStoredValues(),r.clearValues(),r.loggedIn=!1,a.getInstance().removeItem("user"),r.redirectToAdminLoginScreen()})),r.previewMode=!0,!0)},s.prototype.getAjaxConfig=function(e,t,r,i,a,n,o,s,c){var l=null,d=function(e,t){return t.beforeSend=c,l=t,!1};return this.request(e,t,r,i,a,n,o,s,d),l},s.prototype.request=function(e,r,i,a,n,o,s,c,l,d){var u=!0;this.profileType==t.PROFILE_TYPE_ADMIN&&(u=!1),this.requestWithSite(e,u,r,i,a,n,o,s,c,l,null,d)},s.prototype.requestWithSite=function(r,i,n,c,l,d,u,p,h,f,m,g){var v=this,y=function(){var y=v.registryLookup(r),b="GET",E=!1,I=r,T={};null!=y&&(E=y.authRequired,b=y.method,null!=I&&I.charAt(0)!=e.SLASH&&(I=y.url)),I=v.insertParamsIntoUri(I,[d,u,p,h]);var P=!1;v.useIframe&&v.proxyRequestRequired(y)&&(P=!0);var C=function(r){if(r&&r[e.ETAG_PROPERTY])try{var i=JSON.parse(e.decodeBase64(r[e.ETAG_PROPERTY]));i&&i.user&&(r.etag_lastModifiedBy=i.user),v.etagCache[I]=r[e.ETAG_PROPERTY]}catch(e){console.log("ETAG parse error: ",e)}if(r&&r[e.LAST_PUBLISHED_TIME_PROPERTY]){var n=r[e.LAST_PUBLISHED_TIME_PROPERTY];if(null!=v.lastPublishedTimeStamp&&v.lastPublishedTimeStamp<n){var s=a.getInstance().getItem(t.LAST_REFRESH_TIME);if(o.getInstance().refreshAfter()&&0!=o.getInstance().refreshAfter()&&null!=s){var l=o.getInstance().refreshAfter(),d=new Date(s);d.setSeconds(d.getSeconds()+l);var u=new Date;(u.toDateString()!==d.toDateString()||u.toDateString()===d.toDateString()&&u.getTime()>d.getTime())&&(v.lastPublishedTimeStamp=n,a.getInstance().setItem(t.LAST_REFRESH_TIME,new Date),v.isRefreshRequired=!0)}else v.lastPublishedTimeStamp=n,a.getInstance().setItem(t.LAST_REFRESH_TIME,new Date),v.isRefreshRequired=!0}}c(r)};if(!E&&v.loggedIn&&(E=!0),T=v.updateHeaderWithLocaleHint(y),T=v.updateHeaderWithPriceListGroupId(T),T=v.updateHeaderWithSelectedOrganization(T),T=v.updateHeaderWithAgentContext(T),T=v.updateHeaderWithViewport(T),T=v.updateHeaderWithShopperContext(T),T=v.updateHeaderWithSiteId(T,!1,i,m),T=v.updateHeaderWithVisitId(T),T=v.updateHeaderWithVisitorId(T),null!=y&&"PUT"===y.method&&v.etagCache[I]&&(T[e.ETAG]=v.etagCache[I],delete v.etagCache[I],y.useOptimisticLock&&(T["If-Match"]=T[e.ETAG])),1==E){var S=function(e){return e&&(e.status!=s.HTTP_UNAUTHORIZED_ERROR&&e.errorCode!==t.ERRORCODE_INVALID_SITE_ID||(v.clearStoredValues(),v.clearValues(),v.handleSessionExpiry()),e.errorCode===t.ERRORCODE_INVALID_SITE_ID)?(localStorage.clear(),window.location.reload(!0),!1):void l(e)};v.authenticatedRequest(I,n,C,S,b,P,null,T,f,g)}else v.unauthenticatedRequest(I,n,C,l,b,null,T,f)};v.registerInitCallback(y)},s.prototype.updateHeaderWithLocaleHint=function(i,a,n){var o=r.extend({},a),c=n||!1;if(!i)return o;if(!c&&o[e.ASSET_LANGUAGE_HEADER_NAME])return o;var l=i[s.LOCALE_HINT];if(!l)return o;var d;if(l===s.HINT_ASSET_LANGUAGE_OPTIONAL||l===s.HINT_ASSET_LANGUAGE_REQUIRED){var u=JSON.parse(this.getStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE));u&&u[0]?d=u[0].name:l===s.HINT_ASSET_LANGUAGE_REQUIRED&&(d="en")}return d&&d.length>0&&(o[e.ASSET_LANGUAGE_HEADER_NAME]=d),o},s.prototype.updateHeaderWithPriceListGroupId=function(i,a){var n=r.extend({},i),o=a||!1;if(!o&&n[e.PRICE_LIST_GROUP_ID])return n;var s;return s="string"==typeof this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID)?JSON.parse(this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID)):this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID),s&&(n[e.PRICE_LIST_GROUP_ID]=s),n},s.prototype.updateHeaderWithSelectedOrganization=function(i,n){var o=this,s=r.extend({},i),c=n||!1;if(!c&&s[e.ORGANIZATION_ID])return s;var l;return l="string"==typeof o.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID)?JSON.parse(o.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID)):o.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID),o.profileType===t.PROFILE_TYPE_AGENT&&(l=a.getInstance().readFromMemory(t.LOCAL_STORAGE_ORGANIZATION_ID)),l&&(s[e.ORGANIZATION_ID]=l),s},s.prototype.updateHeaderWithAgentContext=function(i,n){var o=r.extend({},i),s=n||!1;if(!s&&o[e.AGENT_CONTEXT])return o;var c=a.getInstance().readFromMemory(t.LOCAL_STORAGE_AGENT_CONTEXT);return"string"==typeof c&&(c=JSON.parse(c)),c&&(o[e.AGENT_CONTEXT]=c),o},s.prototype.updateHeaderWithViewport=function(t,i){var a=r.extend({},t),o=i||!1;if(!o&&a[e.VIEWPORT_HEADER_NAME])return a;var s=n.viewportDesignation();return s&&(a[e.VIEWPORT_HEADER_NAME]=s),a},s.prototype.updateHeaderWithShopperContext=function(i,n){var o=this,s=r.extend({},i),c=n||!1;if(!c&&s[e.XSTATEDATA])return s;if(o.profileType==t.PROFILE_TYPE_STOREFRONT||o.profileType==t.PROFILE_TYPE_AGENT){var l;l=a.getInstance().getItem(t.LOCAL_STORAGE_SHOPPER_CONTEXT),l&&(s[e.XSTATEDATA]=l)}return s},s.prototype.updateHeaderWithSiteId=function(i,n,o,s){var c=this,l=r.extend({},i),d=n||!1,u=o||!1;if(!d&&l[e.SITE_ID])return l;var p;return(c.allowSiteSwitchingOnProduction||c.previewMode||u)&&(p=s?s:!c.previewMode&&window.siteId?window.siteId:c.getStoredValue(t.LOCAL_STORAGE_SITE_ID),p&&(l[e.SITE_ID]=p)),c.profileType===t.PROFILE_TYPE_AGENT&&(p=a.getInstance().readFromMemory(t.LOCAL_STORAGE_SITE_ID),p&&(l[e.SITE_ID]=p)),l},s.prototype.updateHeaderWithVisitId=function(r){var i=window.localStorage.getItem(t.VISIT_ID);return null!=i&&(r[e.VISIT_ID]=i),r},s.prototype.updateHeaderWithVisitorId=function(r){var i=window.localStorage.getItem(t.VISITOR_ID);return null!=i&&(r[e.VISITOR_ID]=i),r},s.prototype.requestWithoutAssetLocale=function(t,r,i,a,n,o,c,l){var d=this,u=function(){var u,p,h=d.registryLookup(t),f="GET",m=!1,g=t;null!=h&&(m=h.authRequired,f=h.method,null!=g&&g.charAt(0)!=e.SLASH&&(g=h.url)),g=d.insertParamsIntoUri(g,[n,o,c,l]);var v=!1;d.useIframe&&d.proxyRequestRequired(h)&&(v=!0);var y=function(e){i(e)};if(!m&&d.loggedIn&&(m=!0),u=d.updateHeaderWithLocaleHint(h),u=d.updateHeaderWithViewport(u),p=h[s.LOCALE_HINT],p&&p!==s.HINT_ASSET_LANGUAGE_OPTIONAL||delete u[e.ASSET_LANGUAGE_HEADER_NAME],1==m){var b=function(e){e&&e.status==s.HTTP_UNAUTHORIZED_ERROR&&(d.clearStoredValues(),d.clearValues(),d.handleSessionExpiry()),a(e)};d.authenticatedRequest(g,r,y,b,f,v,null,u)}else d.unauthenticatedRequest(g,r,y,a,f,null,u)};d.registerInitCallback(u)},s.prototype.authenticatedRequest=function(e,t,r,i,a,n,o,s,c,l){var d=this;if(d.storeRequestWasMade=!0,d.external&&d.tokenSecret){var u=this.readToken();u||d.clearValues()}var p={tokenSecret:d.tokenSecret},h=function(e){var t=e;null!=t&&t.items&&t.autoWrap&&(t=t.items),r(t)},f=function(e,t){d.previewMode&&401==t&&!o&&d.redirectToAdminLoginScreen(),null!=d.commonErrorCallback&&p.tokenSecret===d.tokenSecret&&d.commonErrorCallback(e,t),i(e,t)};d.doAuthRequest(e,t,h,f,p,a,n,s,c,l)},s.prototype.doAuthRequest=function(e,t,r,i,a,n,o,c,l,d){var u=this;if(o){if(l)throw s.BEFORE_SEND_NOT_SUPPORTED;u.proxyRequest("auth",{url:e,data:t,clientProps:a,method:n},r,i,c)}else u.proxy.request(e,t,r,i,n,a,c,l,d)},s.prototype.unauthenticatedRequest=function(e,t,r,i,a,n,o,c){var l=this;l.storeRequestWasMade=!0;var d=function(e){var t=e;null!=t&&t.items&&t.autoWrap&&(t=t.items),r(t)},u=function(e,t){null!=l.commonErrorCallback&&l.commonErrorCallback(e,t),i(e,t)};if(n){if(c)throw s.BEFORE_SEND_NOT_SUPPORTED;l.proxyRequest("noauth",{url:e,data:t,method:a},r,u,o)}else l.proxy.request(e,t,d,u,a,null,o,c)},s.prototype.requestEndpointRegistry=function(i,a){var n=this,o=function(e){n.endpointRegistry=e.endpointMap,n.crossDomainRequestsEnabled=e.crossDomainRequestsEnabled,n.profileType==t.PROFILE_TYPE_STOREFRONT&&n.initializeLastPublishedTimeStamp(),i(e)},c=function(e){a(e)},l=s.ENDPOINT_REGISTRY_SERVICE_PATH;n.profileType==t.PROFILE_TYPE_ADMIN?l=s.ADMIN_ENDPOINT_REGISTRY_SERVICE_PATH:n.profileType==t.PROFILE_TYPE_AGENT&&(l=s.AGENT_ENDPOINT_REGISTRY_SERVICE_PATH);var d=null,u={dataType:e.JSON,type:e.GET,url:l,processData:!1,success:function(e,t,r){o(e)},error:function(e,t,r){var i=e.responseText;if(""!==i)try{i=JSON.parse(i)}catch(e){}c(e.responseText)}};n.profileType&&!n.previewMode&&(d={},d[e.PROFILE_TYPE_HEADER_NAME]=n.profileType),n.tokenSecret&&(null==d&&(d={}),d[e.AUTH_HEADER_NAME]=e.AUTH_HEADER_PREFIX+n.tokenSecret),d&&(u.headers=d),r.ajax(u)},s.prototype.initializeLastPublishedTimeStamp=function(){var e=this,t=function(t){t&&t.hasOwnProperty(s.LAST_PUBLISHED_TIME_STAMP)&&(e.lastPublishedTimeStamp=t[s.LAST_PUBLISHED_TIME_STAMP])},r=function(e){};e.request("getLastPublishedTime",null,t,r)},s.prototype.registryLookup=function(t){var r=this;if(null==this.endpointRegistry)return null;var i=e.convertUrl(t);if(null==i)return null;for(var a=null,n=i.length;n>0&&null==a;n--){var o=null,s=i.slice(0,n);if(o=s.join(e.EMPTY_STRING),a=r.endpointRegistry[o],null==a)for(var c=0;c<s.length&&null==a;c++){for(var l=0;l<c;l++){var d=s.length-1-l;1==d?s[d]=e.CURLY_BRACES:s[d]=e.SLASH+e.CURLY_BRACES}o=s.join(e.EMPTY_STRING),a=r.endpointRegistry[o]}}return a},s.prototype.insertParamsIntoUri=function(t,r){for(var i=t,a=0;a<r.length;a++)r[a]&&(i=i.replace(e.CURLY_BRACES,r[a]));return i},s.prototype.getStoredValueName=function(t,r){var i=this,a=r;return a||(a=i.profileType),a?t+e.DASH+a:t},s.prototype.storeToken=function(e){var t=this,r=t.getStoredValueName(s.LOCAL_STORAGE_TOKEN);t.setSessionStoredValue(r,e)},s.prototype.readToken=function(){var e=this,t=e.getStoredValueName(s.LOCAL_STORAGE_TOKEN),r=null;return r=e.getSessionStoredValue(t)},s.prototype.clearStoredValues=function(){var e=this;e.clearSessionStoredValue(s.LOCAL_STORAGE_TOKEN),e.profileType!==t.PROFILE_TYPE_LAYOUT_PREVIEW&&e.clearSessionStoredValue(s.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_LAYOUT_PREVIEW)},s.prototype.clearValues=function(){var e=this;e.tokenSecret=null,e.profileId=null,e.loggedIn=!1,e.external=!1},s.prototype.setStoredValue=function(e,t){var r=this,i=r.getStoredValueName(e);try{a.getInstance().setItem(i,t)}catch(e){}},s.prototype.getStoredValue=function(e){var t=this,r=t.getStoredValueName(e),i=null;try{i=a.getInstance().getItem(r)}catch(e){}return i},s.prototype.clearStoredValue=function(e){var t=this.getStoredValueName(e);void 0!==t&&null!==t&&a.getInstance().removeItem(t)},s.prototype.setSessionStoredValue=function(e,t){try{a.getInstance().setSessionItem(e,t)}catch(e){}},s.prototype.getSessionStoredValue=function(e){var t=null;try{t=a.getInstance().getSessionItem(e)}catch(e){}return t},s.prototype.clearSessionStoredValue=function(e,t){var r=this.getStoredValueName(e,t);void 0!==r&&null!==r&&a.getInstance().removeSessionItem(r)},s.prototype.parseAndStoreClaims=function(){var r=this,i=e.parseClaimsFromAccessToken(r.tokenSecret);null!=i&&(r.profileId=i[t.TOKEN_PROFILEID_PROPERTY],r.profileLogin=i[t.TOKEN_SUBJECT_PROPERTY],r.profileRoles=i[t.TOKEN_ROLES_PROPERTY])},s.prototype.insertAuthHeadersAsQueryParams=function(e,t){return e},s.prototype.createCrossDomainIFrame=function(){var e=this,t=s.IFRAME_NAME+"_"+e.profileType,r=e.crossDomainURL,i=document.createElement(s.IFRAME_ELEMENT);i.setAttribute(s.ID_ATTRIBUTE,t),i.setAttribute(s.NAME_ATTRIBUTE,t),i.setAttribute(s.WIDTH_ATTRIBUTE,s.ZERO),i.setAttribute(s.HEIGHT_ATTRIBUTE,s.ZERO),i.setAttribute(s.BORDER_ATTRIBUTE,s.ZERO),i.setAttribute(s.STYLE_ATTRIBUTE,s.IFRAME_STYLE),i.setAttribute(s.SRC_ATTRIBUTE,r);var a=null;try{document.body.appendChild(i),window.frames[t].name=t,a=document.getElementById(t)}catch(e){}return a},s.prototype.redirectToAdminLoginScreen=function(){var e=this;e.disableLoginErrorRedirect||(window.top!==window.self&&e.profileType==t.PROFILE_TYPE_LAYOUT_PREVIEW?window.top.location.href=s.ADMIN_LOGIN_SCREEN_URL:document.location.href=s.ADMIN_LOGIN_SCREEN_URL)},s.prototype.generateAuthUrl=function(t,r,i){var a,n=this,o=n.registryLookup(t),s=t;return null!=o&&(a=o.authRequired,s=o.url),s=n.insertParamsIntoUri(s,r),s=e.addQueryParams(s,i),a&&(s=n.insertAuthHeadersAsQueryParams(s,!0)),s},s}),define("ccRestClient",["ccRestClientConstructor","ccConstants","pubsub","ccStoreConfiguration"],function(e,t,r,i){"use strict";var a=function(e,i){(0==i||i<100||i>600)&&!e&&$.Topic(r.topicNames.USER_NETWORK_ERROR).publish([{message:"failure"}]),i==t.HTTP_UNAUTHORIZED_ERROR&&$.Topic(r.topicNames.USER_SESSION_EXPIRED).publish()},n=window.CCStorefrontPreviewMode===!0?t.PROFILE_TYPE_LAYOUT_PREVIEW:t.PROFILE_TYPE_STOREFRONT,o=new e(n,a);o.allowSiteSwitchingOnProduction=i.getInstance().allowSiteSwitchingOnProduction(),i.getInstance().allowSiteSwitchingOnProduction.subscribe(function(){o.allowSiteSwitchingOnProduction=i.getInstance().allowSiteSwitchingOnProduction()}),window.endpointRegistry?o.init(!0,!window.isPreviewMode,window.endpointRegistry):o.init(!1,!window.isPreviewMode);try{delete window.isPreviewMode,delete window.endpointRegistry}catch(e){window.isPreviewMode=void 0,window.endpointRegistry=void 0}return o}),define("profiletools",["ccRestClient","knockout","pubsub"],function(e,t,r){"use strict";function i(){var t=this;return t.restApi=e,$.Topic(r.topicNames.REGISTER_SUBMIT).subscribe(this.register),this}return i.prototype.login=function(e,t,r,i){var a=this;a.restApi.login(e,t,function(){r()},function(e){i(e)})},i.prototype.logout=function(){},i.prototype.register=function(e){var i,a,n;i=t.utils.unwrapObservable(e.email),a=t.utils.unwrapObservable(e.password),n=t.utils.unwrapObservable(e.confirmPassword),i&&a?a!==n?$.Topic(r.topicNames.REGISTER_FAILURE).publishWith(this,[{message:"Passwords do not match."}]):$.Topic(r.topicNames.REGISTER_SUCCESS).publishWith(this,[{message:"success"}]):$.Topic(r.topicNames.REGISTER_FAILURE).publishWith(this,[{message:"You must include at least a username and password."}])},i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("i18nextBackend",t):e.i18nextXHRBackend=t()}(this,function(){"use strict";function e(e){return a.call(n.call(arguments,1),function(t){if(t)for(var r in t)void 0===e[r]&&(e[r]=t[r])}),e}function t(e,t,r,i,a){if(i&&"object"===("undefined"==typeof i?"undefined":o(i))){var n="",s=encodeURIComponent;for(var c in i)n+="&"+s(c)+"="+s(i[c]);i=n.slice(1)+(a?"":"&_t="+new Date)}try{var l=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");l.open(i?"POST":"GET",e,1),t.crossDomain||l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.withCredentials=!!t.withCredentials,i&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){l.readyState>3&&r&&r(l.responseText,l)},l.send(i)}catch(e){window.console&&console.log(e)}}function r(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:t}}var i=[],a=i.forEach,n=i.slice,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(function(){function e(e){this.value=e}function t(t){function r(e,t){return new Promise(function(r,a){var s={key:e,arg:t,resolve:r,reject:a,next:null};o?o=o.next=s:(n=o=s,i(e,t))})}function i(r,n){try{var o=t[r](n),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):a(o.done?"return":"normal",o.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}n=n.next,n?i(n.key,n.arg):o=null}var n,o;this._invoke=r,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),c=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.init(e,r),this.type="backend"}return c(t,[{key:"init",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=e(i,this.options||{},r())}},{key:"readMulti",value:function(e,t,r){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(e,t));var a=this.services.interpolator.interpolate(i,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(a,r)}},{key:"read",value:function(e,t,r){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([e],[t]));var a=this.services.interpolator.interpolate(i,{lng:e,ns:t});this.loadUrl(a,r)}},{key:"loadUrl",value:function(e,t){var r=this;this.options.ajax(e,this.options,function(i,a){if(a.status>=500&&a.status<600)return t("failed loading "+e,!0);if(a.status>=400&&a.status<500)return t("failed loading "+e,!1);var n=void 0,o=void 0;try{n=r.options.parse(i,e)}catch(t){o="failed parsing "+e+" to json"}return o?t(o,!1):void t(null,n)})}},{key:"create",value:function(e,t,r,i){var a=this;"string"==typeof e&&(e=[e]);var n={};n[r]=i||"",e.forEach(function(e){var r=a.services.interpolator.interpolate(a.options.addPath,{lng:e,ns:t});a.options.ajax(r,a.options,function(e,t){},n)})}}]),t}();return l.type="backend",l}),define("ccLogger",[],function(){"use strict";function e(){}return e.prototype.info=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.info("(INFO) "+e,t):console.info("(INFO) "+e))},e.prototype.debug=function(e,t){"undefined"!=typeof console&&(console.debug||"undefined"==typeof console.log||(console.debug=console.log),"undefined"!==t&&null!==t?console.debug("(DEBUG) "+e,t):console.debug("(DEBUG) "+e))},e.prototype.warn=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.warn("(WARN) "+e,t):console.warn("(WARN) "+e))},e.prototype.error=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.error("(ERROR) "+e,t):console.error("(ERROR) "+e))},new e}),define("ccDate",["moment","ccConstants","ccLogger"],function(e,t,r){"use strict";function i(){}return i.prototype.DEFAULT_DATE_FORMAT="MM-DD-YYYY HH:mm:ss.SSS",i.prototype.init=function(e){e!=t.DEFAULT_LANG&&(requirejs.s.contexts._.nextTick=function(e){e()},require(["momentLangs/"+e.toLowerCase()],function(){},function(t){r.warn("No language file found for locale "+e)}),requirejs.s.contexts._.nextTick=requirejs.nextTick)},i.prototype.formats={time:"LT",short:"L",medium:"LL",long:"LLL",full:"LLLL",default:"LL"},i.prototype.getDateFormat=function(t){return t?e.localeData()._longDateFormat[this.formats[t]]:e.localeData()._longDateFormat[this.formats.default]},i.prototype.setDateToTimeZone=function(t,r){var i,a,n="";return!!t&&(a=new Date,i=a.toString().split(" ")[5].split("T")[1],r&&(t=t.slice(0,19)+i),n=e(t).format())},i.prototype.formatDateForEndpoint=function(t,r){var i;return!!t&&(i=r?e(t).format():e(t))},i.prototype.dateTimeFormatter=function(t,r,i){var a,n="";return!!t&&(r?n+=r:n=i&&this.formats[i]?this.formats[i]:this.formats.default,a=e(t).format(n))},i.prototype.formatDateAndTime=function(t,r,i,a){var n=this,o="";if(!t)return"";i?o+=i:o=a&&this.formats[a]?this.formats[a]:this.formats.default;var s=null;return r?(e(t,r).isValid()||(t=e(t).format(r)),t=e(t,r).format(n.DEFAULT_DATE_FORMAT),s=e(t,n.DEFAULT_DATE_FORMAT)):s=e(t),s.format(o)},i.prototype.parseDateAndTime=function(t,r){var i=null;return t&&r?i=e(t,r):""},new i}),define("CCi18n",["i18next","i18nextBackend","pubsub","ccDate","ccRestClient","ccConstants"],function(e,t,r,i,a,n){"use strict";function o(){var e,t,r,i=[];if(this.languageSet=!1,this.languageSetComplete=!1,this.initialized=!1,this.initComplete=!1,this.localeDeferred=$.Deferred(),this.initDeferred=$.Deferred(),t=$(":root").attr("lang")){var a=t.replace("-","_").split("_");a=this.normalizeLocale(a),e=a.join("-")}if(r=$(":root").data("accepted-langs")){for(var n=r.split(","),o=!1,s=0;s<n.length;s++){var c=n[s].replace("_","-");c=c.replace("_#",""),c!==t&&("zh-CN"===c&&(c="zh-Hans"),"zh-TW"===c&&(c="zh-Hant"),i.push(c),"en"===c&&(o=!0))}o||i.push("en")}this.i18nOptions={lng:e,compatibilityJSON:"v1",compatibilityAPI:"v1",preload:["en"],fallbackLng:i.length>1?i:"en",ns:["ns.common","ns.ccformats"],defaultNs:["ns.common"],contextSeparator:":",debug:!1,useLocalStorage:!1,useCookie:!1}}return o.prototype.normalizeLocale=function(e){return 3==e.length&&""===e[1]&&(e.splice(1,1),e[1]=e[1].replace("#","")),"zh"===e[0]&&"CN"===e[1]&&(e[1]="Hans"),"zh"===e[0]&&"TW"===e[1]&&(e[1]="Hant"),e},o.prototype.init=function(i,a){this.initialized=!0;var n=this;e.use(t).init(i,function(e){n.initComplete=!0,a&&a.apply(e),$.Topic(r.topicNames.LOCALE_READY).publish(e)})},o.prototype.deferInit=function(i,a){return this.initDeferred.done(function(n,o){$.extend(i,n),e.use(t).init(i,function(e){a&&a.apply(e),o&&o.apply(e),$.Topic(r.topicNames.LOCALE_READY).publish(e)})}),this.initDeferred.promise()},o.prototype.loadNamespace=function(t,r,i){e.loadNamespaces("ns."+t,function(){var a=r;r?a.returnObjectTrees=!0:a={returnObjectTrees:!0};var n=e.t("ns."+t+":resources",a);i(n)})},o.prototype.t=e.t.bind(e),o.prototype.addResourceBundle=function(t,r,i,a,n){e.addResourceBundle(t,r,i,a,n)},o.prototype.setLocale=function(t,a){var n=function(n){i.init(t),t!==e.lng()&&e.setLng(t,function(e){$.Topic(r.topicNames.LOCALE_SET).publish(t),a&&a.apply(e)})};this.initialized||this.initDeferred.isResolved?n():(this.initDeferred.resolve({fallbackLng:t,lng:t},a),this.localeDeferred.done(n))},o.prototype.setLocaleOnce=function(e,t){var r=e.replace("-","_").split("_");if("zh"===r[0]&&(r=this.normalizeLocale(r),e=r.join("-")),this.languageSet)this.languageSetComplete?t&&t.call(this):this.localeDeferred.done(t);else{var i=this;this.setLocale(e,function(e){t&&t.apply(this,e),i.languageSetComplete=!0,i.localeDeferred.resolve()}),this.languageSet=!0}},o.prototype.loadResources=function(e,t,r,i){var o={};o.locale=e;var s=function(e){if(e.hasOwnProperty(n.RESOURCES_KEY)){var t={};t.resources=e[n.RESOURCES_KEY],i(null,t)}else c(e)},c=function(e){a.commonErrorCallback(e,e.status),e.hasOwnProperty(n.ERRORS_KEY)&&i(e[n.ERRORS_KEY],null)};a.request(n.ENDPOINT_RESOURCES_GET_BUNDLE,o,s,c,t)},o.prototype.getLanguagesToResolveHierarchy=function(t){var r=e.services.languageUtils.toResolveHierarchy(t);return r},o.prototype.ajax=function(e,t,r){var i=e.match(/\/(ns\..*)\?locale=(.*)/),o=i[1],s=i[2],c={};c.locale=s;var l=function(e){if(e.hasOwnProperty(n.RESOURCES_KEY)){var t={};t.resources=e[n.RESOURCES_KEY],r(JSON.stringify(t),{status:200})}else d(e)},d=function(e){a.commonErrorCallback(e,e.status),e.hasOwnProperty(n.ERRORS_KEY)&&r(e[n.ERRORS_KEY],{status:e.status})};a.request(n.ENDPOINT_RESOURCES_GET_BUNDLE,c,l,d,o);
},o.prototype.disableNestedLookups=function(){this.reusePrefix=e.options.reusePrefix,e.options.reusePrefix="DISABLE_NESTED_LOOKUPS"},o.prototype.enableNestedLookups=function(){e.options.reusePrefix=this.reusePrefix},new o}),define("ccPasswordValidator",["knockout","CCi18n"],function(e,t){"use strict";function r(){}return r.prototype.LOWER_CASE_LETTERS="abcdefghijklmnopqrstuvwxyz",r.prototype.UPPER_CASE_LETTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r.prototype.NUMBER_LIST="0123456789",r.prototype.SYMBOLS_LIST="~!@#$%^&*()_-+={}[]|:;<>,./?",r.prototype.embeddedAssistance="",r.prototype.validate=function(e,t,r,i){var a=this;if(!r)return!0;var n=r.useMinPasswordLength,o=r.minPasswordLength,s=r.cannotUseUsername,c=r.useMixedCase,l=r.useNumber,d=r.useSymbol,u=r.allowedSymbols,p=(r.cannotUsePreviousPasswords,r.numberOfPreviousPasswords,!1);null!=e&&void 0!=e&&""!=e||(p=!0);var h,f=!1;"true"==n&&e.length<o&&(f=!0),"true"==s&&""!=t&&e.toLowerCase()===t.toLowerCase()&&(f=!0),"true"==l&&(h=a.checkAgainst(e,a.NUMBER_LIST),h||(f=!0)),"true"==d&&(h=a.checkAgainst(e,u),h||(f=!0)),"true"==c&&(h=a.hasMixedCase(e),h||(f=!0));var m=!1;return f?(m=!1,a.embeddedAssistance=a.getAllEmbeddedAssistance(r,i)):(a.embeddedAssistance="",m=!0),!!p||m},r.prototype.getAllEmbeddedAssistance=function(e,r){var i=e.useMinPasswordLength,a=e.minPasswordLength,n=e.cannotUseUsername,o=e.useMixedCase,s=e.useNumber,c=e.useSymbol,l=e.allowedSymbols,d=e.cannotUsePreviousPasswords,u=(e.numberOfPreviousPasswords,t.t("ns.common:resources.embeddedAssistancePreText")),p=!1;return"true"==i&&(u+=" "+t.t("ns.common:resources.embeddedAssistanceMinPasswordLengthText",{min:a}),p=!0),"true"==n&&(u+=1==p?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceCannotUseUsernameText"),p=!0),"true"==s&&(u+=1==p?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseNumber"),p=!0),"true"==c&&(u+=1==p?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseSymbol",{chars:l}),p=!0),"true"==o&&(u+=1==p?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseMixedCase"),p=!0),1==r&&"true"==d&&(u+=1==p?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceNotInPreviousNPasswords"),p=!0),u+="."},r.prototype.hasMixedCase=function(e){var t=this,r=!1;if(null==e)return!1;for(var i=!1,a=!1,n=0;n<e.length;n++){var o=e.charAt(n);t.LOWER_CASE_LETTERS.lastIndexOf(o)!=-1&&(i=!0),t.UPPER_CASE_LETTERS.lastIndexOf(o)!=-1&&(a=!0)}return i&&a&&(r=!0),r},r.prototype.checkAgainst=function(e,t){var r=!1;if(null==e)return!1;if(0==t.length)return!0;for(var i=0;i<e.length;i++){var a=e.charAt(i);t.lastIndexOf(a)!=-1&&(r=!0)}return r},new r}),define("ccKoValidateRules",["knockout","jqueryui","koValidate","ccPasswordValidator"],function(e,t,r,i){"use strict";e.validation.rules.creditcard={validator:function(t,r){if(!r)return!1;if(!(r.iin&&r.length&&e.isObservable(r.iin)&&e.isObservable(r.length)))return!1;var i=r.iin(),a=r.length();if(!i||!a||""===i||""===a)return!1;if(!t||""===t)return"0"===a;var n=t,o=new RegExp("^("+i+")");if(!n.match(o))return!1;for(var s=a.split("|"),c="",l=0;l<s.length;l++)0!==l&&(c+="|"),c+="^[0-9]{"+s[l]+"}$";var d=new RegExp(c);if(!n.match(d))return!1;var u=function(e){for(var t=0,r=e.length,i=1;i<=r;i++){var a=parseInt(e[r-i],10);i%2==0&&(a*=2,a>9&&(a-=9)),t+=a}return t%10==0};return!!u(n)},message:"Card Number is invalid."},e.validation.rules.cvv={validator:function(t,r){if(!r)return!1;var i=0;if(i=e.isObservable(r)?r():r,i=parseInt(i,10),!t||""===t)return 0===i;var a=new RegExp("^[0-9]{"+i+"}$");return!!t.match(a)},message:"Card CVV is invalid."};var a=e.observable(!0),n=e.observable(!0);e.validation.rules.startmonth={validator:function(t,r){if(!r||!e.isObservable(r))return!1;if(!t||""===t)return!0;var i=t,n=new RegExp("^((0[1-9])|(1[0-2]))$");if(!i.match(n))return!1;if(!r())return!0;var o=new Date,s=o.getUTCFullYear(),c=o.getUTCMonth();return parseInt(r(),10)===s&&parseInt(i,10)>++c?(a(!1),!1):(a(!0),!0)},message:"Start Month is invalid."},e.validation.rules.startyear={validator:function(e){return!e||""===e||a()},message:"Start Year is invalid."},e.validation.rules.importFileName={validator:function(e){var t=[".csv"];return new RegExp("("+t.join("|").replace(/\./g,"\\.")+")$").test(e)},message:"invalid file extension."},e.validation.rules.mediaZipFileName={validator:function(e){var t=[".zip"];return new RegExp("("+t.join("|").replace(/\./g,"\\.")+")$").test(e)}},e.validation.rules.endmonth={validator:function(e,t){if(!e||""===e)return!0;var r=e,i=new RegExp("^((0[1-9])|(1[0-2]))$");if(!r.match(i))return!1;if(!t)return!0;var a=new Date,o=a.getUTCFullYear(),s=a.getUTCMonth();return parseInt(t,10)===o&&parseInt(r,10)<++s?(n(!1),!1):(n(!0),!0)},message:"End Month is invalid."},e.validation.rules.endyear={validator:function(e){return!e||""===e||n()},message:"End Year is invalid."},e.validation.rules.observablePattern={validator:function(t,r){if(!r)return!1;var i="";if(i=e.isObservable(r)?r():r,!i||""===i)return!1;if(!t||""===t)return!0;var a=new RegExp(i);return!!t.match(a)},message:"Observable Pattern Match Failed."},e.validation.rules.alphaNumeric={validator:function(e){return!e||e.match(/^[A-Za-z0-9(\s)]+$/)},message:"Field may only contain alphanumeric characters"},e.validation.rules.bool={validator:function(e){return e===!0||!e},message:"Value must be true or false"},e.validation.rules.alphaNumericWithSeperators={validator:function(e){return!e||e.match(/^[A-Za-z0-9_\-\s]+$/)},message:"Field may only contain alphanumeric characters and -, spaces, or _"},e.validation.rules.alphaNumericNoSpacesWithSeperators={validator:function(e){return!e||e.match(/^[A-Za-z0-9_\-]+$/)},message:"Field may only contain alphanumeric characters and - or _"},e.validation.rules.restrictSlashCharacters={validator:function(e){return!e||!e.match(/[\/\\]+/)},message:"Field may not contain forwardslash or backslash."},e.validation.rules.alphaNumericNoSpaces={validator:function(e){return!e||e.match(/^[A-Za-z0-9]+$/)},message:"Field may only contain alphanumeric characters and no spaces"},e.validation.rules.cartPicker={validator:function(e){if(!e)return!0;var t,r=e.length;for(t=0;t<r;t++){var i=parseInt(e[t].quantity,10);if(""!=e[t].productId){if(isNaN(i)||i<=0||i>=100)return!1}else if(""!=e[t].quantity)return!1}var a=0,n=[],o={};for(t=0;t<r;t++)""!=e[t].productId&&(o[e[t].productId]=0,a+=1);for(t in o)n.push(t);return!(a>n.length)},message:"Please ensure each item has a quantity specified"},e.validation.rules.cartPickerUniqueProducts={validator:function(e){if(!e)return!0;var t,r=e.length,i=0,a=[],n={};for(t=0;t<r;t++)""!=e[t].productId&&(n[e[t].productId]=0,i+=1);for(t in n)a.push(t);return!(i>a.length)},message:"Please ensure there are no Duplicate product IDs"},e.validation.rules.price={validator:function(e,t){return!t||(null===e||"undefined"==typeof e||""===e||/^\d*\.?\d+$/.test(e))},message:"Please enter a valid price"},e.validation.rules.laterDate={validator:function(e,t){var r,i,a;return!!e&&(r=new Date(e),i=new Date,a=i-r,a<0)},message:"Please enter a proper date"},e.validation.rules.url={validator:function(e,t){if("boolean"==typeof t&&!t)return!0;if(t instanceof Object&&t.validate&&t.validate===!1)return!0;var r=!1;t instanceof Object&&t.protocolOptional&&(r=t.protocolOptional);var i=/^(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!-\/]))?$/,a=/^(ftp|http|https)?:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!-\/]))?$/;if(e){for(var n=e.split("\n"),o=[],s=0;s<n.length;s++)for(var c=n[s].split(","),l=0;l<c.length;l++)o.push(c[l]);for(var d=/^(ftp|http|https):\/\//,u=/:\/\//,p=0;p<o.length;p++)if(!r||u.test(o[p].trim())||d.test(o[p].trim())){if(!a.test(o[p].trim()))return!1}else if(!i.test(o[p].trim()))return!1;return!0}return!0},message:"Please enter a valid URL"},e.validation.rules.absoluteOrRelativeURL={validator:function(e,t){if(!t)return!0;var r=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))?\.?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i,i=/^\/\S*$/i;return!e||!(!r.test(e)&&!i.test(e))},message:"Please enter a valid URL"},e.validation.rules.number={validator:function(e,t){return!t||(null===e||"undefined"==typeof e||""===e||t&&/^-?\d*\.?\d+$/.test(e))},message:"Please enter a number"},e.validation.rules.match={getValue:function(e){return"function"==typeof e?e():e},validator:function(e,t){return e===this.getValue(t)},message:"Values must match"},e.validation.rules.propertyIdAlreadyInUse={validator:function(e,t){var r;if(t&&e&&t.createProperty()&&t.existingPropertyids())for(var i=(t.existingPropertyids,0),a=t.existingPropertyids().length;i<a;++i)if(t.existingPropertyids()[i]&&(r=t.existingPropertyids()[i].id,r&&e.toLowerCase()===r.toLowerCase()))return!1;return!0},message:"Property Id is already in use"},e.validation.rules.propertyNameAlreadyInUse={validator:function(e,t){var r;if(t&&e&&t.existingPropertyName())for(var i=(t.existingPropertyName,0),a=t.existingPropertyName().length;i<a;++i)if(t.existingPropertyName()[i]&&(r=t.existingPropertyName()[i].displayName))if(t.createProperty()){if(e.toLowerCase()===r.toLowerCase())return!1}else if(""!=t.prevPropertyName()&&null!=t.prevPropertyName()&&e.toLowerCase()!==t.prevPropertyName().toLowerCase()&&e.toLowerCase()===r.toLowerCase())return!1;return!0},message:"Property Name is already in use"},e.validation.rules.password={validator:function(t,r){var a=r.login(),n=r.policies(),o=r.observable,s=r.includePreviousNPasswordRule(),c=i.validate(t,a,n,s);return o.embeddedAssistance=e.observable(i.embeddedAssistance),c},message:"The password entered does not comply with the password policy"},e.validation.rules.uniqueTrimmed={validator:function(t,r){return e.validation.rules.unique.validator(t.trim(),r)}},e.validation.rules.uniqueTrimmedCaseInsensitive={validator:function(t,r){return!t||e.validation.rules.uniqueTrimmed.validator(t.toLowerCase(),r)}},e.validation.rules.maxItemQuantity={validator:function(e,t){if(t&&e){if(t.orderableQuantity&&t.totalQuantity&&t.totalQuantity(!0)>t.orderableQuantity)return!1;if(t.orderLimit&&t.orderLimit<t.totalQuantity(!1))return!1;if("number"==typeof t&&e>t)return!1;if(t.childItems)for(var r=0;r<t.childItems.length;r++){var i=t.childItems[r].productId;if(t.totalQuantity&&t.totalQuantity(!1,i)>t.childItems[r].orderableQuantity)return!1}}return!0}},e.validation.registerExtenders()}),define("pageLayout/simple-cache",["knockout"],function(e){"use strict";function t(){return this.cache={},this}return t.prototype.set=function(e,t,r){var i;this.cache[e]?i=this.cache[e]:(i={},this.cache[e]=i),i[t]=r},t.prototype.get=function(e,t){var r;return this.cache[e]&&(r=this.cache[e][t],r||null===r||r===!1)?{result:r,hit:!0}:{result:null,hit:!1}},t.prototype.flush=function(){this.cache={}},t}),define("navigation",["jquery","crossroads","hasher","pubsub"],function(e,t,r,i){"use strict";function a(){var t,a=this,n=e.Deferred();e.Topic(i.topicNames.USER_UNAUTHORIZED).subscribe(function(e){a.loginHandlerPage=a.getPath(),n.done(function(){t(e)})}),a.setHash=function(e){r.setHash(e)},a.getHash=function(){return r.getHash()},a.setLoginHandler=function(e){t=e,n.resolve()},a.checkLogin=function(e){if(e.indexOf("?loggedIn=false")>-1){var r=e.indexOf("page=")+5,i=decodeURIComponent(e.substr(r));i.indexOf("&")>-1&&(i=i.substr(0,i.indexOf("&"))),i="/"===i.charAt(0)?i:"/"+i;var o=[{message:"success",linkToRedirect:i}];"/"==e.charAt(0)?a.loginHandlerPage=e.substr(1,e.indexOf("?")-1):a.loginHandlerPage=e.substr(0,e.indexOf("?")-1),n.done(function(){t(o)})}},a.goTo=function(t,r,n){var o=a.getPathWithLocale(t);if(r)e.Topic(i.topicNames.HISTORY_PUSH_STATE).publish(o);else if(window.history&&window.history.pushState)n?window.history.replaceState(null,"",o):window.history.pushState(null,"",o),e.Topic(i.topicNames.HISTORY_PUSH_STATE).publish(o),a.checkLogin&&a.checkLogin(t);else{var s=a.getBaseURL()+("/"===o.charAt(0)?o:"/"+o);window.location.assign(s)}},a.getPath=function(){var e=window.location.pathname;return"/"===e.charAt(0)&&(e=e.substr(1)),e},a.getRelativePath=function(){var e=window.location.pathname;return"/"!==e.charAt(0)&&(e="/"+e),e},a.isPathEqualTo=function(e){if(e){var t=a.getPathWithoutLocale(),r=a.getPathWithoutLocale(e);return t="/"===t.charAt(0)?t.substr(1):t,r="/"===r.charAt(0)?r.substr(1):r,0===t.indexOf(r)}return!1},a.getQueryString=function(){return window.location.search},a.getBaseURL=function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e=window.siteBaseURLPath;return e&&"/"!==e?"/"===e.substr(0,1)?window.location.origin+e:window.location.origin+"/"+e:window.location.origin},a.getPathWithoutLocale=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.urlLocale){var r=JSON.parse(window.urlLocale)[0].name,i=t.split("/");if(i.length>=2)for(var a=window.siteBaseURLPath,n=0;n<i.length;n++)i[n]===r?t=t.replace("/"+i[n],""):a&&"/"!==a&&(t=t.replace(a,""))}return t},a.getPathWithoutFacebookContext=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.FacebookCanvas){var r=t.split("/");r.length>=2&&"facebook"==r[1]&&(t=t.replace("/"+r[1],"/wishlist"))}return t},a.getPathWithoutContext=function(e){return e=a.getPathWithoutLocale(e),e=a.getPathWithoutFacebookContext(e)},a.getPathWithLocale=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.urlLocale){var r=JSON.parse(window.urlLocale)[0].name;t="/"===t.charAt(0)?t:"/"+t,t.indexOf("/"+r)===-1&&(t.indexOf("/")===-1&&(t="/"+t),t="/"+r+t)}var i=window.siteBaseURLPath;return i&&t.substr(0,i.length)!==i?i+t:t},a.getLocaleBasedUrl=function(e){var t=window.siteBaseURLPath,r=a.getPathWithoutLocale(),i="";return i="/"!==t?a.getBaseURL()+"/"+e+r.replace(t,""):a.getBaseURL()+"/"+e+r},a.doLogin=function(e,t){if(a.getPathWithoutLocale().indexOf("?loggedIn=false")<0){var r=t?t:window.location.pathname;r=r+"?loggedIn=false&page="+encodeURIComponent(e),a.goTo(r)}},a.cancelLogin=function(){a.goTo(window.location.pathname)}}return new a}),define("pageLayout/rest-adapter",["jquery","knockout","ccRestClient","ccConstants","pageLayout/simple-cache","navigation"],function(e,t,r,i,a,n){"use strict";function o(e){return this.basePath=e,this.cache=new a,this.cacheLoaders={},this.registerCacheLoader(c,this.defaultCacheLoader),this}var s=r,c="__default__";return o.prototype.restToDataTypes={widget:"widget",widgetDefinition:"widgetDefinition",layout:"layout",cart:"product",productList:"product",categoryList:"category"},o.prototype.defaultCacheLoader=function(e,t,r,i){for(var a=0;a<i.length;a++)r[a]&&r[a].id&&i[a]===r[a].id&&e.set(t,i[a],r[a])},o.prototype.registerCacheLoader=function(e,t){this.cacheLoaders[e]=t},o.prototype.getCacheLoader=function(e){return this.cacheLoaders[e]},o.prototype.reassembleDataFromCache=function(e,t){for(var r=this,i=[],a=0;a<t.length;a++)i.push(r.cache.get(e,t[a]).result);return i},o.prototype.cachedRootCategories=function(e,t){},o.prototype.cachedLoadJSON=function(e,t,r,i,a){var n,o,s=this,l=this.restToDataTypes[e],d=function(r){var a,n;n=s.getCacheLoader(e),n||(n=s.getCacheLoader(c)),l&&(o instanceof Array?o instanceof Array&&(n(s.cache,l,r,o),a=s.reassembleDataFromCache(l,t)):(n(s.cache,l,r,[o]),a=r)),i(a)};if(t instanceof Array){o=[];for(var u=0;u<t.length;u++)n=s.cache.get(l,t[u]),n.hit||o.push(t[u]);if(!(o.length>0))return s.reassembleDataFromCache(l,t);this.loadJSON(e,o,r,d,a)}else o=t,n=s.cache.get(l,t),n.hit?i(n.result):this.loadJSON(e,o,r,d,a)},o.prototype.loadJSON=function(t,r,a,o,c){var l,d,u;switch(e.isFunction(a)&&(c=o,o=a,a=null),t){case"widget":l="../shared/widget/"+r+"/non-dist/data/widget.json";break;case"widgetDefinition":l="../shared/widget/"+r+"/non-dist/data/widget.json"}if(l)return void e.ajax({url:l,dataType:"json",type:"GET",success:o,error:c});d={};var p=null,h=!1;switch(t){case"layout":l=i.ENDPOINT_PAGES_GET_PAGE,p=r,d=a;break;case"cart":if(!r||"object"!=typeof r||r.length<1)throw"Error with getting cart";a&&(d=a),d[i.CATALOG]=r[0],d[i.PRODUCT_IDS]=r[1],r[2]&&(d[i.INCLUDE_HISTORICAL]=r[2]),r[3]&&(d[i.STORE_PRICELISTGROUP_ID]=r[3]),r[4]&&(d[i.FIELDS_QUERY_PARAM]=r[4]),r[5]&&(d[i.INCLUDE_CKILD_SKUS_LISTING_IDS]=r[5]),l=i.ENDPOINT_PRODUCTS_LIST_PRODUCTS;break;case"getCurrentProfileOrder":a&&(d=a),l=i.ENDPOINT_GET_PROFILE_ORDER,u="price";break;case"getStockStatus":a&&(d=a),p=r[1],d[i.SKU_ID]=r[0],d[i.CATALOG]=r[2],l=i.ENDPOINT_GET_PRODUCT_AVAILABILITY;break;case i.ENDPOINT_GET_INITIAL_ORDER:p=r,d=a,l=i.ENDPOINT_GET_INITIAL_ORDER;break;case"getStockStatuses":d[i.PRODUCTS_PARAM]=a.products,d[i.CATALOG]=a.catalogId,a.filterKey&&a.filterKey.length>0&&(d[i.FILTER_KEY]=a.filterKey),l=i.ENDPOINT_PRODUCTS_AVAILABILITY;break;case i.ENDPOINT_GET_PRODUCT_PRICES:p=r,a&&(d[i.SKU_ID]=a),null!=a&&a.constructor===Object&&a.filterKey&&a.filterKey.length>0&&(d[i.FILTER_KEY]=a.filterKey),l=i.ENDPOINT_GET_PRODUCT_PRICES;break;case"orderPricing":d=a,l=i.ENDPOINT_ORDERS_PRICE_ORDER,d[i.CHECKOUT]=!0,u="price";break;case"product":if(!r||"object"!=typeof r||r.length<=1)throw"Error with getting product";a&&(d=a),d[i.CATALOG]=r[1],l=i.ENDPOINT_PRODUCTS_GET_PRODUCT,p=r[0],u="product";break;case"productList":l=i.ENDPOINT_PRODUCTS_LIST_PRODUCTS,a&&(d=a),d[i.CATEGORY]=r,d[i.INCL_CHILDREN]=!0;break;case"categoryList":if(!r||"object"!=typeof r||r.length<=1)throw"Error with getting category list";a&&(d=a),d[i.CATALOG]=r[1],d[i.CATALOG_MAXLEVEL_PARAM]=r[2],d[i.EXPAND_QUERY_PARAM]="childCategories",r[3]?d[i.FIELDS_QUERY_PARAM]=r[3]:d.filterKey||(d[i.FIELDS_QUERY_PARAM]="childCategories(items)"),h=!0,l=i.ENDPOINT_COLLECTIONS_GET_COLLECTION,p=r[0];break;case"search":d=a,l=i.ENDPOINT_SEARCH_SEARCH;break;case"assembler":d=a,l=i.ENDPOINT_ASSEMBLE,p="assemble";break;case"paymentauthresponse":p=r,d=a,l=i.ENDPOINT_PAYMENT_GET_PAYMENT_AUTH_RESPONSE;break;case"paymentGroup":a&&(d=a),p=r,l=i.ENDPOINT_GET_PAYMENT_GROUP;break;case"getUser":a&&(d=a),l=i.ENDPOINT_GET_CURRENT_USER;break;case"updateProfile":p=null,d=a,l=i.ENDPOINT_UPDATE_PROFILE;break;case"changePassword":p=null,d=a,l=i.ENDPOINT_UPDATE_PROFILE;break;case"getAllOrdersForProfile":d=a,l=i.ENDPOINT_GET_ALL_ORDERS_FOR_PROFILE;break;case"getAllOrdersCountForProfile":d=a,null===d&&(d={}),d[i.COUNT_ONLY]=!0,l=i.ENDPOINT_GET_ALL_ORDERS_FOR_PROFILE;break;case"dynamicProperties":p=r,l=i.ENDPOINT_METADATA_GET_METADATA,d=a,null===d&&(d={}),d[i.DYNAMIC_ONLY]=!0;break;case"getItemType":p=r,l=i.ENDPOINT_GET_ITEM_TYPE,d=a,null===d&&(d={}),d[i.INCLUDE_BASE]=!1,d[i.PARENT]=r;break;case"sku":if(!r||"object"!=typeof r||r.length<1)throw"Error with getting sku";a&&(d=a),d[i.CATALOG]=r[0],d[i.SKU_IDS]=r[1],d[i.PROD_STATE]=r[2],r[3]&&(d[i.STORE_PRICELISTGROUP_ID]=r[3]),l=i.ENDPOINT_PRODUCTS_LIST_SKUS;break;case"getGiftWithPurchaseChoices":l=i.ENDPOINT_GET_GIFT_CHOICES,a&&(d=a),d[i.GIFT_WITH_PURCHASE_DETAIL]=r[0],d[i.GIFT_WITH_PURCHASE_TYPE]=r[1];break;case"scheduledOrder":d=a,p=r,l=i.ENDPOINT_GET_SCHEDULED_ORDER;break;case"scheduledOrders":d=a,l=i.ENDPOINT_LIST_SCHEDULED_ORDERS_BY_PROFILE;break;case"listMembers":d=a,l=i.ENDPOINT_LIST_CONTACTS_BY_ORGANIZATION}if(!l)throw"No REST target found for item type: "+t;s.request(l,d,function(e){if(o){var t=e;h&&(t=t.items),o(t,u)}},function(e){e.status==i.HTTP_NOT_FOUND?n.goTo("/404",!0,!0):c&&e&&c(e)},p)},o.prototype.persistCreate=function(t,r,a,n,o,c){var l,d={};switch(e.isFunction(n)&&(c=o,o=n,n=null),t){case i.ENDPOINT_ORDERS_PRICE_ORDER:d=a,l=i.ENDPOINT_ORDERS_PRICE_ORDER;break;case i.ENDPOINT_CREATE_PROFILE:d=a,l=i.ENDPOINT_CREATE_PROFILE;break;case i.ENDPOINT_FORGOT_PASSWORD:d=a,l=i.ENDPOINT_FORGOT_PASSWORD;break;case i.ENDPOINT_UPDATE_EXPIRED_PASSWORD:d=a,l=i.ENDPOINT_UPDATE_EXPIRED_PASSWORD;break;case i.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS:d=a,l=i.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS;break;case"product":break;case"order":d=a,null!=n&&n.incomplete?(l=i.ENDPOINT_UPDATE_PROFILE_ORDER,d[i.OP]=i.CREATE_OP):l=i.ENDPOINT_ORDERS_CREATE_ORDER;break;case"requestQuote":d=a,l=i.ENDPOINT_QUOTE_REQUEST;break;case"rejectQuote":d=a,l=i.ENDPOINT_QUOTE_REJECT;break;case"payment":d=a,l=i.ENDPOINT_PAYMENT_AUTH_PAYMENT,d[i.SITE_ID]=n;break;case"scheduledOrder":d=a,l=i.ENDPOINT_CREATE_SCHEDULED_ORDER;break;case"addPayments":d=a,l=i.ADD_ORDER_PAYMENTS}if(!l)throw"No REST target found for item type: "+t;s.request(l,d,o,c)},o.prototype.persistUpdate=function(t,r,a,n,o,c){var l,d={},u=null;switch(e.isFunction(n)&&(c=o,o=n,n=null),t){case"product":break;case"order":d=a,l=i.ENDPOINT_UPDATE_PROFILE_ORDER,d[i.OP]=i.UPDATE_OP;break;case"updateOrder":d=a,u=r,l=i.ENDPOINT_UPDATE_ORDER;break;case"scheduledOrder":d=a,u=r,l=i.ENDPOINT_UPDATE_SCHEDULED_ORDER;break;case"updateOrganization":d=a,u=r,l=i.ENDPOINT_UPDATE_ORGANIZATION}if(!l)throw"No REST target found for item type: "+t;s.request(l,d,o,c,u)},o.prototype.persistRemove=function(t,r,a,n,o){var c,l={},d=null;switch(e.isFunction(a)&&(o=n,n=a,a=null),t){case"product":break;case"order":c=i.ENDPOINT_REMOVE_PROFILE_INCOMPLETE_ORDER;break;case"scheduledOrder":c=i.ENDPOINT_DELETE_SCHEDULED_ORDER,d=r}if(!c)throw"No REST target found for item type: "+t;s.request(c,l,n,o,d)},o}),define("pageLayout/api-builder",["knockout"],function(e){"use strict";return{regionBuilder:function(e,t){},widgetBuilder:function(e,t){e.prototype.getCurrent=function(e){var r=t.viewModelBuilder[e];return r?r.scope?t.contextHandler.get(e,r.scope):t.contextHandler.get(e,"page"):t.contextHandler.get(e)},e.prototype.setCurrent=function(e,r){var i=t.viewModelBuilder[e];i?i.scope?t.contextHandler.set(e,r,i.scope):t.contextHandler.set(e,r,"page"):t.contextHandler.set(e,r)},e.prototype.listen=function(e,r){t.contextHandler.listen(e,r)},e.prototype.load=function(e,r,i,a,n,o){t.load(e,r,i,a,n,o)},e.prototype.update=function(e,r,i,a,n,o,s){t.update(e,r,i,a,n,o,s)},e.prototype.create=function(e,r,i,a,n,o,s){t.create(e,r,i,a,n,o,s)},e.prototype.remove=function(e,r,i,a,n,o){t.remove(e,r,i,a,n,o)}}}}),define("ccNavState",["module","knockout","pubsub","ccConstants","navigation"],function(e,t,r,i,a){"use strict";function n(){var e=this;e.statusCode=t.observable(),e.referrer=t.observable(),e.slug=t.observable(),e.pageId=t.observable(),e.pageNumber=t.observable(),e.pageContext=t.observable(),e.route=t.observable(),$.Topic(r.topicNames.PAGE_VIEW_CHANGED).subscribe(function(t){t.pageId!=i.HTTP_NOT_FOUND?(e.statusCode(i.HTTP_OK),e.referrer(a.getPathWithLocale()),e.pageId(t.pageId),e.slug(t.seoslug),e.pageContext(t.contextId),e.pageNumber(t.pageNumber)):e.statusCode(i.HTTP_NOT_FOUND)})}return function(){var t;return null!=n.prototype._singleInstance?t=n.prototype._singleInstance:(t=new n,t.statusCode(e.config().statusCode),t.referrer(e.config().referrer),t.slug(e.config().slug),t.pageId(e.config().pageid),t.pageNumber(e.config().pageNumber),t.pageContext(e.config().pageContext),n.prototype._singleInstance=t),t}()}),define("routing",["jquery","crossroads","pubsub","ccConstants","navigation","ccNavState"],function(e,t,r,i,a,n){"use strict";function o(){function o(e,t){return e&&(e="/"===e.charAt(0)?e.substr(1):e),t&&(t="/"===t.charAt(0)?t.substr(1):t),e===t}function f(t,i,n){"/"==t&&(t="home"),t="/"===t.charAt(0)?t.substr(1):t;var l=!1;t=a.getPathWithoutLocale(t),o(s,t)&&n&&(l=!0),e.Topic(r.topicNames.PAGE_PAGINATION_CHANGE).publish({page:n,paginationOnly:l},[{message:"success"}]),i&&b.shouldDecode(t)&&(i=decodeURIComponent(i));var d={path:t,parameters:i,page:n,paginationOnly:l};l?c!==i&&e.Topic(r.topicNames.PAGE_PARAMETERS_CHANGED).publish(d):b.handleViewChanged(d),s=t,c=i,p=!0}function m(e,t,r){f(e,r,t)}function g(e){n.route(e),h[e]||(h[e]={pageNumber:t.addRoute(e+"/{pageNumber}",null,800),pageNumberParameters:t.addRoute(e+"/{pageNumber}?{parameters}",null,850)},h[e].pageNumber.matched.add(function(t){m(e,t)}),h[e].pageNumberParameters.matched.add(function(t,r){m(e,t,r)}))}function v(e,t){if("category"===e.data.page.pageId){var r=e.data.page.category.route;g(r)}}function y(){var t=window.location.pathname;if("200"===n.statusCode()&&n.pageNumber()&&n.pageNumber()>1){var o="",s=t.split("/"),c=s[s.length-1];if(c===n.pageNumber()){for(var l=0;l<s.length-1;l++)""!==s[l]&&(o=o+"/"+s[l]);g(o)}}window.location.search!=i.URL_SERVERSIDE&&(t+=window.location.search),"404"===n.statusCode()&&(t="/404"),e.Topic(r.topicNames.HISTORY_PUSH_STATE).publish(t),a.checkLogin&&a.checkLogin(t)}var b=this,E=t.parse;return t.parse=function(t,i){for(var n=t,o=!0,s=0;s<u.length;s++)if(t&&t.indexOf(u[s])!==-1){o=!1;break}o&&(n=b.uriEncodeQueryString(t));var c=a.getPath(),l={oldHash:c,newHash:n};e.Topic(r.topicNames.UPDATE_HASH_CHANGES).publish(l),n=a.getPathWithoutContext(n),E.call(this,n,i)},e.Topic(r.topicNames.HISTORY_PUSH_STATE).subscribe(b.historyPushed.bind(b)),l=t.addRoute("{path*}",null,500),l.matched.add(f),d=t.addRoute("{path*}?{parameters}",null,600),d.matched.add(f),e.Topic(r.topicNames.PAGE_LAYOUT_LOADED).subscribe(v),window.history&&window.history.pushState&&window.addEventListener("popstate",function(e){t.parse(location.pathname+location.search)}),y(),b}var s=null,c=null,l=null,d=null,u=["searchresults"],p=!1,h={};return o.prototype.uriEncodeQueryString=function(e){if(!e)return null;var t=e,r={};if(e.indexOf("?")!=-1){for(var i=e.split("?"),a=i[1].split("&"),n="",o=0;o<a.length;o++){var s=a[o].split("=");r[s[0]]=encodeURIComponent(s[1])}var c=!1;for(var l in r){var d=r[l];c&&(n+="&"),n+=l+"="+d,c=!0}t=i[0]+"?"+n}return t},o.prototype.historyPushed=function(e){t.parse(e)},o.prototype.handleViewChanged=function(t){e.Topic(r.topicNames.PAGE_VIEW_CHANGED).publish(t)},o.prototype.handleParametersChanged=function(t){e.Topic(r.topicNames.PAGE_PARAMETERS_CHANGED).publish(t)},o.prototype.shouldDecode=function(e){for(var t=!0,r=0;r<u.length;r++)if(u[r].indexOf(e)!==-1){t=!1;break}return t},o}),define("ccEETagProcessor",["pubsub","ccConstants","ccRestClient","jquery"],function(e,t,r,i){"use strict";function a(){}return a.prototype.excludedPages=[],a.prototype.location="",a.prototype.ccMetricsLocation="",a.prototype.configurations={},a.prototype.eeid=0,a.prototype.enabled=!0,a.prototype.tagLoaded=!1,a.prototype.metricsLoaded=!1,a.prototype.layoutId="",a.prototype.ccMetricsTracker={},a.prototype.init=function(){var a=this;a.enabled&&(a.deferred=i.Deferred(),r.request(t.ENDPOINT_GET_EE_PAGE_TAG_DATA,null,a.updateEETagDataSuccess.bind(a),a.updateEETagDataFail.bind(a)),i.Topic(e.topicNames.PAGE_READY).subscribe(function(e){""==a.location?a.deferred.done(function(){a.pageReady(e)}):a.pageReady(e)}),i.Topic(e.topicNames.PAGE_LAYOUT_LOADED).subscribe(a.setLayout.bind(a)),i.Topic(e.topicNames.PAGE_METADATA_CHANGED).subscribe(a.setLayout.bind(a)),i.Topic(e.topicNames.PAGE_VIEW_CHANGED).subscribe(a.pageChanged.bind(a)),i.Topic(e.topicNames.PAGE_CONTEXT_CHANGED).subscribe(a.pageChanged.bind(a)),i.Topic(e.topicNames.PAGE_PARAMETERS_CHANGED).subscribe(a.pageChanged.bind(a)))},a.prototype.updateEETagDataSuccess=function(e){var t=this;t.location=e.location,t.excludedPages=e.excludedPages,t.eeid=e.eeid,t.configurations=e.configurations,t.ccMetricsLocation=e.ccMetricsUrl,t.deferred.resolve()},a.prototype.updateEETagDataFail=function(t){i.Topic(e.topicNames.PAGE_READY).unsubscribe(self.pageReady.bind(self)),i.Topic(e.topicNames.PAGE_VIEW_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_CONTEXT_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_PARAMETERS_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_LAYOUT_LOADED).unsubscribe(self.setLayout.bind(self)),i.Topic(e.topicNames.PAGE_METADATA_CHANGED).unsubscribe(self.setLayout.bind(self))},a.prototype.pageReady=function(e){var t=this;t.excludedPages.indexOf(e.pageId)==-1&&t.location&&(t.tagLoaded?window.ATGSvcs&&(ATGSvcs.setCfg&&ATGSvcs.setCfg("layoutId",t.layoutId),ATGSvcs.ee&&ATGSvcs.ee.reset()):(require([t.location],function(){if(window.ATGSvcs){window.OracleUnifiedVisit&&OracleUnifiedVisit.eeid&&ATGSvcs.setEXPID?(ATGSvcs.setEEID&&ATGSvcs.setEEID(OracleUnifiedVisit.eeid),ATGSvcs.setEXPID(t.eeid)):ATGSvcs.setEEID&&ATGSvcs.setEEID(t.eeid);for(var e in t.configurations)ATGSvcs.setCfg&&ATGSvcs.setCfg(e,t.configurations[e]);ATGSvcs.setCfg&&ATGSvcs.setCfg("layoutId",t.layoutId),ATGSvcs.ee&&ATGSvcs.ee.reset()}}),t.tagLoaded=!0)),t.excludedPages.indexOf(e.pageId)==-1&&t.ccMetricsLocation&&!t.metricsLoaded&&(require([t.ccMetricsLocation],function(e){t.ccMetricsTracker=e}),t.metricsLoaded=!0)},a.prototype.pageChanged=function(e){var t=this;"undefined"!=typeof window.ATGSvcs&&window.ATGSvcs&&t.excludedPages.indexOf(e.pageId)>-1&&(ATGSvcs.stopRules&&ATGSvcs.stopRules(),delete window.ATGSvcs,require.undef(t.location),t.tagLoaded=!1),t.ccMetricsLocation&&t.excludedPages.indexOf(e.pageId)>-1&&(t.ccMetricsTracker.ccMetricUnhook&&t.ccMetricsTracker.ccMetricUnhook(),require.undef(t.ccMetricsLocation),t.metricsLoaded=!1)},a.prototype.setLayout=function(e,t){var r=this;r.layoutId=e.layout()},new a}),define("notifications",["jquery","knockout","ccConstants","CCi18n","pubsub"],function(e,t,r,i,a){"use strict";function n(){var n,o,s=this,c=0,l=65;s.enabled=!0,s.publishAccessibleMessages=!1,s.CLOSE_BUTTON_HTML='<a href="#cc-notification-close-button" class="close cc-notification-close pull-right" data-dismiss="alert"><i class="fa fa-times-circle"></i><span class="cc-reader-text">Close notification</span></a>',s.notify=function(t,r){if(s.enabled||r)if(Array.isArray(t))e.each(t,function(e,t){if(null===t.style)throw"Notification type unknown";s.notifyBuild(t)});else{if(null===t.style)throw"Notification type unknown";s.notifyBuild(t)}},s.growlSuccess=function(t,r){Array.isArray(t)?e.each(t,function(e,r){r.style="growl",r.status="success",r.close=!0,r.fade=!0,r.header=t.header||i.t("ns.common:resources.successText")}):(t.style="growl",t.status="success",t.close=!0,t.fade=!0,t.header=t.header||i.t("ns.common:resources.successText")),s.notify(t,r)},s.growlError=function(t,r){Array.isArray(t)?e.each(t,function(e,r){r.style="growl",r.status="error",r.close=!0,r.fade=!0,r.header=t.header||i.t("ns.common:resources.errorText")}):(t.style="growl",t.status="error",t.close=!0,t.fade=!0,t.header=t.header||i.t("ns.common:resources.errorText")),s.notify(t,r)},s.growlRestError=function(e,t,r){var i;e.errors&&e.errors.length>0&&(e.errors[0].message&&(t.message=e.errors[0].message),e.errors[0].errorCode&&(i=e.errors[0].errorCode)),t.code=e.errorCode||i||" ",s.growlError(t,r)},s.inlineError=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="inline",t.status="error",t.close=!1,t.fade=!1}):(t.style="inline",t.status="error",t.close=!1,t.fade=!1),s.notify(t,r)},s.inlineConfirm=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="inline",t.status="confirm",t.curtain=!0,t.close=!1,t.fade=!1}):(t.style="inline",t.status="confirm",t.curtain=!0,t.close=!1,t.fade=!1),s.notify(t,r)},s.growlInfo=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="growl",t.status="info",t.close=!0,t.fade=!0,t.header=this.header||i.t("ns.common:resources.warningText")}):(t.style="growl",t.status="info",t.close=!0,t.fade=!0,t.header=this.header||i.t("ns.common:resources.warningText")),s.notify(t,r)},s.okCancel=function(e,t){e.style="inline",e.status="confirm",e.curtain=!0,e.close?e.actionOptionsFocus=1:e.close=!1,e.fade=!1,e.actionOptions=[{actionOption1:[{text:e.okButtonText||i.t("ns.common:resources.okText"),classes:this.PRIMARY_BUTTON_CLASS,callback:e.okCallback}],actionOption2:[{text:e.cancelButtonText||i.t("ns.common:resources.cancelText"),classes:this.BUTTON_CLASS,callback:e.cancelCallback}]}],s.notify(e,t)},s.continueConfirm=function(e,t){e.style="inline",e.status="confirm",e.curtain=!0,e.close=!1,e.fade=!1,e.actionOptions=[{
actionOption1:[{text:i.t("ns.common:resources.continueText"),action:"",classes:"btn cc-btn-primary"}]}],s.notify(e,t)},s.unsavedChangesConfirm=function(e,t){e.header=i.t("ns.common:resources.unsavedChangesHeaderText"),e.message=i.t("ns.common:resources.unsavedChangesMsgText"),e.okButtonText=e.okButtonText||i.t("ns.common:resources.saveChangesText"),e.cancelButtonText=i.t("ns.common:resources.discardChangesText"),e.okCallback=e.okCallback||e.saveCallback,e.cancelCallback=e.cancelCallback||e.discardCallback,s.okCancel(e,t)},s.clearNotifications=function(t){0!==e(t).find(".cc-notification").length&&e(t).find(".cc-notification").remove()},s.emptyNotifications=function(t){e(t).empty()},s.emptyGrowlMessages=function(){e(".cc-notification-growl").remove()},s.notifyID=function(e){var t="cc-notification-"+e+"-";return t+c},s.notifyBuild=function(n){var c,l,d,u="alert cc-notification ",p="",h="",f="",m="",g=0,v="",y=0,b="",E=!1;if(e("#cc-notification-aria-message").remove(),u+="cc-notification-"+n.style+" ",n.status&&""!==n.status&&(u+="alert-"+n.status),d=n.customNotificationID&&""!==n.customNotificationID?n.customNotificationID:s.notifyID(n.style),c=e("<div />").attr({id:d,class:u}),n.close&&e(c).append(s.CLOSE_BUTTON_HTML),n.header&&(e(c).append(e("<div />").attr({class:"cc-notification-header"}).html(e("<div />").text(n.header).html())),v+=n.header+" "),n.message&&(b="cc-notification-message"+(n.header?"":" cc-notification-message-only"),"string"!=typeof n.message?e.each(n.message,function(t,r){e(c).append(e("<div />").attr("class",b).html(e("<div />").text(r).html())),v+=r}):(e(c).append(e("<div />").attr("class",b).html(e("<div />").text(n.message).html())),v+=n.message)),n.template){var I=s.parseTemplateUrl(n.template),T=e("<div/>").attr("data-bind",'template: {name: "'+I.name+'", templateUrl: "'+I.url+'"}');e(c).append(T),t.applyBindings(n.templateData,T.get(0))}if(n.actionOptions&&(E=s.hasCallbacks(n.actionOptions[0]),l=e("<div />").attr("class","cc-notification-actions"),"inline"===n.style&&n.curtain===!0&&(e(c).addClass("cc-notification-with-curtain"),h="$('.cc-curtain').remove();",f="$(this).closest('.cc-notification-inline').remove();$('body').removeClass('no-scroll');",f+="if($('.cc-notification-outer').length > 0) {$('.cc-notification-outer').remove();}",n.modal===!0&&e(n.id).parent(".modal").on("hidden",function(){e(".cc-curtain").remove()})),e.each(n.actionOptions[0],function(t,r){m="",r[0].onCloseFocus&&(m="$('"+r[0].onCloseFocus+"').notificationsSetFocus();");var i="";r[0].readerText&&(i=r[0].readerText),E?e(l).append(e("<button />").attr({id:"cc-notification-actionbutton-"+t,class:"cc-notification-actionbutton-class "+r[0].classes}).attr("data-bind","makeAccess: {readerText: "+i+"}").text(r[0].text)):e(l).append(e("<button />").attr({class:r[0].classes,onClick:f+h+m+r[0].action}).attr("data-bind","makeAccess: {readerText: "+i+"}").text(r[0].text))}),e(c).append(l)),n.formErrors){var P,C,S=e("<div />").attr("class","cc-notification-errorFields").append(e("<ul />"));e.each(n.formErrors,function(t,r){p="$('#"+r.formId+"').notificationsSetFocus()",n.focusFunction?S.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);"}).text(r.label).on("click",function(){n.focusFunction(r.formId)}))):1===e("#"+r.formId).parents(".tab-pane").length?(C=e("#"+r.formId).parents(".tab-pane"),1===e("#"+C[0].id).closest(".modal").length?P=e("#"+C[0].id).closest(".modal").find(".cc-alta-nav-tabs a[href='#"+C[0].id+"']").parent():(P=e("#tab-"+C[0].id),0===P.length&&(P=e("#"+C[0].id).closest(".panel").find(".cc-alta-nav-tabs a[href='#"+C[0].id+"']").parent())),S.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+P[0].id+" a').tab('show');$('#"+r.formId+"').notificationsSetFocus()"}).text(r.label)))):S.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+r.formId+"').notificationsSetFocus()"}).text(r.label))),v+=" "+r.label}),e(c).append(S)}if(s.publishAccessibleMessages){var A="error"===n.status||"danger"===n.status||"confirm"===n.status;e.Topic(a.topicNames.ARIA_ANNOUNCEMENT_REQUESTED).publish(v,A)}else e("body").prepend(e("<div />").attr({id:"cc-notification-aria-message",class:"cc-reader-text",role:"alert","aria-relevant":"additions removals","aria-live":"assertive"}).text(v));if(n.code){var _=i.t("ns.common:resources.returnCodeLabel");e(c).append(e("<div />").attr({class:"cc-notification-errorCode"}).text(_+": "+n.code))}if("inline"==n.style?n.curtain===!0?(e(c).addClass("cc-inline-curtain"),o=e("<div />").attr({class:"cc-notification-outer"}),e(n.id).prepend(e(o).append(e(c)))):e(n.id).hasClass("oj-tabs")?e(n.id).children("div").each(function(){e(this).prepend(e(c).clone(!0))}):e(n.id).prepend(e(c)):"growl"==n.style&&(e("body").append(e(c)),s.notifyTop(),e(c).bind("closed",function(){setTimeout(function(){s.notifyTop()},100);s.notifyFocus()})),e(".cc-notification-close").on("click",function(){var t=e(".cc-notification-outer");if(e("body").hasClass("no-scroll")&&e("body").removeClass("no-scroll"),e(".cc-curtain")&&e(".cc-curtain").remove(),t){var r=t.parent();e(".cc-notification-outer").remove(),e(r).find(":tabbable").first().focus()}n.closeHandler&&n.closeHandler()}),E&&e.each(n.actionOptions[0],function(t,r){var i=e("#cc-notification-actionbutton-"+t);i&&i.on("click",function(){"inline"===n.style&&n.curtain===!0&&(e(this).closest(".cc-notification-inline").remove(),e(this).closest(".cc-notification-growl").remove(),e("body").removeClass("no-scroll"),e(".cc-notification-outer").length>0&&e(".cc-notification-outer").remove(),e(".cc-curtain").remove()),r[0].onCloseFocus&&e(r[0].onCloseFocus).notificationsSetFocus(),s.cleanUp(),r[0].callback&&r[0].callback()})}),n.fade!==!1){var O=r.NOTIFICATION_FADE_DEFAULT;n.fade!==!0&&(O=n.fade);var R=r.NOTIFICATION_DELAY_DEFAULT;n.delay&&(R=n.delay),e(c).delay(R).fadeOut(O,s.doFade),e(c).mouseenter(function(){e(this).stop(!0,!0)}),e(c).mouseleave(function(){e(this).fadeOut(O,s.doFade)})}n.curtain===!0&&("inline"===n.style?0!==e(n.id).parents(".modal-content").length?e(n.id).parents(".modal-content").append(e("<div />").attr("class","cc-curtain fade in")):(e(n.id).append(e("<div />").attr("class","cc-curtain fade in").attr("style","z-index:1042")),window.scrollTo(0,e(n.id).offset().top),window.setTimeout(function(){e("body").addClass("no-scroll")},0)):e("body").append(e("<div />").attr("class","modal-backdrop fade in")),y=e(".cc-notification-with-curtain :tabbable"),g=y.length,y.each(function(t){e(this).on("keydown",function(t){if(9===t.keyCode){var r;t.shiftKey?(r=parseInt(y.index(e(this)),10)-1,r<0&&(t.preventDefault(),y[g-1].focus())):(r=parseInt(y.index(e(this)),10)+1,r===g&&(t.preventDefault(),y[0].focus()))}})}),n.actionOptionsFocus?e(y[n.actionOptionsFocus]).focus():e(y[0]).focus())},s.doFade=function(){e(this).remove(),e("#notification-info").text("");setTimeout(function(){s.notifyTop()},100);s.notifyFocus()},s.notifyTop=function(){n=e("body").children(".cc-notification-growl"),n.length>=0&&e.each(n,function(t,r){t>0&&(l+=30),e(r).css("top",l),l+=e(r).height()}),l=65},s.notifyFocus=function(){e("#CC-Oracle-Nav UL.nav.nav-pills LI A:first").focus()},s.parseTemplateUrl=function(e){for(""!==infuser.defaults.templateSuffix&&e.indexOf(".")>=0&&(e=e.substring(0,e.lastIndexOf(".")));0===e.indexOf("/");)e=e.substring(1);return{url:e.substring(0,e.lastIndexOf("/")),name:e.substring(e.lastIndexOf("/")+1)}},s.cleanUp=function(){var t=e(".cc-notification-actionbutton-class");t&&t.off("click");var r=e(".cc-notification-close");r&&r.off("click")},s.hasCallbacks=function(t){var r=!1;return e.each(t,function(e,t){t[0].callback&&(r=!0)}),r},s.overlayId="#cc-overlay-clone",s.createNotificationOverlay=function(){var t=e('div[id$="_layer_overlay"]');if(t){var r=t.clone();r.attr("id","cc-overlay-clone"),r.css("opacity","1"),r.css("background","none"),e("#__oj_zorder_container").append(r),r.zIndex(r.zIndex()+1)}},s.destroyNotificationOverlay=function(){var t=e("#cc-overlay-clone");t&&t.length>0&&t.remove()}}return e.fn.notificationsSetFocus=function(){this.is(":visible")?this.focus():this.triggerHandler("focus"),this.data&&this.data().select2&&this.select2("open")},n.prototype.PRIMARY_BUTTON_CLASS="btn cc-btn-primary pull-right",n.prototype.DEFAULT_BUTTON_CLASS="btn btn-default",n.prototype.BUTTON_CLASS="btn",new n}),define("ccOAuthTimeout",["ccConstants","jquery","pubsub","notifications","CCi18n"],function(e,t,r,i,a){"use strict";function n(n){var o=!0,s=null,c=e.TOKEN_WARNING_TIMEOUT,l=null,d=null,u=null,p="cc-warn-session-timeout-alert",h="cc-expire-session-alert",f=function(){t.Topic(r.topicNames.USER_SESSION_VALID).publish(),n.storeRequestWasMade=!1,o=!1,T()},m=function(){var t=function(e){};n.loggedIn&&(o||n.storeRequestWasMade)&&n.refresh(function(t){var r=t.expires_in;if(r){var i=1e3*r-e.TOKEN_EXPIRED_MESSAGE_TIMEOUT;c=Math.max(i,e.TOKEN_REFRESH_INTERVAL+1e4)}f()},t)},g=function(){n.loggedIn&&null==s&&(s=setInterval(m,e.TOKEN_REFRESH_INTERVAL))},v=function(){s&&(clearInterval(s),s=null)},y=function(){if(u=t(document.activeElement),u.is("iframe"))try{u=t(document.activeElement.contentWindow.document.activeElement)}catch(e){}},b=function(){n.profileType==e.PROFILE_TYPE_ADMIN&&0==t(".cc-notification").length&&(y(),i.notify([{style:"inline",id:"#cc-message-center",customNotificationID:p,status:"confirm",curtain:!0,close:!1,fade:!1,header:a.t("ns.common:resources.sessionTimeoutHeader"),message:a.t("ns.common:resources.sessionTimeoutMessage"),actionOptions:[{actionOption1:[{text:a.t("ns.common:resources.okText"),action:"",classes:"btn cc-submit-changes-btn cc-btn-primary"}]}]}]),t("button","#"+p).each(function(){var e=this.onclick.bind(this);t(this).prop("onclick",null).on("click",function(){S(),m(),u&&u.focus(),e instanceof Function&&e()})}),t("#"+p).closest("div.cc-notification-outer").next("div.cc-curtain").on("click",function(){t("button","#"+p).focus()}),C())},E=function(){t("#"+p).closest("div.cc-notification-outer").next("div.cc-curtain").addBack().remove()},I=function(){n.profileType==e.PROFILE_TYPE_ADMIN&&t("#"+p).length&&(E(),i.notify([{style:"inline",id:"#cc-message-center",customNotificationID:h,status:"confirm",curtain:!0,close:!1,fade:!1,header:a.t("ns.common:resources.sessionExpiryHeader"),message:a.t("ns.common:resources.sessionExpiryMessage"),actionOptions:[{actionOption1:[{text:a.t("ns.common:resources.okText"),action:"",classes:"btn cc-submit-changes-btn cc-btn-primary"}]}]}]),t("button","#"+h).each(function(){t(this).prop("onclick",null).on("click",function(){if(n.external&&window.idcsEnabled)window.location="sso-logout.jsp";else{var e=n.redirectToAdminLoginScreen.bind(n);n.logout(e,e)}})}),t("#"+h).closest("div.cc-notification-outer").next("div.cc-curtain").on("click",function(){t("button","#"+h).focus()}))},T=function(){n.profileType==e.PROFILE_TYPE_ADMIN&&(P(),l=setTimeout(b,c))},P=function(){l&&(clearTimeout(l),l=null)},C=function(){n.profileType==e.PROFILE_TYPE_ADMIN&&(S(),d=setTimeout(I,e.TOKEN_EXPIRED_MESSAGE_TIMEOUT))},S=function(){d&&(clearTimeout(d),d=null)},A=function(){t("html").off(".cctimer"),n.loggedIn&&(g(),n.profileType==e.PROFILE_TYPE_ADMIN?(T(),t("html").on("keyup.cctimer mouseup.cctimer",function(){o=!0}),n.registerLoginUpdateCallback(function(){S(),E(),f()}),n.registerLogoutUpdateCallback(function(){t("button","#"+h).trigger("click")})):n.profileType==e.PROFILE_TYPE_LAYOUT_PREVIEW&&parent.$&&t("html").on("keyup.cctimer mouseup.cctimer",function(e){parent.$("html",parent.document).trigger(e)}))},_=function(){v(),P(),S(),t("html").off(".cctimer")};n.registerInitCallback(A),t.Topic(r.topicNames.AUTH_LOGIN_SUCCESS).subscribe(A),t.Topic(r.topicNames.AUTH_LOGOUT_SUCCESS).subscribe(_),t.Topic(r.topicNames.USER_LOGIN_SUCCESSFUL).subscribe(A),t.Topic(r.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).subscribe(A),t.Topic(r.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(_),t.Topic(r.topicNames.USER_SESSION_EXPIRED).subscribe(_),n.profileType==e.PROFILE_TYPE_LAYOUT_PREVIEW&&t.Topic(r.topicNames.PAGE_READY).subscribe(A)}return n}),define("ccPreviewBar",["storageApi","ccConstants","ccRestClient","pubsub","CCi18n","knockout","jquery"],function(e,t,r,i,a,n,o){"use strict";function s(){if(s.singleInstance)throw new Error("Cannot instantiate more than one CCPreviewBar, use getInstance()");var u=this;this.isMinifyJs=n.observable(),this.cssPath="/shared/css/oj-preview-bar.css",this.templateUrl="/shared/templates",this.templateName="preview-bar.template",this.selectedSite=n.observable(),this.debugMenuButtonText=n.observable("Debug Tools"),this.minifyJsText=n.observable("Minify JavaScript"),this.siteSelectionLabel=n.observable("Site Selection"),this.ojLoaded=o.Deferred(),this.sites=null,this.currentSiteId=null;var p,h=!1;if(this.isDisableMinifyJs=n.computed(function(){return r.previewMode&&!u.isMinifyJs()}),this.storeMinifyJs=function(t,r){"rawValue"!==r.option&&"value"!==r.option||void 0===r.previousValue||e.getInstance().setSessionItem(l,u.isMinifyJs())},this.initDebugMenu=function(){if(r.previewMode){var t=e.getInstance().getSessionItem(l);"true"===t||t===!0||null===t?this.isMinifyJs(!0):this.isMinifyJs(!1),p=this.isMinifyJs()}},this.initSiteSelection=function(e){if(r.previewMode){var n=e.data.global.multisite;u.sites=n,u.validateSiteSelection={Init:function(){},getHint:function(){},validate:function(e){var t=n.filter(function(t){return e[0]===t.id});if(t.length>0)return!0;throw new Error(a.t("ns.common:resources.siteSelectionNoMatchesError"))}};var s=r.getStoredValue(t.LOCAL_STORAGE_SITE_ID);if(s){var c=u.getURLParameter(window.location.search,t.URL_SITE_PARAM),l=n.filter(function(e){return c===e.id});c&&""!=c?s!==c&&l.length>0?(r.setStoredValue(t.LOCAL_STORAGE_SITE_ID,c),u.selectedSite(c),u.currentSiteId=c):(u.selectedSite(s),u.currentSiteId=s):(u.selectedSite(s),u.currentSiteId=s,u.refreshPageWithNewSite(s))}else{var d=n.filter(function(e){return e.defaultSite});d.length>0&&(u.selectedSite(d[0].id),u.currentSiteId=d[0].id)}o.Topic(i.topicNames.PAGE_LAYOUT_LOADED).unsubscribe(u.initSiteSelection)}},this.clearMinJsFlag=function(){e.getInstance().removeSessionItem(l)},this.maybeRefreshPage=function(e){"/payment"!=e&&"/confirmation/"!=e.substring(0,14)&&null!==p&&p!=u.isMinifyJs()&&this.refreshPage(e)},this.refreshPage=function(e){if(r.previewMode){var t=window.location.origin+("/"===e.charAt(0)?e:"/"+e);window.location.assign(t)}},this.focusSwitch=function(e){e.originalEvent&&("click"===e.originalEvent.type&&e.originalEvent.pageX<=0&&e.originalEvent.pageY<=0||"keydown"===e.originalEvent.type)&&(o(d+" + div.oj-switch-container").find("div.oj-switch-thumb").focus(),h=!0)},this.attachEventHandlers=function(){o(d+" + div.oj-switch-container").find("div.oj-switch-thumb").on("keyup"+c,function(e){return e.keyCode===t.KEY_CODE_ENTER&&h?(h=!1,!1):(h=!1,!0)}).on("keydown"+c,function(e){return h=!1,e.keyCode!==t.KEY_CODE_ENTER&&e.keyCode!==t.KEY_CODE_SPACE||(e.stopPropagation(),e.preventDefault()),!0});var e;o("#oj-combobox-input-previewBarSiteSelection").on("focus",function(t){e!==this&&(e=this,setTimeout(function(){e.select()},50))})},this.getURLParameter=function(e,t){if(e&&""!==e){var r,i=(e.split("?")[0],[]),a=e.split("?")[1];if(""!==a){i=a.split("&");for(var n=i.length-1;n>=0;n-=1)if(r=i[n].split("=")[0],r===t)return i[n].split("=")[1]}}return null},this.removeParamFromURL=function(e,t){if(t.indexOf("?")===-1)return t;var r,i=t.split("?")[0],a=[],n=t.split("?")[1];if(""!==n){a=n.split("&");for(var o=a.length-1;o>=0;o-=1)r=a[o].split("=")[0],r===e&&a.splice(o,1);a.length>0&&(i=i+"?"+a.join("&"))}return i},this.changeSiteCallBack=function(e,i){if("value"===i.option){var a=r.getStoredValue(t.LOCAL_STORAGE_SITE_ID),n=i.value[0];n!==a&&(r.setStoredValue(t.LOCAL_STORAGE_SITE_ID,n),u.refreshPageWithNewSite(n))}},this.refreshPageWithNewSite=function(e){var r=u.removeParamFromURL(t.URL_SITE_PARAM,window.location.search);r+=r.indexOf("?")===-1?"?":"&",r+=t.URL_SITE_PARAM+"="+encodeURIComponent(e);for(var i=null,a=null,n=0;n<u.sites.length;n++)u.sites[n].id===e&&(i=u.sites[n]),u.sites[n].id===u.currentSiteId&&(a=u.sites[n]);var o=i.productionURL.substring(i.productionURL.indexOf("/")),s=a.productionURL.substring(a.productionURL.indexOf("/"));u.refreshPage.call(u,window.location.pathname.replace(s,o)+r)},r.previewMode){o.Topic(i.topicNames.HISTORY_PUSH_STATE).subscribe(this.maybeRefreshPage.bind(this)),window.history&&window.history.pushState&&window.addEventListener("popstate",function(e){u.maybeRefreshPage.call(u,window.location.pathname+window.location.search)}),o.Topic(i.topicNames.LOCALE_READY).subscribe(function(e){u.debugMenuButtonText(a.t("ns.common:resources.debugMenuButtonText")),u.minifyJsText(a.t("ns.common:resources.minifyJsText")),u.siteSelectionLabel(a.t("ns.common:resources.siteSelectionLabel"))}),r.registerLogoutAdminUpdateCallback(this.clearMinJsFlag),this.initDebugMenu(),o.Topic(i.topicNames.PAGE_LAYOUT_LOADED).subscribe(this.initSiteSelection);var f=["ojs/ojcore","ojs/ojknockout","ojs/ojswitch","ojs/ojbutton","ojs/ojmenu","ojs/ojselectcombobox"];require(f,function(){u.ojLoaded.resolve()})}}var c=".previewBar",l="min_js_preview",d="#previewMinifySwitch";return s.getInstance=function(){return s.singleInstance||(s.singleInstance=new s),s.singleInstance},s}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in t)if(void 0!==e.style[r])return{end:t[r]};return!1}e.fn.emulateTransitionEnd=function(t){var r=!1,i=this;e(this).one(e.support.transition.end,function(){r=!0});var a=function(){r||e(i).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',r=function(r){e(r).on("click",t,this.close)};r.prototype.close=function(t){function r(){n.trigger("closed.bs.alert").remove()}var i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var n=e(a);t&&t.preventDefault(),n.length||(n=i.hasClass("alert")?i:i.parent()),n.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.one(e.support.transition.end,r).emulateTransitionEnd(150):r())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new r(this)),"string"==typeof t&&a[t].call(i)})},e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,r.prototype.close)}(jQuery),+function(e){"use strict";var t=function(r,i){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var r="disabled",i=this.$element,a=i.is("input")?"val":"html",n=i.data();t+="Text",n.resetText||i.data("resetText",i[a]()),i[a](n[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var r=this.$element.find("input");"radio"==r.prop("type")&&(r.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&r.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=function(r){return this.each(function(){var i=e(this),a=i.data("bs.button"),n="object"==typeof r&&r;a||i.data("bs.button",a=new t(this,n)),"toggle"==r?a.toggle():r&&a.setState(r)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),r.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,r){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=r,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var r=this,i=this.getActiveIndex();if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),a=r||i[t](),n=this.interval,o="next"==t?"left":"right",s="next"==t?"first":"last",c=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[s]()}if(a.hasClass("active"))return this.sliding=!1;var l=e.Event("slide.bs.carousel",{relatedTarget:a[0],direction:o});return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(this.sliding=!0,n&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(o),a.addClass(o),i.one(e.support.transition.end,function(){a.removeClass([t,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),n&&this.cycle(),this)};var r=e.fn.carousel;e.fn.carousel=function(r){return this.each(function(){var i=e(this),a=i.data("bs.carousel"),n=e.extend({},t.DEFAULTS,i.data(),"object"==typeof r&&r),o="string"==typeof r?r:n.slide;a||i.data("bs.carousel",a=new t(this,n)),"number"==typeof r?a.to(r):o?a[o]():n.interval&&a.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var r,i=e(this),a=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),n=e.extend({},a.data(),i.data()),o=i.attr("data-slide-to");o&&(n.interval=!1),a.carousel(n),(o=i.attr("data-slide-to"))&&a.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(r,i){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var r=this.$parent&&this.$parent.find("> .panel > .in");if(r&&r.length){var i=r.data("bs.collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var n=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return n.call(this);var o=e.camelCase(["scroll",a].join("-"));this.$element.one(e.support.transition.end,e.proxy(n,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[r](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var r=e.fn.collapse;e.fn.collapse=function(r){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),n=e.extend({},t.DEFAULTS,i.data(),"object"==typeof r&&r);!a&&n.toggle&&"show"==r&&(r=!r),a||i.data("bs.collapse",a=new t(this,n)),"string"==typeof r&&a[r]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var r,i=e(this),a=i.attr("data-target")||t.preventDefault()||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),n=e(a),o=n.data("bs.collapse"),s=o?"toggle":i.data(),c=i.attr("data-parent"),l=c&&e(c);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+c+'"]').not(i).addClass("collapsed"),i[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),n.collapse(s)})}(jQuery),+function(e){"use strict";function t(t){e(i).remove(),e(a).each(function(){var i=r(e(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))})}function r(t){var r=t.attr("data-target");r||(r=t.attr("href"),r=r&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,""));var i=r&&e(r);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",a="[data-toggle=dropdown]",n=function(t){e(t).on("click.bs.dropdown",this.toggle)};n.prototype.toggle=function(i){var a=e(this);if(!a.is(".disabled, :disabled")){var n=r(a),o=n.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(n.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",s),a.focus()}return!1}},n.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var n=r(i),o=n.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&n.find(a).focus(),i.click();var s=" li:not(.divider):visible a",c=n.find("[role=menu]"+s+", [role=listbox]"+s);if(c.length){var l=c.index(c.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<c.length-1&&l++,~l||(l=0),c.eq(l).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("bs.dropdown");i||r.data("bs.dropdown",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,n.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",n.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,r){this.options=r,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(document.body),r.$element.show().scrollTop(0),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$element.find(".modal-dialog").one(e.support.transition.end,function(){r.$element.focus().trigger(a)}).emulateTransitionEnd(300):r.$element.focus().trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var r=e.fn.modal;e.fn.modal=function(r,i){return this.each(function(){var a=e(this),n=a.data("bs.modal"),o=e.extend({},t.DEFAULTS,a.data(),"object"==typeof r&&r);n||a.data("bs.modal",n=new t(this,o)),"string"==typeof r?n[r](i):o.show&&n.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),a=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),n=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),r.data());
r.is("a")&&t.preventDefault(),a.modal(n,this).one("hide",function(){r.is(":visible")&&r.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,r,i){this.enabled=!0,this.type=t,this.$element=e(r),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),n=a.length;n--;){var o=a[n];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",c="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},r=this.getDefaults();return this._options&&e.each(this._options,function(e,i){r[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(r.timeout),r.hoverState="in",r.options.delay&&r.options.delay.show?void(r.timeout=setTimeout(function(){"in"==r.hoverState&&r.show()},r.options.delay.show)):r.show()},t.prototype.leave=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(r.timeout),r.hoverState="out",r.options.delay&&r.options.delay.hide?void(r.timeout=setTimeout(function(){"out"==r.hoverState&&r.hide()},r.options.delay.hide)):r.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var r=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,o=n.test(a);o&&(a=a.replace(n,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var s=this.getPosition(),c=i[0].offsetWidth,l=i[0].offsetHeight;if(o){var d=this.$element.parent(),u=a,p=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:d.outerWidth(),f="body"==this.options.container?window.innerHeight:d.outerHeight(),m="body"==this.options.container?0:d.offset().left;a="bottom"==a&&s.top+s.height+l-p>f?"top":"top"==a&&s.top-p-l<0?"bottom":"right"==a&&s.right+c>h?"left":"left"==a&&s.left-c<m?"right":a,i.removeClass(u).addClass(a)}var g=this.getCalculatedOffset(a,s,c,l);this.applyPlacement(g,a),this.hoverState=null;var v=function(){r.$element.trigger("shown.bs."+r.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,r){var i,a=this.tip(),n=a[0].offsetWidth,o=a[0].offsetHeight,s=parseInt(a.css("margin-top"),10),c=parseInt(a.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(c)&&(c=0),t.top=t.top+s,t.left=t.left+c,e.offset.setOffset(a[0],e.extend({using:function(e){a.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),a.addClass("in");var l=a[0].offsetWidth,d=a[0].offsetHeight;if("top"==r&&d!=o&&(i=!0,t.top=t.top+o-d),/bottom|top/.test(r)){var u=0;t.left<0&&(u=t.left*-2,t.left=0,a.offset(t),l=a[0].offsetWidth,d=a[0].offsetHeight),this.replaceArrow(u-n+l,l,"left")}else this.replaceArrow(d-o,d,"top");i&&a.offset(t)},t.prototype.replaceArrow=function(e,t,r){this.arrow().css(r,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=r.hoverState&&i.detach(),r.$element.trigger("hidden.bs."+r.type)}var r=this,i=this.tip(),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,r,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-r/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-r/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-r}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,r=this.options;return e=t.attr("data-original-title")||("function"==typeof r.title?r.title.call(t[0]):r.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var r=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;r.tip().hasClass("in")?r.leave(r):r.enter(r)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=function(r){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),n="object"==typeof r&&r;(a||"destroy"!=r)&&(a||i.data("bs.tooltip",a=new t(this,n)),"string"==typeof r&&a[r]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),r=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof r?"html":"append":"text"](r),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var r=e.fn.popover;e.fn.popover=function(r){return this.each(function(){var i=e(this),a=i.data("bs.popover"),n="object"==typeof r&&r;(a||"destroy"!=r)&&(a||i.data("bs.popover",a=new t(this,n)),"string"==typeof r&&a[r]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(r,i){var a,n=e.proxy(this.process,this);this.$element=e(e(r).is("body")?window:r),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(a=e(r).attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var r=this;this.$body.find(this.selector).map(function(){var i=e(this),a=i.data("target")||i.attr("href"),n=/^#./.test(a)&&e(a);return n&&n.length&&n.is(":visible")&&[[n[t]().top+(!e.isWindow(r.$scrollElement.get(0))&&r.$scrollElement.scrollTop()),a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){r.offsets.push(this[0]),r.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,r=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=r-this.$scrollElement.height(),a=this.offsets,n=this.targets,o=this.activeTarget;if(t>=i)return o!=(e=n.last()[0])&&this.activate(e);if(o&&t<=a[0])return o!=(e=n[0])&&this.activate(e);for(e=a.length;e--;)o!=n[e]&&t>=a[e]&&(!a[e+1]||t<=a[e+1])&&this.activate(n[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var r=e.fn.scrollspy;e.fn.scrollspy=function(r){return this.each(function(){var i=e(this),a=i.data("bs.scrollspy"),n="object"==typeof r&&r;a||i.data("bs.scrollspy",a=new t(this,n)),"string"==typeof r&&a[r]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,r=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=r.find(".active:last a")[0],n=e.Event("show.bs.tab",{relatedTarget:a});if(t.trigger(n),!n.isDefaultPrevented()){var o=e(i);this.activate(t.parent("li"),r),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},t.prototype.activate=function(t,r,i){function a(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var n=r.find("> .active"),o=i&&e.support.transition&&n.hasClass("fade");o?n.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),n.removeClass("in")};var r=e.fn.tab;e.fn.tab=function(r){return this.each(function(){var i=e(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new t(this)),"string"==typeof r&&a[r]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(r,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(r),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),r=this.$element.offset();return this.pinnedOffset=r.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=e(document).height(),i=this.$window.scrollTop(),a=this.$element.offset(),n=this.options.offset,o=n.top,s=n.bottom;"top"==this.affixed&&(a.top+=i),"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var c=!(null!=this.unpin&&i+this.unpin<=a.top)&&(null!=s&&a.top+this.$element.height()>=r-s?"bottom":null!=o&&i<=o&&"top");if(this.affixed!==c){this.unpin&&this.$element.css("top","");var l="affix"+(c?"-"+c:""),d=e.Event(l+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=c,this.unpin="bottom"==c?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==c&&this.$element.offset({top:r-s-this.$element.height()}))}}};var r=e.fn.affix;e.fn.affix=function(r){return this.each(function(){var i=e(this),a=i.data("bs.affix"),n="object"==typeof r&&r;a||i.data("bs.affix",a=new t(this,n)),"string"==typeof r&&a[r]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},r.offsetBottom&&(r.offset.bottom=r.offsetBottom),r.offsetTop&&(r.offset.top=r.offsetTop),t.affix(r)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(){function e(e,t,r,i,a,n){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),!!t[e]&&(r.push(e),!0!==t[e]&&1!==t[e]||i.push(a+e+"/"+n),!0)}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var r,i=1;for(r=1;r<t.length;r++){var a=t[r],n=a.length;if(1==n)break;switch(i){case 1:if(i=2,4==n){e.push(a.charAt(0).toUpperCase()+a.slice(1));break}case 2:i=3,e.push(a.toUpperCase());break;default:e.push(a)}}return"zh"!=e[0]||1<e.length&&4==e[1].length||(t="Hans",i=1<e.length?e[1]:null,"TW"!==i&&"MO"!==i&&"HK"!==i||(t="Hant"),e.splice(1,0,t)),e}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(null==e[i]?e[i]=t[i]:"object"==typeof t[i]&&"object"==typeof e[i]&&r(e[i],t[i]))}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(a){var n=a.config?a.config():{};return{version:"2.0.1+",load:function(a,o,s,c){c=c||{},c.locale&&(n.locale=c.locale);var l,d,u,p,h,f,m,g,v,y=i.exec(a),b=y[1],E=y[5],I=[],T={},P="";for(y[5]?(b=y[1],a=b+E,l=y[4]):(E=y[4],l=n.locale,"undefined"!=typeof document?(l||(l=c.isBuild?"root":document.documentElement.lang)||(l=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),n.locale=l):l="root"),d=t(l),p=n.noOverlay,h=n.defaultNoOverlayLocale,(y=n.merge)&&(f=y[b+E])&&(y=i.exec(f),m=y[1],g=y[4]),v=[],u=0;u<d.length;u++)y=d[u],P+=(P?"-":"")+y,v.push(P);c.isBuild?(I.push(a),f&&I.push(f),o(I,function(){s()})):("query"==n.includeLocale&&(a=o.toUrl(a+".js"),a+=(-1===a.indexOf("?")?"?":"&")+"loc="+l),c=[a],f&&c.push(f),o(c,function(t,i){var a,n=[],c=!1,l=p||!0===t.__noOverlay,f=h||t.__defaultNoOverlayLocale;for(u=v.length-1;0<=u&&(!c||!l);u--)c=e(v[u],t,n,I,b,E);if(l&&!c&&f&&e(f,t,n,I,b,E),e("root",t,n,I,b,E),a=n.length,i){for(c=!1,l=!0===i.__noOverlay,f=i.__defaultNoOverlayLocale,u=v.length-1;0<=u&&(!c||!l);u--)c=e(v[u],i,n,I,m,g);l&&!c&&f&&e(f,i,n,I,m,g),e("root",i,n,I,m,g)}o(I,function(){var e,c,l;for(e=a;e<n.length&&n[e];e++)l=n[e],c=i[l],!0!==c&&1!==c||(c=o(m+l+"/"+g)),r(T,c);for(e=0;e<a&&n[e];e++)l=n[e],c=t[l],!0!==c&&1!==c||(c=o(b+l+"/"+E)),r(T,c);T._ojLocale_=d.join("-"),s(T)})}))}}})}(),define("ojtranslations/nls/ojtranslations",{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Enter a value in the same format as this example: '{exampleValue}'","detail-plural":"Enter a value in the same format as these examples: '{exampleValue}'"},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"'{value}' is not in the expected number format."},decimalFormatUnsupportedParse:{summary:"decimalFormat: 'short' and 'long' are not supported for converter parsing.",detail:"Change component to readOnly. readOnly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"'{value}' is not in the expected currency format."},percentFormatMismatch:{summary:"'{value}' is not in the expected percent format."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'."},dateFormatMismatch:{summary:"'{value}' is not in the expected date format."},timeFormatMismatch:{summary:"'{value}' is not in the expected time format."},datetimeFormatMismatch:{summary:"'{value}' is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters",inRange:"Enter {min} or more characters, up to a maximum of {max}.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters, not fewer.",tooLong:"Enter {max} or fewer characters, not more."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}."},messageDetail:{rangeUnderflow:"Number {value} must be greater than or equal to {min}.",rangeOverflow:"Number {value} must be less than or equal to {max}."},messageSummary:{rangeUnderflow:"Number is too low.",rangeOverflow:"Number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Date and time must be on or later than {min}.",rangeOverflow:"Date and time must be on or sooner than {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date.",rangeOverflow:"Date and time is later than the maximum date."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"Date {value} should not be of a disabled entry."}},regExp:{summary:"Format is incorrect.",detail:"Value '{value}' must match this pattern: '{pattern}'"},required:{summary:"Value is required.",detail:"You must enter a value."}},"oj-editableValue":{required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputDate":{prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date",tooltipCalendarDisabled:"Select Date Disabled",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputTime":{tooltipTime:"Select Time",tooltipTimeDisabled:"Select Time Disabled",inputHelp:"Press Key down or Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{regexp:{messageSummary:"",messageDetail:""}},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'"}},"oj-ojFilmStrip":{labelAccArrowNextPage:"Next Page",labelAccArrowPreviousPage:"Previous Page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleActionableMode:"Enter actionable mode",accessibleNavigationMode:"Enter navigation mode",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on",accessibleRangeSelectModeOff:"Add selected range of cells mode off",accessibleFirstRow:"You have reached the first row",accessibleLastRow:"You have reached the last row",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column",accessibleSelectionAffordanceTop:"Top selection handle",accessibleSelectionAffordanceBottom:"Bottom selection handle",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelCut:"Cut",labelPaste:"Paste",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z"},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{numberRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelSelectRow:"Select Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display."},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojSelect":{seachField:"Search field",noMatchesFound:"No matches found"},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{noMatchesFound:"No matches found"},"oj-ojInputSearch":{noMatchesFound:"No matches found"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{componentName:"Diagram"},"oj-ojLegend":{componentName:"Legend"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"NBox"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud"},"oj-ojThematicMap":{componentName:"Thematic Map"},"oj-ojTimeline":{componentName:"Timeline",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"No items to display."},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than min",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened.  Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-pullToRefresh":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojIndexer":{indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."}},ro:1,"zh-Hant":1,sv:1,ko:1,th:1,"zh-Hans":1,sk:1,pl:1,nl:1,fi:1,he:1,de:1,es:1,el:1,hu:1,ru:1,it:1,da:1,tr:1,ja:1,"pt-PT":1,cs:1,fr:1,no:1,pt:1,"fr-CA":1,ar:1});var o_a=this;define("ojs/ojcore",["require","ojL10n!ojtranslations/nls/ojtranslations"],function(e,t){var r={};"undefined"!=typeof window?r=window:"undefined"!=typeof self&&(r=self);var i=r.oj,a=r.oj={version:"2.0.2",build:"1",revision:"26417",noConflict:function(){r.oj=i}};a.q={},o_("Logger",a.q,a),a.q.U6=0,o_("Logger.LEVEL_NONE",a.q.U6,a),a.q.AF=1,o_("Logger.LEVEL_ERROR",a.q.AF,a),a.q.hn=2,o_("Logger.LEVEL_WARN",a.q.hn,a),a.q.Zr=3,o_("Logger.LEVEL_INFO",a.q.Zr,a),a.q.gQ=4,o_("Logger.LEVEL_LOG",a.q.gQ,a),a.q.R8="error",a.q.U8="warn",a.q.S8="info",a.q.T8="log",a.q.UU={level:a.q.AF,writer:null},a.q.kb=a.q.UU,a.q.error=function(e){a.q.ty(a.q.AF,a.q.R8,arguments)},o_("Logger.error",a.q.error,a),a.q.info=function(e){a.q.ty(a.q.Zr,a.q.S8,arguments)},o_("Logger.info",a.q.info,a),a.q.warn=function(e){a.q.ty(a.q.hn,a.q.U8,arguments)},o_("Logger.warn",a.q.warn,a),a.q.log=function(e){a.q.ty(a.q.gQ,a.q.T8,arguments)},o_("Logger.log",a.q.log,a),a.q.option=function(e,t){var r,i={};if(0==arguments.length){for(r in a.q.kb)a.q.kb.hasOwnProperty(r)&&(i[r]=a.q.kb[r]);return i}if("string"==typeof e&&void 0===t)return void 0===a.q.kb[e]?null:a.q.kb[e];if("string"==typeof e)a.q.kb[e]=t;else for(r in e)e.hasOwnProperty(r)&&a.q.option(r,e[r])},o_("Logger.option",a.q.option,a),a.q.ty=function(e,t,r){if(!(a.q.option("level")<e)){var i=a.q.ffa();null!=i&&(1==r.length&&r[0]instanceof Function&&(r=[r[0]()]),i[t]&&i[t].apply?i[t].apply(i,r):i[t]&&(i[t]=Function.prototype.bind.call(i[t],i),a.q.ty(e,t,r)))}},a.q.ffa=function(){var e=null;return a.q.option("writer")?e=a.q.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(e=window.console),e},a.q.vsa=function(e){return void 0!==a.q.UU[e]};var n=r.__ojCheckpointManager;a.Wh={},o_("CHECKPOINT_MANAGER",a.Wh,a),a.Wh.Mqa=function(e,t){n&&n.startCheckpoint(e,t)},o_("CHECKPOINT_MANAGER.startCheckpoint",a.Wh.Mqa,a),a.Wh.toa=function(e){n&&n.endCheckpoint(e)},o_("CHECKPOINT_MANAGER.endCheckpoint",a.Wh.toa,a),a.Wh.TN=function(e){
return n?n.getRecord(e):void 0},o_("CHECKPOINT_MANAGER.getRecord",a.Wh.TN,a),a.Wh.H4=function(e){return n?n.matchRecords(e):[]},o_("CHECKPOINT_MANAGER.matchRecords",a.Wh.H4,a),a.Wh.qoa=function(e){a.q.info(function(){for(var t="Checkpoint Records:",r=a.Wh.H4(e),i=0;i<r.length;i++){var n=r[i],t=t+"\n"+n.name,o=n.description;null!=o&&(t=t+" ("+o+")"),t+=":\n",t=t+"start: "+n.start+"\tduration: "+n.duration}return t})},o_("CHECKPOINT_MANAGER.dump",a.Wh.qoa,a),a.b=function(){this.Init()},o_("Object",a.b,a),a.b.r=null,a.b.FM="oj.Object",a.b.p8=/function\s+([\w\$][\w\$\d]*)\s*\(/,a.b.prototype={},a.b.prototype.constructor=a.b,a.b.g=function(e,t){var r,i=null,n=null;for(r in t)if(t.hasOwnProperty(r)){i=r,n=t[r];break}var o=e.split(".");if(r=a[o[0]],o=o[2],i!=o&&null!=i){var s=r.lL;s||(s={},r.lL=s),s[i]=o,r.prototype[o]=n}},a.b.ga=function(e,t,r){a.l.Ho(e),a.l.wu(t),a.l.bN(r),void 0===t&&(t=a.b),a.l.assert(e!==t,"Class can't extend itself");var i=a.b.qma;i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.r=e.superclass=t.prototype,r&&(e.FM=r)},o_("Object.createSubclass",a.b.ga,a),a.b.Mna=function(e,t){var r;a.l.Ho(e),a.l.assert(null!=t,"source object cannot be null");for(r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r])},o_("Object.copyPropertiesForClass",a.b.Mna,a),a.b.qma=function(){},a.b.prototype.X2=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},a.b.g("Object.prototype.getClass",{X2:a.b.prototype.X2}),a.b.prototype.clone=function(){var e=new this.constructor;return a.zc.Lf(e,this),e},a.b.g("Object.prototype.clone",{clone:a.b.prototype.clone}),a.b.prototype.toString=function(){return this.qP()},a.b.g("Object.prototype.toString",{toString:a.b.prototype.toString}),a.b.prototype.qP=function(){return this.getTypeName()+" Object"},a.b.g("Object.prototype.toDebugString",{qP:a.b.prototype.qP}),a.b.getTypeName=function(e){a.l.Ho(e);var t=e.FM;return null==t&&(t=e.toString(),t=(t=a.b.p8.exec(t))?t[1]:"anonymous",e.FM=t),t},o_("Object.getTypeName",a.b.getTypeName,a),a.b.prototype.getTypeName=function(){return a.b.getTypeName(this.constructor)},a.b.g("Object.prototype.getTypeName",{getTypeName:a.b.prototype.getTypeName}),a.b.prototype.Init=function(){a.l.iO()&&a.l.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e.Zl||a.b.oK(e)},a.b.g("Object.prototype.Init",{Init:a.b.prototype.Init}),a.b.uoa=function(e){a.l.Ho(e),e.Zl||a.b.oK(e)},o_("Object.ensureClassInitialization",a.b.uoa,a),a.b.prototype.Mo=function(e){return this===e},a.b.g("Object.prototype.equals",{Mo:a.b.prototype.Mo}),a.b.r2=function(e,t){return a.l.Ho(t),t.bind(e)},o_("Object.createCallback",a.b.r2,a),a.b.oK=function(e){a.l.iO()&&(a.l.Ho(e),a.l.assert(!e.Zl)),e.Zl=!0;var t=e.r;t&&((t=t.constructor)&&!t.Zl&&a.b.oK(t),a.b.eaa(e)),(t=e.InitClass||null)||(t=e.InitClass),t&&t.call(e)},a.b.mh=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return a.b.mba(e,t);if(e.constructor===Object)return a.b.Vv(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},o_("Object.compareValues",a.b.mh,a),a.b.mba=function(e,t){if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(!a.b.mh(e[r],t[r]))return!1;return!0},a.b.oU=function(e,t){if(!e)return!t||0==t.length;if(!t)return!e||0==e.length;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r]&&(-1==e.indexOf(t[r])||-1==t.indexOf(e[r])))return!1;return!0},a.b.Vv=function(e,t){var r,i=!1;if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object)||e.constructor!==t.constructor)return!1;for(r in e)if(i||(i=!0),e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||e[r]!==t[r]&&("object"!=typeof e[r]||!a.b.Vv(e[r],t[r]))))return!1;for(r in t)if(i||(i=!0),t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!!i||JSON.stringify(e)===JSON.stringify(t)},a.b.ph=function(e){var t;if(void 0===e||null===e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},a.b.eaa=function(e){a.b.lL&&a.b.oT(e,e.r)},a.b.oT=function(e,t){if(t){var r=t.constructor;a.b.oT(e,r.r);var i,r=r.lL;if(r)for(i in r)if(r.hasOwnProperty(i)){var n=r[i];if(i!=n){var o=e.prototype;!o.hasOwnProperty(i)&&o.hasOwnProperty(n)?o[i]=o[n]:!o.hasOwnProperty(n)&&o.hasOwnProperty(i)&&(o[n]=o[i])}}}},a.Ns=function(){return"function"==typeof define&&define.amd},a.l={},o_("Assert",a.l,a),a.l.zoa=function(){a.l.DEBUG=!0},o_("Assert.forceDebug",a.l.zoa,a),a.l.Hna=function(){a.l.DEBUG=!1},o_("Assert.clearDebug",a.l.Hna,a),a.l.iO=function(){return 1==a.l.DEBUG},o_("Assert.isDebug",a.l.iO,a),a.l.assert=function(e,t){if(a.l.DEBUG&&!e){var r,i=t||"";if(2<arguments.length){for(i+="(",r=2;r<arguments.length;r+=1)i+=arguments[r];i+=")"}a.l.Sd(i)}},o_("Assert.assert",a.l.assert,a),a.l.Yb=function(){a.l.DEBUG&&a.l.Sd("Abstract function called")},o_("Assert.failedInAbstractFunction",a.l.Yb,a),a.l.$c=function(e,t,r){var i;a.l.DEBUG&&(null!=e?(a.l.Qh(t,"function",null,0,!1),i=t.prototype,i.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+i,0,r)):a.l.Sd("null object doesn't match prototype "+i,0,r))},o_("Assert.assertPrototype",a.l.$c,a),a.l.xna=function(e,t,r){var i;a.l.DEBUG&&null!=e&&(null!=e?(a.l.Qh(t,"function",null,0,!1),i=t.prototype,i.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+i,0,r)):a.l.Sd("null object doesn't match prototype "+i,0,r))},o_("Assert.assertPrototypeOrNull",a.l.xna,a),a.l.yna=function(e,t,r,i){a.l.DEBUG&&(t=t.prototype,r=r.prototype,t.isPrototypeOf(e)||r.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+t+" or "+r,0,i))},o_("Assert.assertPrototypes",a.l.yna,a),a.l.rna=function(e){a.l.DEBUG&&e&&void 0===e.nodeType&&a.l.Sd(e+" is not a DOM Node")},o_("Assert.assertDomNodeOrNull",a.l.rna,a),a.l.aN=function(e){a.l.DEBUG&&(e&&void 0!==e.nodeType||a.l.Sd(e+" is not a DOM Node"))},o_("Assert.assertDomNode",a.l.aN,a),a.l.$M=function(e,t){a.l.DEBUG&&(a.l.aN(e),1!==e.nodeType?a.l.Sd(e+" is not a DOM Element"):t&&e.nodeName!==t&&a.l.Sd(e+" is not a "+t+" Element"))},o_("Assert.assertDomElement",a.l.$M,a),a.l.qna=function(e,t){a.l.DEBUG&&null!=e&&(a.l.aN(e),1!==e.nodeType?a.l.Sd(e+" is not a DOM Element"):t&&e.nodeName!==t&&a.l.Sd(e+" is not a "+t+" Element"))},o_("Assert.assertDomElementOrNull",a.l.qna,a),a.l.Qh=function(e,t,r,i,n){!a.l.DEBUG||null==e&&n||typeof e===t||(e=e+" is not of type "+t,r&&(e=r+e),a.l.Sd(e))},o_("Assert.assertType",a.l.Qh,a),a.l.Kf=function(e,t){a.l.DEBUG&&a.l.Qh(e,"object",t,0,!1)},o_("Assert.assertObject",a.l.Kf,a),a.l.W1=function(e,t){a.l.DEBUG&&a.l.Qh(e,"object",t,0,!0)},o_("Assert.assertObjectOrNull",a.l.W1,a),a.l.tna=function(e,t){a.l.DEBUG&&(a.l.Qh(e,"string",t,0,!1),a.l.assert(0<e.length,"empty string"))},o_("Assert.assertNonEmptyString",a.l.tna,a),a.l.om=function(e,t){a.l.DEBUG&&a.l.Qh(e,"string",t,0,!1)},o_("Assert.assertString",a.l.om,a),a.l.bN=function(e,t){a.l.DEBUG&&a.l.Qh(e,"string",t,0,!0)},o_("Assert.assertStringOrNull",a.l.bN,a),a.l.Ho=function(e,t){a.l.DEBUG&&a.l.Qh(e,"function",t,0,!1)},o_("Assert.assertFunction",a.l.Ho,a),a.l.wu=function(e,t){a.l.DEBUG&&a.l.Qh(e,"function",t,0,!0)},o_("Assert.assertFunctionOrNull",a.l.wu,a),a.l.V1=function(e,t){a.l.DEBUG&&a.l.Qh(e,"boolean",t,0,!1)},o_("Assert.assertBoolean",a.l.V1,a),a.l.nm=function(e,t){a.l.DEBUG&&a.l.Qh(e,"number",t,0,!1)},o_("Assert.assertNumber",a.l.nm,a),a.l.vna=function(e,t){a.l.DEBUG&&a.l.Qh(e,"number",t,0,!0)},o_("Assert.assertNumberOrNull",a.l.vna,a),a.l.QD=function(e,t){a.l.DEBUG&&!Array.isArray(e)&&(void 0===t&&(t=e+" is not an array"),a.l.Sd(t))},o_("Assert.assertArray",a.l.QD,a),a.l.vy=function(e,t){a.l.DEBUG&&null!=e&&!Array.isArray(e)&&(void 0===t&&(t=e+" is not an array"),a.l.Sd(t))},o_("Assert.assertArrayOrNull",a.l.vy,a),a.l.una=function(e,t){a.l.DEBUG&&!isNaN(e)&&(void 0===t&&(t=e+" is convertible to a number"),a.l.Sd(t))},o_("Assert.assertNonNumeric",a.l.una,a),a.l.wna=function(e,t){a.l.DEBUG&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),a.l.Sd(t))},o_("Assert.assertNumeric",a.l.wna,a),a.l.sna=function(e,t,r){var i;if(null==e||void 0===t[e.toString()]){if(void 0===r){r=" is not in set: {";for(i in t)t.hasOwnProperty(i)&&(r+=i,r+=",");r=e+(r+"}")}a.l.Sd(r)}},o_("Assert.assertInSet",a.l.sna,a),a.l.Sd=function(e,t,r){throw t="Assertion",r&&(t+=" ("+r+")"),t+=" failed: ",void 0!==e&&(t+=e),Error(t)},o_("Assert.assertionFailed",a.l.Sd,a);var o=r.__oj_Assert_DEBUG;return void 0!==o&&(a.l.DEBUG=o),a.Pg=function(){this.Init()},o_("EventSource",a.Pg,a),a.b.ga(a.Pg,a.b,"oj.EventSource"),a.Pg.prototype.Init=function(){this.kd=[],a.Pg.r.Init.call(this)},a.b.g("EventSource.prototype.Init",{Init:a.Pg.prototype.Init}),a.Pg.prototype.on=function(e,t){var r,i=!1;for(r=0;r<this.kd.length;r++)if(this.kd[r].eventType==e&&this.kd[r].eventHandlerFunc==t){i=!0;break}i||this.kd.push({eventType:e,eventHandlerFunc:t})},a.b.g("EventSource.prototype.on",{on:a.Pg.prototype.on}),a.Pg.prototype.off=function(e,t){var r;for(r=this.kd.length-1;0<=r;r--)if(this.kd[r].eventType==e&&this.kd[r].eventHandlerFunc==t){this.kd.splice(r,1);break}},a.b.g("EventSource.prototype.off",{off:a.Pg.prototype.off}),a.Pg.prototype.handleEvent=function(e,t){var r,i;for(r=0;r<this.kd.length;r++)if(i=this.kd[r],i.eventType==e&&(i=i.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)),!1===i))return!1;return!0},a.b.g("EventSource.prototype.handleEvent",{handleEvent:a.Pg.prototype.handleEvent}),a.ba={},o_("Config",a.ba,a),a.ba.Bg=function(){var e;return a.Ns()?(a.l.assert(void 0!==t,"ojtranslations module must be defined"),e=t._ojLocale_,"root"==e?"en":e):(e=a.ba.Qt,null==e&&((e=document.documentElement.lang)||(e=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),a.ba.Qt=e=e.toLowerCase()),e)},o_("Config.getLocale",a.ba.Bg,a),a.ba.Eqa=function(r,i){if(a.Ns()){var n=["ojL10n!ojtranslations/nls/"+r+"/ojtranslations"];a.La&&n.push("ojL10n!ojtranslations/nls/"+r+"/localeElements"),e(n,function(e,r){t=e,r&&a.La.t$(r),i&&i()})}else a.ba.Qt=r,i&&i()},o_("Config.setLocale",a.ba.Eqa,a),a.ba.lb=function(t){var r=/^\/|:/;return null==t||r.test(t)?t:(r=a.ba.Oka)?r+("/"==r.charAt(r.length-1)?"":"/")+t:a.Ns()?(r=e.toUrl("ojs/_foo_"),r.replace(/[^\/]*$/,"../"+t)):t},o_("Config.getResourceUrl",a.ba.lb,a),a.ba.Fqa=function(e){a.ba.Oka=e},o_("Config.setResourceBaseUrl",a.ba.Fqa,a),a.ba.Dqa=function(e){a.ba.laa=e},o_("Config.setAutomationMode",a.ba.Dqa,a),a.ba.GN=function(){return a.ba.laa},o_("Config.getAutomationMode",a.ba.GN,a),a.ba.O3=function(){var e="Oracle JET Version: "+a.version+"\n",e=e+("Oracle JET Revision: "+a.revision+"\n"),t="undefined"!=typeof window;return t&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),a.ia&&(e+="Knockout Version: "+a.ia.s$()+"\n"),t&&window.uqa&&(e+="Require Version: "+window.uqa.version+"\n"),e},o_("Config.getVersionInfo",a.ba.O3,a),a.ba.Rpa=function(){console.log(a.ba.O3())},o_("Config.logVersionInfo",a.ba.Rpa,a),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),a.Na=function(){},a.Na.sl={yF:"ie",OP:"firefox",uQ:"safari",v6:"chrome",zv:"unknown"},a.Na.cn={FQ:"trident",PF:"webkit",RP:"gecko",zv:"unknown"},a.Na.aj={y7:"Windows",o7:"Solaris",iQ:"Mac",zv:"Unknown",CP:"Android",zF:"IOS",V6:"Linux"},a.Na.Fy=function(){var e;a.Ea.Ni(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=a.Ea.qr(e),r=a.Na.oca;if(r&&r.hashCode===t)return{os:r.os,browser:r.browser,browserVersion:r.browserVersion,engine:r.engine,engineVersion:r.engineVersion,hashCode:r.hashCode};var r=a.Na.aj.zv,i=a.Na.sl.zv,n=0,o=a.Na.cn.zv,s=0;return-1<e.indexOf("iphone")||-1<e.indexOf("ipad")?r=a.Na.aj.zF:-1<e.indexOf("mac")?r=a.Na.aj.iQ:-1<e.indexOf("sunos")?r=a.Na.aj.o7:-1<e.indexOf("android")?r=a.Na.aj.CP:-1<e.indexOf("linux")?r=a.Na.aj.V6:-1<e.indexOf("win")&&(r=a.Na.aj.y7),-1<e.indexOf("msie")?(i=a.Na.sl.yF,n=a.Na.Ci(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(o=a.Na.cn.FQ,s=a.Na.Ci(e,/trident\/(\d+[.]\d+)/))):-1<e.indexOf("trident")?(i=a.Na.sl.yF,n=a.Na.Ci(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(o=a.Na.cn.FQ,s=a.Na.Ci(e,/trident\/(\d+[.]\d+)/))):-1<e.indexOf("chrome")?(i=a.Na.sl.v6,n=a.Na.Ci(e,/chrome\/(\d+[.]\d+)/),o=a.Na.cn.PF,s=a.Na.Ci(e,/applewebkit\/(\d+[.]\d+)/)):-1<e.indexOf("safari")?(i=a.Na.sl.uQ,n=a.Na.Ci(e,/version\/(\d+[.]\d+)/),o=a.Na.cn.PF,s=a.Na.Ci(e,/applewebkit\/(\d+[.]\d+)/)):-1<e.indexOf("firefox")&&(i=a.Na.sl.OP,n=a.Na.Ci(e,/rv:(\d+[.]\d+)/),o=a.Na.cn.RP,s=a.Na.Ci(e,/gecko\/(\d+)/)),r=a.Na.oca={hashCode:t,os:r,browser:i,browserVersion:n,engine:o,engineVersion:s},{os:r.os,browser:r.browser,browserVersion:r.browserVersion,engine:r.engine,engineVersion:r.engineVersion,hashCode:r.hashCode}},a.Na.Ci=function(e,t){var r=e.match(t);return r&&(r=r[1])?parseFloat(r):0},a.Ee={},a.Ee.Z4=function(e){var t=document.getElementsByClassName(e).item(0);if(null===t&&(t=document.createElement("meta"),t.className=e,document.head.appendChild(t)),(t=window.getComputedStyle(t))&&(t=t.getPropertyValue("font-family"))&&"none"!=t&&(t=t.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,""))){try{t=JSON.parse(t)}catch(r){return a.q.error("Error parsing json for selector "+e+".\nString being parsed is "+t+"\n"+r),null}return t}return a.q.info("No json found for selector "+e),null},a.Ee.Yk=function(e){e=e.toLowerCase(),null==a.Ee.OO&&(a.Ee.OO={});var t=a.Ee.OO[e];return null==t&&(t=a.Ee.Z4("oj-"+e+"-option-defaults"),null==t&&(t={}),a.Ee.OO[e]=t),t},a.ResponsiveUtils={},a.ResponsiveUtils.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},a.ResponsiveUtils.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},a.ResponsiveUtils.Mp={},a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.SM]=0,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.MD]=1,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.LG]=2,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.XL]=3,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.XXL]=4,a.ResponsiveUtils.xea=function(e){var t=document.getElementsByClassName(e).item(0);return null===t&&(t=document.createElement("meta"),t.className=e,document.head.appendChild(t)),window.getComputedStyle(t).getPropertyValue("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},a.ResponsiveUtils.getFrameworkQuery=function(e){return e=a.ResponsiveUtils.xea("oj-mq-"+e),"null"==e?null:e},a.ResponsiveUtils.compare=function(e,t){var r=a.ResponsiveUtils.Mp[e],i=a.ResponsiveUtils.Mp[t];if(void 0==r)throw"size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";if(void 0==i)throw"size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";return r-i},a.Ea={},o_("StringUtils",a.Ea,a),a.Ea.m$=/^\s*|\s*$/g,a.Ea.ph=function(e){return null===e||0===a.Ea.trim(e).length},o_("StringUtils.isEmpty",a.Ea.ph,a),a.Ea.Ni=function(e){return!(void 0!==e&&!a.Ea.ph(e))},o_("StringUtils.isEmptyOrUndefined",a.Ea.Ni,a),a.Ea.qd=function(e){return null!==e&&("string"==typeof e||e instanceof String)},o_("StringUtils.isString",a.Ea.qd,a),a.Ea.trim=function(e){return a.Ea.qd(e)?e.replace(a.Ea.m$,""):e},o_("StringUtils.trim",a.Ea.trim,a),a.Ea.qr=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},a.zc={},o_("CollectionUtils",a.zc,a),a.zc.Lf=function(e,t,r,i,n){return a.zc.vU(e,t,r,i,n,0)},o_("CollectionUtils.copyInto",a.zc.Lf,a),a.zc.isPlainObject=function(e){if("object"==typeof e)try{if(e.constructor&&e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!0}catch(e){}return!1},o_("CollectionUtils.isPlainObject",a.zc.isPlainObject,a),a.zc.vU=function(e,t,r,i,n,o){var s,c,l;if(e&&t&&e!==t){l=Object.keys(t);for(var d=0;d<l.length;d++){s=l[d],c=r?r(s):s,s=t[s];var u=!1;if(i&&o<n){var p=e[c];a.zc.isPlainObject(p)&&a.zc.isPlainObject(s)&&(u=!0,a.zc.vU(p,s,r,!0,n,o+1))}u||(e[c]=s)}}return e},a.ha={},o_("Translations",a.ha,a),a.ha.cP=function(e){a.ha.pH=e},o_("Translations.setBundle",a.ha.cP,a),a.ha.v3=function(e){return a.ha.WW(e)},o_("Translations.getResource",a.ha.v3,a),a.ha.Mb=function(e,t){return null==e?null:a.ha.xda(e,t)},o_("Translations.applyParameters",a.ha.Mb,a),a.ha.A=function(e,t){var r=a.ha.WW(e);if(null==r)return e;var i={};return 2<arguments.length?i=Array.prototype.slice.call(arguments,1):2==arguments.length&&(i=arguments[1],"object"==typeof i||i instanceof Array||(i=[i])),a.ha.Mb(r,i)},o_("Translations.getTranslatedString",a.ha.A,a),a.ha.iE=function(e){e=a.ha.XV()[e];var t,r;if(null==e)return{};t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},o_("Translations.getComponentTranslations",a.ha.iE,a),a.ha.WW=function(e){e=e?e.split("."):[];var t=a.ha.XV(),r=e.length,i=0,n=e[i];for(a.l.Kf(t);0<--r&&t;)t=t[n],i++,n=e[i];return t?t[n]||null:null},a.ha.xda=function(e,t){var r,i,a=e.length,n=[],o=null,s=!1,c=!1,l=!1,d=!1;for(i=0;i<a;i++){var u=e.charAt(i),p=!1;if(s)p=!0,s=!1;else switch(u){case"$":s=!0;break;case"{":d||(c||(r=!1,o=[]),c=!0);break;case"}":c&&0<o.length&&(c=t[o.join("")],n.push(void 0===c?"null":c)),c=!1;break;case"[":c||(l?d=!0:l=!0);break;case"]":d?d=!1:l=!1;break;default:p=!0}p&&(c?","==u||" "==u?r=!0:r||o.push(u):d||n.push(u))}return n.join("")},a.ha.XV=function(){var e=a.ha.pH;return e?e:a.Ns()?(a.l.assert(void 0!==t,"ojtranslations module must be defined"),t):{}},a}),define("numberFormatHelper",["ojs/ojcore"],function(){"use strict";function e(){}return e.prototype.formatNumber=function(e,t,r){var t,i,a,n;a=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_NUMBER);var o={style:r,minimumIntegerDigits:1,minimumFractionDigits:t,maximumFractionDigits:t,useGrouping:!0};return n=a.createConverter(o),i=n.format(e)},new e}),define("currencyHelper",["knockout","ccRestClient","ccConstants","numberFormatHelper","pubsub"],function(e,t,r,i,a){"use strict";function n(){return this.currencyObject=e.observable(null),this.currencyMapObject=e.observable(null),this.setFractionalDigits=e.observable(null),this.currencies=e.observableArray([]),this.currenciesLoaded=!1,this.priceListGroups=e.observableArray([]),this.defaultPriceListGroup=null,this.priceListGroupsLoaded=!1,this.getCurrencyMapCurrenciesBinding=this.getCurrencyMapCurrencies.bind(this),$.Topic(a.topicNames.PRICE_LIST_GROUP_UPDATE).subscribe(this.getCurrencyMapCurrenciesBinding),$.Topic(a.topicNames.ADMIN_CONTENT_LANGUAGE_CHANGED).subscribe(this.getCurrencyMapCurrenciesBinding),this}return n.prototype.DECIMAL_NUMBER_FORMAT="decimal",n.prototype.getCurrency=function(e,i){var a=r.ENDPOINT_CURRENCIES_LIST_CURRENCIES,n={};null==e&&(e=this.getCurrencySuccess.bind(this)),null==i&&(i=this.getCurrencyError.bind(this)),t.request(a,n,e,i)},n.prototype.getCurrencySuccess=function(e){this.currencyObject(e.selectedCurrency),this.checkCurrencySymbol()},n.prototype.getCurrencyError=function(e){throw"Not Implemented"},n.prototype.getCurrencies=function(e){var i=r.ENDPOINT_CURRENCIES_LIST_CURRENCIES,a={sort:"currencyCode:asc"};t.request(i,a,e,this.getCurrenciesError.bind(this))},n.prototype.getCurrenciesError=function(e){throw"Not Implemented"},n.prototype.getPriceListGroups=function(e){var i=r.ENDPOINT_LIST_PRICE_LIST_GROUPS,a={includeDeleted:"true"};t.request(i,a,e,this.getPriceListGroupsError.bind(this))},n.prototype.getPriceListGroupsError=function(e){throw"Not Implemented"},n.prototype.getPLGCurrencies=function(e){this.getCurrencies(function(t){this.currencies(t.items),this.currenciesLoaded=!0,this.priceListGroupsLoaded&&this.formatCurrenciesForList(e)}.bind(this)),this.getPriceListGroups(function(t){this.priceListGroups(t.items),this.defaultPriceListGroup=t.defaultPriceListGroup,this.priceListGroupsLoaded=!0,this.currenciesLoaded&&this.formatCurrenciesForList(e)}.bind(this))},n.prototype.formatCurrenciesForList=function(e){var t,r,i=this.priceListGroups(),a=[];e:for(t=0;t<i.length;t++){var n={};for(n.repositoryId=i[t].currency.repositoryId,n.currencyCode=i[t].currency.currencyCode,r=0;r<a.length;r++)if(a[r].repositoryId===i[t].currency.repositoryId)continue e;for(n.selectListDisplayName=i[t].currency.currencyCode+" - "+i[t].currency.displayName,n.fractionalDigits=i[t].currency.fractionalDigits,n.repositoryId===this.defaultPriceListGroup.locale&&(n.isDefault=!0),r=0;r<this.currencies().length;r++)this.currencies()[r].currencyCode===i[t].currency.currencyCode&&(n.selectListDisplayName=i[t].currency.currencyCode+" - "+this.currencies()[r].displayName);a.push(n)}a.sort(function(e,t){return e.selectListDisplayName.localeCompare(t.selectListDisplayName)}),e(a)},n.prototype.checkCurrencySymbol=function(){this.currencyObject().symbol.match(/^[0-9a-zA-Z]+$/)&&(this.currencyObject().symbol=this.currencyObject().symbol+" ")},n.prototype.handleFractionalDigits=function(e,t){var r;return r="number"==typeof t?t:this.currencyObject()?this.currencyObject().fractionalDigits:2,null===e||""===e?e:Number(e).toFixed(r)},n.prototype.handleFractionalDigitsAndLocale=function(e){var t;return t=null!==this.setFractionalDigits()?this.setFractionalDigits():this.currencyObject()?this.currencyObject().fractionalDigits:2,null==e||""===e?e:e=i.formatNumber(e,t,this.DECIMAL_NUMBER_FORMAT)},n.prototype.getCurrencyMapCurrencies=function(){var e={};e.defaultFirst=!0,t.request(r.ENDPOINT_LIST_PRICE_LIST_GROUPS,e,this.getCurrencyMapCurrenciesSuccess.bind(this),this.getCurrencyMapCurrenciesError.bind(this))},n.prototype.getCurrencyMapCurrenciesSuccess=function(e){e.defaultPriceListGroupId=e.defaultPriceListGroup.id,$.each(e.items,function(t){e.items[t].isDefaultPriceListGroup=e.items[t].id===e.defaultPriceListGroup.id}),this.currencyMapObject(e)},n.prototype.getCurrencyMapCurrenciesError=function(e){},new n}),define("ccImageZoom",["spinner"],function(e){"use strict";function t(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),window.cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)},this.framesPerSecond=60,this.spinner=e,this.usingSpinner=!0,this.spinnerDelay=200,this.zoomDelay=800,this.smallImageClass="ccz-small",this.magnifierClass="ccz-magnifier",this.fullImageClass="ccz-full",this.flyoutClass="ccz-flyout",this.magnifierPercent=.45,this.flyoutSpacing=0,this.element=null,this.flyout=null,this.flyoutEnabled=!0,this.flyoutScaling=.8,this.magnifierEnabled=!1,this.magnifierPercentEased=.25,this.smallImageUrl=null,this.smallImageUrls=null,this.fullImageUrl=null,this.fullImageUrls=null,this.errorImageUrl=null,this.imageMetadataDefault=null,this.imageMetadatas=[],this.fullImage=null,this.smallIamge=null,this.jqBackgroundImage=null,this.loading=!1,this.magnifierMin=.1,this.magnifierMax=.9,this.magnifierVelocity=.02,this.dampingFactor=12,this.magnifierBorderWidth=2,this.zoomCurtainClassName="ccz-zoom-curtain",this.magnifierBackgroundClassName="ccz-magnifier-background",this.lastTouchDistance=0,this.currentMx=0,this.currentMy=0,this.xp=0,this.yp=0,this.offsetMagnifier=!1,this.replaceImageAtIndex=!0;var t=this;this.handleMouseWheel=function(e){e=window.event||e,e.preventDefault&&e.preventDefault();var r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY)),i=Math.max(t.magnifierMin,Math.min(t.magnifierMax,t.magnifierPercent+t.magnifierVelocity*r));return t.magnifierPercent=i,!1},this.handleMouseMove=function(e){if(!t.loading){if(t.imageLoadFailed||t.fullImageUrl.indexOf(t.errorImageUrl)!=-1)return;if(e.preventDefault(),0===e.type.indexOf("touch")){var a=e.touches||e.originalEvent.touches;if(a.length>1){var n=Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY));t.lastTouchDistance=n}r=a[0].pageX,i=a[0].pageY}else r=e.pageX||r,i=e.pageY||i;t.magnify_offset||(t.magnify_offset=$(t.element).offset());var o=r-t.magnify_offset.left,s=i-t.magnify_offset.top;if(t.magnifierEnabled)t.currentMx=o,t.currentMy=s;else{var c=t.jqSmallImage.width(),l=t.jqSmallImage.height(),d=t.getMagnifierWidth(),u=t.getMagnifierHeight(),p=c-d/2,h=d/2,f=l-u/2,m=u/2;t.currentMx=t.constrainValue(h,p,o),t.currentMy=t.constrainValue(m,f,s)}(o>Math.round($(this).width())||s>Math.round($(this).height())||o<0||s<0)&&t.handleMouseLeave()}},this.handleMouseLeave=function(){var e=this;clearTimeout(e.zoomTimeout),e.cancelRedraw(e),$("."+e.zoomCurtainClassName).hide(),$("."+e.magnifierBackgroundClassName).hide(),$(e.element).css({cursor:"auto"}),e.jqMagnifier.fadeOut(100),e.flyoutEnabled&&e.jqFlyout.fadeOut(100)},this.isIE=function(){return!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/Edge/))},this.handleMouseEnter=function(){var e=this;e.loading||(void 0==e.jqFlyout.find("img").attr("src")&&(e.jqFlyout.find("img").attr("src",e.fullImageUrl),$.when(e.loadImage(e.fullImageUrl)).done(function(t){e.jqFullImage.attr("src",t.src)}).fail(function(t){e.imageLoadFailed=!0,e.jqFullImage.attr("src",e.errorImageUrl)})),e.magnify_offset=$(e.element).offset(),e.fullImageUrl.indexOf(e.errorImageUrl)!=-1||e.imageLoadFailed||(e.zoomTimeout=setTimeout(function(){e.magnify_offset=$(e.element).offset(),e.isIE()?$(e.element).css({cursor:"pointer"}):$(e.element).css({cursor:"zoom-in"}),e.magnifierBackgroundImage(),e.jqZoomCurtain?e.jqZoomCurtain.fadeIn(100):e.jqZoomCurtain=e.addCurtain(e.element),e.flyoutEnabled&&e.setFlyoutSizeAndPosition(),e.jqMagnifier.fadeIn(500),e.flyoutEnabled&&e.jqFlyout.fadeIn(500),e.timeoutid=e.scheduleRedraw(e)},e.zoomDelay)))}}var r,i;return t.prototype.registerMouseWheel=function(e){var t=this,r=t.jqMagnifier[0],i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";r.addEventListener?r.addEventListener(i,t.handleMouseWheel,!1):r.attachEvent("onmousewheel",t.handleMouseWheel)},t.prototype.getMagnifierWidth=function(){var e=this,t=e.getFlyoutDimensions(),r=t.width*e.magnifierPercentEased;return r},t.prototype.getMagnifierHeight=function(){var e=this,t=e.getFlyoutDimensions(),r=t.width*e.magnifierPercentEased,i=e.flyoutEnabled?t.height*e.magnifierPercentEased:r;return i},t.prototype.getPositionMagnifierCss=function(){var e=this,t=e.jqSmallImage.width(),r=e.jqSmallImage.height(),i=e.getMagnifierWidth(),a=e.getMagnifierHeight(),n=e.offsetMagnifier?1:2,o=e.offsetMagnifier?25:0,s=e.currentMx+2*o-i/n,c=e.currentMy-o-a/n,l=e.currentMx/t,d=e.currentMy/r;e.magnifierEnabled||(s=e.constrainValue(e.magnifierBorderWidth,t-i,s),c=e.constrainValue(e.magnifierBorderWidth,r-a,c));var u=s*-1,p=c*-1;e.magnifierEnabled&&(u=(l*e.jqBackgroundImage.width()-i/2)*-1,p=(d*e.jqBackgroundImage.height()-a/2)*-1);return{css:{width:i,height:a,left:s-e.magnifierBorderWidth,top:c-e.magnifierBorderWidth},background:{left:u,top:p}}},t.prototype.getPositionFlyoutCss=function(){var e=this,t=(e.getFlyoutDimensions(),e.jqSmallImage.width()),r=e.jqSmallImage.height(),i=t/e.magnifierPercentEased,a=r/e.magnifierPercentEased,n=e.xp/t,o=e.yp/r,s=n*i-e.jqFlyout.width()/2,c=o*a-e.jqFlyout.height()/2;return e.magnifierEnabled||(s=e.constrainValue(0,i-e.jqFlyout.width(),s),c=e.constrainValue(0,a-e.jqFlyout.height(),c)),{left:-s,top:-c,width:i,height:a}},t.prototype.positionMagnifier=function(){var e=this,t=e.getPositionMagnifierCss();e.jqMagnifier.css(t.css),$("."+e.magnifierBackgroundClassName).css(t.background)},t.prototype.positionFlyout=function(){var e=this,t=e.getPositionFlyoutCss();e.jqFullImage.css(t)},t.prototype.getFlyoutDimensions=function(){var e=this,t=e.jqSmallImage.width()*e.flyoutScaling,r=e.jqSmallImage.height()*e.flyoutScaling;return{width:t,height:r}},t.prototype.setFlyoutSizeAndPosition=function(){var e=this,t=e.getFlyoutDimensions(),r=e.jqSmallImage.width()+e.flyoutSpacing+"px";e.jqFlyout.css({width:t.width,height:t.height,top:"0px",left:r})},t.prototype.magnifierBackgroundImage=function(){var e=this,t=e.magnifierEnabled?e.fullImageUrl:e.smallImageUrl;if(null!==e.jqBackgroundImage)return e.jqBackgroundImage.attr("src")!=t&&$(e.jqBackgroundImage).attr("src",t),e.jqBackgroundImage.css({width:e.jqSmallImage.width(),height:e.jqSmallImage.height()}),void e.jqBackgroundImage.show();var r=$("<img class='"+e.magnifierBackgroundClassName+"'/>");e.magnifierEnabled?r.css({position:"absolute"}):r.css({position:"absolute","max-height":"none","max-width":"none",width:e.jqSmallImage.width(),height:e.jqSmallImage.height()}),$(r).attr("src",t),e.jqBackgroundImage=r,e.jqMagnifier.append(r)},t.prototype.addCurtain=function(e){var t=this,r=$("<div class='"+t.zoomCurtainClassName+"'></div>");return r.css({display:"block",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgb(255,255,255)",opacity:0}),$(t.element).append(r),r.animate({opacity:.25},100),r},t.prototype.loadImage=function(e){var t=function(t){function r(){n.onload=null,n.onerror=null,n.onabort=null}function i(){r(),t.resolve(n)}function a(){r(),t.reject(n)}var n=new Image;n.src=e,n.onload=i,n.onerror=a,n.onabort=a};return $.Deferred(t).promise()},t.prototype.constrainValue=function(e,t,r){return Math.max(e,Math.min(t,r))},t.prototype.cancelRedraw=function(e){cancelAnimFrame(e.timeoutid)},t.prototype.scheduleRedraw=function(e){e.timeoutid&&e.cancelRedraw(e),function t(){e.timeoutid=requestAnimFrame(t),e.xp+=(e.currentMx-e.xp)/e.dampingFactor,e.yp+=(e.currentMy-e.yp)/e.dampingFactor,e.magnifierPercentEased+=(e.magnifierPercent-e.magnifierPercentEased)/e.dampingFactor,e.flyoutEnabled&&e.positionFlyout(),e.positionMagnifier()}()},t.prototype.presentImageAtIndex=function(e){var t,r=this;r.smallImageUrl=r.smallImageUrls()[e],r.fullImageUrl=r.fullImageUrls()[e];var i={alttext:r.smallImageUrl,title:r.smallImageUrl};i=$.extend(i,r.imageMetadataDefault,r.imageMetadatas[e]),r.imageLoadFailed=!1,r.loading=!0,r.jqSmallImage.fadeTo(200,0,function(){r.jqFlyout.find("img").removeAttr("src"),r.usingSpinner&&(t=setTimeout(function(){r.spinner.create({parent:r.element})},r.spinnerDelay)),r.replaceImageAtIndex&&(r.jqSmallImage.attr("src",r.smallImageUrl),r.jqSmallImage.attr("alt",i.altText),r.jqSmallImage.attr("title",i.titleText)),r.jqFullImage.attr("title",i.titleText),r.jqFullImage.attr("alt",i.altText),$.when(r.loadImage(r.smallImageUrl)).done(function(e){r.jqSmallImage.fadeTo(200,1)}).fail(function(e){r.imageLoadFailed=!0,r.jqSmallImage.fadeTo(200,1),r.jqSmallImage.attr("src",r.errorImageUrl)}).always(function(){r.usingSpinner&&(r.loading=!1,clearTimeout(t),r.spinner.destroyAndClearTimeout())})})},t.prototype.start=function(){var e=this,t="10px";if(e.imageLoadFailed=!1,e.jqSmallImage=$(e.element).find("."+e.smallImageClass),e.jqFullImage=$(e.element).find("."+e.fullImageClass),e.jqFlyout=$(e.element).find("."+e.flyoutClass),e.jqMagnifier=$(e.element).find("."+e.magnifierClass),e.jqMagnifier.length||(e.jqMagnifier=$("<div></div>"),e.jqMagnifier.addClass(e.magnifierClass),$(e.element).append(e.jqMagnifier)),!e.jqFlyout.length&&e.flyoutEnabled){e.jqFlyout=$("<div></div>"),e.jqFlyout.css({display:"none"}),e.jqFlyout.addClass(e.flyoutClass);var r=$("<img></img>");r.css({"max-width":"none"}),r.addClass(e.fullImageClass),r.on("error",function(){e.imageLoadFailed=!0}),e.jqFlyout.append(r),e.jqFullImage=r,$(e.element).append(e.jqFlyout)}if(e.index&&(e.subHandle=e.index.subscribe(function(t){e.presentImageAtIndex(t)}),$(e.element).on("remove",function(){e.subHandle&&e.subHandle.dispose()})),e.flyoutEnabled||(t="100%"),e.element){
e.registerMouseWheel(),$(e.element).css({position:"relative",display:"inline-block"}),e.jqFullImage.css({position:"absolute"}),e.jqSmallImage.css({display:"block","-webkit-touch-callout":"none"});var i={background:"#DDD",border:"1px solid #FFF","box-shadow":"0 0 15px rgba(0,0,0,0.5)",display:"none",overflow:"hidden",position:"absolute","z-index":"99"};e.jqFlyout.css(i);var a=e.magnifierBorderWidth+"px solid rgb(125,125,125)",n={position:"absolute","border-radius":t,display:"none","z-index":"98",overflow:"hidden","background-repeat":"no-repeat",border:a};e.jqMagnifier.css(n);var o=e.element;$(o).bind("touchstart",function(t){t.preventDefault(),e.magnifierEnabled&&(e.offsetMagnifier=!0),e.handleMouseEnter(),e.handleMouseMove(t)}),$(o).bind("touchend",function(t){e.handleMouseLeave(),e.offsetMagnifier=!1}),$(o).bind("touchmove",e.handleMouseMove),$(o).mousemove(e.handleMouseMove),$(o).mouseenter(function(){e.handleMouseEnter()}),$(o).mouseleave(function(){e.handleMouseLeave()})}},t}),define("ccNumber",["CCi18n"],function(e){"use strict";function t(){}return t.prototype.formatNumber=function(t,r,i){var a="ns.ccformats:resources.numberformat",n=e.t(a);n&&n!==a||(n="000,000,000.00");for(var o="",s=-1,c="",l=0,d=n.length-1;d>=0;d--)if(isNaN(parseInt(n[d],10))&&s==-1)s=l,o=n[d];else{if(s>-1&&isNaN(parseInt(n[d],10))){c=n[d];break}l++}return isNaN(i)||(s=i),this.formatNumberFromData(t,s,o,c,r)},t.prototype.formatNumberFromData=function(e,t,r,i,a){if(""===e)return"";if(isNaN(e))return"";if(0==jQuery.trim(e).length)return"";var n="";n=parseFloat(e).toFixed(t).toString(),a||(n=parseFloat(n).toString());var o=parseFloat(n)>=0?"":"-",s="",c=parseFloat(n)>=0?Math.floor(parseFloat(n)):Math.ceil(parseFloat(n));c=Math.abs(c);var l=n.indexOf(".")>-1;return l===!0&&(s=n.substring(n.indexOf(".")+1,n.length)),n="",""!==s&&(n=r+s),n=o+c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i)+n},new t}),function(e){var t=new Array,r=new Array;e.fn.doAutosize=function(t){var r=e(this).data("minwidth"),i=e(this).data("maxwidth"),a="",n=e(this),o=e("#"+e(this).data("tester_id"));if(a!==(a=n.val())){var s=a.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");o.html(s);var c=o.width(),l=c+t.comfortZone>=r?c+t.comfortZone:r,d=n.width(),u=l<d&&l>=r||l>r&&l<i;u&&n.width(l)}},e.fn.resetAutosize=function(t){var r=e(this).data("minwidth")||t.minInputWidth||e(this).width(),i=e(this).data("maxwidth")||t.maxInputWidth||e(this).closest(".tagsinput").width()-t.inputPadding,a=e(this),n=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),whiteSpace:"nowrap"}),o=e(this).attr("id")+"_autosize_tester";!e("#"+o).length>0&&(n.attr("id",o),n.appendTo("body")),a.data("minwidth",r),a.data("maxwidth",i),a.data("tester_id",o),a.css("width",r)},e.fn.addTag=function(i,a){return a=jQuery.extend({focus:!1,callback:!0},a),this.each(function(){var n=e(this).attr("id"),o=e(this).val().split(t[n]);if(""==o[0]&&(o=new Array),i=jQuery.trim(i),a.unique){var s=e(this).tagExist(i);1==s&&e("#"+n+"_tag").addClass("not_valid")}else var s=!1;if(""!=i&&1!=s){if(e("<span>").addClass("tag").append(e("<span>").text(i).append("&nbsp;&nbsp;"),e("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return e("#"+n).removeTag(escape(i))})).insertBefore("#"+n+"_addTag"),o.push(i),e("#"+n+"_tag").val(""),a.focus?e("#"+n+"_tag").focus():e("#"+n+"_tag").blur(),e.fn.tagsInput.updateTagsField(this,o),a.callback&&r[n]&&r[n].onAddTag){var c=r[n].onAddTag;c.call(this,i)}if(r[n]&&r[n].onChange){var l=o.length,c=r[n].onChange;c.call(this,e(this),o[l-1])}}}),!1},e.fn.removeTag=function(a){return a=unescape(a),this.each(function(){var n=e(this).attr("id"),o=e(this).val().split(t[n]);for(e("#"+n+"_tagsinput .tag").remove(),str="",i=0;i<o.length;i++)o[i]!=a&&(str=str+t[n]+o[i]);if(e.fn.tagsInput.importTags(this,str),r[n]&&r[n].onRemoveTag){var s=r[n].onRemoveTag;s.call(this,a)}}),!1},e.fn.tagExist=function(r){var i=e(this).attr("id"),a=e(this).val().split(t[i]);return jQuery.inArray(r,a)>=0},e.fn.importTags=function(t){var r=e(this).attr("id");e("#"+r+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,t)},e.fn.tagsInput=function(i){var n=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i),o=0;return this.each(function(){if("undefined"==typeof e(this).attr("data-tagsinput-init")){e(this).attr("data-tagsinput-init",!0),n.hide&&e(this).hide();var i=e(this).attr("id");i&&!t[e(this).attr("id")]||(i=e(this).attr("id","tags"+(new Date).getTime()+o++).attr("id"));var s=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},n);t[i]=s.delimiter,(n.onAddTag||n.onRemoveTag||n.onChange)&&(r[i]=new Array,r[i].onAddTag=n.onAddTag,r[i].onRemoveTag=n.onRemoveTag,r[i].onChange=n.onChange);var c='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(n.interactive&&(c=c+'<input id="'+i+'_tag" value="" data-default="'+n.defaultText+'" />'),c+='</div><div class="tags_clear"></div></div>',e(c).insertAfter(this),e(s.holder).css("width",n.width),e(s.holder).css("min-height",n.height),e(s.holder).css("height",n.height),""!=e(s.real_input).val()&&e.fn.tagsInput.importTags(e(s.real_input),e(s.real_input).val()),n.interactive){if(e(s.fake_input).val(e(s.fake_input).attr("data-default")),e(s.fake_input).css("color",n.placeholderColor),e(s.fake_input).resetAutosize(n),e(s.holder).bind("click",s,function(t){e(t.data.fake_input).focus()}),e(s.fake_input).bind("focus",s,function(t){e(t.data.fake_input).val()==e(t.data.fake_input).attr("data-default")&&e(t.data.fake_input).val(""),e(t.data.fake_input).css("color","#000000")}),void 0!=n.autocomplete_url){autocomplete_options={source:n.autocomplete_url};for(attrname in n.autocomplete)autocomplete_options[attrname]=n.autocomplete[attrname];void 0!==jQuery.Autocompleter?(e(s.fake_input).autocomplete(n.autocomplete_url,n.autocomplete),e(s.fake_input).bind("result",s,function(t,r,a){r&&e("#"+i).addTag(r[0]+"",{focus:!0,unique:n.unique})})):void 0!==jQuery.ui.autocomplete&&(e(s.fake_input).autocomplete(autocomplete_options),e(s.fake_input).bind("autocompleteselect",s,function(t,r){return e(t.data.real_input).addTag(r.item.value,{focus:!0,unique:n.unique}),!1}))}else e(s.fake_input).bind("blur",s,function(t){var r=e(this).attr("data-default");return""!=e(t.data.fake_input).val()&&e(t.data.fake_input).val()!=r?t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:n.unique}):(e(t.data.fake_input).val(e(t.data.fake_input).attr("data-default")),e(t.data.fake_input).css("color",n.placeholderColor)),!1});e(s.fake_input).bind("keypress",s,function(t){return a(t)?(t.preventDefault(),t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:n.unique}),e(t.data.fake_input).resetAutosize(n),!1):void(t.data.autosize&&e(t.data.fake_input).doAutosize(n))}),s.removeWithBackspace&&e(s.fake_input).bind("keydown",function(t){if(8==t.keyCode&&""==e(this).val()){t.preventDefault();var r=e(this).closest(".tagsinput").find(".tag:last").text(),i=e(this).attr("id").replace(/_tag$/,"");r=r.replace(/[\s]+x$/,""),e("#"+i).removeTag(escape(r)),e(this).trigger("focus")}}),e(s.fake_input).blur(),s.unique&&e(s.fake_input).keydown(function(t){(8==t.keyCode||String.fromCharCode(t.which).match(/\w+|[,\/]+/))&&e(this).removeClass("not_valid")})}}}),this},e.fn.tagsInput.updateTagsField=function(r,i){var a=e(r).attr("id");e(r).val(i.join(t[a]))},e.fn.tagsInput.importTags=function(a,n){e(a).val("");var o=e(a).attr("id"),s=n.split(t[o]);for(i=0;i<s.length;i++)e(a).addTag(s[i],{focus:!1,callback:!1});if(r[o]&&r[o].onChange){var c=r[o].onChange;c.call(a,a,s[i])}};var a=function(t){var r=!1;return 13==t.which||("string"==typeof t.data.delimiter?t.which==t.data.delimiter.charCodeAt(0)&&(r=!0):e.each(t.data.delimiter,function(e,i){t.which==i.charCodeAt(0)&&(r=!0)}),r)}}(jQuery),define("tagsInput",["jquery"],function(){}),define("ojtranslations/nls/localeElements",{root:{supplemental:{weekData:{firstDay:{"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:0,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:5,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:0,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:0,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MA:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:0,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:1,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:6,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TN:0,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:6,ZA:0,ZW:0},"firstDay-alt-variant":{GB:0},weekendStart:{"001":6,AE:5,AF:4,BH:5,DZ:4,EG:5,IL:5,IN:0,IQ:5,IR:4,JO:5,KW:5,LY:5,MA:5,OM:4,QA:5,SA:4,SD:5,SY:5,TN:5,YE:4},weekendEnd:{"001":0,AE:6,AF:5,BH:6,DZ:5,EG:6,IL:6,IQ:6,IR:5,JO:6,KW:6,LY:6,MA:6,OM:5,QA:6,SA:5,SD:6,SY:6,TN:6,YE:5}},prefferedHours:{"001":"H",AD:"H",AE:"h",AF:"H",AG:"h",AL:"h",AM:"H",AO:"H",AR:"H",AS:"h",AT:"H",AU:"h",AW:"H",AX:"H",AZ:"H",BA:"H",BB:"h",BD:"h",BE:"H",BF:"H",BG:"H",BH:"h",BI:"H",BJ:"H",BL:"H",BM:"h",BN:"h",BO:"H",BR:"H",BS:"h",BT:"h",BW:"h",BY:"H",BZ:"H",CA:"h",CD:"H",CF:"H",CG:"H",CH:"H",CI:"H",CL:"H",CM:"H",CN:"h",CO:"H",CR:"H",CU:"H",CV:"H",CW:"H",CY:"h",CZ:"H",DE:"H",DJ:"h",DK:"H",DM:"h",DO:"H",DZ:"h",EA:"H",EC:"H",EE:"H",EG:"h",EH:"h",ER:"h",ES:"H",ET:"h",FI:"H",FJ:"h",FM:"h",FO:"H",FR:"H",GA:"H",GB:"H",GD:"h",GE:"H",GF:"H",GG:"H",GH:"h",GI:"H",GL:"h",GM:"h",GN:"H",GP:"H",GQ:"H",GR:"h",GT:"H",GU:"h",GW:"H",GY:"h",HK:"h",HN:"H",HR:"H",HT:"H",HU:"H",IC:"H",ID:"H",IE:"H",IL:"H",IM:"H",IN:"h",IQ:"h",IR:"H",IS:"H",IT:"H",JE:"H",JM:"h",JO:"h",JP:"H",KE:"h",KG:"H",KH:"h",KI:"h",KM:"H",KN:"h",KP:"h",KR:"h",KW:"h",KY:"h",KZ:"H",LA:"H",LB:"h",LC:"h",LI:"H",LK:"H",LR:"h",LS:"h",LT:"H",LU:"H",LV:"H",LY:"h",MA:"h",MC:"H",MD:"H",ME:"H",MF:"H",MG:"H",MH:"h",MK:"H",ML:"H",MM:"H",MN:"H",MO:"h",MP:"h",MQ:"H",MR:"h",MT:"H",MU:"H",MW:"h",MX:"H",MY:"h",MZ:"H",NA:"h",NC:"H",NE:"H",NG:"h",NI:"H",NL:"H",NO:"H",NP:"H",NZ:"h",OM:"h",PA:"H",PE:"H",PF:"H",PG:"h",PH:"H",PK:"h",PL:"H",PR:"h",PS:"h",PT:"H",PW:"h",PY:"H",QA:"h",RE:"H",RO:"H",RS:"H",RU:"H",RW:"H",SA:"h",SB:"h",SC:"H",SD:"h",SE:"H",SG:"h",SI:"H",SK:"H",SL:"h",SM:"H",SN:"H",SO:"h",SR:"H",SS:"h",ST:"H",SV:"H",SX:"H",SY:"h",SZ:"h",TC:"h",TD:"h",TG:"H",TH:"H",TJ:"H",TL:"H",TN:"h",TO:"H",TR:"H",TT:"h",TW:"h",TZ:"h",UA:"H",UG:"h",UM:"h",US:"h",UY:"H",UZ:"H",VC:"h",VE:"H",VG:"h",VI:"h",VN:"H",VU:"h",WS:"h",XK:"H",YE:"h",YT:"H",ZA:"h",ZM:"h",ZW:"h"},plurals:{ar:function(e){return 0===e?"zero":1===e?"one":2===e?"two":e%100===Math.floor(e%100)&&3<=e%100&&10>=e%100?"few":e%100===Math.floor(e%100)&&11<=e%100&&99>=e%100?"many":"other"},be:function(e){return 1===e%10&&11!==e%100?"one":e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100)?"few":0===e%10||e%10===Math.floor(e%10)&&5<=e%10&&9>=e%10||e%100===Math.floor(e%100)&&11<=e%100&&14>=e%100?"many":"other"},bg:function(e){return 1===e?"one":"other"},ca:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},cs:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":t===Math.floor(t)&&2<=t&&4>=t&&0===e?"few":0!==e?"many":"other"},da:function(e){var t=Math.floor(Math.abs(e)),r=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10);return 1===e||0!==r&&(0===t||1===t)?"one":"other"},de:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},el:function(e){return 1===e?"one":"other"},en:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},es:function(e){return 1===e?"one":"other"},et:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},fi:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},fr:function(e){return e=Math.floor(Math.abs(e)),0===e||1===e?"one":"other"},ga:function(e){return 1===e?"one":2===e?"two":e===Math.floor(e)&&3<=e&&6>=e?"few":e===Math.floor(e)&&7<=e&&10>=e?"many":"other"},he:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===r?"one":2===t&&0===r?"two":0!==r||0<=e&&10>=e||0!==e%10?"other":"many"},hi:function(e){return 0===Math.floor(Math.abs(e))||1===e?"one":"other"},hr:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0===r&&1===t%10&&(11!==t%100||1===e%10&&11!==e%100)?"one":0===r&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&(!(12<=t%100&&14>=t%100)||e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100))?"few":"other"},hu:function(e){return 1===e?"one":"other"},id:function(e){return"other"},is:function(e){var t=Math.floor(Math.abs(e));return e=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10),0!==e||1!==t%10||11===t%100&&0===e?"other":"one"},it:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},ja:function(e){return"other"},ko:function(e){return"other"},lt:function(e){var t=parseInt(e.toString().replace(/^[^.]*.?/,""),10);return 1!==e%10||11<=e%100&&19>=e%100?e%10===Math.floor(e%10)&&2<=e%10&&9>=e%10&&!(11<=e%100&&19>=e%100)?"few":0!==t?"many":"other":"one"},lv:function(e){var t=e.toString().replace(/^[^.]*.?/,"").length,r=parseInt(e.toString().replace(/^[^.]*.?/,""),10);return 0===e%10||e%100===Math.floor(e%100)&&11<=e%100&&19>=e%100||2===t&&r%100===Math.floor(r%100)&&11<=r%100&&19>=r%100?"zero":1===e%10&&(11!==e%100||2===t&&1===r%10&&(11!==r%100||2!==t&&1===r%10))?"one":"other"},mk:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0!==r||1!==t%10&&1!==e%10?"other":"one"},ms:function(e){return"other"},mt:function(e){return 1===e?"one":0===e||e%100===Math.floor(e%100)&&2<=e%100&&10>=e%100?"few":e%100===Math.floor(e%100)&&11<=e%100&&19>=e%100?"many":"other"},nb:function(e){return 1===e?"one":"other"},nl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},nn:function(e){return 1===e?"one":"other"},no:function(e){return 1===e?"one":"other"},pl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&1!==t&&(t%10===Math.floor(t%10)&&0<=t%10&&1>=t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&12<=t%100&&14>=t%100))?"many":"other"},pt:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10),1===t&&(0===r||0===t&&1===e)?"one":"other"},"pt-PT":function(e){var t=e.toString().replace(/^[^.]*.?/,"").length;return 1===e&&0===t?"one":"other"},ro:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===r?"one":0!==r||0===e||1!==e&&e%100===Math.floor(e%100)&&1<=e%100&&19>=e%100?"few":"other"},ru:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%10&&11!==t%100?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&(0===t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&11<=t%100&&14>=t%100))?"many":"other"},sk:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":t===Math.floor(t)&&2<=t&&4>=t&&0===e?"few":0!==e?"many":"other"},sl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%100?"one":0===e&&2===t%100?"two":0===e&&(t%100===Math.floor(t%100)&&3<=t%100&&4>=t%100||0!==e)?"few":"other"},sq:function(e){return 1===e?"one":"other"},sr:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0===r&&1===t%10&&(11!==t%100||1===e%10&&11!==e%100)?"one":0===r&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&(!(12<=t%100&&14>=t%100)||e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100))?"few":"other"},sv:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},th:function(e){return"other"},tr:function(e){return 1===e?"one":"other"},uk:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%10&&11!==t%100?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&(0===t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&11<=t%100&&14>=t%100))?"many":"other"},vi:function(e){return"other"},zh:function(e){return"other"}}}},ar:1,"ar-AE":1,"ar-BH":1,"ar-DZ":1,"ar-EG":1,"ar-IQ":1,"ar-JO":1,"ar-KW":1,"ar-LB":1,"ar-LY":1,"ar-MA":1,"ar-OM":1,"ar-QA":1,"ar-SA":1,"ar-SD":1,"ar-SY":1,"ar-TN":1,"ar-YE":1,be:1,"be-BY":1,bg:1,"bg-BG":1,ca:1,"ca-ES":1,cs:1,"cs-CZ":1,da:1,"da-DK":1,de:1,"de-AT":1,"de-CH":1,"de-DE":1,"de-LU":1,el:1,"el-CY":1,"el-GR":1,en:1,"en-AU":1,"en-CA":1,"en-GB":1,"en-IE":1,"en-IN":1,"en-MT":1,"en-NZ":1,"en-PH":1,"en-SG":1,"en-US":1,"en-ZA":1,es:1,"es-AR":1,"es-BO":1,"es-CL":1,"es-CO":1,"es-CR":1,"es-CU":1,"es-DO":1,"es-EC":1,"es-ES":1,"es-GT":1,"es-HN":1,"es-MX":1,"es-NI":1,"es-PA":1,"es-PE":1,"es-PR":1,"es-PY":1,"es-SV":1,"es-US":1,"es-UY":1,"es-VE":1,et:1,"et-EE":1,fi:1,"fi-FI":1,fr:1,"fr-BE":1,"fr-CA":1,"fr-CH":1,"fr-FR":1,"fr-LU":1,ga:1,"ga-IE":1,he:1,"he-IL":1,hi:1,"hi-IN":1,hr:1,"hr-HR":1,hu:1,"hu-HU":1,id:1,"id-ID":1,is:1,"is-IS":1,it:1,"it-CH":1,"it-IT":1,ja:1,"ja-JP":1,ko:1,"ko-KR":1,lt:1,"lt-LT":1,lv:1,"lv-LV":1,mk:1,"mk-MK":1,ms:1,"ms-Latn-MY":1,mt:1,"mt-MT":1,nb:1,"nb-NO":1,nl:1,"nl-BE":1,"nl-NL":1,nn:1,"nn-NO":1,no:1,"no-NO":1,pl:1,"pl-PL":1,pt:1,"pt-BR":1,"pt-PT":1,ro:1,"ro-RO":1,ru:1,"ru-RU":1,sk:1,"sk-SK":1,sl:1,"sl-SI":1,sq:1,"sq-AL":1,sr:1,"sr-Cyrl":1,"sr-Cyrl-BA":1,"sr-Cyrl-ME":1,"sr-Cyrl-RS":1,"sr-Latn":1,"sr-Latn-BA":1,"sr-Latn-ME":1,"sr-Latn-RS":1,sv:1,"sv-SE":1,th:1,"th-TH":1,tr:1,"tr-TR":1,uk:1,"uk-UA":1,vi:1,"vi-VN":1,zh:1,"zh-Hans":1,"zh-Hans-CN":1,"zh-Hans-SG":1,"zh-Hant":1,"zh-Hant-HK":1,"zh-Hant-MO":1,"zh-Hant-TW":1,__noOverlay:!0,__defaultNoOverlayLocale:"en-US"}),define("ojs/ojmessaging",["ojs/ojcore","jquery"],function(e,t){e.X=function(e,t,r){this.Init(e,t,r)},o_("Message",e.X,e),e.X.ck={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},o_("Message.SEVERITY_TYPE",e.X.ck,e),e.X.Tb={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},o_("Message.SEVERITY_LEVEL",e.X.Tb,e),e.b.ga(e.X,e.b,"oj.Message"),e.X.prototype.Init=function(t,r,i){e.X.r.Init.call(this),this.summary=t,this.detail=r,this.severity=i||e.X.ck.ERROR},e.b.g("Message.prototype.Init",{Init:e.X.prototype.Init}),e.X.prototype.c2=function(){return!0},e.X.prototype.Mo=function(t){return!(!t||e.X.Ju(this.severity)!==e.X.Ju(t.severity)||this.summary!==t.summary||this.detail!==t.detail)},e.b.g("Message.prototype.equals",{Mo:e.X.prototype.Mo}),e.X.prototype.clone=function(){return new e.X(this.summary,this.detail,this.severity)},e.b.g("Message.prototype.clone",{clone:e.X.prototype.clone}),e.X.Ju=function(t){return t&&("string"==typeof t?(t=e.X.jG.indexOf(t,1),t=-1===t?e.X.Tb.ERROR:t):"number"==typeof t&&t<e.X.Tb.CONFIRMATION&&t>e.X.Tb.FATAL&&(t=e.X.Tb.ERROR)),t?t:e.X.Tb.ERROR},o_("Message.getSeverityLevel",e.X.Ju,e),e.X.Ooa=function(t){var r;return t&&("string"==typeof t?(r=e.X.jG.indexOf(t,1),-1===r&&(t=e.X.ck.ERROR)):"number"==typeof t&&(t=t<e.X.Tb.CONFIRMATION&&t>e.X.Tb.FATAL?e.X.ck.ERROR:e.X.jG[t])),t||e.X.ck.ERROR},o_("Message.getSeverityType",e.X.Ooa,e),e.X.Hu=function(r){var i,a=-1;return r&&0<r.length&&t.each(r,function(t,r){r&&(i=e.X.Ju(r.severity)),a=a<i?i:a}),a},o_("Message.getMaxSeverity",e.X.Hu,e),e.X.isValid=function(t){return!(e.X.Hu(t)>=e.X.Tb.ERROR)},o_("Message.isValid",e.X.isValid,e),e.X.jG=["none",e.X.ck.CONFIRMATION,e.X.ck.INFO,e.X.ck.WARNING,e.X.ck.ERROR,e.X.ck.FATAL],e.Ic=function(e,t,r,i){this.Init(e,t,r,i)},e.b.ga(e.Ic,e.X,"oj.ComponentMessage"),e.Ic.Sr={GF:"shown",sF:"hidden"},e.Ic.N7={display:e.Ic.Sr.GF,context:""},e.Ic.prototype.Init=function(r,i,a,n){e.Ic.r.Init.call(this,r,i,a),this.kb=t.extend({},e.Ic.N7,n)},e.Ic.prototype.Mo=function(t){return e.Ic.r.Mo.call(this,t)&&this.kb.display===t.kb.display},e.Ic.prototype.clone=function(){return new e.Ic(this.summary,this.detail,this.severity,this.kb)},e.Ic.prototype.c2=function(){return!(this.kb&&this.kb.display&&this.kb.display===e.Ic.Sr.sF)},e.Ic.prototype.wda=function(){this.kb&&e.Ic.Sr.sF===this.kb.display&&(this.kb.display=e.Ic.Sr.GF)},e.Ic.prototype.zY=function(){return!(!this.kb||!this.kb.context)}}),define("ojs/ojvalidation",["ojs/ojcore","jquery","ojL10n!ojtranslations/nls/localeElements","ojs/ojmessaging"],function(e,t,r){e.La={},o_("LocaleData",e.La,e),e.La.cP=function(t){e.La.pH=t},o_("LocaleData.setBundle",e.La.cP,e),e.La.i3=function(){return e.La.JJ("firstDay")},o_("LocaleData.getFirstDayOfWeek",e.La.i3,e),e.La.Uoa=function(){return e.La.JJ("weekendStart")},o_("LocaleData.getWeekendStart",e.La.Uoa,e),e.La.Toa=function(){return e.La.JJ("weekendEnd")},o_("LocaleData.getWeekendEnd",e.La.Toa,e),e.La.Gy=function(t){return(null==t||"abbreviated"!==t&&"narrow"!==t)&&(t="wide"),t=e.La.RI().days["stand-alone"][t],[t.sun,t.mon,t.tue,t.wed,t.thu,t.fri,t.sat]},o_("LocaleData.getDayNames",e.La.Gy,e),e.La.Iy=function(t){return(null==t||"abbreviated"!==t&&"narrow"!==t)&&(t="wide"),t=e.La.RI().months["stand-alone"][t],[t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]]},o_("LocaleData.getMonthNames",e.La.Iy,e),e.La.k4=function(){var t=e.La.RI().dateFormats.long.toUpperCase(),r=t.indexOf("M"),t=t.indexOf("Y");return r<t},o_("LocaleData.isMonthPriorToYear",e.La.k4,e),e.La.JJ=function(t){var r=e.La.lk(),i=e.La.Qea()||"001";return t=r.supplemental.weekData[t],i=t[i],void 0===i&&(i=t["001"]),i},e.La.RI=function(){var t,r,i=e.La.lk().main;for(r in i)if(i.hasOwnProperty(r)){t=i[r];break}return t.dates.calendars.gregorian},e.La.Qea=function(){var t=e.ba.Bg();if(t&&(t=t.toUpperCase().split(/-|_/),2<=t.length)){var r=t[1];if(4!=r.length)return r;if(3<=t.length)return t[2]}return null},e.La.lk=function(){var t=e.La.pH;return t?t:e.Ns()?(e.l.assert(void 0!==r,"LocaleElements module must be loaded"),r):{}},e.La.t$=function(e){r=e},e.qa={},o_("Validation",e.qa,e),e.qa.XH={},e.qa.TM={},e.qa.TU={},e.qa.XU={},e.qa.Oz={converter:{name:"oj.ConverterFactory",type:e.Zj},validator:{name:"oj.ValidatorFactory",type:e.fd}},e.qa.rm=function(t,r){var i;return t&&!r?i=e.qa.MB(t,e.qa.XH):t&&r&&(i=e.qa.bu(t,r,e.qa.XH,e.qa.Oz.converter)),i},o_("Validation.converterFactory",e.qa.rm,e),e.qa.Or=function(t,r){var i;return t&&!r?i=e.qa.MB(t,e.qa.TM):t&&r&&(i=e.qa.bu(t,r,e.qa.TM,e.qa.Oz.validator)),i},o_("Validation.validatorFactory",e.qa.Or,e),e.qa.b3=function(t){return e.qa.MB(t,e.qa.TU)},o_("Validation.getDefaultConverterFactory",e.qa.b3,e),e.qa.Goa=function(t){return e.qa.MB(t,e.qa.XU)},o_("Validation.getDefaultValidatorFactory",e.qa.Goa,e),e.qa.YS=function(t,r){var i=e.qa.Oz.converter;e.qa.bu(t,r,e.qa.TU,i),e.qa.bu(t,r,e.qa.XH,i)},e.qa.Os=function(t,r){var i=e.qa.Oz.validator;e.qa.bu(t,r,e.qa.XU,i),e.qa.bu(t,r,e.qa.TM,i)},e.qa.Hca=function(t,r,i){if(r&&!e.qa.Cja(t,r))throw Error("Factory instance does not implement the methods expected by the factory of type "+i)},e.qa.MB=function(t,r){e.l.om(t);var i=null;return t&&(t=t.toLowerCase(),i=(r[t]||{}).instance||null),i},e.qa.Cja=function(t,r){var i,a=!0;e.l.Kf(t),e.l.Kf(r);for(i in r)if(r.hasOwnProperty(i)&&"function"==typeof r[i]&&!t[i]&&"function"!=typeof t[i]){a=!1;break}return a},e.qa.bu=function(t,r,i,a){if(e.l.om(t),e.l.Kf(r),t){var n={};n.instance=r,e.qa.Hca(r,a.type,a.name),i[t.toLowerCase()]=n}},e.Zj={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",createConverter:function(){}},o_("ConverterFactory",e.Zj,e),e.fd={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(){}},o_("ValidatorFactory",e.fd,e),e.ye=function(e){this.Init(e)},o_("Converter",e.ye,e),e.b.ga(e.ye,e.b,"oj.Converter"),e.ye.prototype.Init=function(t){e.ye.r.Init.call(this),this.kb=t},e.b.g("Converter.prototype.Init",{Init:e.ye.prototype.Init}),e.ye.prototype.wc=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.getHint",{wc:e.ye.prototype.wc}),e.ye.prototype.Rh=function(){return this.kb||{}},e.b.g("Converter.prototype.getOptions",{Rh:e.ye.prototype.Rh}),e.ye.prototype.parse=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.parse",{parse:e.ye.prototype.parse}),e.ye.prototype.format=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.format",{format:e.ye.prototype.format}),e.ye.prototype.resolvedOptions=function(){var e={};return t.extend(e,this.kb),e},e.b.g("Converter.prototype.resolvedOptions",{resolvedOptions:e.ye.prototype.resolvedOptions}),e.Qe=function(t,r){var i=new e.X(t,r,e.X.Tb.ERROR);this.Init(i)},o_("ConverterError",e.Qe,e),e.Qe.prototype=Error(),e.Qe.prototype.Init=function(e){var t=e.detail,r=e.summary;this.Tt=e,this.name="Converter Error",this.message=t||r},e.b.g("ConverterError.prototype.Init",{Init:e.Qe.prototype.Init}),e.Qe.prototype.Iu=function(){return this.Tt},e.b.g("ConverterError.prototype.getMessage",{Iu:e.Qe.prototype.Iu}),e.ci=function(){this.Init()},o_("NumberConverter",e.ci,e),e.b.ga(e.ci,e.ye,"oj.NumberConverter"),e.ci.prototype.Init=function(t){e.ci.r.Init.call(this,t)},e.b.g("NumberConverter.prototype.Init",{Init:e.ci.prototype.Init}),e.ci.prototype.format=function(t){return e.ci.r.format.call(this,t)},e.b.g("NumberConverter.prototype.format",{format:e.ci.prototype.format}),e.ci.prototype.parse=function(t){return e.ci.r.parse.call(this,t)},e.b.g("NumberConverter.prototype.parse",{parse:e.ci.prototype.parse}),e.Sb=function(e){this.Init(e)},o_("DateTimeConverter",e.Sb,e),e.b.ga(e.Sb,e.ye,"oj.DateTimeConverter"),e.Sb.prototype.Init=function(t){e.Sb.r.Init.call(this,t)},e.b.g("DateTimeConverter.prototype.Init",{Init:e.Sb.prototype.Init}),e.Sb.prototype.format=function(t){return e.Sb.r.format.call(this,t)},e.b.g("DateTimeConverter.prototype.format",{format:e.Sb.prototype.format}),e.Sb.prototype.Uy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isHourInDaySet",{Uy:e.Sb.prototype.Uy}),e.Sb.prototype.Ty=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isHourInAMPMSet",{Ty:e.Sb.prototype.Ty}),e.Sb.prototype.Wy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMinuteSet",{Wy:e.Sb.prototype.Wy}),e.Sb.prototype.Yy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isSecondSet",{Yy:e.Sb.prototype.Yy}),e.Sb.prototype.Vy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMilliSecondSet",{Vy:e.Sb.prototype.Vy}),e.Sb.prototype.Zy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isYearSet",{Zy:e.Sb.prototype.Zy}),e.Sb.prototype.Xy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMonthSet",{Xy:e.Sb.prototype.Xy}),e.Sb.prototype.Sy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isDaySet",{Sy:e.Sb.prototype.Sy}),e.Sb.prototype.Ry=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isDayNameSet",{Ry:e.Sb.prototype.Ry}),e.Sb.prototype.Io=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.calculateWeek",{Io:e.Sb.prototype.Io}),e.Sb.prototype.parse=function(t){return e.Sb.r.parse.call(this,t)},e.b.g("DateTimeConverter.prototype.parse",{parse:e.Sb.prototype.parse}),e.ig=function(){this.Init()},o_("Validator",e.ig,e),e.b.ga(e.ig,e.b,"oj.Validator"),e.ig.prototype.Init=function(){e.ig.r.Init.call(this)},e.b.g("Validator.prototype.Init",{Init:e.ig.prototype.Init}),e.ig.prototype.validate=function(){e.l.Yb()},e.b.g("Validator.prototype.validate",{validate:e.ig.prototype.validate}),e.ig.prototype.wc=function(){e.l.Yb()},e.b.g("Validator.prototype.getHint",{wc:e.ig.prototype.wc}),e.Ah=function(t,r){var i=new e.X(t,r,e.X.Tb.ERROR);this.Init(i)},o_("ValidatorError",e.Ah,e),e.Ah.prototype=Error(),e.Ah.prototype.Init=function(e){var t=e.detail,r=e.summary;this.Tt=e,this.name="Validator Error",this.message=t||r},e.b.g("ValidatorError.prototype.Init",{Init:e.Ah.prototype.Init}),e.Ah.prototype.Iu=function(){return this.Tt},e.b.g("ValidatorError.prototype.getMessage",{Iu:e.Ah.prototype.Iu}),e.nf=function(e){this.Init(e)},o_("RequiredValidator",e.nf,e),e.b.ga(e.nf,e.ig,"oj.RequiredValidator"),e.nf.WF="oj-validator.required.detail",e.nf.XF="oj-validator.required.summary",e.nf.prototype.Init=function(t){e.nf.r.Init.call(this),this.kb=t},e.b.g("RequiredValidator.prototype.Init",{Init:e.nf.prototype.Init}),e.nf.prototype.validate=function(t){var r,i,a={},a="";if("number"==typeof t&&0===t||t&&0!==t.length)return!0;throw this.kb&&(r=this.kb.messageDetail||this.kb.message||null,i=this.kb.messageSummary||null,a=this.kb.label||""),a={label:a},t=i?e.ha.Mb(i,a):e.ha.A(this.BJ(),a),r=r?e.ha.Mb(r,a):e.ha.A(this.XI(),a),new e.Ah(t,r)},e.b.g("RequiredValidator.prototype.validate",{validate:e.nf.prototype.validate}),e.nf.prototype.wc=function(){var t="";return this.kb&&this.kb.hint&&(t=e.ha.A(this.kb.hint)),t},e.b.g("RequiredValidator.prototype.getHint",{wc:e.nf.prototype.wc}),e.nf.prototype.BJ=function(){return e.nf.XF},e.nf.prototype.XI=function(){return e.nf.WF},e.Yi=function(e){this.Init(e)},o_("DateRestrictionValidator",e.Yi,e),e.b.ga(e.Yi,e.ig,"oj.DateRestrictionValidator"),e.Yi.prototype.Init=function(t){e.Yi.r.Init.call(this),this.qca=t.dayFormatter,this.Jc=e.sb.getConverterInstance(t.converter),t&&(this.ria=t.messageSummary||null,this.qia=t.messageDetail||null)},e.b.g("DateRestrictionValidator.prototype.Init",{Init:e.Yi.prototype.Init}),e.Yi.prototype.Lga=function(e){var t=this.qca;if(t){var r=e.getFullYear(),i=e.getMonth()+1;return e=e.getDate(),(t=t({fullYear:r,month:i,date:e}))&&t.disabled}return!1},e.Yi.prototype.validate=function(t){var r="",i="",i=e.ha,r=this.ria,a=this.qia,n=t?this.Jc.format(t):t,o=t?e.sb.isoToLocalDate(t):null;if(null===t)return t;if(this.Lga(o))throw r=r?i.Mb(r,{value:n}):i.A("oj-validator.restriction.date.messageSummary",{value:n}),i=a?i.Mb(a,{value:n}):i.A("oj-validator.restriction.date.messageDetail",{value:n}),new e.Ah(r,i);return t},e.b.g("DateRestrictionValidator.prototype.validate",{validate:e.Yi.prototype.validate}),e.Yi.prototype.wc=function(){return null},e.b.g("DateRestrictionValidator.prototype.getHint",{wc:e.Yi.prototype.wc}),e.$j=function(e){this.Init(e)},o_("DateTimeRangeValidator",e.$j,e),e.b.ga(e.$j,e.ig,"oj.DateTimeRangeValidator"),e.$j.prototype.Init=function(t){e.$j.r.Init.call(this),this.Jc=e.sb.getConverterInstance(t.converter),this.ih=t.min||null,this.Kh=t.max||null,t&&(this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("DateTimeRangeValidator.prototype.Init",{Init:e.$j.prototype.Init
}),e.$j.prototype.validate=function(t){var r,i,a,n=this.yw,o=this.xw,s=o.rangeOverflow,o=o.rangeUnderflow,c=n.rangeOverflow,n=n.rangeUnderflow,l=e.sb,d=this.ih,u=this.Kh,p="",h="",f=e.ha,m=null;if(null===t)return t;if(m=this.Jc.format(t),r=l.isoToLocalDate(t),d&&(i=this.Jc?this.Jc.format(d):d,d=l.isoToLocalDate(l._minMaxIsoString(d,t))),u&&(a=this.Jc?this.Jc.format(u):u,u=l.isoToLocalDate(l._minMaxIsoString(u,t))),null!==d&&null!==u){if(r>=d&&r<=u||d>u)return t}else if(null!==d){if(r>=d)return t}else if(null===u||r<=u)return t;throw null!==u&&r>u?(m={value:m,max:a},p=c?c:f.A("oj-validator.range.datetime.messageSummary.rangeOverflow"),h=s?f.Mb(s,m):f.A("oj-validator.range.datetime.messageDetail.rangeOverflow",m)):null!==d&&r<d&&(m={value:m,min:i},p=n?n:f.A("oj-validator.range.datetime.messageSummary.rangeUnderflow"),h=o?f.Mb(o,m):f.A("oj-validator.range.datetime.messageDetail.rangeUnderflow",m)),new e.Ah(p,h)},e.b.g("DateTimeRangeValidator.prototype.validate",{validate:e.$j.prototype.validate}),e.$j.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,r=r.max,n=this.ih,o=this.Kh,s=n&&this.Jc?this.Jc.format(n):n,c=o&&this.Jc?this.Jc.format(o):o,l=null,d=e.ha;return null!==n&&null!==o?(l={min:s,max:c},t=i?d.Mb(i,l):d.A("oj-validator.range.datetime.hint.inRange",l)):null!==n?(l={min:s},t=a?d.Mb(a,l):d.A("oj-validator.range.datetime.hint.min",l)):null!==o&&(l={max:c},t=r?d.Mb(r,l):d.A("oj-validator.range.datetime.hint.max",l)),t},e.b.g("DateTimeRangeValidator.prototype.getHint",{wc:e.$j.prototype.wc}),e.g7=function(){return{createConverter:function(t){return new e.Kd(t)}}}(),e.qa.YS(e.Zj.CONVERTER_TYPE_NUMBER,e.g7),e.C6=function(){return{createConverter:function(t){return new e.cb(t)}}}(),e.qa.YS(e.Zj.CONVERTER_TYPE_DATETIME,e.C6),e.m7=function(){return{createValidator:function(t){return new e.nf(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_REQUIRED,e.m7),e.l7=function(){return{createValidator:function(t){return new e.mf(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_REGEXP,e.l7),e.D6=function(){return{createValidator:function(t){return new e.$j(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_DATETIMERANGE,e.D6),e.B6=function(){return{createValidator:function(t){return new e.Yi(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_DATERESTRICTION,e.B6),e.h7=function(){return{createValidator:function(t){return new e.bk(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_NUMBERRANGE,e.h7),e.W6=function(){return{createValidator:function(t){return new e.ul(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_LENGTH,e.W6);var i={il:{latn:"0123456789",arab:"",thai:""},t6:/^(?:(en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(art-lojban|cel-gaulish|no-(?:bok|nyn)|zh-(?:guoyu|hakka|min|min-nan|xiang)))$|^(x(?:-[0-9a-z]{1,8})+)$|^(?:((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|[0-9]{3}))?((?:-(?:[a-z0-9]{5,8}|[0-9][a-z0-9]{3}))*)?((?:-[0-9a-wy-z](?:-[a-z0-9]{2,8}){1,})*)?(-x(?:-[0-9a-z]{1,8})+)?)$/i,mqa:/^\s+|\s+$|\u200f|\u200e/g,nqa:/\s+|\u200f|\u200e/g,nra:["0","00","000"],CR:/^\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:\d{2}(?::\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,HJ:function(e){if(!e||"string"!=typeof e)return null;var t=i.CR.exec(e);return null===t&&i.sma(e),void 0!==t[1]?t[1]:null},dateToLocalIso:function(e){return i.sd(e.getFullYear(),4)+"-"+i.sd(e.getMonth()+1,2)+"-"+i.sd(e.getDate(),2)+"T"+i.sd(e.getHours(),2)+":"+i.sd(e.getMinutes(),2)+":"+i.sd(e.getSeconds(),2)+"."+i.sd(e.getMilliseconds(),3)},isoToLocalDate:function(e){return e&&"string"==typeof e?(null!==i.HJ(e)&&i.tma(),this._isoToLocalDateIgnoreTimezone(e)):null},_isoToLocalDateIgnoreTimezone:function(e){var t=e.split("T"),r=e.indexOf("T");e=new Date;var i=[e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0];if(""!==t[0]){var a=t[0].split("-");for(e=0;e<a.length;e++)i[e]=parseInt(a[e],10),1===e&&i[e]--}if(-1!==r){for(t=t[1].split("."),r=t[0].split(":"),e=0;e<r.length;e++)i[3+e]=parseInt(r[e],10);2===t.length&&t[1]&&(i[6]=parseInt(t[1],10))}return new Date(i[0],i[1],i[2],i[3],i[4],i[5],i[6])},tma:function(){var e;throw e=Error("time zone is not supported"),e.errorInfo={errorCode:"timeZoneNotSupported"},e},sma:function(e){var t;throw t=Error("The string "+e+" is not a valid ISO 8601 string."),t.errorInfo={errorCode:"invalidISOString",parameterMap:{isoStr:e}},t},trim:function(e){return(e+"").replace(i.mqa,"")},ol:function(e){return(e+"").replace(i.nqa,"")},pz:function(e,t){return 0===e.indexOf(t)},Ng:function(e){return e.split("").join(" ").toUpperCase()},sd:function(e,t){var r;return r=e+"",1<t&&r.length<t?(r=i.nra[t-2]+r,r.substr(r.length-t,t)):r},Joa:function(e,t){if(void 0===t)return"latn";var r=i.mr(t,"nu")||"";return void 0===e.numbers["symbols-numberSystem-"+r]&&(r="latn"),r},IE:function(e){if(e=i.t6.exec(e),!e)return null;var t=e[4],t=t?t.split("-"):null,r=null;t&&(r=t.shift());var a=e[7];(a=a?a.split("-"):null)&&a.shift();var n=e[9];(n=n?n.split("-"):null)&&(n.shift(),n.shift());var o=e[3];return(o=o?o.split("-"):null)&&o.shift(),{language:{language:r,Fsa:t||[]},Zsa:e[5]||null,region:e[6]||null,variant:a||null,Esa:i.eqa(e[8]),Wsa:n||o||[],Isa:{Lsa:e[1]||null,Xsa:e[2]||null}}},eqa:function(e){if(!e)return[];for(var t,r,i=[],a=!1,n=!1,o="",s=!1,c=0,l=e.length;c<l;c++)r=e[c],"-"!==r||a?a&&!n?(n=!0,t.singleton=r):"-"===r?s?1===o.length?(n=s=!1,i.push(t),t={singleton:null,extension:[]}):(t.extension.push(o),o=""):(o="",s=!0):o+=r:(a=!0,t={singleton:null,extension:[]});return t.extension.push(o),i.push(t),i},mr:function(e,t){var r=i.IE(e||"en-US");if(null===r||void 0===r)return null;var a,n,r=r.extension;for(n in r)if("u"===r[n].singleton){for(var o in r[n].extension)if(r[n].extension[o]===t){o++,a=r[n].extension[o];break}break}return a},Jsa:function(e){var t,r=0;for(t in e)r++;return r},Cg:function(e){e=e.main;var t,r;for(r in e){t=r;break}return e[t]},Gu:function(e){e=e.main;var t,r;for(r in e){t=r;break}return t},ym:function(e,t){if(void 0===e)throw Error("Internal "+t+" error. Default options missing.");return function(r,i,a,n){if(void 0!==e[r]){switch(n=e[r],i){case"boolean":n=Boolean(n);break;case"string":n=String(n);break;case"number":n=Number(n);break;default:throw Error("Internal error. Wrong value type.")}if(void 0!==a&&-1===a.indexOf(n)){for(i=[],n=0;n<a.length;n++)i.push(a[n]);throw a=new RangeError("The value '"+e[r]+"' is out of range for '"+t+"' options property '"+r+"'. Valid values: "+i),a.errorInfo={errorCode:"optionOutOfRange",parameterMap:{propertyName:r,propertyValue:e[r],propertyValueValid:i,caller:t}},a}}return n}}};e.cb=function(e){this.Init(e)},o_("IntlDateTimeConverter",e.cb,e),e.b.ga(e.cb,e.Sb,"oj.IntlDateTimeConverter"),e.cb.M7=new Date(1998,10,29,15,45,31),e.cb.prototype.Init=function(t){e.cb.r.Init.call(this,t)},e.b.g("IntlDateTimeConverter.prototype.Init",{Init:e.cb.prototype.Init}),e.cb.prototype.Xl=function(){return this.sy||(this.sy=n.re()),this.sy},e.cb.prototype.format=function(t){var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();if(null==t||"string"==typeof t&&0===e.Ea.trim(""+t).length)return"";try{return this.Xl().format(t,r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.format",{format:e.cb.prototype.format}),e.cb.prototype.hE=function(t,r){var i=e.La.lk(),a=e.ba.Bg();try{return this.Xl().hE(t,i,r,a)}catch(e){throw i=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.formatRelative",{hE:e.cb.prototype.hE}),e.cb.prototype.wc=function(){var e=this.resolvedOptions().patternFromOptions||this.Rh().pattern;return e?e.toLowerCase():""},e.b.g("IntlDateTimeConverter.prototype.getHint",{wc:e.cb.prototype.wc}),e.cb.prototype.dJ=function(){var t="";try{t=this.format(e.sb.dateToLocalIso(e.cb.M7))}catch(r){r instanceof e.Qe&&(t="")}finally{return t}},e.cb.prototype.Rh=function(){return e.cb.r.Rh.call(this)},e.b.g("IntlDateTimeConverter.prototype.getOptions",{Rh:e.cb.prototype.Rh}),e.cb.prototype.resolvedOptions=function(){var t,r=e.ba.Bg(),i=this.Rh();if(r!==this.Qt||!this.Vx){t=e.La.lk();try{if(!t)return e.q.error("locale bundle for the current locale %s is unavailable",r),{};this.Vx=this.Xl().resolvedOptions(t,i,r),this.Qt=r}catch(e){throw t=this.so(e)}}return this.Vx},e.b.g("IntlDateTimeConverter.prototype.resolvedOptions",{resolvedOptions:e.cb.prototype.resolvedOptions}),e.cb.prototype.Uy=function(){var e=this.resolvedOptions(),t=e.hour12;return!(!e.hour||t)},e.b.g("IntlDateTimeConverter.prototype.isHourInDaySet",{Uy:e.cb.prototype.Uy}),e.cb.prototype.Ty=function(){var e=this.resolvedOptions(),t=e.hour12;return!(!e.hour||!t)},e.b.g("IntlDateTimeConverter.prototype.isHourInAMPMSet",{Ty:e.cb.prototype.Ty}),e.cb.prototype.Wy=function(){return this.Eq("minute")},e.b.g("IntlDateTimeConverter.prototype.isMinuteSet",{Wy:e.cb.prototype.Wy}),e.cb.prototype.Yy=function(){return this.Eq("second")},e.b.g("IntlDateTimeConverter.prototype.isSecondSet",{Yy:e.cb.prototype.Yy}),e.cb.prototype.Vy=function(){return this.Eq("millisecond")},e.b.g("IntlDateTimeConverter.prototype.isMilliSecondSet",{Vy:e.cb.prototype.Vy}),e.cb.prototype.Zy=function(){return this.Eq("year")},e.b.g("IntlDateTimeConverter.prototype.isYearSet",{Zy:e.cb.prototype.Zy}),e.cb.prototype.Xy=function(){return this.Eq("month")},e.b.g("IntlDateTimeConverter.prototype.isMonthSet",{Xy:e.cb.prototype.Xy}),e.cb.prototype.Sy=function(){return this.Eq("day")},e.b.g("IntlDateTimeConverter.prototype.isDaySet",{Sy:e.cb.prototype.Sy}),e.cb.prototype.Ry=function(){return this.Eq("weekday")},e.b.g("IntlDateTimeConverter.prototype.isDayNameSet",{Ry:e.cb.prototype.Ry}),e.cb.prototype.Io=function(t){return this.Xl().Io(t,e.La.lk(),e.ba.Bg())},e.b.g("IntlDateTimeConverter.prototype.calculateWeek",{Io:e.cb.prototype.Io}),e.cb.prototype.parse=function(t){var r,i;if(null==t||""===t)return null;var a=e.La.lk(),n=e.ba.Bg(),o=this.resolvedOptions();try{return r=this.Xl().parse(t,a,o,n),(i=r.value)&&r.warning&&e.q.warn("The value "+t+" was leniently parsed to represent a date "+i.toString?i.toString():i),i}catch(e){throw t=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.parse",{parse:e.cb.prototype.parse}),e.cb.prototype.so=function(t,r){var i,a,n,o,s=t.errorInfo;return s&&(i=s.errorCode,s=s.parameterMap,e.l.Kf(s),n=s.propertyName,t instanceof TypeError?"optionTypesMismatch"!==i&&"optionTypeInvalid"!==i||(a=e.sb.Ms(i,s)):t instanceof RangeError?"optionOutOfRange"===i?a=e.sb.Ms(i,s):"datetimeOutOfRange"===i&&(i=e.ha.A("oj-converter.datetime.datetimeOutOfRange.summary",{propertyName:n,value:s.value}),a=e.ha.A("oj-converter.datetime.datetimeOutOfRange.detail",{minValue:s.minValue,maxValue:s.maxValue}),a=new e.Qe(i,a)):t instanceof SyntaxError?"optionValueInvalid"===i&&(a=e.sb.Ms(i,s)):t instanceof Error&&("dateFormatMismatch"===i?o="oj-converter.datetime.dateFormatMismatch.summary":"timeFormatMismatch"===i?o="oj-converter.datetime.timeFormatMismatch.summary":"datetimeFormatMismatch"===i?o="oj-converter.datetime.datetimeFormatMismatch.summary":"dateToWeekdayMismatch"===i&&(i=e.ha.A("oj-converter.datetime.dateToWeekdayMismatch.summary",{date:s.date,weekday:s.weekday}),a=e.ha.A("oj-converter.datetime.dateToWeekdayMismatch.detail"),a=new e.Qe(i,a)),o&&(i=e.ha.A(o,{value:r||s.value,format:s.format}),a=e.ha.A("oj-converter.hint.detail",{exampleValue:this.dJ()}),a=new e.Qe(i,a)))),a||(a=i=t.message,a=new e.Qe(i,a)),a},e.cb.prototype.Eq=function(e){return!!this.resolvedOptions()[e]},e.bk=function(e){this.Init(e)},o_("NumberRangeValidator",e.bk,e),e.b.ga(e.bk,e.ig,"oj.NumberRangeValidator"),e.bk.prototype.Init=function(t){e.bk.r.Init.call(this),t&&(this.ih=t.min,this.Kh=t.max,this.Jc=e.sb.getConverterInstance(t.converter),this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("NumberRangeValidator.prototype.Init",{Init:e.bk.prototype.Init}),e.bk.prototype.validate=function(t){var r=t?t.toString():t,i=parseFloat(r),a=this.yw,n=this.xw,o=n.rangeOverflow,n=n.rangeUnderflow,s=a.rangeOverflow,a=a.rangeUnderflow,c=void 0!==this.ih?parseFloat(this.ih):null,l=void 0!==this.Kh?parseFloat(this.Kh):null,d=c&&this.Jc?this.Jc.format(c):c,u=l&&this.Jc?this.Jc.format(l):l,p="",h="",f=null,m=e.ha;if(null===t)return t;if(null!==c&&null!==l){if(i>=c&&i<=l||c>l)return r}else if(null!==c){if(i>=c)return r}else if(null===l||i<=l)return r;throw null!==l&&i>l?(f={value:t,max:u},p=s?s:m.A("oj-validator.range.number.messageSummary.rangeOverflow"),h=o?m.Mb(o,f):m.A("oj-validator.range.number.messageDetail.rangeOverflow",f)):null!==c&&i<c&&(f={value:t,min:d},p=a?a:m.A("oj-validator.range.number.messageSummary.rangeUnderflow"),h=n?m.Mb(n,f):m.A("oj-validator.range.number.messageDetail.rangeUnderflow",f)),new e.Ah(p,h)},e.b.g("NumberRangeValidator.prototype.validate",{validate:e.bk.prototype.validate}),e.bk.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,r=r.max,n=e.ha,o=void 0!==this.ih?parseFloat(this.ih):null,s=void 0!==this.Kh?parseFloat(this.Kh):null,c=o&&this.Jc?this.Jc.format(o):o,l=s&&this.Jc?this.Jc.format(s):s;return null!==o&&null!==s?t=i?n.Mb(i,{min:c,max:l}):n.A("oj-validator.range.number.hint.inRange",{min:c,max:l}):null!==o?t=a?n.Mb(a,{min:c}):n.A("oj-validator.range.number.hint.min",{min:c}):null!==s&&(t=r?n.Mb(r,{max:l}):n.A("oj-validator.range.number.hint.max",{max:l})),t},e.b.g("NumberRangeValidator.prototype.getHint",{wc:e.bk.prototype.wc}),e.Kd=function(e){this.Init(e)},o_("IntlNumberConverter",e.Kd,e),e.b.ga(e.Kd,e.ci,"oj.IntlNumberConverter"),e.Kd.prototype.Init=function(t){e.Kd.r.Init.call(this,t)},e.b.g("IntlNumberConverter.prototype.Init",{Init:e.Kd.prototype.Init}),e.Kd.prototype.Xl=function(){return this.sy||(this.sy=a.re()),this.sy},e.Kd.prototype.format=function(t){if(null==t||"string"==typeof t&&0===e.Ea.trim(""+t).length||"number"==typeof t&&isNaN(t))return"";var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();try{return this.Xl().format(t,r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlNumberConverter.prototype.format",{format:e.Kd.prototype.format}),e.Kd.prototype.wc=function(){return null},e.b.g("IntlNumberConverter.prototype.getHint",{wc:e.Kd.prototype.wc}),e.Kd.prototype.Rh=function(){return e.Kd.r.Rh.call(this)},e.b.g("IntlNumberConverter.prototype.getOptions",{Rh:e.Kd.prototype.Rh}),e.Kd.prototype.parse=function(t){var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();if(null==t||""===t)return null;try{return this.Xl().parse(e.Ea.trim(t),r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlNumberConverter.prototype.parse",{parse:e.Kd.prototype.parse}),e.Kd.prototype.resolvedOptions=function(){var t,r=e.ba.Bg();if(r!==this.Qt||!this.Vx){t=e.La.lk();try{if(!t)return e.q.error("locale bundle for the current locale %s is unavailable",r),{};this.Vx=this.Xl().resolvedOptions(t,this.Rh(),r),this.Qt=r}catch(e){throw t=this.so(e)}}return this.Vx},e.b.g("IntlNumberConverter.prototype.resolvedOptions",{resolvedOptions:e.Kd.prototype.resolvedOptions}),e.Kd.prototype.so=function(t,r){var i,a,n,o=t.errorInfo;return o&&(i=o.errorCode,o=o.parameterMap,e.l.Kf(o),t instanceof TypeError?"optionTypesMismatch"!==i&&"optionTypeInvalid"!==i||(a=e.sb.Ms(i,o)):t instanceof RangeError?"optionOutOfRange"===i&&(a=e.sb.Ms(i,o)):t instanceof SyntaxError?"optionValueInvalid"===i&&(a=e.sb.Ms(i,o)):t instanceof Error&&("decimalFormatMismatch"===i?n="oj-converter.number.decimalFormatMismatch.summary":"currencyFormatMismatch"===i?n="oj-converter.number.currencyFormatMismatch.summary":"percentFormatMismatch"===i?n="oj-converter.number.percentFormatMismatch.summary":"unsupportedParseFormat"===i&&(i=e.ha.A("oj-converter.number.decimalFormatUnsupportedParse.summary"),a=e.ha.A("oj-converter.number.decimalFormatUnsupportedParse.detail"),a=new e.Qe(i,a)),n&&(i=e.ha.A(n,{value:r||o.value,format:o.format}),a=e.ha.A("oj-converter.hint.detail",{exampleValue:this.dJ()}),a=new e.Qe(i,a)))),a||(a=i=t.message,a=new e.Qe(i,a)),a},e.Kd.prototype.dJ=function(){var t="";try{t=this.format(12345.98765)}catch(r){r instanceof e.Qe&&(t="")}finally{return t}};var a;a=function(){function e(){return{format:function(e,t,i,a){(2>=arguments.length||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),l(i,"OraNumberConverter.format");var n={};return c(t,n,i,a),r(e,i,t,n,a)},parse:function(e,t,r,a){if("number"==typeof e)return e;if("[object Number]"===Object.prototype.toString.call(e))return Number(e);(2>=arguments.length||void 0===r)&&(r={useGrouping:!0,style:"decimal"});var d=e;l(r,"OraNumberConverter.parse");var u=i.Cg(t),p={},f=i.mr(a,"nu");if(void 0===i.il[f]&&(f="latn"),"latn"!==f){var m,g=[];for(m=0;m<e.length;m++){var v=i.il[f].indexOf(e[m]);-1!==v?g.push(v):g.push(e[m])}e=g.join("")}if(c(t,p,r,a),m=u.numbers[p.numberingSystem].decimal,f=u.numbers[p.numberingSystem].group,g=NaN,g=e.replace(/ /g,""),P.test(g))return g=parseFloat(e);var y=n(e,r,p,u),g=y[0],v=y[1],g=g||"+";if(y[2])return g=parseFloat(g+v),h(g,r,p,d);var v=v.replace(/ /g,""),b=p.exponential,E=v.indexOf(b.toLowerCase());return 0>E&&(E=v.indexOf(i.Ng(b))),0>E?(y=v,v=null):(y=v.substr(0,E),v=v.substr(E+b.length)),E=y.indexOf(m),0>E?(b=y,m=null):(b=y.substr(0,E),m=y.substr(E+m.length)),b=b.split(f).join(""),y=f.replace(/\u00A0/g," "),f!==y&&(b=b.split(y).join("")),f=g+b,null!==m&&(f+="."+m),null!==v&&(m=s(v,u,p),f+="e"+(m[0]||"+")+m[1]),C.test(f)?g=parseFloat(f):(f=o(e,p,u),g=parseFloat(f[0]+f[1])),h(g,r,p,d)},resolvedOptions:function(e,t,r){(3>arguments.length||void 0===r)&&(r=i.Gu(e)),(2>arguments.length||void 0===t)&&(t={useGrouping:!0,style:"decimal"});var a={};return l(t,"OraNumberConverter.resolvedOptions"),c(e,a,t,r),a.numberingSystemKey=i.mr(r,"nu"),void 0===i.il[a.numberingSystemKey]&&(a.numberingSystemKey="latn"),a={locale:r,style:void 0===t.style?"decimal":t.style,useGrouping:void 0===t.useGrouping||t.useGrouping,minimumIntegerDigits:a.minimumIntegerDigits,minimumFractionDigits:a.minimumFractionDigits,maximumFractionDigits:a.maximumFractionDigits,numberingSystem:a.numberingSystemKey},"decimal"===t.style&&void 0!==t.decimalFormat&&(a.decimalFormat=t.decimalFormat),"currency"===t.style&&(a.currency=t.currency,a.currencyDisplay=void 0===t.currencyDisplay?"symbol":t.currencyDisplay),void 0!==t.pattern&&(a.pattern=t.pattern),a}}}var t,r,a,n,o,s,c,l,d,u,p,h,f,m,g,v,y,b,E,I,T,P=/^[+\-]?infinity$/i,C=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,S=/([^+-.0-9]*)([+\-]?\d*\.?\d*(E[+\-]?\d+)?).*$/,A=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,_=/(^0\.0*)([^0].*$)/,O={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},R={trillion:1e12,billion:1e9,million:1e6,thousand:1e3};t=function(e,t,r){var i;for(i=e.length;i<t;i+=1)e=r?"0"+e:e+"0";return e},u=function(e,t,r,i){var a=new RangeError(e+" is out of range.  Enter a value between "+t+" and "+r+" for "+i);throw a.errorInfo={errorCode:"numberOptionOutOfRange",parameterMap:{value:e,minValue:t,maxValue:r,propertyName:i}},a},p=function(e,t,r,i,a){return e=e[t],void 0!==e?(e=Number(e),(isNaN(e)||e<r||e>i)&&u(e,r,i,t),Math.floor(e)):a},c=function(e,t,r,n){var o=i.Cg(e);if(n=i.Joa(o,n),t.numberingSystemKey=n,t.numberingSystem="symbols-numberSystem-"+n,void 0!==r.pattern&&0<r.pattern.length)n=r.pattern;else{var s;switch(r.style){case"decimal":s="decimalFormats-numberSystem-";break;case"currency":s="currencyFormats-numberSystem-";break;case"percent":s="percentFormats-numberSystem-";break;default:s="decimalFormats-numberSystem-"}s+=t.numberingSystemKey,n=o.numbers[s].standard;var c=r.decimalFormat;void 0!==c&&(t.shortDecimalFormat=o.numbers[s][c].decimalFormat)}s=i.IE(i.Gu(e)).language.language,t.plurals=e.supplemental.plurals,t.lang=s,t.pat=n,t.minusSign=o.numbers[t.numberingSystem].minusSign,t.decimalSeparator=o.numbers[t.numberingSystem].decimal,t.exponential=o.numbers[t.numberingSystem].exponential,t.groupingSeparator=o.numbers[t.numberingSystem].group,t.currencyDisplay=r.currencyDisplay,void 0!==r.currency&&(t.currencyCode=r.currency.toUpperCase()),t.style=r.style,a(r,n,o,t),void 0===r.pattern&&(t.minimumIntegerDigits=p(r,"minimumIntegerDigits",1,21,t.minimumIntegerDigits),void 0!==r.maximumFractionDigits&&(t.maximumFractionDigits=p(r,"maximumFractionDigits",0,20,t.maximumFractionDigits),t.maximumFractionDigits<t.minimumFractionDigits&&(t.minimumFractionDigits=t.maximumFractionDigits)),void 0!==r.minimumFractionDigits&&(t.minimumFractionDigits=p(r,"minimumFractionDigits",0,20,t.minimumFractionDigits)),t.maximumFractionDigits<t.minimumFractionDigits&&(t.maximumFractionDigits=t.minimumFractionDigits))},d=function(e){var t=new TypeError('The property "currency" is required whenthe property "'+e+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.');throw t.errorInfo={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}},t},f=function(){var e;throw e=Error("long and short decimalFormats are not supported for parsing"),e.errorInfo={errorCode:"unsupportedParseFormat",parameterMap:{value:"decimal"}},e},l=function(e,t){var r=i.ym(e,t),a=r("style","string",["currency","decimal","percent","perMill"],"decimal");"decimal"===a&&(a=r("decimalFormat","string",["standard","short","long"]),"OraNumberConverter.parse"===t&&void 0!==a&&"standard"!==a&&f()),r=r("currency","string"),"currency"===a&&void 0===r&&d("style")},v=function(e,t,r){function i(e){var t=0,r=0,i=0,a="";if("0"!==e[0]){for(;"0"!==e[t]&&t<e.length;)t++;a=e.substr(0,t),i=t}for(t=i;t<e.length&&"0"===e[t];t++)r++;return[a,r]}var a=function(e){var t,r,i;for(t in O)for(i=O[t].length,r=0;r<i;r++)if(O[t][r]<=e)return[t,O[t][r]];return[e,null]}(e),n="";if(null!==a[1]){var n=r.plurals[r.lang](Math.floor(e/R[a[0]])),o=""+a[1]+"-count-"+n,o=r.shortDecimalFormat[o];void 0===o&&(o=""+a[1]+"-count-other",o=r.shortDecimalFormat[o]);var s=i(o),c=s[1],n=s[0];if(c<o.length){var l=1*Math.pow(10,c),l=a[1]/l*10;e/=l}}return a="",void 0!==o&&(a=o.substr(c+s[0].length)),a=n+m(e,t,r)+a},g=function(e,r){var i=e+"",a=0,n=i.split(/e/i),o=n[0];_.lastIndex=0;var s=_.exec(o);null!==s?(a=s[1].length-1,o=s[2]):o=o.replace(".","");var s=1<n.length?parseInt(n[1],10):0,n=parseInt(o,10),c=r.minimumIntegerDigits+r.maximumFractionDigits;return o.length>c&&(c-=o.length,n=Math.round(n*Math.pow(10,c))),c=r.minimumIntegerDigits+r.minimumFractionDigits,n=t(n+"",c,!1),s=-1!==i.indexOf(".")?s-(r.minimumIntegerDigits-i.indexOf(".")+a):s-(c-o.length-r.minimumFractionDigits),i=Math.abs(s),i=t(i+"",r.minExponentDigits,!0),0>s&&(i=r.minusSign+i),a=n.slice(0,r.minimumIntegerDigits),a=0<n.slice(r.minimumIntegerDigits).length?a+(r.decimalSeparator+n.slice(r.minimumIntegerDigits)+r.exponential+i):a+(r.exponential+i)},m=function(e,r,i){var a,n=i.groupingSize,o=i.groupingSize0,s=(e+"").split(/e/i),c=1<s.length?parseInt(s[1],10):0;a=s[0];var s=a.split("."),l=1<s.length?s[1]:"";if(1<s.length&&l.length>c){var d=Math.min(i.maximumFractionDigits,l.length-c);a=Math.pow(10,d),a=Math.round(e*a)/a,isFinite(a)||(a=e),e=a}for(s=(e+"").split(/e/i),c=1<s.length?parseInt(s[1],10):0,a=s[0],s=a.split("."),a=s[0],l=1<s.length?s[1]:"",0<c?(l=t(l,c,!1),a+=l.slice(0,c),l=l.substr(c)):0>c&&(c=-c,a=t(a,c+1,!0),l=a.slice(-c,a.length)+l,a=a.slice(0,-c)),l=0<d?i.decimalSeparator+(l.length>d?l.slice(0,d):t(l,d,!1)):0<i.minimumFractionDigits?i.decimalSeparator:"",l=t(l,i.decimalSeparator.length+i.minimumFractionDigits,!1),e=i.groupingSeparator,d="",!1===r.useGrouping&&void 0===r.pattern&&(e=""),a=t(a,i.minimumIntegerDigits,!0),r=a.length-1,l=1<l.length?l:"";0<=r;){if(0===n||n>r)return i=a.slice(0,r+1)+(d.length?e+d+l:l);d=a.slice(r-n+1,r+1)+(d.length?e+d:""),r-=n,0<o&&(n=i.groupingSize0)}return i=a.slice(0,r+1)+e+d+l},r=function(e,t,r,a,n){if(r=i.Cg(r),!isFinite(e))return 1/0===e||-(1/0)===e?r.numbers[a.numberingSystem].infinity:r.numbers[a.numberingSystem].nan;if(r=Math.abs(e),!0===a.isPercent||"percent"===t.style?r*=100:!0===a.isPerMill&&(r*=1e3),r="decimal"===t.style&&void 0!==t.decimalFormat&&"standard"!==t.decimalFormat?v(r,t,a):!0===a.useExponentialNotation?g(r,a):m(r,t,a),t="",t=0>e?t+(a.negativePrefix+r+a.negativeSuffix):t+(a.positivePrefix+r+a.positiveSuffix),e=i.mr(n,"nu"),void 0===i.il[e]&&(e="latn"),"latn"!==e){for(n=[],a=0;a<t.length;a++)"0"<=t[a]&&"9">=t[a]?n.push(i.il[e][t[a]]):n.push(t[a]);return n.join("")}return t},n=function(e,t,r,a){e=i.ol(e);var n="",s=!1,c=new RegExp("^"+a.numbers[r.numberingSystem].plusSign.replace(A,"\\$1"));e=e.replace(c,"");var l=i.ol(r.positivePrefix),d=i.ol(r.positiveSuffix),u=i.ol(r.negativePrefix),c=i.ol(r.negativeSuffix),p=new RegExp("^"+(l||"").replace(A,"\\$1")),h=new RegExp((d||"").replace(A,"\\$1")+"$"),f=new RegExp("^"+(u||"").replace(A,"\\$1")),m=new RegExp((c||"").replace(A,"\\$1")+"$");if(!0===f.test(e)&&!0===m.test(e))e=e.replace(f,""),e=e.replace(m,""),n="-",s=!0;else if(!0===p.test(e)&&!0===h.test(e))e=e.replace(p,""),e=e.replace(h,""),n="+",s=!0;else if("currency"===t.style){t=p=r.currencyCode;var g;void 0!==a.numbers.currencies[p]&&(t=a.numbers.currencies[p].symbol),void 0===r.currencyDisplay||"symbol"===r.currencyDisplay?g=t:"code"===r.currencyDisplay&&(g=p),void 0!==g&&(p=(l||"").replace(g,""),d=(d||"").replace(g,""),u=(u||"").replace(g,""),g=(c||"").replace(g,""),p=new RegExp(("^"+p).replace(A,"\\$1")),h=new RegExp(d.replace(A,"\\$1")+"$"),f=new RegExp(("^"+u).replace(A,"\\$1")),m=new RegExp(g.replace(A,"\\$1")+"$"),!0===f.test(e)&&!0===m.test(e)?(e=e.replace(f,""),e=e.replace(m,""),n="-",s=!0):!0===p.test(e)&&!0===h.test(e)&&(e=e.replace(p,""),e=e.replace(h,""),n="+",s=!0))}return s?r=[n,e]:(r=o(e,r,a),r[2]=!0),r},o=function(e,t,r){var a=r.numbers[t.numberingSystem].group,n=r.numbers[t.numberingSystem].decimal,o=r.numbers[t.numberingSystem].minusSign,s="",c="";return t=i.Ng(r.numbers[t.numberingSystem].exponential),e=i.Ng(e),e=e.split(t).join("E"),e=e.split(a).join(""),t=a.replace(/\u00A0/g," "),a!==t&&(e=e.split(t).join("")),e=e.split(n).join("."),"."===e.charAt(0)&&(e=e.substr(1),c="."),e=e.replace(o,"-"),a=S.exec(e),c+=a[2],i.pz(c,"-")?(c=c.substr(1),s="-"):i.pz(e,"+")&&(c=c.substr(1),s="+"),[s,c]},s=function(e,t,r){var a=t.numbers[r.numberingSystem].minusSign;t=t.numbers[r.numberingSystem].plusSign;var n;return e=i.ol(e),a=i.ol(a),t=i.ol(t),i.pz(e,a)?n=["-",e.substr(a.length)]:i.pz(e,i.ol(t))&&(n=["+",e.substr(t.length)]),n||["",e]};var N,D,L,w;return T=function(e){var t;throw t=new SyntaxError('Unexpected character(s) encountered in the pattern "'+e+' An example of a valid pattern is "#,##0.###".'),t.errorInfo={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,propertyValueHint:"#,##0.###"}},t},b=function(e,t,r){return null!==new RegExp(r,"i").exec(e.substr(t,r.length))},I=function(e,t){var r={};null!==N&&(t.positivePrefix=E(N,e,t,r)),null!==D&&(t.positiveSuffix=E(D,e,t,r)),null!==L&&(t.negativePrefix=E(L,e,t,r)),null!==w&&(t.negativeSuffix=E(w,e,t,r)),void 0!==r.name&&(t.positiveSuffix=""+r.name,t.positivePrefix="","ar"===t.lang?(t.negativeSuffix=e.numbers[t.numberingSystem].minusSign+""+r.name,t.negativePrefix=""):(t.negativeSuffix=""+r.name,t.negativePrefix=e.numbers[t.numberingSystem].minusSign))},E=function(e,t,r,i){for(var a="",n=0;n<e.length;){var o=e.charAt(n++);if("'"!==o){switch(o){case"":var s=o=r.currencyCode,c=o;void 0!==t.numbers.currencies[o]&&(s=t.numbers.currencies[o].displayName,c=t.numbers.currencies[o].symbol),void 0===r.currencyDisplay||"symbol"===r.currencyDisplay?o=c:"code"!==r.currencyDisplay&&(o=s,i.name=o);break;case"%":o=t.numbers[r.numberingSystem].percentSign;break;case"":o=t.numbers[r.numberingSystem].perMille;break;case"-":o=t.numbers[r.numberingSystem].minusSign}a=a.concat(o)}}return a},a=function(e,t,r,i){for(var a=!1,n=!1,o=0,s=0,c=!0,l=1;0<=l&&s<t.length;--l){for(var u,p=!1,h="",f="",m=-1,g=1,v=0,y=0,E=0,P=-1,C=-1,S=0,c=!0,A=s;A<t.length;++A){var _=t.charAt(A);switch(S){case 0:case 2:if(p){if("'"===_){A+1<t.length&&"'"===t.charAt(A+1)?(++A,c?h=h.concat("''"):f=f.concat("''")):p=!1;continue}}else{if("#"===_||"0"===_||","===_||"."===_){S=1,--A;continue}if(""===_){void 0===e.currency&&d("pattern"),e.style="currency",(_=A+1<t.length&&""===t.charAt(A+1))&&++A,c?h=h.concat(_?"'":"'"):f=f.concat(_?"'":"'");continue}if("'"===_){if("'"===_){A+1<t.length&&"'"===t.charAt(A+1)?(++A,c?h=h.concat("''"):f=f.concat("''")):p=!0;continue}}else{if(";"===_){0!==S&&0!==l||T(t),s=A+1,A=t.length;continue}if("%"===_){e.style="percent",1!==g&&T(t),i.isPercent=!0,g=100,c?h=h.concat("'%"):f=f.concat("'%");continue}if(""===_){1!==g&&T(t),e.style="perMill",i.isPerMill=!0,g=1e3,c?h=h.concat("'"):f=f.concat("'");continue}if("-"===_){c?h=h.concat("'-"):f=f.concat("'-");continue}}}c?h=h.concat(_):f=f.concat(_);break;case 1:if(1!==l){0===--o&&(S=2,c=!1);continue}if(++o,"#"===_)0<y?++E:++v,0<=P&&0>m&&++P;else if("0"===_)0<E&&T(t),++y,0<=P&&0>m&&++P;else if(","===_)C=P,P=0;else if("."===_)0<=m&&T(t),m=v+y+E;else if(b(t,A,"E")){for(n&&T(t),n=!0,u=0,A+=1;A<t.length&&"0"===t.charAt(A);)++u,++o,++A;(1>v+y||1>u)&&T(t),S=2,c=!1,--A}else S=2,c=!1,--A,--o}}0===y&&0<v&&0<=m&&(y=m,0===y&&++y,E=v-y,v=y-1,y=1),(0>m&&0<E||0<=m&&(m<v||m>v+y)||0===P||p)&&T(t),1===l?(N=h,D=f,L=N,w=D,p=v+y+E,i.minimumIntegerDigits=(0<=m?m:p)-v,i.maximumIntegerDigits=n?v+i.minimumIntegerDigits:2147483647,i.maximumFractionDigits=0<=m?p-m:0,i.minimumFractionDigits=0<=m?v+y-m:0,i.groupingSize=0<P?P:0,i.groupingSize0=C):(L=h,w=f,a=!0)}0===t.length&&(N=D="",i.minimumIntegerDigits=0,i.maximumIntegerDigits=2147483647,i.minimumFractionDigits=0,i.maximumFractionDigits=2147483647),i.useExponentialNotation=n,i.minExponentDigits=u,(!a||0===L.localeCompare(N)&&0===w.localeCompare(D))&&("currency"===e.style&&"ar"===i.lang?(w=D+"'-",L=N):(w=D,L="'-"+N)),I(r,i)},h=function(e,t,r,i){if(isNaN(e)){var a;switch(e="Unparsable number "+i+" The expected number pattern is "+r.pat,t.style){case"decimal":a="decimalFormatMismatch";break;case"currency":a="currencyFormatMismatch";break;case"percent":a="percentFormatMismatch"}throw t=Error(e),t.errorInfo={errorCode:a,parameterMap:{value:i,format:r.pat}},t}return!0===r.isPercent||"percent"===t.style?e/=100:!0===r.isPerMill&&(e/=1e3),e},{re:function(){return y||(y=e()),y}}}(),e.mf=function(e){this.Init(e)},o_("RegExpValidator",e.mf,e),e.b.ga(e.mf,e.ig,"oj.RegExpValidator"),e.mf.WF="oj-validator.regExp.detail",e.mf.XF="oj-validator.regExp.summary",e.mf.prototype.Init=function(t){e.mf.r.Init.call(this),this.kb=t},e.b.g("RegExpValidator.prototype.Init",{Init:e.mf.prototype.Init}),e.mf.prototype.validate=function(t){var r,i,a,n=this.kb&&this.kb.pattern||"";if(null===t||void 0===t||""===t)return!0;t=t?t.toString():t;var o;if(o=t.match("^("+n+")$"),null===o||o[0]!==t)throw this.kb&&(i=this.kb.messageSummary||null,a=this.kb.messageDetail||null,r=this.kb&&this.kb.label||""),t={label:r,pattern:n,value:t},i=i?e.ha.Mb(i,t):e.ha.A(this.BJ(),t),a=a?e.ha.Mb(a,t):e.ha.A(this.XI(),t),new e.Ah(i,a);return!0},e.b.g("RegExpValidator.prototype.validate",{validate:e.mf.prototype.validate}),e.mf.prototype.wc=function(){var t=null,r={};return this.kb&&this.kb.hint&&(r={pattern:this.kb.pattern},t=e.ha.Mb(this.kb.hint,r)),t},e.b.g("RegExpValidator.prototype.getHint",{wc:e.mf.prototype.wc}),e.mf.prototype.BJ=function(){return e.mf.XF},e.mf.prototype.XI=function(){return e.mf.WF},e.sb={},o_("IntlConverterUtils",e.sb,e),e.sb.isoToLocalDate=function(e){return i.isoToLocalDate(e)},e.sb.dateToLocalIso=function(e){return i.dateToLocalIso(e)},e.sb._isoToLocalDateIgnoreTimezone=function(e){return i._isoToLocalDateIgnoreTimezone(e)},e.sb.HJ=function(e){return i.HJ(e)},e.sb.getConverterInstance=function(t){var r="",i={},a=null;return t&&("object"==typeof t&&(t instanceof e.ye||t.parse&&"function"==typeof t.parse||t.format&&"function"==typeof t.format?a=t:(r=t.type,i=t.options||{})),a||(r=r||t)&&"string"==typeof r&&(t=e.qa.rm(r),a=t.createConverter(i))),a},e.sb._minMaxIsoString=function(e,t){if(e){t=t||this.dateToLocalIso(new Date);var r=t.indexOf("T");0===e.indexOf("T")&&0<r&&(e=t.substring(0,r)+e)}return e},e.sb.Ms=function(t,r){
e.l.Kf(r);var i,a="",n="",o=r.propertyName;return"optionTypesMismatch"===t?(n=r.requiredPropertyName,i=r.requiredPropertyValueValid,a=e.ha.A("oj-converter.optionTypesMismatch.summary",{propertyName:o,propertyValue:r.propertyValue,requiredPropertyName:n}),n=e.sb.TB(n,i)):"optionTypeInvalid"===t?(o=r.propertyName,i=r.propertyValueValid,a=e.ha.A("oj-converter.optionTypeInvalid.summary",{propertyName:o}),n=e.sb.TB(o,i)):"optionOutOfRange"===t?(a=e.ha.A("oj-converter.optionOutOfRange.summary",{propertyName:o,propertyValue:r.propertyValue}),i=r.propertyValueValid,n=e.sb.TB(o,i)):"optionValueInvalid"===t&&(a=e.ha.A("oj-converter.optionValueInvalid.summary",{propertyName:o,propertyValue:r.propertyValue}),i=r.propertyValueHint,n=e.sb.TB(o,i)),new e.Qe(a,n)},e.sb.TB=function(t,r){var i;return r?("string"==typeof r?i="oj-converter.optionHint.detail":(i="oj-converter.optionHint.detail-plural",r=r.join(e.ha.A("oj-converter.plural-separator"))),e.ha.A(i,{propertyName:t,propertyValueValid:r})):""},e.sb.Ora=function(){return""};var n;n=function(){function e(){return{format:function(e,t,r,a){var n;if("number"==typeof e)n=new Date(e);else{if("string"!=typeof e)return null;if(""===i.trim(e))return null;n=i.isoToLocalDate(e)}(2>=arguments.length||void 0===r)&&(r={year:"numeric",month:"numeric",day:"numeric"}),n=o(n,t,r);var s=i.mr(a,"nu");if(void 0===i.il[s]&&(s="latn"),"latn"!==s){var c,l=[];for(c=0;c<n.length;c++)"0"<=n[c]&&"9">=n[c]?l.push(i.il[s][n[c]]):l.push(n[c]);return l.join("")}return n},hE:function(e,t,r){return c(e,t,r)},parse:function(e,t,r,i){return s(e,t,r,i)},resolvedOptions:function(e,t,a){(3>arguments.length||void 0===a)&&(a=i.Gu(e)),(2>arguments.length||void 0===t)&&(t={year:"numeric",month:"numeric",day:"numeric"});var o,s=!1;if(o=i.mr(a,"nu"),void 0===i.il[o]&&(o="latn"),void 0!==t&&void 0!==t.pattern)return o=d(a,o,t.pattern),o.pattern=t.pattern,o;if(void 0!==t){o={locale:a,numberingSystem:o,calendar:"gregorian"};var c=0;for(c in t)c++;if(0==c)return o.year="numeric",o.month="numeric",o.day="numeric",o;var c=i.ym(t,"OraDateTimeConverter.resolvedOptions"),l=c("year","string",["2-digit","numeric"]);if(void 0!==l&&(o.year=l,s=!0),l=c("era","string",["narrow","short","long"]),void 0!==l&&(o.era=l,s=!0),l=c("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==l&&(o.month=l,s=!0),l=c("day","string",["2-digit","numeric"]),void 0!==l&&(o.day=l,s=!0),l=c("weekday","string",["narrow","short","long"]),void 0!==l&&(o.weekday=l,s=!0),l=c("hour","string",["2-digit","numeric"]),void 0!==l&&(o.hour=l,s=!0,l=c("hour12","boolean",[!0,!1]),void 0===l&&(l=h(e)),o.hour12=l),l=c("minute","string",["2-digit","numeric"]),void 0!==l&&(o.minute=l,s=!0),l=c("second","string",["2-digit","numeric"]),void 0!==l&&(o.second=l,s=!0),o["two-digit-year-start"]=p(t),!s){var s=m(t,e,n.resolvedOptions),l=c("formatType","string",["date","time","datetime"],"date"),u=c("dateFormat","string",["short","medium","long","full"],"short"),c=c("timeFormat","string",["short","medium","long","full"],"short");return o.formatType=l,"datetime"!==l&&"date"!==l||(o.dateFormat=u),"datetime"!==l&&"time"!==l||(o.timeFormat=c),o.patternFromOptions=s,o}return o.patternFromOptions=r(t,e,"OraDateTimeConverter.resolvedOptions"),o}return c=r({year:"numeric",month:"numeric",day:"numeric"},e,"OraDateTimeConverter.resolvedOptions"),{calendar:"gregorian",locale:a,numberingSystem:o,year:"numeric",month:"numeric",day:"numeric",patternFromOptions:c}},Io:function(e){e=i.isoToLocalDate(e);var t=new Date(e.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1}}}var t,r,a,o,s,c,l,d,u,p,h,f,m,g,v,y,b,E,I,T,P,C,S,A,_,O,R,N,D,L,w,M,x,k,U,F,G,H,V,Y,j,q,$,B,W,K,z,Q,J,X,Z,ee,te,re,ie={},ae=/(\d{1,4})\D+?(\d{1,4})/g,ne=/(\d{1,4})\D+?(\d{1,4})\D+?(\d{1,4})/g,oe=/^[M][^M]|[^M]M[^M]/g,se=/^[L][^L]|[^L]L[^L]/g,ce=/^[d][^d]|[^d]d[^d]/g,le=/(?:^|[^h])h[^h]|[^H]H[^H]|[^k]k[^k]|[^K]K[^K]/,de=/(\d{1,2})(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,3}))?/g,ue=/h|H|K|k/g,pe=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,he=/ccccc|cccc|ccc|cc|c|EEEEE|EEEE|EEE|EE|E|dd|d|MMMMM|MMMM|MMM|MM|M|LLLLL|LLLL|LLL|LL|L|yyyy|yy|y|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|aa|a|SSS|SS|S|zzzz|zzz|zz|z|GGGGG|GGGG|GGG|GG|G/g,fe=/\s?(?:\(|\[)??z{1,4}(?:\)|\])?/g,me={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},ge={MMM:{token:"months",style:"format",mLen:"abbreviated",matchIndex:0,key:"month",value:"short",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},MMMM:{token:"months",style:"format",mLen:"wide",matchIndex:0,key:"month",value:"long",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},MMMMM:{token:"months",style:"format",mLen:"narrow",matchIndex:0,key:"month",value:"narrow",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLL:{token:"months",style:"stand-alone",mLen:"abbreviated",matchIndex:1,key:"month",value:"short",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLLL:{token:"months",style:"stand-alone",mLen:"wide",matchIndex:1,key:"month",value:"long",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLLLL:{token:"months",style:"stand-alone",mLen:"narrow",matchIndex:1,key:"month",value:"narrow",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},E:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EEE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EEEE:{token:"days",style:"format",dLen:"wide",matchIndex:0,key:"weekday",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},EEEEE:{token:"days",style:"format",dLen:"narrow",matchIndex:0,key:"weekday",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},c:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},cc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},ccc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},cccc:{token:"days",style:"stand-alone",dLen:"wide",matchIndex:1,key:"weekday",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},ccccc:{token:"days",style:"stand-alone",dLen:"narrow",matchIndex:1,key:"weekday",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},h:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},hh:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},K:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},KK:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},H:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},HH:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},k:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},kk:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},m:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"numeric",regExp:"(\\d\\d?)"},mm:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"2-digit",regExp:"(\\d\\d?)"},s:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"numeric",regExp:"(\\d\\d?)"},ss:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"2-digit",regExp:"(\\d\\d?)"},S:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SSS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},d:{token:"dayOfMonth",key:"day",value:"numeric",getPartIdx:2,regExp:"(\\d\\d?)"},dd:{token:"dayOfMonth",key:"day",value:"2-digit",getPartIdx:2,regExp:"(\\d\\d?)"},M:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},MM:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},L:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},LL:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},y:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},yy:{token:"year",key:"year",value:"2-digit",regExp:"(\\d\\d?)"},yyyy:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},a:{token:"ampm",key:"hour12",value:!0,regExp:"(\\D*)"},z:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zz:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zzz:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zzzz:{token:"tz",key:"timeZoneName",value:"long",regExp:"([+-]?\\d{1,4})"},G:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GG:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GGG:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GGGG:{token:"era",key:"era",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},GGGGG:{token:"era",key:"era",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},"/":{token:"slash",regExp:"(\\/)"}};return p=function(e){return e=e["two-digit-year-start"],(void 0===e||isNaN(e))&&(e=1950),e=parseInt(e,10)},h=function(e){var t=i.IE(i.Gu(e)).region||"001";return"h"===e.supplemental.prefferedHours[t]},g=function(e){return 0==e%400||0!=e%100&&0==e%4},v=function(e,t){switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return g(e)?29:28;default:return 30}},m=function(e,t,r){t=i.Cg(t);var a=i.ym(e,r);e=a("formatType","string",["date","time","datetime"],"date"),r=a("dateFormat","string",["short","medium","long","full"],"short");var a=a("timeFormat","string",["short","medium","long","full"],"short"),n=t.dates.calendars.gregorian;t=n.dateFormats;var o,s,c,n=n.timeFormats;switch(r){case"full":o=t.full;break;case"long":o=t.long;break;case"medium":o=t.medium;break;case"short":o=t.short}switch(a){case"full":s=n.full;break;case"long":s=n.long;break;case"medium":s=n.medium;break;case"short":s=n.short}return void 0===o||"datetime"!==e&&"date"!==e||(c=o),void 0===s||"datetime"!==e&&"time"!==e||(s=s.replace(fe,""),c=c?c+" "+s:s),c},t=function(e,t){for(var r=0,i=!1,a=0,n=e.length;a<n;a++){var o=e.charAt(a);switch(o){case"'":i?t.push("'"):r++,i=!1;break;case"\\":i&&t.push("\\"),i=!i;break;default:t.push(o),i=!1}}return r},l=function(e,t,r){var i;throw i=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,t=void 0!==t.hour||void 0!==t.minute||void 0!==t.second,i=i&&t?"MM/dd/yy hh:mm:ss a":i?"MM/dd/yy":"hh:mm:ss a",r=new SyntaxError("Unexpected character(s) "+r+' encountered in the pattern "'+e+' An example of a valid pattern is "'+i+'".'),r.errorInfo={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,"propertyValueHint ":i}},r},T=function(e,t,r,a){t=i.Cg(t).dates.calendars.gregorian.dateTimeFormats.availableFormats,r="weekday era year month day hour minute second timeZoneName".split(" ");var n,o,s,c={"2-digit":0,numeric:1,narrow:2,short:3,long:4},l=-(1/0),d=void 0;for(s in t){o=!1;var u={};u.pattern=t[s];for(var p=0;null!==(n=he.exec(s));)n=n[0],("h"!==n&&"hh"!==n||a)&&("H"!==n&&"HH"!==n||!a)?void 0!==ge[n]&&(u[ge[n].key]=ge[n].value):o=!0;if(!o){for(var h in r)o=e[r[h]],n=u[r[h]],void 0===o&&void 0!==n?p-=20:void 0!==o&&void 0===n?p-=120:void 0!==o&&void 0!==n&&(o=Math.max(Math.min(c[n]-c[o],2),-2),2===o?p-=6:1===o?p-=3:-1===o?p-=6:-2===o&&(p-=8));p>l&&(l=p,d=u)}}return void 0!==d?d.pattern:null},b=function(e,t,r){var a="",n="",o={},s={};e=i.ym(e,r),r=e("era","string",["narrow","short","long"]),a+=P(o,"era",r,{narrow:"GGGGG",short:"GGG",long:"GGGG"}),r=e("year","string",["2-digit","numeric"]),a+=P(o,"year",r,{"2-digit":"yy",numeric:"y"}),r=e("month","string",["2-digit","numeric","narrow","short","long"]),a+=P(o,"month",r,{"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"}),r=e("weekday","string",["narrow","short","long"]),a+=P(o,"weekday",r,{narrow:"EEEEE",short:"E",long:"EEEE"}),r=e("day","string",["2-digit","numeric"]);var a=a+P(o,"day",r,{"2-digit":"dd",numeric:"d"}),c=e("hour12","boolean",[!0,!1]);return void 0===c&&(c=h(t)),r=e("hour","string",["2-digit","numeric"]),n=!0===c?n+P(s,"hour",r,{"2-digit":"hh",numeric:"h"}):n+P(s,"hour",r,{"2-digit":"HH",numeric:"H"}),r=e("minute","string",["2-digit","numeric"]),n+=P(s,"minute",r,{"2-digit":"mm",numeric:"m"}),r=e("second","string",["2-digit","numeric"]),n+=P(s,"second",r,{"2-digit":"ss",numeric:"s"}),[a,n,o,s]},P=function(e,t,r,i){return void 0!==r?(e[t]=r,i[r]):""},E=function(e,t,r){var a=e;t=i.ym(t,r),r=t("year","string",["2-digit","numeric"]);var n={"2-digit":"yy",numeric:"yyyy"};if(void 0!==r&&(a=a.replace(/y{1,4}/,n[r])),r=t("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==r){var n={"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"},o={"2-digit":"LL",numeric:"L",narrow:"LLLLL",short:"LLL",long:"LLLL"};void 0!==n[r]&&2<n[r].length?(a=a.replace(/M{3,5}/,n[r]),a=a.replace(/L{3,5}/,o[r])):"2-digit"===r&&(oe.lastIndex=0,(r=oe.test(e))&&(a=a.replace("M","MM")),(r=se.test(e))&&(a=a.replace("L","LL")))}return r=t("weekday","string",["narrow","short","long"]),void 0!==r&&(a=a.replace(/E{1,5}/,{narrow:"EEEEE",short:"EEE",long:"EEEE"}[r]),a=a.replace(/c{1,5}/,{narrow:"ccccc",short:"ccc",long:"cccc"}[r])),r=t("day","string",["2-digit","numeric"]),void 0!==r&&"2-digit"===r&&(ce.lastIndex=0,(r=ce.test(e))&&(a=a.replace("d","dd"))),a},I=function(e,t,r){var a=e;return"2-digit"===i.ym(t,r)("hour","string",["2-digit","numeric"])&&(le.lastIndex=0,t=le.exec(e),null!==t&&(a=t[0].length-2,a=e.replace(t[0][a],t[0][a]+t[0][a]))),a},J=function(e,t,r){var i,a=0;for(i in t)a++;if(1<a)return null;for(i=e.length;0<i;i--)if(t=r[e.substr(0,i)],void 0!==t)return t;return e},r=function(e,t,r){var a=i.Cg(t),n=i.Gu(t),o=i.ym(e,r),s=o("formatMatcher","string",["basic","munger"],"munger"),c=0;for(c in e)c++;if(0==c&&(e={year:"numeric",month:"numeric",day:"numeric"}),c=b(e,t,r),void 0!==ie[n]){var l=ie[n].dates.calendars.gregorian.dateTimeFormats[c[0]+c[1]];if(void 0!==l)return l}if(""===c[0]&&""===c[1])return m(e,t,r);var a=a.dates.calendars.gregorian.dateTimeFormats.availableFormats,l=a[c[0]],d=o("hour12","boolean",[!0,!1]);return void 0===d&&(d=h(t)),void 0===l&&""!==c[0]&&(l=J(c[0],c[2],a),null===l&&(l=T(c[2],t,0,d)),null!==l?"basic"!==s&&(l=E(l,e,r)):l=c[0]),o=a[c[1]],void 0===o&&""!==c[1]&&(o=J(c[1],c[3],a),null===o&&(o=T(c[3],t,0,d)),null!==o?"basic"!==s&&(o=I(o,e,r)):o=c[1]),e=l||"",void 0!==o&&(e=""!==e?e+(" "+o):o),void 0===ie[n]&&(ie[n]={},ie[n].dates={},ie[n].dates.calendars={},ie[n].dates.calendars.gregorian={},ie[n].dates.calendars.gregorian.dateTimeFormats={}),ie[n].dates.calendars.gregorian.dateTimeFormats[c[0]+c[1]]=e},o=function(e,a,n){function o(e,t){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth()+1;case 2:return e.getDate();case 3:return me[e.getDay()]}}function s(e,t,r,a){t=o(t,r),e.push(1<a?i.sd(t,a):t)}function c(e,t,r,a,n){var o;switch(a.timePart){case"hour":o=11===a.end1?t.getHours()%12:t.getHours(),"h"===n||"hh"===n?0===o&&(o=12):"k"!==n&&"kk"!==n||0!==o||(o=24);break;case"minute":o=t.getMinutes();break;case"second":o=t.getSeconds();break;case"millisec":o=t.getMilliseconds()}e.push(1<r?i.sd(o,r):o)}var d=i.Cg(a),u=n.pattern||r(n,a,"OraDateTimeConverter.format");a=[];for(var p,h=0,d=d.dates.calendars.gregorian;;){p=he.lastIndex;var f=he.exec(u);if(p=u.slice(p,f?f.index:u.length),h+=t(p,a),!f)break;if(h%2)a.push(f[0]);else{p=f[0];var f=p.length,m=ge[p];switch(m.token){case"days":p=d[m.token][m.style][m.dLen],a.push(p[o(e,3)]);break;case"months":p=d[m.token][m.style][m.mLen],a.push(p[o(e,1)]);break;case"dayOfMonth":case"monthIndex":a.push(s(a,e,m.getPartIdx,f));break;case"year":p=e.getFullYear(),2==f&&(p%=100),a.push(i.sd(p,f));break;case"time":c(a,e,f,m,p);break;case"ampm":p=12>e.getHours()?d.dayPeriods.format.wide.am:d.dayPeriods.format.wide.pm,a.push(p);break;case"tz":break;case"era":p=d.eras.eraAbbr,a.push(p[1]);break;case"slash":a.push("/");break;default:l(u,n,p)}}}return a.join("")},A=function(e,t){return e.getFullYear()==t.getFullYear()},_=function(e,t){return 1==t.getFullYear()-e.getFullYear()},O=function(e,t){return _(t,e)},R=function(e,t){return A(e,t)&&e.getMonth()===t.getMonth()},N=function(e,t){return A(e,t)?1==t.getMonth()-e.getMonth():!!_(e,t)&&(11==e.getMonth()&&0==t.getMonth())},D=function(e,t){return N(t,e)},C=function(e,t){var r=e.getDate(),i=t.getDate();return N(e,t)&&(i+=v(e.getFullYear,e.getMonth())),i-r},S=function(e,t){var r=i.IE(i.Gu(e)).region||"001",r=t-e.supplemental.weekData.firstDay[r];return 0>r&&(r+=7),r},L=function(e,t,r){if(t>r){var i=t;t=r,r=i}return!(!R(t,r)&&!N(t,r))&&(e=C(t,r)+S(e,t.getDay()),0<=e&&6>=e)},w=function(e,t,r){return!(!R(t,r)&&!N(t,r))&&(e=C(t,r)+S(e,t.getDay()),7<=e&&13>=e)},M=function(e,t,r){return w(e,r,t)},x=function(e,t){return A(e,t)&&R(e,t)&&e.getDate()===t.getDate()},k=function(e,t){return!(!R(e,t)&&!N(e,t))&&1===C(e,t)},U=function(e,t){return k(t,e)},c=function(e,t,r){if("number"==typeof e)e=new Date(e);else{if("string"!=typeof e)return null;if(""===i.trim(e))return null;e=i.isoToLocalDate(e)}var a=i.Cg(t).dates.fields;r=i.ym(r,"OraDateTimeConverter.formatRelative"),r("formatUsing","string",["displayName"]),r=r("dateField","string",["day","week","month","year"]);var n=new Date;switch(r){case"day":if(x(n,e))return a.day["relative-type-0"];if(k(n,e))return a.day["relative-type-1"];if(U(n,e))return a.day["relative-type--1"];break;case"week":if(L(t,n,e))return a.week["relative-type-0"];if(w(t,n,e))return a.week["relative-type-1"];if(M(t,n,e))return a.week["relative-type--1"];break;case"month":if(R(n,e))return a.month["relative-type-0"];if(N(n,e))return a.month["relative-type-1"];if(D(n,e))return a.month["relative-type--1"];break;case"year":if(A(n,e))return a.year["relative-type-0"];if(_(n,e))return a.year["relative-type-1"];if(O(n,e))return a.year["relative-type--1"]}return null},X=function(e,t){var r;throw r=Error("The weekday "+e+" does not match the date "+t),r.errorInfo={errorCode:"dateToWeekdayMismatch",parameterMap:{weekday:e,date:t}},r},Q=function(e,t,r){var i;throw 2===r?(i='The value "'+e+'" does not match the expected date-time format "'+t+'"',r="datetimeFormatMismatch"):0===r?(i='The value "'+e+'" does not match the expected date format "'+t+'"',r="dateFormatMismatch"):(i='The value "'+e+'" does not match the expected time format "'+t+'"',r="timeFormatMismatch"),i=Error(i),i.errorInfo={errorCode:r,parameterMap:{value:e,format:t}},i},F=function(e,t){return 100>t&&(t+=100*Math.floor(e/100)+(t<e%100?100:0)),t},K=function(e,t){var r,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(r in e)if(i.trim(i.Ng(e[r]))==i.trim(t))return a[r];return-1},z=function(e,t){for(var r in e)if(i.trim(i.Ng(e[r]))===i.trim(t))return r-1;return-1},q=function(e,t,r){var a,n=i.Cg(e);switch(e=n.dates.calendars.gregorian.days.format,n=n.dates.calendars.gregorian.days["stand-alone"],r){case 0:a=[e.abbreviated,e.wide];break;case 1:a=[n.abbreviated,n.wide]}return t=i.Ng(t),r=K(a[0],t),-1===r&&(r=K(a[1],t)),r},$=function(e,t,r){var a=-1,n=i.Cg(e);switch(e=n.dates.calendars.gregorian.months.format,n=n.dates.calendars.gregorian.months["stand-alone"],r){case 0:r=[e.wide,e.abbreviated];break;case 1:r=[n.wide,n.abbreviated];break;case 2:r=[e.wide,e.abbreviated,n.wide,n.abbreviated];break;default:return-1}t=i.Ng(t);for(var o in r)if(a=z(r[o],t),-1!==a)break;return a},B=function(e,r){for(var i,a=e.replace(pe,"\\\\$1"),n=["^"],o=[],s=0,c=0;null!==(i=he.exec(a));){var d=a.slice(s,i.index),s=he.lastIndex,c=c+t(d,n);if(c%2)n.push(i[0]);else{var u,d=i[0];void 0!==ge[d]?u=ge[d].regExp:l(e,r,d),u&&n.push(u),o.push(i[0])}}return t(a.slice(s),n),n.push("$"),a={regExp:n.join("").replace(/\s+/g,"\\s+"),groups:o},{}[e]=a},W=function(e,t,r,i,a,n,o){if(t<r||t>i)throw t=new RangeError(a+" is out of range.  Enter a value between "+n+" and "+o+" for "+e),t.errorInfo={errorCode:"datetimeOutOfRange",parameterMap:{value:a,minValue:n,maxValue:o,propertyName:e}},t},G=function(e,t){for(var r in e)for(var i in e[r])if(i===t)return parseInt(r,10);return 0},j=function(e,t,r,a,n){var o=i.Cg(a).dates.calendars.gregorian.dayPeriods.format.wide.pm,s=a=de.lastIndex=0,c=0,l=0,d=de.exec(t);switch(null===d&&Q(t,r,n),void 0!==d[1]&&(a=parseInt(d[1],10)),void 0!==d[2]&&(s=parseInt(d[2],10)),void 0!==d[3]&&(c=parseInt(d[3],10)),void 0!==d[4]&&(l=parseInt(d[4],10)),ue.lastIndex=0,d=ue.exec(r),d[0]){case"h":12===a&&(a=0),W("hour",a,0,11,a,1,12),t=i.Ng(t).indexOf(i.Ng(o)),-1!==t&&12>a&&(a+=12);break;case"K":W("hour",a,0,11,a,0,11),t=i.Ng(t).indexOf(i.Ng(o)),-1!==t&&12>a&&(a+=12);break;case"H":W("hour",a,0,23,a,0,23);break;case"k":24===a&&(a=0),W("hour",a,0,23,a,1,24)}W("minute",s,0,59,s,0,59),W("second",c,0,59,c,0,59),W("millisec",l,0,999,l,0,999),e.setHours(a,s,c,l)},re=function(e,t){var r,a,n,o=i.Cg(t),s=o.dates.calendars.gregorian.days.format,o=o.dates.calendars.gregorian.days["stand-alone"],s=[s.wide,s.abbreviated,o.wide,o.abbreviated],o=!1;for(a in s){for(n in s[a])if(r=s[a][n],new RegExp(r+"\\b","i").test(e)){o=!0;break}if(o)break;r=null}return r},V=function(e,t,r,i,a){ne.lastIndex=0;var n=ne.exec(e);null===n&&Q(e,t,a?2:0);var o=[{y:t.indexOf("y")},{M:t.indexOf("M")},{d:t.indexOf("d")}];o.sort(function(e,t){for(var r in e)break;for(var i in t)break;return e[r]-t[i]});var s,c,l,d,u,h,f=G(o,"d"),m=!1,g=!1;for(h=1;3>=h;h++){var y=n[h];2<y.length&&(s=y,m=!0,d=h-1)}for(m||(d=G(o,"y"),s=n[G(o,"y")+1]),h=0;3>h;h++)if(h!==d&&12<n[h+1]){l=n[h+1],g=!0,u=h;break}if(g){for(h=0;3>h;h++)if(h!==u&&h!==d){c=n[h+1];break}void 0===c&&(c=n[G(o,"M")+1])}else d===G(o,"d")?(l=n[G(o,"y")+1],c=n[G(o,"M")+1]):d===G(o,"M")?(l=n[G(o,"d")+1],c=n[G(o,"y")+1]):(l=n[G(o,"d")+1],c=n[G(o,"M")+1]);return c-=1,n=v(s,c),g&&f!==u&&12<c&&W("month",l,0,11,l,1,12),W("month",c,0,11,c+1,1,12),W("day",l,1,n,l,1,n),s=F(p(r),parseInt(s,10)),W("year",s,0,9999,s,0,9999),r=new Date(s,c,l),s=re(e,i),null!==s&&(c=q(i,s,0),r.getDay()!==c&&X(s,r.getDate())),r={value:r,warning:"lenient parsing was used"},a&&(e=e.substr(ne.lastIndex),0===e.length?r.value.setHours(0,0,0,0):j(r.value,e,t,i,2)),r},Y=function(e,t,r,a,n){var o=e;e=i.Ng(e);var s,c,l,d,u=i.Cg(a),h=u.dates.calendars.gregorian.months.format,u=u.dates.calendars.gregorian.months["stand-alone"],h=[h.wide,h.abbreviated,u.wide,u.abbreviated],u=!1;for(c in h){s=[];for(l in h[c])d=i.Ng(h[c][l]),s.push({idx:l,name:d});s.sort(function(e,t){return t.idx-e.idx});for(l in s)if(d=s[l].name,-1!=e.indexOf(d)){u=!0,e=e.replace(d,"");break}if(u)break}if(!u)return V(o,t,r,a,n);l=$(a,d,2),W("month",l,0,11,l,1,12),d=re(o,a),c=new RegExp(d+"\\W","i"),null!==d&&(e=e.replace(c,"")),ae.lastIndex=0,h=ae.exec(e),null===h&&Q(o,t,n?2:0),o=[{y:t.indexOf("y")},{d:t.indexOf("d")}],o.sort(function(e,t){for(var r in e)break;for(var i in t)break;return e[r]-t[i]});var f,m,u=!1;for(c=1;2>=c;c++)s=h[c],2<s.length&&(f=s,u=!0,m=c-1);return u||(m=G(o,"y"),f=h[G(o,"y")+1]),m=m===G(o,"d")?h[G(o,"y")+1]:h[G(o,"d")+1],f=F(p(r),parseInt(f,10)),W("year",f,0,9999,f,0,9999),r=new Date(f,l,m),null!==d&&(c=q(a,d,0),r.getDay()!==c&&X(d,r.getDate())),f=v(f,l),W("day",m,1,f,m,1,f),f={value:r,warning:"lenient parsing was used"},n&&(e=e.substr(ae.lastIndex),0===e.length?f.value.setHours(0,0,0,0):j(f.value,e,t,a,2)),f},H=function(e,t,r,i){switch(u(r,"OraDateTimeConverter.parse")){case 0:return Y(e,t,r,i,!1);case 1:return r=new Date,j(r,e,t,i,1),{value:r,warning:"lenient parsing was used"};case 2:return Y(e,t,r,i,!0)}return null},te=function(e,t,r,a,n,o,s,c,l,d,u){return n=i.Cg(e).dates.calendars.gregorian[t][n],e="months"===t?$(e,r,o):q(e,r,o),W(u,e,s,c,r,n[a][l],n[a][d]),e},ee=function(e,t,r,i,a){t[r.timePart]=e,"h"===a||"hh"===a?12===e&&(t[r.timePart]=0):"k"===a||"kk"===a?24===e&&(t[r.timePart]=0):"S"===a&&(t[r.timePart]=e*Math.pow(10,3-i)),W(r.timePart,t[r.timePart],r.start1,r.end1,e,r.start2,r.end2)},a=function(e,t,r,a){var n=i.Cg(a);e=i.trim(e);var o=n.dates.calendars.gregorian.eras.eraAbbr[1],s=i.ol(o);e=e.replace(o,s);var o=B(t,r),c=new RegExp(o.regExp).exec(e);if(null===c)return H(e,t,r,a);var l,d=o.groups,u=s=o=null,h=null;l=null;for(var f,m,g=!1,y={hour:0,minute:0,second:0,millisec:0},n=n.dates.calendars.gregorian.dayPeriods.format.wide.pm,b=p(r),E=0,I=d.length;E<I;E++){var T=c[E+1];if(T){var P=d[E],C=P.length;f=parseInt(T,10);var S=ge[P];switch(S.token){case"months":s=te(a,S.token,T,S.mLen,S.style,S.matchIndex,0,11,"1","12","month name");break;case"days":m=T,h=te(a,S.token,T,S.dLen,S.style,S.matchIndex,0,6,"sun","sat","weekday");break;case"time":ee(f,y,S,C,P);break;case"dayOfMonth":if(u=f,31<u)return H(e,t,r,a);break;case"monthIndex":if(s=f-1,11<s)return H(e,t,r,a);break;case"year":o=F(b,f),W("year",o,0,9999,o,0,9999);break;case"ampm":g=i.Ng(T)===i.Ng(n);break;case"tz":l=f/100<<0,W("TZ Offset",l,-12,13,f,-12,13),f=Math.abs(f%100),W("TZ Offset",f,0,59,f,0,59),l=60*l+(i.pz(T,"-")?-f:f)}}}return e=new Date,t=e.getFullYear(),null===o&&(o=t),null===s&&null===u?(s=e.getMonth(),u=e.getDate()):null===u&&(u=1),t=v(o,s),W("day",u,1,t,u,1,t),e.setFullYear(o,s,u),null!==h&&e.getDay()!==h&&X(m,e.getDate()),g&&12>y.hour&&(y.hour+=12),e.setHours(y.hour,y.minute,y.second,y.millisec),null!==l&&(m=e.getMinutes()-(l+e.getTimezoneOffset()),e.setHours(e.getHours()+(m/60<<0),m%60)),{value:e}},d=function(e,r,i){var a=i.replace(pe,"\\\\$1"),n=["^"],o=0,s=0;for(e={locale:e,numberingSystem:r,calendar:"gregorian"};null!==(r=he.exec(a));){var c=a.slice(s,r.index),s=he.lastIndex,o=o+t(c,n);o%2||(r=r[0],"/"===r||"zzzz"===r||"zzz"===r||"zz"===r||"z"===r)||(void 0!==ge[r]?(e[ge[r].key]=ge[r].value,"kk"===r||"HH"===r||"H"===r||"k"===r?e.hour12=!1:"KK"!==r&&"hh"!==r&&"h"!==r&&"K"!==r||(e.hour12=!0)):l(i,e,r))}return e},f=function(e){e=d("","",e);var t=void 0!==e.hour||void 0!==e.minute||void 0!==e.second;return void 0===e.year&&void 0===e.month&&void 0===e.weekday&&void 0===e.day||!t?t?1:0:2},u=function(e,t){if(void 0!==e.pattern)return f(e.pattern);var r=i.ym(e,t),a=void 0!==r("hour","string",["2-digit","numeric"])||void 0!==r("minute","string",["2-digit","numeric"])||void 0!==r("second","string",["2-digit","numeric"]),n=void 0!==r("year","string",["2-digit","numeric"])||void 0!==r("month","string",["2-digit","numeric","narrow","short","long"])||void 0!==r("day","string",["2-digit","numeric"])||void 0!==r("weekday","string",["narrow","short","long"]);return n&&a?2:a?1:n?0:(r=r("formatType","string",["date","time","datetime"],"date"),"datetime"===r?2:"time"===r?1:0)},Z=function(e,t){var r,a;switch(e){case 0:a=i.sd(t.getFullYear(),4)+"-"+i.sd(t.getMonth()+1,2)+"-"+i.sd(t.getDate(),2);break;case 1:a="T"+i.sd(t.getHours(),2)+":"+i.sd(t.getMinutes(),2)+":"+i.sd(t.getSeconds(),2),r=t.getMilliseconds(),0<r&&(a+="."+r);break;default:a=i.sd(t.getFullYear(),4)+"-"+i.sd(t.getMonth()+1,2)+"-"+i.sd(t.getDate(),2)+"T"+i.sd(t.getHours(),2)+":"+i.sd(t.getMinutes(),2)+":"+i.sd(t.getSeconds(),2),r=t.getMilliseconds(),0<r&&(a+="."+r)}return a},s=function(e,t,n,o){var s=i.mr(o,"nu");if(void 0===i.il[s]&&(s="latn"),"latn"!==s){var c,l=[];for(c=0;c<e.length;c++){var d=i.il[s].indexOf(e[c]);-1!=d?l.push(d):l.push(e[c])}e=l.join("")}return(2>=arguments.length||void 0===n)&&(n={year:"numeric",month:"numeric",day:"numeric"}),s=u(n,"OraDateTimeConverter.parse"),l=n.pattern||r(n,t,"OraDateTimeConverter.parse"),c={},!0===i.CR.test(e)?(l=i.isoToLocalDate(e),c.value=Z(s,l),c):(l=a(e,l,n,t),d=l.value,c.warning=l.warning,c.value=Z(s,d),c)},{re:function(){return y||(y=e()),y}}}(),e.ul=function(e){this.Init(e)},o_("LengthValidator",e.ul,e),e.b.ga(e.ul,e.ig,"oj.LengthValidator"),e.ul.prototype.Init=function(t){e.ul.r.Init.call(this),this.ih=t.min,this.Kh=t.max,t&&(this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("LengthValidator.prototype.Init",{Init:e.ul.prototype.Init}),e.ul.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,n=r.max,r=r.exact,o=e.ha,s=void 0!==this.ih?parseInt(this.ih,10):null,c=void 0!==this.Kh?parseInt(this.Kh,10):null;return null!==s&&null!==c?s!==c?(t={min:s,max:c},t=i?o.Mb(i,t):o.A("oj-validator.length.hint.inRange",t)):(t={length:s},t=r?o.Mb(r,t):o.A("oj-validator.length.hint.exact",t)):null!==s?(t={min:s},t=a?o.Mb(a,t):o.A("oj-validator.length.hint.min",t)):null!==c&&(t={max:c},t=n?o.Mb(n,t):o.A("oj-validator.length.hint.max",t)),t},e.ul.prototype.validate=function(t){var r="",i="",r=""+t,a=r.length,n=this.xw,o=this.yw,i=n.tooShort,n=n.tooLong,s=o.tooShort,c=o.tooLong,o=e.ha,l=void 0!==this.ih?parseInt(this.ih,10):null,d=void 0!==this.Kh?parseInt(this.Kh,10):null;if((null===l||a>=this.ih)&&(null===d||a<=this.Kh))return r;throw a<this.ih?(t={value:t,min:l},r=s?o.Mb(s,t):o.A("oj-validator.length.messageSummary.tooShort"),i=i?o.Mb(i,t):o.A("oj-validator.length.messageDetail.tooShort",t)):(t={value:t,max:d},r=c?o.Mb(c,t):o.A("oj-validator.length.messageSummary.tooLong"),i=n?o.Mb(n,t):o.A("oj-validator.length.messageDetail.tooLong",t)),new e.Ah(r,i)},e.b.g("LengthValidator.prototype.validate",{validate:e.ul.prototype.validate})}),define("koExtensions",["knockout","CCi18n","currencyHelper","ccDate","ccImageZoom","ccNumber","numberFormatHelper","ccConstants","moment","jqueryui","bootstrapDatePicker","bootstrapTimePicker","tagsInput","spectrumColorPicker","bootstrap","chosen","ojs/ojcore","ojs/ojvalidation"],function(e,t,r,i,a,n,o,s,c){"use strict";function l(){function e(e,r){for(var i=0,a=r.length;i<a;i+=1)if(t(e,r[i]))return i;return-1}function t(e,t){return e===t||void 0!==e&&void 0!==t&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}window.Select2.class.multi.prototype.skipDuplicateCheck=!0,window.Select2.class.multi.prototype.updateSelection=function(t){var r=[],i=[],a=this;window.Select2.class.multi.prototype.skipDuplicateCheck||($(t).each(function(){e(a.id(this),r)<0&&(r.push(a.id(this)),i.push(this))}),t=i),this.selection.find(".select2-search-choice").remove(),$(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},window.Select2.class.multi.prototype.setVal=function(t){var r;this.select?this.select.val(t):(r=[],window.Select2.class.multi.prototype.skipDuplicateCheck||($(t).each(function(){e(this,r)<0&&r.push(this)}),this.opts.element.val(0===r.length?"":r.join(this.opts.separator))))}}e.bindingHandlers.select2={prependLabel:function(e){if($(e)[0].labels&&$(e)[0].labels.length>0){var t=$(" <span />").attr("class","cc-reader-text").html($(e)[0].labels[0].innerHTML);$(e).select2("container").find(".select2-chosen:first-child").prepend(t)}},init:function(r,i,a){var n,o,s,c,l=i(),d=a(),u=d.lookupKey;c=e.bindingHandlers.select2,void 0!==l.ccFormatInputTooShortKey&&null!==l.ccFormatInputTooShortKey||(l.ccFormatInputTooShortKey="ns.common:resources.select2FormatInputTooShort"),void 0!==l.ccFormatInputTooLongKey&&null!==l.ccFormatInputTooLongKey||(l.ccFormatInputTooLongKey="ns.common:resources.select2FormatInputTooLong"),void 0!==l.ccFormatSelectionTooBigKey&&null!==l.ccFormatSelectionTooBigKey||(l.ccFormatSelectionTooBigKey="ns.common:resources.select2SelectionTooBig"),void 0!==l.ccFormatNoMatches&&null!==l.ccFormatNoMatches||(l.ccFormatNoMatches=t.t("ns.common:resources.select2FormatNoMatches")),void 0!==l.ccFormatLoadMore&&null!==l.ccFormatLoadMore||(l.ccFormatLoadMore=t.t("ns.common:resources.select2LoadMore")),void 0!==l.ccFormatSearching&&null!==l.ccFormatSearching||(l.ccFormatSearching=t.t("ns.common:resources.select2Searching")),void 0!==l.ccPlaceholderAdjustWidth&&null!==l.ccPlaceholderAdjustWidth||(l.ccPlaceholderAdjustWidth=!0),
l.formatInputTooShort=function(e,r){var i=r-e.length,a=t.t(l.ccFormatInputTooShortKey,{numberUnder:i});return a},l.formatInputTooLong=function(e,r){var i=e.length-r,a=t.t(l.ccFormatInputTooLongKey,{numberOver:i});return a},l.formatSelectionTooBig=function(e){var r=t.t(l.ccFormatSelectionTooBigKey,{limit:e});return r},l.formatNoMatches=function(){return l.ccFormatNoMatches},l.formatLoadMore=function(e){return l.ccFormatLoadMore},l.formatSearching=function(){return l.ccFormatSearching},$(r).select2(l),$(r).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)}),$(r).select2("container").find(".select2-choices").attr("aria-label",t.t("ns.common:resources.ariaSelectedOptionsText")),$(".select2-results").attr("aria-label",t.t("ns.common:resources.ariaAvailableOptionsText")),"undefined"!=typeof d.select2.placeholder&&$(r).attr("placeholder",d.select2.placeholder),"undefined"!=typeof d.select2.ccEnabled&&$(r).select2("enable",d.select2.ccEnabled);var p,h,f,m=!1;u&&(p=e.utils.unwrapObservable(d.value),$(r).select2("data",e.utils.arrayFirst(l.data.results,function(e){return e[u]===p}))),e.utils.domNodeDisposal.addDisposeCallback(r,function(){$(r).select2("destroy")}),p=a().value,h=a().valueUpdated,m=a().isPreselect,f=a().selectedOptions,p&&p.isModified&&p.isModified.subscribe(function(e){e&&$(r).prop("required")&&!p.isValid()?$($(r).select2("container")).addClass("invalid"):$($(r).select2("container")).removeClass("invalid")}),p&&p.subscribe(function(e){$(r).prop("required")&&!p.isValid()?$($(r).select2("container")).addClass("invalid"):$($(r).select2("container")).removeClass("invalid")}),n=!1,h?(m&&f&&h(f),$(r).on("change",function(){n||(n=!0,h($(r).val()),n=!1)})):p&&e.isObservable(p)&&$(r).on("change",function(){n||(n=!0,p($(r).val()),n=!1)}),p&&e.isObservable(p)&&$(r).on("select2-blur",function(e){$(r).val(p()).trigger("change")}),$(r).on("select2-open select2-close",function(e){d.select2.ccHideDrop&&$(".select2-drop").toggleClass("cc-select2-hideResults")}),$(r).on("change",function(e){$(r).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)}),r.selectedOptions&&r.selectedOptions[0]&&r.selectedOptions[0].label&&$(r).select2("container").find(".select2-chosen").attr("title",r.selectedOptions[0].label),c.prependLabel(r)}),"undefined"!=typeof d.select2.placeholder&&d.select2.ccPlaceholderAdjustWidth&&(o=$("<div />").attr({id:"cc-select2-placeholder-tester"}).text(d.select2.placeholder),$("body").append(o),s=$("#cc-select2-placeholder-tester").width()+30,$("body").remove("#cc-select2-placeholder-tester"),$(r).prev(".select2-container").find(".select2-input").attr("placeholder",d.select2.placeholder).css({"min-width":s+"px","max-width":s+"px"}))},update:function(t,r,i,a){var n,o=i(),s=r(),c=o.select2.initializeDataQuery,l=s.valueUpdated;if(n=e.bindingHandlers.select2,n.prependLabel(t),c){var d=i().value,u=$(t).select2("data");d&&e.isObservable(d)&&(d()&&u&&0===u.length?c(d(),function(e){$(t).select2("data",e),d.valueHasMutated(),d.isModified(!1)},s.includeInvalidItems,u):d()?d()&&u&&u.length>0&&l&&l(u):u&&u.length>0?($(t).select2("data",[]),d.valueHasMutated(),d.isModified(!1)):l&&l([]))}t.selectedOptions&&t.selectedOptions[0]&&t.selectedOptions[0].label&&$(t).select2("container").find(".select2-chosen").attr("title",t.selectedOptions[0].label)}},e.bindingHandlers.select2Tags={init:function(e,r,i){var a,n,o=r();void 0!==o.ccFormatNoMatches&&null!==o.ccFormatNoMatches||(o.ccFormatNoMatches=t.t("ns.common:resources.select2FormatNoMatches")),a=o.ccTagOptions?o.ccTagOptions:null,o.formatNoMatches=function(){return o.ccFormatNoMatches},o.createSearchChoice=function(r){return n=!0,$.each($(e).select2("container").find(".select2-search-choice"),function(e,t){$.trim($(t).text().toLowerCase())==$.trim(r.toLowerCase())&&(n=!1)}),n?{id:$.trim(r),text:$.trim(r)}:void window.setTimeout(function(e){$(".select2-no-results").text(t.t("ns.common:resources.select2NoDuplicateText"))},0)},l(),$(e).select2(o).on("select2-removing",function(t){$.each($(e).select2("container").find(".cc-select2-locked"),function(e,r){$.trim($(r).text())==t.val&&t.preventDefault()})}),$(e).on("change",function(r){$(e).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)})}),window.Select2.class.multi.prototype.skipDuplicateCheck=!1,a&&(a.lockExisting&&$.each($(e).select2("container").find("ul.select2-choices li.select2-search-choice"),function(e,t){$(t).addClass("cc-select2-locked")}),a.disabled&&$(e).select2("enable",!1),a.sortable&&$(e).select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){$(e).select2("onSortStart")},update:function(){$(e).select2("onSortEnd")}}))},update:function(e,t,r,i,a){}},e.bindingHandlers.onRender={init:function(e,t,r,i,a){var n=t();"function"==typeof n&&n(e,i)}},function(){var t,i,a,n,o=200,s=300,c=100,l=200;n=function(e){0===$(e.target).closest(".popover").length&&i()},i=function(){t&&(t.data("bs.popover").tip().off("keydown"),t.popover("destroy"),t=null,$(document).off("click",n),$(document).off("focusin",n))},a=function(e,t){var r,i,a,n;return n=$(window),r=t.top-n.scrollTop(),i=t.left-n.scrollLeft(),r<c||r<l&&"top"===e?a="bottom":(r>n.height()-c||r>n.height()-l&&"bottom"===e)&&(a="top"),i<o||i<s&&"left"===e?a="right":(i>n.width()-o||i>n.width()-s&&"right"===e)&&(a="left"),a||e},e.bindingHandlers.popeditor={init:function(o,s,c,l,d){var u,p,h,f=s(),m=e.observable(!0),g=f.type,v=e.bindingHandlers.tabTrap;if(p={html:!0,trigger:f.trigger||"manual",content:"<div class='"+f.class+"'></div>",container:f.container||"body",placement:f.placement||"right"},u=$(o),f.plgProperty=e.observable(null),"currencyMap"===g){var y={};$.each(f.property(),function(t){y[t]=e.observable(e.utils.unwrapObservable(this)).extend(f.validate),y[t].jetValidation=e.observable(!0)}),f.plgProperty(y)}"currencyMap"!==g&&(f.validate.validatable=!0),h=d.extend({id:f.id,title:f.title,focusElement:f.focusElement,property:e.observable(e.utils.unwrapObservable(f.property)).extend(f.validate),plgProperty:e.observable(e.utils.unwrapObservable(f.plgProperty)).extend(f.validate),enumeratedValues:e.observable(e.utils.unwrapObservable(f.enumeratedValues)),jetValidation:e.observable(!0),currencyHelper:r,priceListGroups:f.priceListGroups,type:f.type,save:function(){if("currencyMap"!==h.type&&h.property.isValid()&&m())return f.property()!=h.property()&&f.property(h.property()),i(),u.filter(":focusable").length>0?u.focus():u.find(":focusable").focus(),h.property.isModified()&&f.property.notifySubscribers(f.property(),"valueSubmitted"),!1;if("currencyMap"===h.type){var e=!1,t=!1;if($.each(h.plgProperty(),function(r){this.isModified()&&(e=this.isModified(),t=this.isValid())}),e&&t)f.property(h.plgProperty()),f.property.notifySubscribers(h.$parent,"valueSubmitted"),h.close();else if(e&&!t)return!1}},close:function(){return i(),u.filter(":focusable").length>0?u.focus():u.find(":focusable").focus(),!1},focus:function(e){h.focusElement?$(e).find(h.focusElement).focus():$(e).find(":focusable").focus(),v.constrain($(".popover.in"))},customJetOptionChangeListener:function(t,r){var i=null,a=e.contextFor(this),n="currencyMap"===a.type;if(i=n?a.plgProperty()[e.dataFor(this).id]:a,i.jetValidation(!0),"messagesShown"===r.option){var o=$(t.target).ojInputText("isValid");o?i.jetValidation(!0):i.jetValidation(!1)}else i.jetValidation(!0)},computedValueWithFractions:e.pureComputed({read:function(){return h.property()},write:function(e){void 0!=e?"number"===g?h.property(e.toFixed(0)):"price"===g&&h.property(e.toFixed(r.currencyObject().fractionalDigits)):h.property(e)}})}),u.click(function(r){var o;if(r.preventDefault(),p.placement=a(f.placement,u.offset()),u.popover(p),o=u.data("bs.popover").tip(),o.hasClass("in"))i(),u.filter(":focusable").length>0?u.focus():u.find(":focusable").focus();else{if(i(),"currencyMap"===h.type){var s={};$.each(f.property(),function(t){s[t]=e.observable(e.utils.unwrapObservable(this)).extend(f.validate),s[t].jetValidation=e.observable(!0)}),f.plgProperty(s),h.plgProperty(e.utils.unwrapObservable(f.plgProperty)).extend(f.validate),$.each(h.plgProperty(),function(e){h.plgProperty()[e].extend({validatable:!0}),h.plgProperty()[e].errors=null,h.plgProperty()[e].isModified(!1),h.plgProperty()[e].forcedModified=!1})}else h.property(e.utils.unwrapObservable(f.property)),h.property.errors=null,h.property.isModified(!1),h.property.forcedModified=!1;o.addClass(f.class),o.children(".popover-content").attr("data-bind","template: {name: '"+f.type+"', templateUrl: 'templates/popeditors', afterRender: focus}"),f.wideMode?(o.children(".popover-title").attr("data-bind","template: {name: 'wide-header', templateUrl: 'templates/popeditors'}"),o.addClass("cc-pop-wide")):o.children(".popover-title").attr("data-bind","template: {name: 'header', templateUrl: 'templates/popeditors'}"),o.keydown(function(e){27===e.which&&(i(),u.filter(":focusable").length>0?u.focus():u.find(":focusable").focus())}),window.setTimeout(function(){$(document).click(n),$(document).focusin(n)},1),u.popover("show"),t=u,e.applyBindingsToDescendants(h,o[0])}})}},e.bindingHandlers.popover={init:function(t,r,o,s){var c,l,d,u=r();l={html:!0,trigger:u.trigger||"click",content:"<div class='"+u.class+"'></div>",container:u.container||"body",placement:u.placement||"right"},c=$(t),d={model:u.model||s,save:function(){if(d.property.isValid())return u.property()!=d.property()&&u.property(d.property()),i(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),u.property.notifySubscribers(u.property(),"valueSubmitted"),!1},close:function(){return i(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),!1},focus:function(e){$(e).find(":focusable").focus(),tabTrap.constrain($(".popover.in"))}},c.click(function(t){var r;l.placement=a(u.placement,c.offset()),c.popover(l),r=c.data("bs.popover").tip(),i(),r.hasClass("in")||(r.children(".popover-content").attr("data-bind","template: {name: '"+u.name+"', templateUrl: '"+u.templateUrl+"', afterRender: focus}"),r.keydown(function(){27===event.which&&i()}),window.setTimeout(function(){$(document).click(n),$(document).focusin(n)},1),c.popover("show"),e.applyBindingsToDescendants(d,r[0]))})}}}(),function(){var r,a,n,o,l,d=200,u=300,p=100,h=200,f=!0;o=function(e){0!==$(e.target).closest(".popover").length||l(e.target,"datepicker")||l(e.relatedTarget,"oj-datepicker")||a()},l=function(e,t){if(e)do if(1==e.nodeType&&$(e).is("[class*="+t+"]"))return!0;while((e=e.parentElement)&&void 0!==e&&1==e.nodeType);return!1},a=function(){r&&(r.data("bs.popover").tip().off("keydown"),r.popover("destroy"),r=null,$(document).off("click",o),$(document).off("focusin",o))},n=function(e,t){var r,i,a,n;return n=$(window),r=t.top-n.scrollTop(),i=t.left-n.scrollLeft(),r<p||r<h&&"top"===e?a="bottom":(r>n.height()-p||r>n.height()-h&&"bottom"===e)&&(a="top"),i<d||i<u&&"left"===e?a="right":(i>n.width()-d||i>n.width()-u&&"right"===e)&&(a="left"),a||e},e.bindingHandlers.datepopover={init:function(l,d,u,p){var h,m,g,v,y,b=d(),E=e.bindingHandlers.tabTrap,I=!1;m={html:!0,trigger:b.trigger||"click",content:"<div class='"+b.class+"'></div>",container:b.container||"body",placement:b.placement||"right"},h=$(l),g={toDate:e.observable(e.utils.unwrapObservable(b.toDate)),fromDate:e.observable(e.utils.unwrapObservable(b.fromDate)),toDateLabel:t.t("ns.reporting:resources.toText")+" "+t.t("ns.reporting:resources.date")+":"+t.t("ns.reporting:resources.descriptionToAccessCalender"),fromDateLabel:t.t("ns.reporting:resources.fromText")+" "+t.t("ns.reporting:resources.date")+":"+t.t("ns.reporting:resources.descriptionToAccessCalender"),toDateText:t.t("ns.reporting:resources.toText"),fromDateText:t.t("ns.reporting:resources.fromText"),customDateRangeText:t.t("ns.reporting:resources.customDateRangeText"),errorMessage:b.errorMessage,dataCollectionStartDate:b.dataCollectionStartDate,yesterday:b.yesterday,save:function(e,t){var r=$("#cc-fromDate").ojInputDate("option","placeholder");return r&&(r=r.toUpperCase()),"true"===$("#cc-fromDate").attr("aria-invalid")||"true"===$("#cc-toDate").attr("aria-invalid")?(b.toDate(void 0),b.fromDate(void 0)):(null===g.toDate()?b.toDate(null):b.toDate(c(g.toDate()).toDate()),null===g.fromDate()?b.fromDate(null):b.fromDate(c(g.fromDate()).toDate())),!!(f=b.validation())&&(a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus(),b.toDate.notifySubscribers(b.toDate(),"valueSubmitted"),b.fromDate.notifySubscribers(b.fromDate(),"valueSubmitted"),I=!0,!1)},close:function(){return a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus(),!1},focus:function(e){if(b.initFromDate()&&b.initToDate()){var t=$("#cc-fromDate").ojInputDate("option","placeholder");t&&(t=t.toUpperCase()),$("#cc-fromDate").val(i.formatDateAndTime(b.initFromDate(),null,t,null)),$("#cc-toDate").val(i.formatDateAndTime(b.initToDate(),null,t,null)),b.fromDate(b.initFromDate()),b.toDate(b.initToDate())}$(e).find("#cc-toDate").focus(),$(e).find("#cc-fromDate").focus(),E.constrain($(".popover.in"))}};var T=$(b.container);T.on("hidden.bs.popover",function(){I&&(y=null,v=null,b.initFromDate(null),b.initToDate(null))}),h.click(function(t){var c;t.preventDefault(),m.placement=n(b.placement,h.offset()),h.popover(m),c=h.data("bs.popover").tip(),c.hasClass("in")?(a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus()):(a(),""===b.errorMessage()||void 0===b.errorMessage()?(null==b.toDate()||void 0==b.toDate()?g.toDate(null):g.toDate(i.formatDateAndTime(b.toDate(),null,s.OJET_INPUT_SHORT_DATE_FORMAT,null)),void 0==b.fromDate()||null==b.fromDate()?g.fromDate(null):g.fromDate(i.formatDateAndTime(b.fromDate(),null,s.OJET_INPUT_SHORT_DATE_FORMAT,null)),g.errorMessage=b.errorMessage):(g.toDate(null),g.fromDate(null),y=null,v=null,b.initToDate(null),b.initFromDate(null),b.toDate(null),b.errorMessage(""),b.fromDate(null)),c.css("z-index",b.zIndex),c.css("min-height",b.minHeight),c.css("min-width",b.minWidth),c.children(".popover-title").attr("data-bind","template: {name: 'datepickerHeader', templateUrl: 'templates/reporting'}"),c.children(".popover-content").attr("data-bind","template: {name: '"+b.name+"', templateUrl: '"+b.templateUrl+"', afterRender: focus}"),c.keydown(function(e){27===e.which&&a()}),window.setTimeout(function(){$(document).click(o),$(document).focusin(o)},1),h.popover("show"),r=h,e.cleanNode(c[0]),e.applyBindingsToDescendants(g,c[0]))})}},e.bindingHandlers.popover={init:function(t,r,i,s){var c,l,d,u=r();l={html:!0,trigger:u.trigger||"click",content:"<div class='"+u.class+"'></div>",container:u.container||"body",placement:u.placement||"right"},c=$(t),d={model:u.model||s,save:function(){if(d.property.isValid())return u.property()!=d.property()&&u.property(d.property()),a(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),u.property.notifySubscribers(u.property(),"valueSubmitted"),!1},close:function(){return a(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),!1},focus:function(e){$(e).find(":focusable").focus(),tabTrap.constrain($(".popover.in"))}},c.click(function(t){var r;l.placement=n(u.placement,c.offset()),c.popover(l),r=c.data("bs.popover").tip(),a(),r.hasClass("in")||(r.children(".popover-content").attr("data-bind","template: {name: '"+u.name+"', templateUrl: '"+u.templateUrl+"', afterRender: focus}"),r.children(".popover-title").attr("data-bind","template: {name: 'datepickerHeader', templateUrl: 'templates/reporting'}"),r.keydown(function(){27===event.which&&a()}),window.setTimeout(function(){$(document).click(o),$(document).focusin(o)},1),c.popover("show"),e.applyBindingsToDescendants(d,r[0]))})}}}(),function(){var t,r,i,a=1052,n=null;e.bindingHandlers.modal={init:function(o,c,l){var d,u,p,h,f,m,g,v,y,b,E,I,T,P,C=null,S="cc-modal-focus-out-active",A=c().focusFallback?c().focusFallback.split(","):null;u=$(window),d=$(o),p=d.find(".modal-body");var _=!!u[0].chrome&&!!u[0].chrome.webstore;T=function(){$(o).on("keydown.modal.cc",":text",function(e){var t=e.which||e.charCode||e.keyCode;if(27==t)return!1})},P=function(){$(o).off("keydown.modal.cc",":text")},h=function(){var e,t=0;$("body").prepend($("<div />").attr("id","cc-modalTester")),d.find(".modal-content").children().each(function(){this!==p[0]&&$(this).clone().appendTo("#cc-modalTester")}),t=$("#cc-modalTester").outerHeight(),$("#cc-modalTester").remove(),e=u.width()>767?.11*u.height():11,p.css({"max-height":Math.max(128,u.height()-t-e)})},f=function(e){$(e).find(".cc-focus-target").length>0?$.inArray($(e).find(".cc-focus-target")[0],$(e).find(":tabbable"))===-1?void 0!==$(e).find(".cc-focus-target :tabbable")[0]&&$(e).find(".cc-focus-target :tabbable")[0].focus():$(e).find(".cc-focus-target")[0].focus():$(e).find(":tabbable")[0]&&$(e).find(":tabbable")[0].focus()},y=function(e){1===d.has(document.activeElement).length&&(C=!0,$(document.activeElement).addClass(S))},b=function(e){C=!1,$("."+S).removeClass(S)},E=function(e){C&&e.preventDefault(),$("."+S).focus().removeClass(S)},I=function(e){C=!1},d.on("focusin",function(e){e.stopPropagation()}),d.on("show.bs.modal",function(e){$(e.target).hasClass("modal")&&(d.data("alreadyOpen")!==!0&&(d.data("alreadyOpen",!0),setTimeout(function(){d.data("bs.modal").$backdrop.css({"z-index":a-10}),d.css({"z-index":a}),t=a,a+=20,h()},1)),u.resize(h),$("body").addClass("no-scroll"),m=!0,1===$(e.relatedTarget).length&&(g=$(e.relatedTarget),g.addClass(s.MODAL_CLOSE_FOCUS),g.attr("id")&&(v=g.attr("id"))))}),d.on("shown.bs.modal",function(e){f(d),_&&(d.on("focusout",y),d.on("focus mousedown",I),d.on("keyup.dismiss.bs.modal",b),d.find("button, a").on("click",I),d.on("hide.bs.modal",E)),T()}),d.on("hide.bs.modal",function(){d.find(".modal-body").scrollTop(0)}),d.on("hidden.bs.modal",function(e){if($(e.target).hasClass("modal")){if(a-=20,r=a-20,m=!1,i=0,n=null,d.data("alreadyOpen",!1),P(),u.off("resize",h),_&&(d.off("focusout",y),d.off("focus mousedown",I),d.off("keyup.dismiss.bs.modal",b),d.find("button, a").off("click",I),d.off("hide.bs.modal",E)),C=null,d.find(".cc-curtain")&&d.find(".cc-curtain").remove(),$(o).css("left","0px"),0===$("body .modal.in").length){setTimeout(function(){$("body").removeClass("no-scroll")},0);var t=null;null!==A&&$.each(A,function(e,r){if(0!==$(r).length)return t=r,!1}),0!==$(s.MODAL_CLOSE_FOCUS_CLASS).length?($(s.MODAL_CLOSE_FOCUS_CLASS).focus(),$(s.MODAL_CLOSE_FOCUS_CLASS).removeClass(s.MODAL_CLOSE_FOCUS)):$("#"+v).length>0?$("#"+v).focus():null!==t&&window.setTimeout(function(){$(t).focus()},10)}$.each($(".modal"),function(e,t){"block"===$(t).css("display")&&$(t).css("z-index")>i&&(i=$(t).css("z-index"),n=$(t))}),f(n)}}),e.utils.domNodeDisposal.addDisposeCallback(o,function(){d.modal("hide")})}}}(),e.bindingHandlers.tagsInput={init:function(e,t,r){},update:function(t,r,i,a,n){var o,s,c,l,d=e.utils.unwrapObservable(r()),u=$(t).find("input"),p=",",h=e.utils.unwrapObservable(d.defaultText)?e.utils.unwrapObservable(d.defaultText):"Add item",f=e.utils.unwrapObservable(d.height)?e.utils.unwrapObservable(d.height):"100px",m=e.utils.unwrapObservable(d.width)?e.utils.unwrapObservable(d.width):"300px",g=e.utils.unwrapObservable(d.minChars)?e.utils.unwrapObservable(d.minChars):"0",v=e.utils.unwrapObservable(d.maxChars)?e.utils.unwrapObservable(d.maxChars):"",y=!e.utils.unwrapObservable(d.caseInsensitive)||e.utils.unwrapObservable(d.caseInsensitive),b=e.utils.unwrapObservable(d.isInteractive)!==!1||e.utils.unwrapObservable(d.isInteractive);if(u.val()&&0!==u.val().length){c=$(t).find("input").val();setTimeout(function(){$(".tagsinput .tag").addClass("cc-locked-tag").find("a").remove()},0)}$(u).tagsInput({defaultText:h,hide:!0,height:f,width:m,minInputWidth:e.utils.unwrapObservable(d.minInputWidth)||"149px",minChars:g,maxChars:v,interactive:b,onRemoveTag:function(e){if(l=$(u)[0].id,c&&c.indexOf(e)!==-1&&$("#"+l).importTags(c),c)for(var t=0;t<c.split(",").length;t++){var r=$("#"+l+"_tagsinput .tag")[t];$(r).addClass("cc-locked-tag").find("a").remove()}},onChange:function(e,i){r().list($(t).find("input").val())},onAddTag:function(e){if(y){var t=u.val().split(","),r=$(u)[0].id;if(t.length>1)for(var i=0;i<t.length-1;i+=1)if(e.toLowerCase()===t[i].toLowerCase()){o="",s=$(this).val().split(p),$("#"+r+"_tagsinput .tag").remove();for(var a=0;a<s.length;a+=1)0!==s[a].indexOf(e)&&(o=o+p+s[a]);$("#"+r).importTags(o),$("#"+r+"_tag").focus(),$("#"+r+"_tag").val(e),$("#"+r+"_tag").addClass("not_valid")}}}}),e.utils.unwrapObservable(d.isInteractive)===!1&&($(u).next().addClass("cc-tagsInput-readOnly"),$(u).next().find("div").remove())}},e.bindingHandlers.datepicker={init:function(t,r,i){var a=i().dpOptions||{},n=a.language?a.language:"en",o=e.bindingHandlers.datepicker;require(["bootstrapDatePickerLocales/bootstrap-datepicker."+n],function(e){o.loadDatePicker.call(o,t,r,i,a)},function(e){var s;s=n.indexOf("-")!==-1?n.split("-")[0]:"en",require(["bootstrapDatePickerLocales/bootstrap-datepicker."+s],function(e){o.loadDatePicker.call(o,t,r,i,a)},function(e){o.loadDatePicker.call(o,t,r,i,a)})})},loadDatePicker:function(t,r,a,n){var o,s,c,l,d,u,p,h=1===$(t).parents(".modal").length;h?(o="",s=$(t).parents(".tab-pane")?$(t).parents(".tab-pane"):$(t).parents(".modal-body")):o=$(t).closest(".row")[0].nextElementSibling;var f=e.utils.unwrapObservable(a().format);!f&&n.format||(n.format=i.getDateFormat(f?f:"short").toLowerCase()),$(t).datepicker(n).on("show",function(e){$.each($("body .datepicker.dropdown-menu"),function(t,r){void 0!==$(r).attr("style")&&"none"!=$(r).css("style")&&null!==o&&$(r).css({position:"absolute",top:"35px",left:"0px"}).appendTo($(e.target).parent())}),l=$(t).parents(".form-group").position().top+$(t).parents(".form-group").outerHeight(!0),d=l+240,h?(c=s.height(),d>c&&(u=d-c,s.css({height:c+u+"px"})),p=$(t).parents(".modal-body").scrollTop()+$(t).closest(".form-group").offsetParent().position().top,$(t).parents(".modal-body").scrollTop($(t).closest(".form-group").position().top+p)):(c=$(t).parents(".form-group").offsetParent().outerHeight(!0),d>c&&(u=d-c,$(t).parents(".form-group").offsetParent().css({})))}).on("changeDate",function(e){var i=r();i(e.date),$(t).datepicker("setValue",e.date)}).on("dphide",function(){h?s.css({height:"auto"}):$(t).parents(".form-group").offsetParent().css({height:"auto"})}),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).datepicker("remove")})},update:function(t,r,i){var a=e.utils.unwrapObservable(i().value);if(a){var n=new Date(a);isNaN(n)||(i().value(n),$(t).datepicker("setDate",new Date(n.getTime()+6e4*n.getTimezoneOffset())))}}},e.bindingHandlers.timepicker={init:function(t,r,i){var a,n=i().Options||{};$(t).timepicker(n).on("show.timepicker",function(e){$(t).timepicker("setDefaultTime","current")}),$(t).timepicker(n).on("focus.timepicker",function(e){$(t).timepicker("showWidget")}),a=e.utils.unwrapObservable(r()),$(t).timepicker(n).on("changeTime.timepicker",function(e){var t=r();t(e.time.value)}),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).timepicker("remove")})}},e.bindingHandlers.spectrum={init:function(r,i,a){var n=a().defaultSettings||{};n.cancelTextKey&&(n.cancelText=t.t("ns.common:resources."+n.cancelTextKey)),n.chooseTextKey&&(n.chooseText=t.t("ns.common:resources."+n.chooseTextKey));var o="#000000",s=function(){var e=$(r).spectrum("get");"function"==typeof e.toHex&&(o="#"+e.toHex());var t=i();o!==t()&&t(o)},c=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};n.hide=s,n.clickoutFiresChange=!0;var l="spectrum-input";if(r.id)l=r.id+"-spectrum-input";else{var d=new Date;l=c(d.getFullYear(),4)+c(d.getMonth()+1,2)+c(d.getDay(),2)+c(d.getHours(),2)+c(d.getMinutes(),2)+c(d.getSeconds(),2)+c(d.getMilliseconds(),3)+"-spectrum-input"}var u="class-"+l;n.className=u,$(r).spectrum(n);var p=$("<label>Color</label>",{htmlFor:l});p.attr("for",l),p.attr("class","cc-reader-text"),p.text(t.t("ns.common:resources.colorPickerInputLabel"));var h=$("."+u),f=h.find(".sp-cancel"),m=h.find(".sp-choose"),g=h.find(".sp-input-container");g.prepend(p);var v=h.find(".sp-input");v.attr("id",l);var y=e.utils.unwrapObservable(i());$(r).spectrum("set",y),e.utils.registerEventHandler(r,"change",s);var b=$(r).next(".sp-replacer");b.removeAttr("tabindex");var E=$("<a></a>",{href:"#"});b.wrap(E),e.utils.domNodeDisposal.addDisposeCallback(r,function(){var e=$(r).spectrum("get");"function"==typeof e.toHex&&(o="#"+e.toHex()),$(r).spectrum("destroy")}),E=$(r).next("a"),f.click(function(){return E.focus(),!0}),m.click(function(){return E.focus(),!0}),E.click(function(){var e=r.disabled;if(!e){var t=$(r).spectrum("container");t.appendTo(E),$(r).spectrum("toggle")}return!1})},update:function(t,r){var i=e.utils.unwrapObservable(r());$(t).spectrum("set",i)}},e.bindingHandlers.slider={init:function(t,r,i){var a=i().sliderOptions||{},n=e.utils.unwrapObservable(r());a.value=n,a.change=function(e,t){var i=r();i(t.value)},a.liveUpdate&&(a.slide=a.change),$(t).slider(a),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).slider("destroy")}),e.utils.registerEventHandler(t,"slidestop",function(e,t){var i=r();i(t.value)})},update:function(t,r,i){var a=i().sliderOptions||{},n=e.utils.unwrapObservable(r());isNaN(n)&&(n=a.defaultValue||0),$(t).slider("value",n),$(t).slider("option",i().sliderOptions)}},e.bindingHandlers.chosen={truncate:function(e){var t,r,i;t=$(".chosen-container").find("span").outerWidth(!0)+5,r=$(".chosen-container").width(),t>r&&e&&(i=$(".chosen-container").find("span").html().split(e),i.length>1&&$(".chosen-container").find("span").text("... "+e+" "+i[i.length-1]))},addAccessibility:function(e){var r=e.find("a.search-choice-close");$.each(r,function(){0===$(this).find(".cc-reader-text").length&&($(this).append($("<span />").attr("class","cc-reader-text").text(t.t("ns.common:resources.removeText"))),$(this).attr("tabindex","0"),$(this).on("keyup",function(t){13===t.keyCode&&($(this).trigger("click"),$(e.find(".search-field input")).focus())}))})},init:function(r,i,a,n,o){var s,c,l,d,u,p,h,f,m=e.utils.unwrapObservable(i()),g=!!m.allSelectedMessage&&m.allSelectedMessage;e.bindingHandlers.options.init(r,function(){return m.values},a,n,o),l=e.bindingHandlers.chosen,$(r).addClass("chosen-select"),$(r).chosen(m.options).trigger("chosen:ready"),d=$(r).next(),h=$(r).attr("id")+"-search-field",f=$(r).attr("data-placeholder")?$(r).attr("data-placeholder"):t.t("ns.common:resources.chosenSearchFieldDefaultLabel"),u=d.find(".search-field"),p=$("<label />").attr("class","cc-reader-text").attr("for",h).text(f),u.find("input").attr("id",h),u.prepend(p),$(r).chosen().change(function(){l.addAccessibility(d)}),$(r).on("chosen:showing_dropdown",function(){window.setTimeout(function(){0===d.find("li.active-result").length?g?d.find(".chosen-results").append($("<li />").attr("class","cc-chosen-message").html(g)):d.find(".chosen-drop").addClass("hide"):($(".cc-chosen-message").remove(),d.find(".chosen-drop").removeClass("hide"))},0)});var v=r.id+"-search";$(".chosen-search input").attr("id",v),c=a().value,s=!1,c&&e.isObservable(c)&&$(r).on("change",function(){s||(s=!0,c($(r).val()),s=!1)}),m.truncate&&$(r).on("change",l.truncate.bind(l,m.truncate))},update:function(t,r,i,a,n){var o,s,c,l=e.utils.unwrapObservable(r());$(".chosen-results").attr("tabindex","0"),c=$(t).next(),e.bindingHandlers.options.update(t,function(){return l.values},i,a,n),s=e.bindingHandlers.chosen,i().value?$(t).val(e.utils.unwrapObservable(i().value)):i().selectedOptions&&$(t).val(e.utils.unwrapObservable(i().selectedOptions)),$(t).trigger("chosen:updated"),s.addAccessibility(c),l.truncate&&(o=$(t).parents(".modal").attr("id")?"#"+$(t).parents(".modal").attr("id"):"",o?$(o).on("shown.bs.modal",function(){s.truncate(l.truncate)}):s.truncate(l.truncate))}},e.bindingHandlers.textCheck={update:function(t,i,a,n,s){var c=e.utils.unwrapObservable(i()),l=e.utils.unwrapObservable(c.text),d=e.utils.unwrapObservable(c.type),u=e.utils.unwrapObservable(c.prePend),p=e.utils.unwrapObservable(c.nullReplace),h=e.utils.unwrapObservable(c.prependNull);if(!l&&0!==l||isNaN(parseFloat(l)))l=(u&&h?u:"")+(p?p:"");else if("price"==d||"percent"==d||"number"==d||"digit"==d){var f;f="string"==typeof l?parseFloat(l):l,"number"==typeof l||"string"==typeof l&&l.trim().length>0?"price"==d?l=f<0?"-"+(u||"")+r.handleFractionalDigitsAndLocale(Math.abs(f)):(u||"")+r.handleFractionalDigitsAndLocale(f):"percent"==d?l=(u||"")+o.formatNumber(f,2,"decimal"):"number"==d?l=(u||"")+o.formatNumber(f,2,"decimal"):"digit"==d&&(l=(u||"")+o.formatNumber(f,0,"decimal")):l=(u&&h?u:"")+(p?p:"")}else l=(u||"")+l;e.bindingHandlers.text.update(t,function(){return l})}},e.bindingHandlers.scrollAffix={update:function(t,r){var i,a,n,o,s,c,l,d,u=e.utils.unwrapObservable(r());a=e.utils.unwrapObservable(u.scrollDistance),n=e.utils.unwrapObservable(u.affixPos),o=e.utils.unwrapObservable(u.affixWidth)?e.utils.unwrapObservable(u.affixWidth):null,s=e.utils.unwrapObservable(u.affixMatchElm),c=e.utils.unwrapObservable(u.adjust),l=e.utils.unwrapObservable(u.adjustPos)?e.utils.unwrapObservable(u.adjustPos):null,i=function(){if(d=null,$(window).width()<="992")return $(t).parent().css({"min-height":"auto"}),$(t).css({position:"",top:"",width:""}),void 0!==c&&$(c).css({"margin-top":"auto"}),!1;if(o)d=o;else{if("undefined"===s||"none"===$(s).css("display"))return!1;d=$(s).outerWidth(!0)}$(window).scrollTop()>a&&null!==d?($(t).css({position:"fixed",top:n,width:d}),$(t).addClass("cc-scrollAffix"),void 0!==c&&$(c).css({"margin-top":l})):($(t).parent().css({"min-height":"auto"}),$(t).css({position:"",top:"",width:""}),$(t).removeClass("cc-scrollAffix"),void 0!==c&&$(c).css({"margin-top":"auto"}))},$(window).scroll(i),$(window).resize(i),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(window).off("scroll",i),$(window).off("resize",i)})}},e.bindingHandlers.currency={update:function(t,r,i,a,o){var s=e.utils.unwrapObservable(r()),c=parseFloat(s.price),l=s.currencyObj.symbol,d=s.nullReplace,u=s.prependNull,p=s.prependSymbol,h=s.currencyObj.fractionalDigits,f=null;if(p&&(l=p+" "+l),!c&&0!==c||isNaN(parseFloat(c)))$(t).text((l&&u?l:"")+(d?d:""));else{l.match(/^[0-9a-zA-Z]+$/)&&(l+=" "),c=c.toFixed(h),f=n.formatNumber(c,!0,h);var m=f.charAt(0);"-"===m||"+"===m?$(t).text(m+l+f.slice(1)):$(t).text(l+f)}}},e.bindingHandlers.imageSource={init:function(t,r){var i,a,n,o=!1,s=e.utils.unwrapObservable(r());"object"==typeof s&&"IMG"===t.nodeName&&(s.cacheBust&&(o=e.utils.unwrapObservable(s.cacheBust)),i=e.utils.unwrapObservable(s.src),o&&(i=u(i)),a=e.utils.unwrapObservable(s.errorSrc),i&&a&&(n=new Image,n.src=a))},update:function(t,r,i,a,n){var o,s,c,l,d,p,h,f,m=!1,g=e.utils.unwrapObservable(r());if("object"==typeof g&&"IMG"===t.nodeName){g.cacheBust&&(m=e.utils.unwrapObservable(g.cacheBust)),l=e.utils.unwrapObservable(g.src),o=e.utils.unwrapObservable(g.imageType),o||(o="small");var v=[function(e,t){var r;return e.productImages&&e.productImages.length>0&&(r=e.productImages[0].url),r},function(e,t){return e.url},function(e,t){var r,i=l[t+"Image"];return i&&(r=i.url),r},function(e,t){var r;return l instanceof Object&&l[t]&&(r=l[t]),r},function(e,t){var r,i,a,n;return i=e.childSKUs,i&&(r=i[0],r&&(a=r[t+"Image"],a&&(n=a.url))),n},function(e,t){if("string"==typeof e)return e}];if(l)for(;!c&&v.length;)c=v.shift().call(this,l,o);else c=g.errorSrc;return m&&(c=u(c)),d=e.utils.unwrapObservable(g.errorSrc),p=e.utils.unwrapObservable(g.alt),h=e.utils.unwrapObservable(g.errorAlt),f=e.utils.unwrapObservable(g.onerror),d?void(c?(s=new Image,s.onload=function(){t.src=c,t.alt=p?p:""},s.onerror=function(){t.src=d,t.alt=h?h:"",f&&f(t)},s.src=c):(t.src=d,h?t.alt=h:p?t.alt=p:t.alt="",
f&&f(t))):(t.src=c,void(t.alt=p?p:""))}}};var d=0;e.bindingHandlers.makeAccess={init:function(r,i){var a,n,o,s=e.utils.unwrapObservable(i());a=$('<span class="cc-reader-text"/>'),s.readerText?a.text(e.utils.unwrapObservable(s.readerText)):s.readerResource&&a.text(t.t(e.utils.unwrapObservable(s.readerResource))),s.cssContent&&"on"==s.cssContent&&(n=$(r).text(),o="cc-make-access-"+d++,$("<style>").text("."+o+':after {content: "'+n+'"}').appendTo("head"),$(r).empty().addClass(o)),$(r).prepend(a)},update:function(r,i){var a=e.utils.unwrapObservable(i());a.readerText?$(r).children(".cc-reader-text").text(e.utils.unwrapObservable(a.readerText)):a.readerResource&&$(r).children(".cc-reader-text").text(t.t(e.utils.unwrapObservable(a.readerResource)))}},e.bindingHandlers.hover={init:function(e,t){},update:function(t,r,i,a,n){var o,s,c,l,d,u=e.utils.unwrapObservable(r());if(o=t.ko_hoverClassValue)if(Array.isArray(o))for(s=0;s<o.length;s+=1)$(t).removeClass(o[s]);else if("object"==typeof o)for(c in o)o.hasOwnProperty(c)&&$(t).removeClass(o[c]);else $(t).removeClass(o);if("object"==typeof u){if("undefined"!=typeof u.if&&!e.utils.unwrapObservable(u.if))return void $(t).hover(function(){},function(){});l=e.utils.unwrapObservable(u.start),d=e.utils.unwrapObservable(u.stop),t.ko__hoverClassValue=e.utils.unwrapObservable(u.class),$(t).hover(function(e){var t,r;if(r=this.ko_hoverClassValue)if(Array.isArray(r))for(s=0;s<r.length;s+=1)$(this).addClass(r[s]);else if("Object"==typeof r)for(t in r)r.hasOwnProperty(t)&&$(this).addClass(r[c]);else $(this).addClass(r);l&&l(a,e)},function(e){var t,r,i;if(r=this.ko_hoverClassValue){if(Array.isArray(r))for(t=0;t<r.length;t+=1)$(this).removeClass(r[t]);else if("Object"==typeof r)for(i in r)r.hasOwnProperty(i)&&$(this).removeClass(r[i]);else $(this).removeClass(r);d&&d(a,e)}})}}},e.bindingHandlers.background={init:function(e,t){},update:function(t,r){var i,a,n,o=e.utils.unwrapObservable(r());if("object"==typeof o){if(i=e.utils.unwrapObservable(o.image),!i)return void $(t).css("background-image","");a="",n=".png",o.extension&&(n=e.utils.unwrapObservable(o.extension),"."!==a.charAt(0)&&(n="."+n)),o.path&&(a=e.utils.unwrapObservable(o.path)||"",a.length>0&&"/"!==a.charAt(a.length-1)&&(a+="/")),$(t).css("background-image","url("+a+i+n+")")}else o?$(t).css("background-image","url("+o+")"):$(t).css("background-image","")}},e.bindingHandlers.draggable={init:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return;$(t).draggable(o).data("viewModel",a),"undefined"==typeof o.enabled||e.utils.unwrapObservable(o.enabled)||$(t).draggable("disable"),"undefined"!=typeof o.selectable&&e.utils.unwrapObservable(o.selectable)?$(t).enableSelection():$(t).disableSelection()}else $(t).draggable().data("viewModel",a),o?$(t).draggable("enable"):$(t).draggable("disable")},update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return void($(t).draggable&&$(t).draggable("destroy"));"undefined"!=typeof o.enabled&&(e.utils.unwrapObservable(o.enabled)?$(t).draggable("enable"):$(t).draggable("disable")),"undefined"!=typeof o.selectable&&e.utils.unwrapObservable(o.selectable)?$(t).enableSelection():$(t).disableSelection(),$(t).draggable("option",o)}else o?$(t).draggable("enable"):$(t).draggable("disable")}},e.bindingHandlers.droppable={init:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return;$(t).droppable(o).data("viewModel",a),"undefined"==typeof o.enabled||e.utils.unwrapObservable(o.enabled)||$(t).droppable("disable")}else"function"==typeof o&&$(t).droppable({drop:o}).data("viewModel",a)},update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return void($(t).droppable&&$(t).droppable("destroy"));$(t).droppable?$(t).droppable("option",o):$(t).droppable(o).data("viewModel",a),"undefined"!=typeof o.enabled&&(e.utils.unwrapObservable(o.enabled)?$(t).droppable("enable"):$(t).droppable("disable"))}else"function"==typeof o&&$(t).droppable({drop:o}).data("viewModel",a)}},e.bindingHandlers.selectable={init:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return;$(t).selectable(o).data("viewModel",a),"undefined"==typeof o.enabled||e.utils.unwrapObservable(o.enabled)||$(t).selectable("disable"),"undefined"!=typeof o.selectable&&e.utils.unwrapObservable(o.selectable)?$(t).enableSelection():$(t).disableSelection()}else $(t).selectable().data("viewModel",a),o?$(t).selectable("enable"):$(t).selectable("disable")},update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if("object"==typeof o){if("undefined"!=typeof o.destroy&&e.utils.unwrapObservable(o.destroy))return void($(t).selectable&&$(t).selectable("destroy"));"undefined"!=typeof o.enabled&&(e.utils.unwrapObservable(o.enabled)?$(t).selectable("enable"):$(t).selectable("disable")),"undefined"!=typeof o.selectable&&e.utils.unwrapObservable(o.selectable)?$(t).enableSelection():$(t).disableSelection(),$(t).selectable("option",o)}else o?$(t).selectable("enable"):$(t).selectable("disable")}},e.bindingHandlers.slide={init:function(t,r){var i=e.utils.unwrapObservable(r());$(t).toggle(i)},update:function(t,r){var i=e.utils.unwrapObservable(r());i?$(t).slideDown():$(t).slideUp()}},e.bindingHandlers.fade={init:function(t,r){var i=e.utils.unwrapObservable(r());$(t).toggle(i)},update:function(t,r){var i=e.utils.unwrapObservable(r());i?$(t).fadeIn("slow"):$(t).fadeOut("slow")}},e.bindingHandlers.radio={init:function(t,r,i,a,n){var o,s,c,l;if(l=r(),!e.isWriteableObservable(l))throw"You must pass an observable or writeable computed";s=$(t),o=s.hasClass("btn")?s:$(".btn",s),c=i(),o.each(function(){var t,r,i;return r=this,t=$(r),i=c.radioValue||t.attr("data-value")||t.attr("value")||t.text(),t.on("click",function(){l(e.utils.unwrapObservable(i))}),e.computed({disposeWhenNodeIsRemoved:r,read:function(){t.toggleClass("active",l()===e.utils.unwrapObservable(i))}})})}},e.bindingHandlers.checkbox={init:function(t,r,i,a,n){var o,s;if(s=r(),!e.isWriteableObservable(s))throw"You must pass an observable or writeable computed";o=$(t),o.on("click",function(){s(!s())}),e.computed({disposeWhenNodeIsRemoved:t,read:function(){o.toggleClass("active",s())}})}},e.bindingHandlers.modalTabbingContraint={init:function(e,t,r,i,a){var n,o,s,c;n=function(t,r){return o=$(e).find(":tabbable"),r==$(o)[0]&&9===t.keyCode&&t.shiftKey?(t.preventDefault(),$(o[o.length-1]).focus(),!1):r!=$(o)[o.length-1]||9!==t.keyCode||t.shiftKey?void 0:(t.preventDefault(),$(o[0]).focus(),!1)},$(e).on("shown.bs.modal",function(){o=$(e).find(":tabbable"),s=$(e).find(":disabled"),c=$(e).find(":hidden"),$.each(o,function(e,t){$(t).on("keydown",function(e){n(e,t)})}),$.each(s,function(e,t){$(t).on("keydown",function(e){n(e,t)})}),$.each(c,function(e,t){$(t).on("keydown",function(e){n(e,t)})})})}},e.bindingHandlers.imageZoom={init:function(t,r){function i(t,r){if(t)for(var i=t.length-1;i>=0;i-=1){var a=e.utils.unwrapObservable(o[t[i]]);"undefined"!=typeof a&&null!==a&&(r[t[i]]=a)}}var n=new a;n.element=t;var o=e.utils.unwrapObservable(r());i(["smallImageUrl","fullImageUrl","imageMetadataDefault","fullImageClass","smallImageClass","magnifierClass","flyoutClass","magnifierPercent","flyoutEnabled","magnifierEnabled","spinnerDelay","replaceImageAtIndex","errorImageUrl"],n),n.index=o.index,n.smallImageUrls=o.smallImageUrls,n.fullImageUrls=o.fullImageUrls,n.imageMetadatas=o.imageMetadatas,n.start()},update:function(e,t,r,i,a){}};var u=function(e){var t="bust="+(new Date).getTime();return e+=e.indexOf("?")!==-1?e.indexOf("?")!==e.length-1?"&"+t:t:"?"+t};e.bindingHandlers.productImageSource={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,n){var o,s,c,l,d,u=e.utils.unwrapObservable(r());"object"==typeof u&&"IMG"===t.nodeName&&(o=e.utils.unwrapObservable(u.src),s=e.utils.unwrapObservable(u.errorSrc),c=e.bindingHandlers.productImageSource.getNoImageSiteSetting(n),l=c&&c.length>0?c:s,o&&l&&(d=new Image,d.src=l))},update:function(t,r,i,a,n){var o,c,l,d,u,p,h,f,m,g,v,y,b,E="",I=e.utils.unwrapObservable(r());if("object"==typeof I&&"IMG"===t.nodeName){if(l=e.utils.unwrapObservable(I.src),o=e.utils.unwrapObservable(I.imageType),o||(o="medium"),l){switch(o){case"full":c=e.utils.unwrapObservable(l.primaryFullImageURL);break;case"large":c=e.utils.unwrapObservable(l.primaryLargeImageURL);break;case"medium":c=e.utils.unwrapObservable(l.primaryMediumImageURL);break;case"small":c=e.utils.unwrapObservable(l.primarySmallImageURL);break;case"thumb":c=e.utils.unwrapObservable(l.primaryThumbImageURL);break;default:c=e.utils.unwrapObservable(l.primaryMediumImageURL)}v=e.utils.unwrapObservable(I.outputFormat),y=e.utils.unwrapObservable(I.quality),b=e.utils.unwrapObservable(I.alphaChannelColor),v&&(E="&"+s.IMAGE_OUTPUT_FORMAT+"="+v),y&&(E=E+"&"+s.IMAGE_QUALITY+"="+y),b&&(E=E+"&"+s.IMAGE_ALPHA_CHANNEL_COLOR+"="+b),c&&E&&(c+=E)}else c=I.errorSrc;return h=e.utils.unwrapObservable(l.primaryImageAltText),f=e.utils.unwrapObservable(l.primaryImageTitle),d=e.utils.unwrapObservable(I.errorSrc),u=e.bindingHandlers.productImageSource.getNoImageSiteSetting(n),p=u&&u.length>0?u:d,c!==d&&"/img/no-image.jpg"!==c||(c=p),h||(h=e.utils.unwrapObservable(I.alt)),f||(f=e.utils.unwrapObservable(I.title)),m=e.utils.unwrapObservable(I.errorAlt),g=e.utils.unwrapObservable(I.onerror),p?void(c?(h&&(t.alt=h),f&&(t.title=f),t.onerror=function(){var e=new Image;e.onload=function(){t.src=p,g&&g(t),t.onerror=""},e.onerror=function(){var e=new Image;e.onload=function(){t.src=e.src,g&&g(t),t.onerror=""},e.onerror=function(){t.src="/img/no-image.jpg",g&&g(t),t.onerror=""},e.src=d},e.src=p,m&&(t.alt=m)},t.src=c):(t.src=p,m?t.alt=m:h&&(t.alt=h),g&&g(t))):(t.src=c,h&&(t.alt=h),void(f&&(t.title=f)))}}},e.bindingHandlers.carouselSwipe={init:function(e,t,r){var i=$(e);r().Options||{};i.unbind("swipeleft"),i.unbind("swiperight"),i.carousel.interval=!1,i.on("swipeleft",function(e){i.carousel("next"),i.carousel({interval:!1})}),i.on("swiperight",function(e){i.carousel("prev"),i.carousel({interval:!1})})}},e.bindingHandlers.tabTrap={constrain:function(e){var t,r=$(e).find(":tabbable");r.length;r.each(function(r){var i;$(this).hasClass("cc-tab-trapped")||($(this).addClass("cc-tab-trapped"),$(this).on("keydown",function(r){t=$(e).find(":tabbable"),9===r.keyCode&&(r.shiftKey?(i=parseInt(t.index($(this)),10)-1,i<0&&(r.preventDefault(),t[t.length-1].focus())):(i=parseInt(t.index($(this)),10)+1,i===t.length&&(r.preventDefault(),t[0].focus())))}))})}},e.bindingHandlers.ccForm={init:function(e,t){var r=$(e),i=t().action,a=["INPUT","SELECT"];r.on("keydown",function(e){if("13"==e.which&&a.indexOf(e.target.tagName)!==-1)return"function"==typeof i?i():"string"==typeof i&&$(i).trigger("click"),!1})}},e.bindingHandlers.ccValidation={init:function(e,t,r){},update:function(t,r,i){e.bindingHandlers.validationMessage.update(t,r,i),e.isObservable(r().error)?$("#cc-aria-announce").text(r().error()):$("#cc-aria-announce").text(r().error)}},e.bindingHandlers.handleFocusin={init:function(t,r,i){var a=e.utils.unwrapObservable(r()),n=a.applyClass?a.applyClass:"cc-showhidden",o=a.applyTo;$(t).on("focusin mouseover",function(e){$(t).find(o).addClass(n)}).on("focusout mouseout",function(e){$.contains(t,document.activeElement)||$(t).find(o).removeClass(n)})}}}),define("profileHelper",["knockout","ccConstants"],function(e,t){"use strict";function r(){return this.profileData=e.observable(null),this.allowedActions=e.observableArray(null),this.pageAccesskeys={home:[t.DASHBOARD_TAB,t.DASHBOARD_MINI_TAB],catalog:[t.CATALOG_TAB],"price-groups":[t.CATALOG_TAB],"price-group":[t.CATALOG_TAB],marketing:[t.MARKETING_TAB],reporting:[t.REPORTS_TAB],media:[t.MEDIA_TAB],search:[t.SEARCH_TAB],accounts:[t.ACCOUNTS_TAB],contacts:[t.ACCOUNTS_TAB],design:[t.DESIGN_TAB],code:[t.DESIGN_TAB],publish:[t.PUBLISHING_TAB],settings:[t.SETTINGS_TAB,t.SETTINGS_LIMITED_TAB],inventory:[t.CATALOG_TAB],css:[t.DESIGN_TAB],theme:[t.DESIGN_TAB],layout:[t.DESIGN_TAB]},this.restrictedSubTabAccess={emailSettings:[t.SETTINGS_TAB],webAPI:[t.SETTINGS_TAB],accessControl:[t.SETTINGS_TAB],extensions:[t.SETTINGS_TAB],abandonedCartSettings:[t.SETTINGS_TAB],storeEndpointSettings:[t.SETTINGS_TAB]},this.tourNavigationData={home:{url:t.HOME_PAGE},catalog:{url:t.AGENT_CATALOG_PAGE_CONTEXT},marketing:{url:t.MARKETING_PAGE},reporting:{url:t.REPORTING_PAGE},media:{url:t.MEDIA_PAGE},search:{url:t.SEARCH_PAGE},accounts:{url:t.ACCOUNTS_PAGE,lastStop:!1},design:{url:t.DESIGN_PAGE},code:{url:t.CODE_PAGE},publish:{url:t.PUBLISH_PAGE},settings:{url:t.SETTINGS_SHIPPINGMETHODS_PAGE,lastStop:!1}},this}return r.prototype.isAuthorized=function(e){var t=this;if(e){var r=[];if($.isArray(e)?r=e:r.push(e),t.allowedActions&&t.allowedActions().length>0&&$(t.allowedActions()).filter(r).length>0)return!0}return!1},r.prototype.isAuthorizedForPage=function(e){var t=this,r=t.pageAccesskeys[e];if("undefined"!=typeof r&&null!==r)return t.isAuthorized(r)},r.prototype.isAuthorizedForSubTab=function(e){if(!e)return!0;var t=this,r=t.restrictedSubTabAccess[e];return"undefined"==typeof r||null===r||t.isAuthorized(r)},r.prototype.nextAuthorizedPage=function(e){if(e){var t=this,r=e.split("/");if(r&&(e=r[0]&&r[0].length>0?r[0]:r[1]),"undefined"==typeof e||null===e)return;var i=!1;for(var a in t.pageAccesskeys)if(t.pageAccesskeys.hasOwnProperty(a)&&(a===e&&(i=!0),i)){var n=t.pageAccesskeys[a];if(t.isAuthorized(n))return t.tourNavigationData[a]}return null}},new r}),define("dateTimeUtils",["ojs/ojcore","ojs/ojvalidation"],function(){"use strict";function e(){}return e.prototype.DEFAULT_FORMAT_TYPE="datetime",e.prototype.DEFAULT_FORMAT="short",e.prototype.getFormattedDateTime=function(e,t,r,i){var a,n,o,s,o,c,l;return t||(t=this.DEFAULT_FORMAT_TYPE),r||(r=this.DEFAULT_FORMAT),i||(i=this.DEFAULT_FORMAT),n=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),s={formatType:t,dateFormat:r,timeFormat:i},o=n.createConverter(s),c=new Date(e),l=oj.IntlConverterUtils.dateToLocalIso(c),a=o.format(l)},e.prototype.validateDate=function(e){var t,r,i,r,a,n,o;a="date",n=this.DEFAULT_FORMAT,o=this.DEFAULT_FORMAT,t=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),i={formatType:a,dateFormat:n,timeFormat:o},r=t.createConverter(i);try{return r.parse(e),!0}catch(e){return!1}},e.prototype.validateTime=function(e){var t,r,i,r,a,n,o;a="time",n=this.DEFAULT_FORMAT,o=this.DEFAULT_FORMAT,t=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),i={formatType:a,dateFormat:n,timeFormat:o},r=t.createConverter(i);try{return r.parse(e),!0}catch(e){return!1}},new e}),define("ccKoExtensions",["knockout","jqueryui","currencyHelper","CCi18n","ccDate","ccNumber","profileHelper","ccLogger","dateTimeUtils","pubsub","ccConstants","ojs/ojcore","i18next","navigation"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h){"use strict";var f=d.ALLOW_HASHBANG,m=!1;window.history&&window.history.pushState&&(m=!0),function(){var t,a,n,o,s,l,d,u,p,h,f,m="CC-propertyEditor-";f=function(e,t){"currencyMap"===this.type&&e?(this.property()[e.id](null),$("#"+this.property()[e.id].formId).focus()):(this.property(null),$("#"+this.property.formId).focus())},t=function(e,t){var r;r="currencyMap"===this.type?this.property()[e.id]:this.property,void 0==r||r.isModified()||r.isValid()?r&&r.forcedModified&&r()&&(r.forcedModified=!1):(r.isModified(!0),r.forcedModified=!0)},p=function(){var e=!0,t=$("#"+this.idBase+"field").val();""===t?$("#"+this.idBase+"controlGroup .cc-required-message").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-required-message").css("display","none"),e=c.validateDate(t),e===!1?$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","none")},h=function(){var e=!0,t=$("#"+this.idBase+"field").val();e=c.validateTime(t),e===!1&&($("#"+this.idBase+"field").val("T00:00:00"),this.property("T00:00:00"))},u=function(e){$("#"+e).focus()},a=function(e,t){var r=$("#"+e).get(0),i=$("#"+t.target.id);"text"==r.type?n(r,i,!1):n(r,i,!0)},n=function(e,t,r){r?(e.type="text",t.text(i.t("ns.common:resources.hideText"))):(e.type="password",t.text(i.t("ns.common:resources.revealText")))},o=function(e,t){var r=$(t.target),i=$(t.target).prev("input"),a=1===t.which||32===t.which||13===t.which;if(a)"block"!=r.css("display")&&"inline-block"!=r.css("display")||(r.toggle(!1),$(t.target).prev("input").attr("disabled",!1),i.select(),i.val(""),i.focus());else if(9===t.which)return!0},s=function(e,t){var r=$(t.target),i=r.next("input");0===r.val().length&&(e&&(r.attr("disabled","true"),i.toggle(!0)),this.validate())},d=function(t,r){var i,a,n,o;if(n=e.utils.unwrapObservable(r.type),r.prefix=r.prefix||t.prefix,r.unit=r.unit||t.unit,!n&&r.values&&(n="radio"),t.rules)for(i=t.rules(),o=0;o<i.length;o+=1)if(a=i[o],"required"!==a.rule||!a.params||a.condition&&!a.condition()||r.required===!1||(r.required=!0),!n)switch(a.rule){case"number":n="number";break;case"date":n="date-ojet";break;case"bool":n="checkbox"}e.utils.unwrapObservable(r.type)||(r.type=n||"shortText"),r.label||(r.label=t.label)},e.bindingHandlers.propertyEditor={init:function(t,r){e.utils.unwrapObservable(r());return{controlsDescendantBindings:!0}},update:function(n,c,g,v,y){var b,E,I,T,P,C,S,A,_,O=e.utils.unwrapObservable(c()),R=e.observable(!0),N=i.t("ns.common:resources.numberValidation");if(O.property&&e.isObservable(O.property)){C=O.property,C.extend({validatable:!0}),A=e.utils.unwrapObservable(O.id),_=e.utils.unwrapObservable(O.type),b=new Date,E=new Date(b.getFullYear(),b.getMonth(),b.getDate()),S=!O.clearValue,C.extend({validatable:!0}),I={writable:e.observable(!0),visible:e.observable(!0),currentDate:b,minDate:E,valueUpdate:"change",numericValidationErrorMessage:N};for(P in O)O.hasOwnProperty(P)&&("writable"!==P||e.isObservable(O[P])?I[P]=O[P]:I.writable(O[P]));var D=function(t,r){var i,a=null,n=e.contextFor(this);if(i=n.$parent?"currencyMap"===n.$parent.type:"currencyMap"===n.$parents[1].type,a=i?n.$parent.property()[e.dataFor(this).id]:e.dataFor(this),a.numericJetValidation(!0),"messagesShown"===r.option){var o=$(t.target).ojInputText("isValid");o?a.numericJetValidation(!0):a.numericJetValidation(!1)}else a.numericJetValidation(!0)},L=e.pureComputed({read:function(){return C()},write:function(t){var r=I.fractionalDigits,i=!1;if("digit"===e.utils.unwrapObservable(I.type)&&(i=!0),void 0!=t)if(r)C(t.toFixed(r));else{var a=t.toString().split(".");if(a&&2==a.length){if(i)return void C(t.toFixed(0));C(a[1].length>3?t.toFixed(3):t)}else C(t)}else C(t)}});d(C,I),O.writable===!1&&I.writable(!1),I.helpText=e.observable(e.utils.unwrapObservable(O.helpText)),I.isRequiredButMissing=e.computed(function(){return I.required&&e.isObservable(I.property.isModified)&&I.property.isModified()&&null==I.property()},I),I.titleText=e.computed(function(){var e="";return e=I.property.hasOwnProperty("isValid")?I.property.isValid()?I.helpText():I.property.error:I.helpText()},I),T={};var w=e.utils.unwrapObservable(I.type);"currency"!==w&&"currencyMap"!==w&&"digit"!==w||("currency"==w||"currency"===w?I.fractionalDigits=r.currencyObject().fractionalDigits:(I.fractionalDigits=0,I.numericValidationErrorMessage=i.t("ns.common:resources.digitValidation")),"currencyMap"!==w&&(w="number")),"enumerated"===w&&I.propertyValuesValue&&(w="complex-enumerated"),T.name=m+w;var M=$(n).closest("form").attr("id");if(M||(M=$(n).parent().attr("id")),I.idBase=M+"-"+T.name+"-"+(A?A+"-":""),"currencyMap"===w)for(P in C())C().hasOwnProperty(P)&&(C()[P].formId=I.idBase+P+"-field");else C.formId=I.idBase+"field";T.data=I,T.if=e.utils.unwrapObservable(O.if)||"undefined"==typeof e.utils.unwrapObservable(O.if),I.required=e.utils.unwrapObservable(I.required||C.required),"currencyMap"===I.type?$.each(I.property(),function(r){I.property()[r].validate=t,I.property()[r].numericJetValidation=e.observable(!0),I.property()[r].addonFocusInput=u}):(I.validate=t,I.numericJetValidation=R,I.addonFocusInput=u),I.clearValueFunction=f,"revealablePassword"===I.type?(I.togglePasswordVisibility=a,I.clickOrKeydownToUpdatePassword=o,I.blurPasswordField=s,I.keyUpInPasswordField=l):"number"===I.type||"currency"===I.type||"digit"===I.type||e.isObservable(I.type)&&"number"===I.type()?(I.customJetOptionChangeListener=D,I.computedValueWithFractions=L):"currencyMap"===I.type&&$.each(I.property(),function(e){I.property()[e].customJetOptionChangeListener=D,I.property()[e].computedValueWithFractions=L}),"date-ojet"===I.type||"time-ojet"===I.type||"date-time-ojet"===I.type?(I.validateOjetDate=p,I.validateOjetTime=h,I.dateTitleText=i.t("ns.common:resources.datePicker"),I.timeTitleText=i.t("ns.common:resources.timePicker")):!e.isObservable(I.type)||"date-ojet"!==I.type()&&"time-ojet"!==I.type()&&"date-time-ojet"!==I.type||(I.validateOjetDate=p,I.validateOjetTime=h,I.dateTitleText=i.t("ns.common:resources.datePicker"),I.timeTitleText=i.t("ns.common:resources.timePicker")),e.bindingHandlers.template.update(n,function(){return T},g,I,y)}}}}(),e.bindingHandlers.inTabFlow={update:function(t,r){var i=e.utils.unwrapObservable(r());"A"==$(t).prop("tagName")?$(t).attr("tabindex",i?0:-1):$(t).find(":input").attr("tabindex",i?0:-1)}},e.bindingHandlers.validatableValue={init:function(t,r,i,a,n){var o=r(),s=n.$parent.ignoreBlur;if($(t).blur(function(){return!(!s||!s())||void(o.isModified&&e.isObservable(o.isModified)&&o.isModified(!0))}),o.rules&&e.isObservable(o.rules))for(var c=o.rules().length,l=0;l<c;++l)if("required"===o.rules()[l].rule){o.rules()[l].params===!0&&$(t).attr("required","required");break}e.bindingHandlers.value.init(t,r,i,a,n)},update:function(t,r,i,a,n){e.bindingHandlers.value.update(t,r,i,a,n)}},e.bindingHandlers.validatableTarget={init:function(t,r,i,a,n){var o=r();$(t).blur(function(){o.isModified&&e.isObservable(o.isModified)&&o.isModified(!0)})}},e.bindingHandlers.ccLink={init:function(t,r,i,a,n){t.addEventListener("click",function(e){var r={usingCCLink:!0};if($(t).trigger("click.cc.unsaved",r),r.preventDefault)e.stopImmediatePropagation();else{var i=t.pathname+t.search;i&&window.location.pathname!==i&&h.goTo(i)}return e.preventDefault(),!1},!1);var o,s=e.utils.unwrapObservable(r()),c=s;if(s){if("string"==typeof s){var l=null,u=s;if(a.links)l=a;else{o=n.$parents;for(var p=0;p<o.length;p++)if(o[p].links){l=o[p];break}}l&&(c=l.links()[u])}if(c){var m="";c.url?m=c.url:c.route&&(m=c.route);var g=n.$masterViewModel;g&&g.isPreview&&!g.isPreview()&&g.storeConfiguration.allowSiteSwitchingOnProduction&&g.storeConfiguration.allowSiteSwitchingOnProduction()&&window.siteIdOnURL&&window.siteIdOnURL.length>0&&(m+=m.indexOf("?")==-1?"?"+d.URL_SITE_PARAM+"="+encodeURIComponent(window.siteIdOnURL):"&"+d.URL_SITE_PARAM+"="+encodeURIComponent(window.siteIdOnURL));var v=m;f&&(v="#!"+m);var y="";if(window.siteBaseURLPath&&"/"!==window.siteBaseURLPath&&(y=window.siteBaseURLPath),window.urlLocale){var b=JSON.parse(window.urlLocale)[0].name;y+="/"+b}$(t).prop("href",y+m),0===$(t).children().length&&""==$.trim($(t).text())&&(c.displayName?$(t).text(c.displayName):$(t).text(window.location.href+v))}}}},e.bindingHandlers.ccNavigation={update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());$(t).on("click.cc.nav",function(e){var r=t.pathname+t.search,i={usingCCLink:!0};return $(t).trigger("click.cc.unsaved",i),"prevent"==o||i.preventDefault||h.goTo(r),e.preventDefault(),e.stopImmediatePropagation(),!1})}},e.bindingHandlers.triggerMessage={update:function(t,r){var i=r();if(i.triggerFired&&e.isObservable(i.triggerFired)){var a=function(){return i.triggerFired()?i.triggerMessage:null},n=function(){return!!i.triggerFired()};e.bindingHandlers.text.update(t,a),e.bindingHandlers.visible.update(t,n)}}},e.bindingHandlers.widgetLocaleText={update:function(e,t,r,i,a){var n,o,s=t();if(i.translate)o=i;else for(var c=a.$parents,l=0;l<c.length;l++)if(c[l].translate){o=c[l];break}"string"==typeof s?n=o.translate(s,null,!0):"object"==typeof s&&void 0!=s.value&&(n=o.translate(s.value,s.params,!0,s.custom)),n&&("string"==typeof s||"object"==typeof s&&"innerText"==s.attr?$(e).text(n):"object"==typeof s&&void 0!=s.attr&&$(e).attr(s.attr,n))}},e.bindingHandlers.disabled={update:function(t,r,i,a,n){var o,s,c=!1,l=r();if("boolean"==typeof l?c=e.utils.unwrapObservable(l):"object"==typeof l&&void 0!=l.condition&&(c=e.utils.unwrapObservable(l.condition),void 0!=l.click&&(o=e.utils.unwrapObservable(l.click)),void 0!=l.link&&(s=function(){return e.utils.unwrapObservable(l.link)})),c){$(t).off("click.handler");var d=$(t).prop("tagName");"A"==d&&$(t).attr("href","#"),$(t).on("click.handler",function(e){return e.stopImmediatePropagation(),!1}),$(t).addClass("disabled")}else $(t).removeClass("disabled"),$(t).off("click.handler"),o&&$(t).on("click.handler",function(){var e=o.bind(a);return e(),!1}),s&&e.bindingHandlers.ccLink.init(t,s,i,a,n)}},e.bindingHandlers.ccDate={update:function(t,r,i,n,o){var s=r(),c=e.utils.unwrapObservable(s),l=e.utils.unwrapObservable(c.date),d=e.utils.unwrapObservable(c.format),u=e.utils.unwrapObservable(c.returnedType),p=e.utils.unwrapObservable(c.returnedDate);p=a.formatDateAndTime(l,d,u,p),$(t).text(p)}},e.bindingHandlers.ccResizeImage={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,n){var o,s,c,l,d,u=e.utils.unwrapObservable(r());"object"==typeof u&&"IMG"===t.nodeName&&(o=e.utils.unwrapObservable(u.src),s=e.utils.unwrapObservable(u.errorSrc),c=e.bindingHandlers.productImageSource.getNoImageSiteSetting(n),l=c&&c.length>0?c:s,o&&l&&(d=new Image,d.src=l))},update:function(t,r,i,a,n){var o,s,c,l,u,p,h,f,m,g,v,y="",b=e.utils.unwrapObservable(r()),E=d.DEFAULT_IMG_SIZE_FOR_VIEWPORT,I=["xsmall","small","medium","large"],T=function(e){if(e){var t=e.split(",");return 2==t.length&&(!isNaN(t[0])&&!isNaN(t[1]))}return!1},P=function(){var t=document.createElement("img"),r="srcset"in t,i="sizes"in t,a=b.isSrcSetEnabled&&e.utils.unwrapObservable(b.isSrcSetEnabled);return r&&i&&a},C=function(){var t="",r=e.utils.unwrapObservable(b.outputFormat),i=e.utils.unwrapObservable(b.quality),a=e.utils.unwrapObservable(b.alphaChannelColor);return r&&(t="&"+d.IMAGE_OUTPUT_FORMAT+"="+r),i&&(t=t+"&"+d.IMAGE_QUALITY+"="+i),a&&(t=t+"&"+d.IMAGE_ALPHA_CHANNEL_COLOR+"="+a),t},S=function(t,r,i){var a="";b[t+"_img"]?a=e.utils.unwrapObservable(b[t+"_img"]):i&&(a=O(i,r.imageHeight,r.imageWidth));var n=C();n&&(a.startsWith(d.ENDPOINT_IMAGES+"?source=")?a+=n:a=d.ENDPOINT_IMAGES+"?source="+a+n);E[t].width;if(a&&r.imageWidth)return a=a+" "+r.imageWidth+"w"},A=function(t){var r,i={},a=t?t:$(window)[0].innerWidth||$(window).width();"large"==a||a>=d.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(i.imageHeight=E.large.height,i.imageWidth=E.large.width,i.minWidth=E.large.minWidth,r="large"):"medium"==a||a>d.VIEWPORT_TABLET_UPPER_WIDTH&&a<d.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(i.imageHeight=E.medium.height,i.imageWidth=E.medium.width,i.minWidth=E.medium.minWidth,i.maxWidth=E.medium.maxWidth,r="medium"):"small"==a||a>=d.VIEWPORT_TABLET_LOWER_WIDTH&&a<=d.VIEWPORT_TABLET_UPPER_WIDTH?(i.imageHeight=E.small.height,i.imageWidth=E.small.width,i.minWidth=E.small.minWidth,i.maxWidth=E.small.maxWidth,r="small"):(i.imageHeight=E.xsmall.height,i.imageWidth=E.xsmall.width,i.maxWidth=E.xsmall.maxWidth,r="xsmall");var n=!1;switch(r){case"large":T(e.utils.unwrapObservable(b.large))&&(i.imageHeight=b.large.split(",")[0],i.imageWidth=b.large.split(",")[1],n=!0);break;case"medium":T(e.utils.unwrapObservable(b.medium))&&(i.imageHeight=b.medium.split(",")[0],i.imageWidth=b.medium.split(",")[1],n=!0);break;case"small":T(e.utils.unwrapObservable(b.small))&&(i.imageHeight=b.small.split(",")[0],i.imageWidth=b.small.split(",")[1],n=!0);break;case"xsmall":T(e.utils.unwrapObservable(b.xsmall))&&(i.imageHeight=b.xsmall.split(",")[0],i.imageWidth=b.xsmall.split(",")[1],n=!0)}if(!n)if(T(e.utils.unwrapObservable(b.size)))i.imageHeight=b.size.split(",")[0],i.imageWidth=b.size.split(",")[1];else if(e.utils.unwrapObservable(b.size))switch(e.utils.unwrapObservable(b.size)){case"large":T(e.utils.unwrapObservable(b.large))?(i.imageHeight=b.large.split(",")[0],i.imageWidth=b.large.split(",")[1],n=!0):(i.imageHeight=E.large.height,i.imageWidth=E.large.width);break;case"medium":T(e.utils.unwrapObservable(b.medium))?(i.imageHeight=b.medium.split(",")[0],i.imageWidth=b.medium.split(",")[1],n=!0):(i.imageHeight=E.medium.height,i.imageWidth=E.medium.width);break;case"small":T(e.utils.unwrapObservable(b.small))?(i.imageHeight=b.small.split(",")[0],i.imageWidth=b.small.split(",")[1],n=!0):(i.imageHeight=E.small.height,i.imageWidth=E.small.width);break;case"xsmall":T(e.utils.unwrapObservable(b.xsmall))?(i.imageHeight=b.xsmall.split(",")[0],i.imageWidth=b.xsmall.split(",")[1],n=!0):(i.imageHeight=E.xsmall.height,i.imageWidth=E.xsmall.width)}return i},_=function(e){if(e){var t=e.minWidth,r=e.maxWidth,i=e.imageWidth,a="";t&&(a="(min-width:"+t+"px)");var n="";return r&&(n="(max-width:"+r+"px)"),a&&n&&i?a+" and "+n+" "+i+"px":a&&i?a+" "+i+"px":n&&i?n+" "+i+"px":""}},O=function(e,t,r){if(e.indexOf(d.ENDPOINT_IMAGES+"?source=")>-1){var i=/height=[0-9]+/i;e.search(i)&&(e=e.replace(i,"height="+t));var a=/width=[0-9]+/i;return e.search(a)&&(e=e.replace(a,"width="+r)),e}return d.ENDPOINT_IMAGES+"?source="+e+"&height="+t+"&width="+r};if("object"==typeof b&&"IMG"===t.nodeName){var R=A();g=R.imageHeight,v=R.imageWidth;var N=!b.setMinHeightBeforeImageLoad||!e.utils.unwrapObservable(b.isSetMinHeightBeforeImageLoad)||e.utils.unwrapObservable(b.isSetMinHeightBeforeImageLoad);if(t.parentNode&&N){var D=t.parentNode;if("cc_img__resize_wrapper"!==D.getAttribute("id")){var L=document.createElement("div");t.onload=function(){if(L.style.minHeight="0px",o===u&&P()){for(var e="",r="",i=0;i<I.length;i++){var a=A(I[i]),n=S(I[i],a,u);n&&e.indexOf(n)<0&&(e=e?e+","+n:n);var s=_(a);s&&(r=r?r+","+s:s)}!e||void 0!==t.srcset&&t.srcset===e||(t.srcset=e),!r||void 0!==t.sizes&&t.sizes===r||(t.sizes=r)}},L.style.maxWidth="100%",L.style.minHeight=g+"px",L.style.height="100%";var w=e.utils.unwrapObservable(b.id);w?L.setAttribute("id","cc_img__resize_wrapper-"+w):L.setAttribute("id","cc_img__resize_wrapper"),D.replaceChild(L,t),L.appendChild(t)}}if(y=C(),s=e.utils.unwrapObservable(b.source),s?(o=P()?s:O(s,g,v),y&&(o+=y)):o=b.errorSrc,c=e.utils.unwrapObservable(b.errorSrc),null!=c&&0!=c.length||(c="/img/no-image.jpg"),l=e.bindingHandlers.ccResizeImage.getNoImageSiteSetting(n),u=l&&l.length>0?l:c,s=encodeURI(s),0==s.indexOf("/img/no-image.jpg")&&(o=u,s=u),p||(p=e.utils.unwrapObservable(b.alt)),h||(h=e.utils.unwrapObservable(b.title)),f=e.utils.unwrapObservable(b.errorAlt),m=e.utils.unwrapObservable(b.onerror),o){if(p&&(t.alt=p),h&&(t.title=h),t.onerror=function(){var e=new Image;e.onload=function(){t.src=u,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.onerror=function(){var e=new Image;e.onload=function(){t.src=e.src,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.onerror=function(){t.src="/img/no-image.jpg",t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.src=c},o===u&&(u=u===l?c:"/img/no-image.jpg"),e.src=u,f&&(t.alt=f)},t.src=o,P()&&o!==u){for(var M="",x="",k=0;k<I.length;k++){var U=A(I[k]),F=S(I[k],U,s);F&&M.indexOf(F)<0&&(M=M?M+","+F:F);var G=_(U);G&&(x=x?x+","+G:G);
}M&&(t.srcset=M),x&&(t.sizes=x)}}else t.src=u,f?t.alt=f:p&&(t.alt=p),m&&m(t)}}},e.bindingHandlers.ccDateTime={update:function(t,r,i,a,n){var o=r(),s=e.utils.unwrapObservable(o),l=e.utils.unwrapObservable(s.date),d=e.utils.unwrapObservable(s.format),u=e.utils.unwrapObservable(s.dateFormat),p=e.utils.unwrapObservable(s.timeFormat),h=e.utils.unwrapObservable(s.date);h=c.getFormattedDateTime(l,d,u,p),$(t).text(h)}},e.bindingHandlers.ccNumber={update:function(t,r,i,a,o){var s=r(),c=e.utils.unwrapObservable(s),l=null;l=n.formatNumber(c),$(t).text(l)}},e.bindingHandlers.setContextVariable={update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());n["$"+o.name]=e.utils.unwrapObservable(o.value)}},e.virtualElements.allowedBindings.setContextVariable=!0,e.bindingHandlers.element={init:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r()),c=a.jsPath()+"/";for(var l in a.elementsJs)if(o===l&&a.elementsJs.hasOwnProperty(l)){var d=a.elementsJs[l]();if(null!==d){var u="widget/",p=d.indexOf(u)+u.length;d.substring(0,p-1),d.lastIndexOf(".");require({baseUrl:c},[d],function(e){"function"==typeof e?e():e.hasOwnProperty("onLoad")&&"function"==typeof e.onLoad&&e.onLoad(a);var t=e.elementName;a.hasOwnProperty(t)?s.warn("Element name "+t+" is same as existing property"):a[t]=e,a.elements[t]=e,a.initialized()&&a.initialized.valueHasMutated()})}}return{controlsDescendantBindings:!0}},update:function(t,r,i,a,n){var o,s,c=e.utils.unwrapObservable(r());if(c){if("string"==typeof c)o=c;else{if("object"!=typeof c||void 0==c.type)return;o=c.type,void 0!=c.id&&(s=c.id)}s&&""!==s||(s=i().id&&""!==i().id?i().id:"id");var l=n.$data.id&&n.$data.id()?n.$data.id():"",d=n.$data.typeId&&n.$data.typeId()?n.$data.typeId():"",u={};u.type=o,u.fullType=d+"-"+o,u.id=s,u.textId="text."+s,u.elementId=l+"-"+o+"-"+s,u.styles="",""!==s&&n.$elementConfig&&(u.config=n.$elementConfig[s],u.config&&u.config.font&&(u.styles=u.config.font.styles||"",u.config.font.styles.display&&"block"===u.config.font.styles.display&&u.config.padding&&(u.config.padding.paddingTop>0||u.config.padding.paddingBottom>0||u.config.padding.paddingLeft>0||u.config.padding.paddingRight>0)&&(u.styles.padding=u.config.padding.paddingTop+"px "+u.config.padding.paddingRight+"px "+u.config.padding.paddingBottom+"px "+u.config.padding.paddingLeft+"px"))),$(t).attr("id",u.elementId),""!=u.styles&&$(t).css(u.styles),n.$elementInstance=u;var p={};p.name=u.fullType,p.data=a,p.url="",e.bindingHandlers.template.update(t,function(){return p},i,a,n)}}},e.bindingHandlers.addTemplate={update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());"string"==typeof o&&$(o).not("text").each(function(){var e=this.id;e&&""!==e&&0==$("body").find("#"+e).length&&$("body").append(this)})}},e.virtualElements.allowedBindings.addTemplate=!0,e.bindingHandlers.previewBar={update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if(o&&n.$data.previewBar){var s=n.$data.previewBar,c=s.cssPath,l=s.templateUrl,d=s.templateName;$("link[href='"+c+"']").length||$('<link href="'+c+'" rel="stylesheet">').appendTo("head");var u={};u.name=d,u.data=a,u.templateUrl=l,u.afterRender=s.attachEventHandlers,$.when(s.ojLoaded).done(function(){e.bindingHandlers.template.update(t,function(){return u},i,a,n)})}}},e.virtualElements.allowedBindings.previewBar=!0,e.bindingHandlers.embeddedAssistance={init:function(t,r,i,a,n){var o=r();o.subscribe(function(){e.bindingHandlers.embeddedAssistance.update(t,r,i,a,n)})},update:function(t,r,i,a,n){var o=r();o.extend({validatable:!0});var s=!1,c=!1;s=o.isModified()&&o().length>0,c=o.isValid();var l=function(){return s?c?null:o.embeddedAssistance:null},d=function(){return!!s&&!c};e.bindingHandlers.text.update(t,l),e.bindingHandlers.visible.update(t,d)}},e.extenders.propertyWatch=function(t){return t.initialState=e.observable(e.toJSON(t)),t.resetWatch=function(){t.initialState(e.toJSON(t))},t.hasChanged=e.computed(function(){var r=t.initialState()!==e.toJSON(t);return r&&t.resetWatch(),r}).extend({notify:"always",throttle:100}).extend({notify:"always"}),t},e.extenders.trigger=function(t,r){return t.triggerSet=!1,t.triggerValue=null,t.triggerMessage="",t.triggerFired=e.observable(!1),r&&(r.value&&(t.triggerValue=r.value,t.triggerSet=!0),r.message&&(t.triggerMessage=r.message)),t.trigger=function(e){t()===t.triggerValue?t.triggerFired(!0):t.triggerFired(!1)},t.clearTrigger=function(){t.triggerFired(!1)},t.triggerSet&&t.subscribe(t.trigger),t},e.bindingHandlers.accessControl={init:function(t,r,i){var a=i().accessControl,n=a.defaultAction?a.defaultAction:d.HIDE;o.isAuthorized(a.accessKey)?n===d.SHOW&&($(t).hide(),e.virtualElements.emptyNode(t)):n===d.SHOW||($(t).hide(),e.virtualElements.emptyNode(t))}},e.virtualElements.allowedBindings.accessControl=!0,e.bindingHandlers.agentBar={update:function(t,r,i,a,n){var o=e.utils.unwrapObservable(r());if(o){var s=(n.$data,"/shared/css/agent-bar.css");$("link[href='"+s+"']").length||$('<link href="'+s+'" rel="stylesheet">').appendTo("head");var c={};c.name="agent-bar.template",c.data=a,c.templateUrl="/shared/templates",e.bindingHandlers.template.update(t,function(){return c},i,a,n)}}},e.virtualElements.allowedBindings.agentBar=!0}),define("ccKoErrorWrapper",["knockout","ccLogger","ccRestClient"],function(e,t,r){"use strict";function i(r){return function(){try{return r.apply(this,arguments)}catch(r){t.error(r);var i=arguments[0],a=e.contextFor($(i)[0]).$root;if(a&&a.isPreview&&a.isPreview()){var n=$(i).parents(".widget-container,.stack-container");n.length>0&&(n.find(".stack-template,.displayTemplate").addClass("error"),n.find("div.display-error").show(),n.find("span.error-msg").first().text(r.message));var o=$(i).prev("div.sf-display-error");0==o.length&&(o=$(i).parents().prev("div.sf-display-error")),o.length>0&&(o.show(),o.find("span.sf-error-msg").text(r.message),o.next("div").addClass("sf-error"))}}}}var a,n=["attr","css","template","text","style","value"];if(r.previewMode)for(a in n){var o=n[a];if(e.bindingHandlers[o]&&e.bindingHandlers[o].update){var s=e.bindingHandlers[o].update;e.bindingHandlers[o].update=i(s)}}}),define("shared/store-loader",["knockout","koMapping","koExternalTemplate","bootstrap","koExtensions","ccKoExtensions","ccKoValidateRules","ccKoErrorWrapper"],function(e,t){"use strict";$.uiBackCompat=!1,infuser.defaults.templateSuffix=".template",e.mapping=t,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,i=function(){},a=function(){return r.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a})}),define("ccResourceLoader",["module","ccLogger"],function(e,t){function r(e){var t=e.indexOf(a),r=e.indexOf(n);if(r==-1&&(r=e.indexOf(o)),t>-1&&r>-1)return e.substring(t,r)}function i(){function a(e,t){i.moduleUrls[e]=t}function n(e){return i.moduleUrls[e]}function o(t,i,n){var o=e.config();i(o.jsUrls,function(){for(var e=arguments,i=0;i<e.length;i++){var s=e[i];s&&s.onLoad&&s.onLoad();var c=r(o.jsUrls[i]);a(c,o.jsUrls[i])}n(t)})}function c(e,r,i){var a=n(e);a?r([a],function(e){i(e)},function(r){t.error("Module "+e+" could not be loaded :"+r),i()}):(t.warn(" Url for Module "+e+" was not found."),i())}var l=this;i.moduleUrls={},l.load=function(t,r,i,a){e.config();a.isBuild?i():t==s?o(t,r,i):c(t,r,i)}}var a="global",n=".min.js",o=".js",s="APPLICATION_JS";return new i}),function(e,t,r){"function"==typeof define&&define.amd?define("jquerymswipe",["jquery"],function(i){return r(i,e,t),i.mobile}):r(e.jQuery,e,t)}(this,document,function(e,t,r,i){!function(e,t,r,i){function a(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function n(t,r){var n,o,s,c,l,d,u,p,h,f=t.type;if(t=e.Event(t),t.type=r,n=t.originalEvent,o=e.event.props,f.search(/^(mouse|click)/)>-1&&(o=N),n)for(u=o.length,c;u;)c=o[--u],t[c]=n[c];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),f.search(/^touch/)!==-1&&(s=a(n),f=s.touches,l=s.changedTouches,d=f&&f.length?f[0]:l&&l.length?l[0]:i,d))for(p=0,h=O.length;p<h;p++)c=O[p],t[c]=d[c];return t}function o(t){for(var r,i,a={};t;){r=e.data(t,S);for(i in r)r[i]&&(a[i]=a.hasVirtualBinding=!0);t=t.parentNode}return a}function s(t,r){for(var i;t;){if(i=e.data(t,S),i&&(!r||i[r]))return t;t=t.parentNode}return null}function c(){F=!1}function l(){F=!0}function d(){Y=0,k.length=0,U=!1,l()}function u(){c()}function p(){h(),L=setTimeout(function(){L=0,d()},e.vmouse.resetTimerDuration)}function h(){L&&(clearTimeout(L),L=0)}function f(t,r,i){var a;return(i&&i[t]||!i&&s(r.target,t))&&(a=n(r,t),e(r.target).trigger(a)),a}function m(t){var r,i=e.data(t.target,A);!U&&(!Y||Y!==i)&&(r=f("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function g(t){var r,i,n,s=a(t).touches;s&&1===s.length&&(r=t.target,i=o(r),i.hasVirtualBinding&&(Y=V++,e.data(r,A,Y),h(),u(),x=!1,n=a(t).touches[0],w=n.pageX,M=n.pageY,f("vmouseover",t,i),f("vmousedown",t,i)))}function v(e){F||(x||f("vmousecancel",e,o(e.target)),x=!0,p())}function y(t){if(!F){var r=a(t).touches[0],i=x,n=e.vmouse.moveDistanceThreshold,s=o(t.target);x=x||Math.abs(r.pageX-w)>n||Math.abs(r.pageY-M)>n,x&&!i&&f("vmousecancel",t,s),f("vmousemove",t,s),p()}}function b(e){if(!F){l();var t,r,i=o(e.target);f("vmouseup",e,i),x||(t=f("vclick",e,i),t&&t.isDefaultPrevented()&&(r=a(e).changedTouches[0],k.push({touchID:Y,x:r.clientX,y:r.clientY}),U=!0)),f("vmouseout",e,i),x=!1,p()}}function E(t){var r,i=e.data(t,S);if(i)for(r in i)if(i[r])return!0;return!1}function I(){}function T(t){var r=t.substr(1);return{setup:function(){E(this)||e.data(this,S,{});var i=e.data(this,S);i[t]=!0,D[t]=(D[t]||0)+1,1===D[t]&&H.bind(r,m),e(this).bind(r,I),G&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&H.bind("touchstart",g).bind("touchend",b).bind("touchmove",y).bind("scroll",v))},teardown:function(){--D[t],D[t]||H.unbind(r,m),G&&(--D.touchstart,D.touchstart||H.unbind("touchstart",g).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",v));var i=e(this),a=e.data(this,S);a&&(a[t]=!1),i.unbind(r,I),E(this)||i.removeData(S)}}}var P,C,S="virtualMouseBindings",A="virtualTouchID",_="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),O="clientX clientY pageX pageY screenX screenY".split(" "),R=e.event.mouseHooks?e.event.mouseHooks.props:[],N=e.event.props.concat(R),D={},L=0,w=0,M=0,x=!1,k=[],U=!1,F=!1,G="addEventListener"in r,H=e(r),V=1,Y=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},C=0;C<_.length;C++)e.event.special[_[C]]=T(_[C]);G&&r.addEventListener("click",function(t){var r,i,a,n,o,s,c=k.length,l=t.target;if(c)for(r=t.clientX,i=t.clientY,P=e.vmouse.clickDistanceThreshold,a=l;a;){for(n=0;n<c;n++)if(o=k[n],s=0,a===l&&Math.abs(o.x-r)<P&&Math.abs(o.y-i)<P||e.data(a,A)===o.touchID)return t.preventDefault(),void t.stopPropagation();a=a.parentNode}},!0)}(e,t,r),function(e){e.mobile={}}(e),function(e,t){var i={touch:"ontouchend"in r};e.mobile.support=e.mobile.support||{},e.extend(e.support,i),e.extend(e.mobile.support,i)}(e),function(e,t,i){function a(t,r,a,n){var o=a.type;a.type=r,n?e.event.trigger(a,i,t):e.event.dispatch.call(t,a),a.type=o}var n=e(r),o=e.mobile.support.touch,s="touchmove scroll",c=o?"touchstart":"mousedown",l=o?"touchend":"mouseup",d=o?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,r){e.fn[r]=function(e){return e?this.bind(r,e):this.trigger(r)},e.attrFn&&(e.attrFn[r]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){r=t,a(n,r?"scrollstart":"scrollstop",e)}var r,i,n=this,o=e(n);o.bind(s,function(a){e.event.special.scrollstart.enabled&&(r||t(a,!0),clearTimeout(i),i=setTimeout(function(){t(a,!1)},50))})},teardown:function(){e(this).unbind(s)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,r=e(t),i=!1;r.bind("vmousedown",function(o){function s(){clearTimeout(d)}function c(){s(),r.unbind("vclick",l).unbind("vmouseup",s),n.unbind("vmousecancel",c)}function l(e){c(),i||u!==e.target?i&&e.preventDefault():a(t,"tap",e)}if(i=!1,o.which&&1!==o.which)return!1;var d,u=o.target;r.bind("vmouseup",s).bind("vclick",l),n.bind("vmousecancel",c),d=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(i=!0),a(t,"taphold",e.Event("taphold",{target:u}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),n.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var r=t.pageXOffset,i=t.pageYOffset,a=e.clientX,n=e.clientY;return 0===e.pageY&&Math.floor(n)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=r,n-=i):(n<e.pageY-i||a<e.pageX-r)&&(a=e.pageX-r,n=e.pageY-i),{x:a,y:n}},start:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:e(t.target)}},stop:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(t,r,i,n){if(r.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-r.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-r.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var o=t.coords[0]>r.coords[0]?"swipeleft":"swiperight";return a(i,"swipe",e.Event("swipe",{target:n,swipestart:t,swipestop:r}),!0),a(i,o,e.Event(o,{target:n,swipestart:t,swipestop:r}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,r=this,i=e(r),a={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=a,a.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var i,o=e.event.special.swipe.start(t),s=t.target,c=!1;a.move=function(t){o&&!t.isDefaultPrevented()&&(i=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(o,i,r,s),c&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(o.coords[0]-i.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},a.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,n.off(d,a.move),a.move=null},n.on(d,a.move).one(l,a.stop)}},i.on(c,a.start)},teardown:function(){var t,r;t=e.data(this,"mobile-events"),t&&(r=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),r&&(r.start&&e(this).off(c,r.start),r.move&&n.off(d,r.move),r.stop&&n.off(l,r.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,r){e.event.special[t]={setup:function(){e(this).bind(r,e.noop)},teardown:function(){e(this).unbind(r)}}})}(e,this)}),require.config({baseUrl:"js",packages:["packageAce",{name:"packageAce",location:"/shared/js/libs/ace",main:"ace"}],shim:{jqueryui:{deps:["jquery"]},jquerymobile:{deps:["jquery"]},jquery:{deps:[],exports:"$"},trafficCop:{deps:["jquery"]},infuser:{deps:["jquery","trafficCop"]},spectrumColorPicker:{deps:["jquery"]},bootstrapDatePicker:{deps:["jquery"]},bootstrapTimePicker:{deps:["jquery"]},bootstrap:{deps:["jquery"]},bstypeahead:{deps:["jquery"]},tagsInput:{deps:["jquery"]},chosen:{deps:["jquery"]},imagesloaded:{deps:["jquery"]},facebook:{exports:"FB"}},paths:{jqueryui:"/shared/js/libs/jquery-ui-1.12.1.custom.min",jquerymswipe:"/shared/js/libs/jquery.mobile.swipe-1.4.5.min",i18next:"/shared/js/libs/i18next.3.5.0.min",i18nextBackend:"/shared/js/libs/i18nextXHRBackend.1.2.1",tagsInput:"/shared/js/libs/jquery.tagsinput-1.3.5",chosen:"/shared/js/libs/chosen.jquery-1.4.2.min",koMapping:"/shared/js/libs/knockout.mapping-2.4.1.min",koValidate:"/shared/js/libs/knockout.validation-2.0.3",trafficCop:"/shared/js/libs/TrafficCop-modified",infuser:"/shared/js/libs/infuser",bootstrap:"/shared/js/libs/bootstrap.3.1.1",bootstrapDatePicker:"/shared/js/libs/bootstrap-datepicker",bootstrapDatePickerLocales:"/shared/js/libs/locales",bootstrapTimePicker:"/shared/js/libs/bootstrap-timepicker",bootstrapSlider:"/shared/js/libs/bootstrap-slider",spectrumColorPicker:"/shared/js/libs/spectrum-1.7.0",bstypeahead:"/shared/js/libs/bootstrap3-typeahead",crossroads:"/shared/js/libs/crossroads-0.12.0.min",hasher:"/shared/js/libs/hasher-1.2.0",ccURLPatterns:"/shared/js/ccLibs/cc-url-patterns",moment:"/shared/js/libs/moment-2.10.3",momentLangs:"/shared/js/libs/moment",ccStoreConfiguration:"/shared/js/ccLibs/cc-store-configuration-1.0",profiletools:"/shared/js/ccLibs/profile-tools-1.0",ccConstants:"/shared/js/ccLibs/cc-constants",koExtensions:"/shared/js/ccLibs/ko-extensions",storageApi:"/shared/js/ccLibs/cc-storage-api-1.0",ccOAuthTimeout:"/shared/js/ccLibs/cc-oauth-timeout",ccPreviewBar:"/shared/js/ccLibs/cc-preview-bar",ccRestClientConstructor:"/shared/js/ccLibs/cc-rest-client-1.0",ccRestClient:"/shared/js/ccLibs/storefront-rest-client",koExternalTemplate:"/shared/js/ccLibs/koExternalTemplateEngine-amd-2.0.5-modified",ccKoExtensions:"/shared/js/ccLibs/cc-ko-extensions",ccKoErrorWrapper:"/shared/js/ccLibs/cc-ko-error-wrapper",xDomainProxy:"/shared/js/ccLibs/xdomain-proxy",pubsub:"/shared/js/ccLibs/pubsub-1.0",pubsubImpl:"/shared/js/ccLibs/pubsub-impl",routing:"/shared/js/ccLibs/routing-3.0",notifier:"/shared/js/ccLibs/notifier-1.0",notifications:"/shared/js/ccLibs/notifications-1.0",storeKoExtensions:"/shared/js/ccLibs/store-ko-extensions",ccLogger:"/shared/js/ccLibs/ccLogger-1.0",CCi18n:"/shared/js/ccLibs/cc-i18n",ccKoValidateRules:"/shared/js/ccLibs/cc-ko-validate-rules",paginated:"/shared/js/ccLibs/paginated",ccPaginated:"/shared/js/ccLibs/cc-paginated",spinner:"/shared/js/ccLibs/spinner-1.0",placeholderPatch:"/shared/js/ccLibs/cc-placeholder",imagesloaded:"/shared/js/libs/imagesloaded.pkgd-3.1.8",ccDate:"/shared/js/ccLibs/cc-date-format-1.0",ccNumber:"/shared/js/ccLibs/cc-number-format-1.0",ccPasswordValidator:"/shared/js/ccLibs/cc-password-validator",swmRestClientConstructor:"/shared/js/ccLibs/swm-rest-client-1.0",swmRestClient:"/shared/js/ccLibs/swm-storefront-rest-client",swmKoValidateRules:"/shared/js/ccLibs/swm-ko-validate-rules",ccResourceLoader:"/shared/js/ccLibs/cc-resource-loader",navigation:"/shared/js/ccLibs/cc-navigation-1.0",ccNavState:"/shared/js/ccLibs/cc-nav-state",facebook:"//connect.facebook.net/en_US/sdk",facebook:["//connect.facebook.net/en_US/sdk","/shared/js/ccLibs/load-facebookjs-error-handler-1.0"],facebookjs:"/shared/js/ccLibs/facebook_sdk",pinitjs:"/shared/js/ccLibs/pinit_sdk",imageZoom:"/shared/js/ccLibs/image-zoom",ccImageZoom:"/shared/js/ccLibs/cc-image-zoom-2.0",pageViewTracker:"/shared/js/ccLibs/pageViewTracker-1.0",currencyHelper:"/shared/js/ccLibs/currency-helper",profileHelper:"/shared/js/ccLibs/profile-helper",ccEETagProcessor:"/shared/js/ccLibs/cc-ee-tag-processor-1.0",viewportHelper:"/shared/js/ccLibs/viewport-helper",parentOrganisation:"/shared/js/ccLibs/parentOrganisation",ccClientErrorCodes:"/shared/js/ccLibs/cc-client-error-codes",sfExceptionHandler:"/shared/js/ccLibs/sf-exception-handler",ccStoreServerLogger:"/shared/js/ccLibs/cc-store-server-logger-1.0",ccStoreUtils:"/shared/js/ccLibs/cc-store-utils-1.0",dateTimeUtils:"/shared/js/ccLibs/date-time-utils",numberFormatHelper:"/shared/js/ccLibs/number-format-helper",ccStoreConfiguration:"/shared/js/ccLibs/cc-store-configuration-1.0",hammerjs:"/js/oraclejet/js/libs/hammer/hammer-2.0.4.min",jquery:"/js/oraclejet/js/libs/jquery/jquery-2.1.3.min","jqueryui-amd":"/js/oraclejet/js/libs/jquery/jqueryui-amd-1.11.4.min",knockout:"/js/oraclejet/js/libs/knockout/knockout-3.4.0",ojdnd:"/js/oraclejet/js/libs/dnd-polyfill/dnd-polyfill-1.0.0.min",ojs:"/js/oraclejet/js/libs/oj/v2.0.2/min",ojL10n:"/js/oraclejet/js/libs/oj/v2.0.2/ojL10n",ojtranslations:"/js/oraclejet/js/libs/oj/v2.0.2/resources",ojswitch:"/js/oraclejet/js/libs/oj/v2.0.2/ojswitch",promise:"/js/oraclejet/js/libs/es6-promise/promise-1.0.0.min",signals:"/js/oraclejet/js/libs/js-signals/signals.min",template:"/js/oraclejet/js/libs/require/text",customElements:"/js/oraclejet/js/libs/webcomponents/CustomElements",pageLayout:"/shared/js/pageLayout",viewModels:"/shared/js/viewModels",shared:"/shared/js"},waitSeconds:45});var paths={layoutContainer:"pageLayout/layout-container"};if("function"==typeof configurePaths&&configurePaths(paths),"undefined"==typeof container)var container;require(["shared/store-libs"],function(){require(["jquery","ccConstants","spinner","pubsub","profiletools","knockout","koValidate","ccKoValidateRules",paths.layoutContainer,"pageLayout/rest-adapter","pageLayout/api-builder","routing","CCi18n","ccDate","ccEETagProcessor","ccRestClient","ccOAuthTimeout","viewportHelper","ccPreviewBar","shared/store-loader","ccResourceLoader!APPLICATION_JS","jquerymswipe"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f,m,g,v,y,b){"use strict";function E(e){var t;m.samlLogin(e,I,T,t)}function I(e){var t=m.getSessionStoredValue("SSO_RETURN_URL");null==t&&(t="/"),window.location.assign(t)}function T(e){var t=m.getSessionStoredValue("SSO_RETURN_URL");null==t&&(t="/"),window.location.assign(t)}function P(){E(getSamlResponse())}function C(){m.storeToken(getAgentAuthToken()),m.setStoredValue("cc-agent-redirect-url",getAgentRedirectUrl()),window.location.assign("/")}if(container===t.CONTAINER_DESIGN_STUDIO){var S=!1,A=!1;e.Topic(i.topicNames.PAGE_CHANGED).subscribe(function(){S||A||(r.createWithTimeout({parent:"body",posTop:"200px"},1e4,function(){e(".modal-backdrop").remove()}),e(".cc-spinner").css("z-index","20000"),S=!0),A=!1}),e.Topic(i.topicNames.PAGE_READY).subscribe(function(){S?(r.destroyWithoutDelay("body"),S=!1,A=!1):A=!0}),f.enabled=!1}if("function"==typeof getSamlResponse&&null!=getSamlResponse()&&getSamlResponse().length>0)return void m.registerInitCallback(P);"function"==typeof getAgentAuthToken&&null!=getAgentAuthToken()&&getAgentAuthToken().length>0&&m.registerInitCallback(C);var _=new l("/ccstore/v1/"),O="/",R=new c(_,O),N=new R.LayoutViewModel;new u,new g(m);R.masterViewModel(N),f.init(),infuser.defaults.templateSuffix="";var D={};D.errorsAsTitle=!1,D.insertMessages=!1,D.decorateElement=!0,D.errorElementClass="invalid",n.validation.init(D);var L={compatibilityJSON:"v1",compatibilityAPI:"v1",ns:{namespaces:["ns.common","ns.ccformats"],defaultNs:["ns.common"]},fallbackLng:["en"],useLocalStorage:!1,useCookie:!1,debug:!1,contextSeparator:":",resGetPath:"/ccstoreui/v1/resources/__ns__?locale=__lng__",backend:{ajax:p.ajax}};p.deferInit(L,function(){N.previewMessage(p.t("ns.common:resources.previewMessage")),N.oboShopperName(p.t("ns.common:resources.fullName",{firstName:N.data.global.user.firstName,lastName:N.data.global.user.lastName})),N.sharedWidgetMessage(p.t("ns.common:resources.sharedWidget")),N.oboShopperMessage(p.t("ns.common:resources.shoppingAsText")),N.displayErrorMessage(p.t("ns.common:resources.displayError")),""==N.pageChangeMessage()&&(N.dataForPageChangeMessage().page.category?N.pageChangeMessage(p.t("ns.common:resources.categoryPageLoadedText",{collection:N.dataForPageChangeMessage().page.category.displayName})):N.dataForPageChangeMessage().page.product?N.pageChangeMessage(p.t("ns.common:resources.productPageLoadedText",{product:N.dataForPageChangeMessage().page.product.displayName})):"userSpacesPage"===N.dataForPageChangeMessage().page.repositoryId?N.pageChangeMessage(p.t("ns.common:resources.wishlistPageLoadedText")):"searchResultsPage"!=N.dataForPageChangeMessage().repositoryId&&N.pageChangeMessage(p.t("ns.common:resources.pageLoadedText",{page:N.dataForPageChangeMessage().page.repositoryId})))});var w=window.location.protocol+"//"+window.location.host,M=function(e,t){var r;if(e.canonicalRoute){var i=e.canonicalRoute;n.isObservable(i)&&(i=n.utils.unwrapObservable(i)),r=w+i}N.canonicalRoute(r),N.agentReturnUrl=m.getStoredValue("cc-agent-redirect-url"),N.alternates(e.alternates),N.nextPageNo(null),N.prevPageNo(null),N.currPageNo(""),N.paginationDone(!1),N.isObo(null!=N.data.global.agentId)},x=function(e){N.nextPageNo(e.nextPageNo),N.prevPageNo(e.prevPageNo),N.currPageNo(e.currPageNo),N.paginationDone()!==!0?N.paginationDone(!0):N.paginationDone.valueHasMutated()},k=function(e){N.title(e.title()),N.keywords(e.keywords()),N.description(e.description()),N.metaTags(e.metaTags()),N.isPreview(e.isPreview()),N.noindex(e.noindex()),v.layoutViewports(e.viewports?e.viewports():"")};e.Topic(i.topicNames.PAGE_LAYOUT_UPDATED).subscribe(M),e.Topic(i.topicNames.PAGE_PAGINATION_CALCULATED).subscribe(x),e.Topic(i.topicNames.PAGE_METADATA_CHANGED).subscribe(k),N.name=n.observable("Master View Model"),N.itemBeforeRemove=function(t,r,i){e(t).remove()},N.itemAfterAdd=function(e,t,r){},N.afterRender=function(e,t){},N.previewBar=y.getInstance(),d.widgetBuilder(R.WidgetViewModel,R),d.regionBuilder(R.RegionViewModel,R),R.WidgetViewModel.prototype.profileTools=new a,n.applyBindings(N,document.getElementById("oracle-cc")),"function"==typeof waitForRenderComplete&&waitForRenderComplete(n,R,N)})}),define("js/main",function(){}),define("ccStoreUtils",["knockout"],function(e){"use strict";function t(){}return t.prototype.fromJS=function(t,r,i,a,n,o){var s=[];if(i)for(var c in t)s.push(c);if(!i&&a&&a.length>0)for(var c in t)t[c]instanceof Object&&!(t[c]instanceof Array)&&s.push(c);var l={copy:s,observe:a,ignore:n,include:o};e.mapping.fromJS(t,l,r)},new t}),define("shared/ccLibs/cc-store-utils-1.0",function(){}),define("pageLayout/data",["knockout"],function(e){"use strict";function t(){}return t}),define("pageLayout/layout",["jquery","knockout","ccConstants","ccStoreConfiguration"],function(e,t,r,i){"use strict";function a(){var a=this;this.MAX_ROW_COLUMNS=12,this.layoutName=t.observable(),this.regions=t.observableArray([]),this.title=t.observable(),this.keywords=t.observable(),this.description=t.observable(),this.metaTags=t.observable(),this.isPreview=t.observable(),this.isObo=t.observable(!1),this.oboShopperName=t.observable(),this.previewMessage=t.observable(),this.oboShopperMessage=t.observable(),this.sharedWidgetMessage=t.observable(),this.displayErrorMessage=t.observable(),this.storeConfiguration=i.getInstance(),this.containPage=t.observable(!0),this.containHeader=t.observable(!1),this.containMain=t.observable(!1),this.containFooter=t.observable(!1),this.pageChangeMessage=t.observable(""),this.dataForPageChangeMessage=t.observable(),this.headerRows=t.observableArray().extend({deferred:!0}),this.bodyRows=t.observableArray().extend({deferred:!0}),this.footerRows=t.observableArray().extend({deferred:!0}),this.canonicalRoute=t.observable(),this.alternates=t.observableArray(),this.prevPageNo=t.observable(),this.nextPageNo=t.observable(),this.currPageNo=t.observable(""),this.supportedLocales=t.observableArray().extend({deferred:!0}),this.paginationDone=t.observable(!1),this.noindex=t.observable(!1);var n=["/checkout","/cart","/wishlist_settings","/searchresults","/nosearchresults","/confirmation","/error","/signup","/profile","/orderhistory","/orderdetails","/payment","/wishlist"],o=[window.location.protocol,"//",window.location.host].join("").toLowerCase(),s=function(e){for(var t=document.head.querySelectorAll('[rel="'+e+'"]'),r=t.length,i=0;i<r;i++)document.head.removeChild(t[i])},c=function(e){var t="canonical";if(!e||0==e.toLowerCase().indexOf(o)){if(!e||n.indexOf(e.substring(o.length).toLowerCase())>=0)return void s(t);a.paginationDone()&&(e+=a.currPageNo());var r=document.head.querySelectorAll('[rel="'+t+'"]'),i=r.length;if(i>1&&s(t),1===i)r[0].href!==e&&(r[0].href=e);else{var c=document.createElement("link");c.rel=t,c.href=e,document.head.appendChild(c)}}};return this.paginationDone.subscribe(function(){a.canonicalRoute.valueHasMutated()}),this.canonicalRoute.subscribe(c),this.headerRegions=t.observableArray(),this.bodyRegions=t.observableArray(),this.footerRegions=t.observableArray(),this.buildRows=function(){var e=this.headerRegions(),i=this.bodyRegions(),a=this.footerRegions();this.headerRegions([]),this.bodyRegions([]),this.footerRegions([]);for(var n,o=0;o<this.regions().length;o++)n=this.regions()[o],t.unwrap(n.type)===r.REGION_TYPE_HEADER&&this.headerRegions.push(this.regions()[o]),t.unwrap(n.type)&&t.unwrap(n.type)!==r.REGION_TYPE_BODY||this.bodyRegions.push(this.regions()[o]),t.unwrap(n.type)===r.REGION_TYPE_FOOTER&&this.footerRegions.push(this.regions()[o]);this.calculateRows.call(this.headerRows,this.headerRegions(),e),this.calculateRows.call(this.bodyRows,this.bodyRegions(),i),this.calculateRows.call(this.footerRows,this.footerRegions(),a)},this.calculateRows=function(e,r){var i,n=this,o={},s=0,c=[];if(e.length===r.length){for(var l=!0,d=0;d<e.length;d++)if(e[d].id()!==r[d].id()||e[d].width()!==r[d].width()){l=!1;break}if(l)return}if(t.isObservable(n)&&void 0!==n.removeAll){c=n(),c.splice(0,c.length),o.regions=t.observableArray().extend({deferred:!0});for(var d=0;d<e.length;d++)i=e[d],(s==a.MAX_ROW_COLUMNS||s+i.width()>a.MAX_ROW_COLUMNS)&&(c.push(o),o={},o.regions=t.observableArray().extend({deferred:!0}),s=0),o.regions.push(i),s+=i.width();c.push(o),n.valueHasMutated()}},this.subscribeArrayChanged=function(r,i,a){if(t.isObservable(r)){var n=r.peek();r.subscribe(function(t){var r=n;n=e.extend(!0,[],t),i.call(a,t,r)})}},this.hasWidgetType=function(e){var t;if(a.regions())for(var r=0;r<a.regions().length;r++)if(t=a.regions()[r],t.widgets().length)for(var i=0;i<a.regions().length;i++){var n=t.widgets()[i].typeId();if(n===e)return!0}return!1},this.formatHreflang=function(e){var r="";return e?(r=t.utils.unwrapObservable(e),r.replace(/_/g,"-")):r},this}return a}),define("pageLayout/region",["jquery","knockout","viewportHelper","pubsub"],function(e,t,r,i){"use strict";function a(){var a=this;return a.regions=t.observableArray(),a.widgets=t.observableArray(),a.width=t.observable(),a.offset=t.observable(),a.name=t.observable("defaultName"),a.metadata=t.observable(),a.similarRegions=new Object,a.widthClass=t.computed(function(){return r.getWidthClass(a.width(),a.offset())},a),a.globalWidgetsOnly=t.computed(function(){for(var e=0;e<a.widgets().length;e++)if(!a.widgets()[e].global())return!1;return!0},a),a.nextTab=function(){return a.validateWidgets()},a.previousTab=function(){return!0},a.validateWidgets=function(){var e=!0;for(var t in a.widgets())a.widgets()[t].checkForValidation()||(e=!1);return e},a.handleMetadata=function(){if(a.metadata()){var r=t.toJS(a.metadata);e.Topic(i.topicNames.REGION_METADATA_CHANGED).publish(r)}},this}return a}),define("notifier",["knockout","pubsub","jquery"],function(e,t,r){"use strict";function i(t,r,i,a,n){var o=this;o.id=e.observable(t),o.text=e.observable(r),o.type=e.observable(i),o.dismissable=e.observable(a),o.scrollToMessage=e.observable(n),o.alertClass=e.computed(function(){return"alert alert-"+o.type()})}function a(){var e=this;e.types={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"},e.sendMessage=function(e,a,n,o,s){var c=new i(e,a,n,o,s);r.Topic(t.topicNames.NOTIFICATION_ADD).publishWith(c,[{message:"success"}])},e.sendError=function(t,r,i){e.sendMessage(t,r,e.types.ERROR,!0,i)},e.sendWarning=function(t,r,i){e.sendMessage(t,r,e.types.WARNING,!0,i)},e.sendSuccess=function(t,r,i){e.sendMessage(t,r,e.types.SUCCESS,!0,i)},e.sendInfo=function(t,r,i){e.sendMessage(t,r,e.types.INFO,!0,i)};var a={};return e.sendMessageToPage=function(t,i,n,o,s,c){a[o]||(a[o]=r.Deferred()),a[o].done(function(){setTimeout(function(){e.sendMessage(t,i,c,s,n)},300),a[o]=null})},r.Topic(t.topicNames.PAGE_LAYOUT_UPDATED).subscribe(function(e,t){t.pageId&&a[t.pageId]&&a[t.pageId].resolve()}),e.sendErrorToPage=function(t,r,i,a,n){e.sendMessageToPage(t,r,i,a,!!n,e.types.ERROR);
},e.sendWarningToPage=function(t,r,i,a,n){e.sendMessageToPage(t,r,i,a,n,e.types.WARNING)},e.sendSuccessToPage=function(t,r,i,a,n){e.sendMessageToPage(t,r,i,a,n,e.types.SUCCESS)},e.sendInfoToPage=function(t,r,i,a,n){e.sendMessageToPage(t,r,i,a,n,e.types.INFO)},e.sendTemplateMessage=function(e,a,n,o,s,c){var l=new i(e,n,o,s,c);r.Topic(t.topicNames.NOTIFICATION_TEMPLATE_ADD).publish(l,a,n)},e.sendTemplateError=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.ERROR,!1,a)},e.sendTemplateWarning=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.WARNING,!0,a)},e.sendTemplateSuccess=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.SUCCESS,!0,a)},e.sendTemplateInfo=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.INFO,!0,a)},e.clearMessage=function(e,a){var n=new i(e,"",a,!1,!1);r.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(n,[{message:"success"}])},e.clearError=function(t){e.clearMessage(t,e.types.ERROR)},e.clearWarning=function(t){e.clearMessage(t,e.types.WARNING)},e.clearSuccess=function(t){e.clearMessage(t,e.types.SUCCESS)},e.clearInfo=function(t){e.clearMessage(t,e.types.INFO)},e}return new a}),define("viewModels/messageHandler",["knockout","pubsub","notifier","notifications","jquery"],function(e,t,r,i,a){"use strict";function n(){var d=this;if(n.singleInstance)throw new Error("Cannot instantiate more than one MessageHandler, use getInstance()");return d.message=e.observable(),d.messageFlag=e.observable(),d.errorMsgs=Array(),d.warnMsgs=Array(),d.successMsgs=Array(),d.infoMsgs=Array(),d.pageId="",d.scrollIfNeccessary=function(e,t){if(e.scrollToMessage()){var r=a(t);r&&r.offset()&&a("html, body").animate({scrollTop:r.offset().top},1e3)}},d.updateMessages=function(){for(var e=0;e<d.errorMsgs.length;e++)if(d.errorMsgs[e].pageId==d.pageId)return d.message(d.errorMsgs[e]),void(d.messageFlag()||(i.notify([{style:"inline",status:"error",id:"#CC-messages",close:d.message().dismissable(),fade:!1,message:d.message().text()}]),a(".cc-notification-message").addClass("container"),d.messageFlag(!0),d.scrollIfNeccessary(d.message(),"#CC-messages")));for(var e=0;e<d.warnMsgs.length;e++)if(d.warnMsgs[e].pageId==d.pageId)return d.message(d.warnMsgs[e]),void(d.messageFlag()||(i.notify([{style:"inline",status:"warning",id:"#CC-messages",close:d.message().dismissable(),fade:!1,message:d.message().text()}]),a(".cc-notification-message").addClass("container"),d.messageFlag(!0),d.scrollIfNeccessary(d.message(),"#CC-messages")));for(var e=0;e<d.successMsgs.length;e++)if(d.successMsgs[e].pageId==d.pageId)return d.message(d.successMsgs[e]),void(d.messageFlag()||(i.notify([{style:"inline",status:"success",id:"#CC-messages",close:d.message().dismissable(),fade:!1,message:d.message().text()}]),a(".cc-notification-message").addClass("container"),d.messageFlag(!0),d.scrollIfNeccessary(d.message(),"#CC-messages")));for(var e=0;e<d.infoMsgs.length;e++)if(d.infoMsgs[e].pageId==d.pageId)return d.message(d.infoMsgs[e]),void(d.messageFlag()||(i.notify([{style:"inline",status:"info",id:"#CC-messages",close:d.message().dismissable(),fade:!1,message:d.message().text()}]),a(".cc-notification-message").addClass("container"),d.messageFlag(!0),d.scrollIfNeccessary(d.message(),"#CC-messages")));d.messageFlag(!1),i.emptyNotifications("#CC-messages"),d.message(null)},d.addMessage=function(e,r){var n=e.id();if(d.messageFlag()&&null!=d.message()){if(d.message().id()==n&&d.message().text()==e.text())return;i.emptyNotifications("#CC-messages"),a.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(d.message(),[{message:"success"}])}for(var o=0;o<r.length;o++)r[o].id()==n&&r[o].text(e.text());e.pageId=d.pageId,r.push(e),d.messageFlag(!1),d.updateMessages(),a(".close.cc-notification-close").on("click",function(){d.removeCurrentMessage(e)})},d.removeCurrentMessage=function(e){d.messageFlag()&&null!=d.message()&&d.message().id()==e.id()&&(a.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(e,[{message:"success"}]),d.messageFlag(!1),i.emptyNotifications("#CC-messages"),d.message(null))},d.removeMessage=function(e,t){for(var r=e.id(),i=0;i<t.length;i++)if(t[i].id()==r){t.splice(i,1),d.removeCurrentMessage(e);break}d.updateMessages()},d.removeAllMessages=function(){d.errorMsgs=[],d.warnMsgs=[],d.successMsgs=[],d.infoMsgs=[],d.updateMessages()},d.addMessageHandler=function(e){var t=this,i=t.type();switch(i){case r.types.ERROR:d.addMessage(t,d.errorMsgs);break;case r.types.WARNING:d.addMessage(t,d.warnMsgs);break;case r.types.SUCCESS:d.addMessage(t,d.successMsgs);break;case r.types.INFO:d.addMessage(t,d.infoMsgs)}},d.deleteMessageHandler=function(e){var t=this,i=t.type();switch(i){case r.types.ERROR:d.removeMessage(t,d.errorMsgs);break;case r.types.WARNING:d.removeMessage(t,d.warnMsgs);break;case r.types.SUCCESS:d.removeMessage(t,d.successMsgs);break;case r.types.INFO:d.removeMessage(t,d.infoMsgs)}},d.pageContextHandler=function(e){var t="";e&&e.pageId&&(t=e.pageId,e.contextId&&(t+="-"+e.contextId),d.pageId=t,d.removeAllMessages())},void 0!=o&&a.Topic(t.topicNames.NOTIFICATION_ADD).unsubscribe(o),o=d.addMessageHandler,void 0!=s&&a.Topic(t.topicNames.NOTIFICATION_DELETE).unsubscribe(s),s=d.deleteMessageHandler,void 0!=c&&a.Topic(t.topicNames.PAGE_VIEW_CHANGED).unsubscribe(c),c=d.pageContextHandler,void 0!=l&&a.Topic(t.topicNames.PAGE_VIEW_CHANGED).unsubscribe(l),l=d.removeAllMessages,a.Topic(t.topicNames.NOTIFICATION_ADD).subscribe(o),a.Topic(t.topicNames.NOTIFICATION_DELETE).subscribe(s),a.Topic(t.topicNames.PAGE_VIEW_CHANGED).subscribe(c),a.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(l),d.messageFlag(!1),d}var o,s,c,l;return n.getInstance=function(){return n.singleInstance||(n.singleInstance=new n,i.emptyNotifications("#CC-messages")),n.singleInstance},n}),define("pageLayout/widget",["knockout","CCi18n","ccDate","ccNumber","pubsub","ccConstants","viewModels/messageHandler","jquery","navigation"],function(e,t,r,i,a,n,o,s,c){"use strict";function l(r){function i(r){var i,a;if(o.localeResources)for(var n in o.localeResources){var c=e.toJS(o.localeResources[n].resources);o.customTranslations()&&(i=e.toJS(o.customTranslations()),a=o.mergeTextSnippetResources(c,i)),t.addResourceBundle(n,o.localeResources[n].namespace(),{resources:c});var l=t.t("ns."+o.i18nresources()+":resources",{returnObjectTrees:!0,interpolation:{prefix:"##",suffix:"##"}});s.extend(l,a),o.resources(l)}o.customTranslations()&&!o.resources()&&(i=e.toJS(o.customTranslations()),o.resources(i)),o.resources()&&o.resourcesLoaded&&o.resourcesLoaded(o)}var o=this;return this.basePath=r,this.initialized=e.observable(!1),this.deferredInit=s.Deferred(),this.id=e.observable(),this.typeId=e.observable(),this.rootPath=e.observable(),this.imagePath=e.observable(),this.templatePath=e.observable(),this.jsPath=e.observable(),this.i18nresources=e.observable(),this.resources=e.observable(),this.locale=e.observable(),this.customTranslations=e.observable(),this.widgetId=e.observable(),this.numberOnPage=e.observable(),this.isPreview=e.observable(),this.elements={},this.isShared=e.computed(function(){var e;return e=!!(this.numberOnPage&&this.numberOnPage()>1)||!!(this.pageIds&&this.pageIds().length>1)},this),this.contextDataLoaded=e.observable(!1),this.pageReady=function(){this.contextDataLoaded(!0),this.links&&c.isPathEqualTo(this.links().checkout.route)&&(s("#CC-headermodalpane").modal("hide"),s("body").removeClass("modal-open"),s(".modal-backdrop").remove())},s.Topic(a.topicNames.PAGE_READY).subscribe(o.pageReady.bind(o)),this.historyStack=[],this.prevHistoryLength=0,this.newHistoryLength=0,this.updateHistoryStackArray=function(e){var t;if(1===history.length)try{window.sessionStorage.removeItem(n.SESSION_STORAGE_HISTORY_STACK)}catch(e){}try{t=window.sessionStorage.getItem(n.SESSION_STORAGE_HISTORY_STACK)}catch(e){}if(t&&!o.historyStack.length&&(o.historyStack=JSON.parse(t)),o.prevHistoryLength=o.newHistoryLength,o.newHistoryLength=history.length,void 0!=e.oldHash&&o.links&&o.links().hasOwnProperty(404)){if(o.historyStack.length){var r=o.historyStack[o.historyStack.length-1];e.newHash===r.oldHash&&e.oldHash===r.newHash&&o.prevHistoryLength===o.newHistoryLength?o.historyStack.pop():o.historyStack[o.historyStack.length-1].oldHash==e.oldHash&&o.historyStack[o.historyStack.length-1].newHash==e.newHash||o.historyStack[o.historyStack.length-1].newHash!=e.oldHash||o.historyStack.push(e)}else o.historyStack.push(e);try{window.sessionStorage.setItem(n.SESSION_STORAGE_HISTORY_STACK,JSON.stringify(o.historyStack))}catch(e){}}},s.Topic(a.topicNames.UPDATE_HASH_CHANGES).subscribe(o.updateHistoryStackArray),this.mergeTextSnippetResources=function(e,t){var r={};if(e&&"object"==typeof e&&t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(i.indexOf(".")===-1?e[i]=t[i]:r[i]=t[i]);return r},this.localeSubscription=this.locale.subscribe(function(e){var r=this;t.setLocaleOnce(e.replace("_","-"),function(){r.localeSubscription.dispose(),r.deferUntilAllPropertiesSet(r,function(){i(r.i18nresources())})})},this),this.typeId.subscribe(function(e){this.rootPath(this.basePath+"widget/"+e),this.imagePath(this.rootPath()+"/images"),this.jsPath(this.rootPath()+"/js"),this.widgetId(e)},this),this.absoluteUrl=function(e){var t=e;return this.assetMappings&&(t=this.assetMappings[e]),t},this.templateAbsoluteUrl=function(e){var t=e;return this.assetMappings&&(t=this.assetMappings[e]()),t},this.notificationTemplateUrl=function(e){var t="/templates/";return t+=e+".template",this.absoluteUrl(t)()},this.redirectToLocalizedURL=function(e,t){var r=c.getLocaleBasedUrl(e);window.location.assign(r)},this.translate=function(e,r,i,a){var n="",s=e,c="";if(o.resources()){if(a&&null!=o.resources()[a]&&"null"!=o.resources()[a])return o.resources()[a];if(o.resources()[e]&&(n=o.resources()[e],n.indexOf("__")===-1))return n}return r?r.defaultValue&&(s=r.defaultValue,r.defaultValue=void 0):r={},void 0===i&&(i=!0),n="",o.i18nresources()&&""!==o.i18nresources()&&(c="ns."+o.i18nresources()+":resources."+e,n=t.t(c,r)),n===c&&(i?(r.defaultValue=s,n=t.t("ns.common:resources."+e,r)):n=s),n},this}return l.prototype.allPropertiesSet=function(e){e.deferredInit.resolveWith(e)},l.prototype.deferUntilAllPropertiesSet=function(e,t){e.deferredInit.done(t)},l.prototype.requiresRefresh=function(e){return!(!this.pageIds()||!e.pageIds()||this.pageIds().length===e.pageIds().length)},l.prototype.isActiveOnPage=function(e){return!(!this.global||!this.global())||!(!e||this.pageIds().indexOf(e.pageRepositoryId)==-1)},l.prototype.maybeFireBeforeAppearExtJSDeferred=function(e){return function(t,r){this.maybeFireBeforeAppear(t,r,e)}},l.prototype.maybeFireBeforeAppear=function(e,t,r){if(t||(t=this),t.isActiveOnPage(e)){var i=s.Deferred();if(i.done(function(e){t.beforeAppear(e),r&&r.done(function(){t.callExtJSBeforeAppear(t)})}),t.initialized())i.resolveWith(t,[e]);else var a=t.initialized.subscribe(function(r){r&&(i.resolveWith(t,[e]),a.dispose())})}},l.prototype.callExtJSBeforeAppear=function(e){e.__cc__extjs&&e.hasBeforeAppear(e.__cc__extjs)&&e.__cc__extjs.beforeAppear.call(e)},l.prototype.hasBeforeAppear=function(){var e=!1;return"beforeAppear"in this&&"function"==typeof this.beforeAppear&&(e=!0),e},l.prototype.ccDate=function(e,t,i,a){return r.formatDateAndTime(e,t,i,a)},l.prototype.ccNumber=function(e){return i.formatNumber(e)},l.prototype.formatPrice=function(e,t){e=e.toFixed(t);var r=e.split("."),a=i.formatNumber(r[0],!0);return 0===t?a=a.substring(0,a.length-3):(a=a.substring(0,a.length-2),a+=r[1]),a},l.prototype.messageBox=o.getInstance(),l.prototype.checkForValidation=function(){return!this.validate||this.validate()},l}),define("storeKoExtensions",["knockout","jqueryui","notifier","ccLogger","koValidate"],function(e,t,r,i,a){"use strict";e.extenders.notify=function(t,a){if(t.isValid&&e.isObservable(t.isValid)&&t.isModified&&e.isObservable(t.isModified)){var n="",o="An error has occurred.";if(a&&(a.id?(n=a.id,a.message&&(o=a.message)):""!==a.toString()&&(n=a.toString())),""===n)throw i.error("Notify ID not set"),new Error("Notify ID not set.");t.notify=function(e){t.isValid()||!t.isModified()?r.clearError(n):r.sendError(n,o)},t.clearError=function(){r.clearError(n)},t.isModified.subscribe(t.notify),t.isValid.subscribe(t.notify)}return t},e.bindingHandlers.productVariantImageSource={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,n){var o,s,c,l,d,u=e.utils.unwrapObservable(r());"object"==typeof u&&"IMG"===t.nodeName&&(o=e.utils.unwrapObservable(u.src),s=e.utils.unwrapObservable(u.errorSrc),c=e.bindingHandlers.productVariantImageSource.getNoImageSiteSetting(n),l=c&&c.length>0?c:s,o&&l&&(d=new Image,d.src=l))},update:function(t,r,i,a,n){var o,s,c,l,d,u,p,h,f,m,g,v=e.utils.unwrapObservable(r());if("object"==typeof v&&"IMG"===t.nodeName){if(l=e.utils.unwrapObservable(v.src),o=e.utils.unwrapObservable(v.imageType),o||(o="medium"),l)switch(o){case"full":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryFullImageURL?l.childSKUs[0].primaryFullImageURL:l.primaryFullImageURL);break;case"large":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryLargeImageURL?l.childSKUs[0].primaryLargeImageURL:l.primaryLargeImageURL);break;case"medium":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryMediumImageURL?l.childSKUs[0].primaryMediumImageURL:l.primaryMediumImageURL);break;case"small":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primarySmallImageURL?l.childSKUs[0].primarySmallImageURL:l.primarySmallImageURL);break;case"thumb":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryThumbImageURL?l.childSKUs[0].primaryThumbImageURL:l.primaryThumbImageURL);break;default:c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryMediumImageURL?l.childSKUs[0].primaryMediumImageURL:l.primaryMediumImageURL)}else c=v.errorSrc;if(h=e.utils.unwrapObservable(l.primaryImageAltText),f=e.utils.unwrapObservable(l.primaryImageTitle),d=e.utils.unwrapObservable(v.errorSrc),u=e.bindingHandlers.productImageSource.getNoImageSiteSetting(n),p=u&&u.length>0?u:d,c!==d&&"/img/no-image.jpg"!==c||(c=p),u&&u.length>0){var y=new Image;y.onerror=function(){p=d},y.src=u}return h||(h=e.utils.unwrapObservable(v.alt)),f||(f=e.utils.unwrapObservable(v.title)),m=e.utils.unwrapObservable(v.errorAlt),g=e.utils.unwrapObservable(v.onerror),p?void(c?(s=new Image,s.onload=function(){t.src=c,h&&(t.alt=h),f&&(t.title=f)},s.onerror=function(){t.src=p,m&&(t.alt=m),g&&g(t)},s.src=c):(t.src=p,m?t.alt=m:h&&(t.alt=h),g&&g(t))):(t.src=c,void(h&&(t.alt=h)))}}}}),define("pageViewTracker",["knockout","ccRestClient","ccConstants","storageApi"],function(e,t,r,i){"use strict";function a(t){var r=this;r.pageViews=e.observable(t)}function n(){var n=this;return this.tenantId=e.observable(),this.visitId=e.observable(),this.visitorId=e.observable(),this.visitDetailsChanged=e.observable(!1),n.createPageViewEvent=function(e){var t=new a(e);return t},n.getVisitorId=function(){return i.getInstance().getItem(r.VISITOR_ID)},n.getVisitId=function(){return i.getInstance().getItem(r.VISIT_ID)},n.handleVisitDetails=function(){var e=this;if(e.visitorId||e.visitId){var t=e.getVisitorId(),r=e.getVisitId();t&&t==e.visitorId()||(e.visitorId(t),e.visitDetailsChanged(!0)),r&&r==e.visitId()||(e.visitId(r),e.visitDetailsChanged(!0)),e.visitDetailsChanged()&&(e.persistVisitDetails(e.visitorId(),e.visitId()),e.visitDetailsChanged(!1))}},n.persistVisitDetails=function(e,i){var a={};a[r.VISITOR_ID]=e,a[r.VISIT_ID]=i;var n=r.ENDPOINT_SAVE_VISIT_DETAILS,o=function(e){},s=function(e){};t.request(n,a,o,s)},n.recordPageChange=function(e){var i={pageViews:e.pageViews()},a=r.ENDPOINT_RECORD_PAGEVIEWS_COUNT,n=function(e){},o=function(e){};t.request(a,i,n,o)},n}return new n}),define("pageLayout/currency",["jquery","ccConstants","ccRestClient"],function(e,t,r){"use strict";function i(){if(i.singleInstance)throw new Error("Cannot instantiate more than one CurrencyViewModel, use getInstance()");var a=this;return a.siteCurrenciesLoaded=e.Deferred(),a.availableCurrencies=[],a.currencyMap={},a.setAvailableCurrencies=function(){a.availableCurrencies.forEach(function(e){a.currencyMap[e.currencyCode]=e}),a.siteCurrenciesLoaded.resolve()},a.fetchCurrenciesSuccess=function(e){e?a.availableCurrencies=e.items:a.availableCurrencies=[],a.setAvailableCurrencies()},a.fetchCurrenciesFailure=function(){console.log("currencies loading failed")},a.fetchCurrencies=function(){var e=t.ENDPOINT_CURRENCIES_LIST_CURRENCIES,i={};r.request(e,i,a.fetchCurrenciesSuccess,a.fetchCurrenciesFailure)}(),this}return i.getInstance=function(){return i.singleInstance||(i.singleInstance=new i),i.singleInstance},i}),define("pageLayout/site",["knockout","ccRestClient","ccConstants","jquery","storageApi","pageViewTracker","pageLayout/currency"],function(e,t,r,i,a,n,o){"use strict";function s(a,n,c){if(s.singleInstance)throw new Error("Cannot instantiate more than one SiteViewModel, use getInstance(pAdapter, data, pParams)");var l=this;l.currencyViewModel=o.getInstance(),l.selectedPriceListGroup=e.observable(n?n.priceListGroup.defaultPriceListGroup:null),l.activePriceListGroups=e.observableArray([]),l.siteSecondaryCurrency=e.observable(null),l.siteSecondaryCurrencyCode=null,l.priceListGroupDeferred=i.Deferred(),l.selectedPriceListGroup()&&l.priceListGroupDeferred.resolve(),l.exchangeRate=e.observable(null),l.payShippingInSecondaryCurrency=e.observable(!1),l.payTaxInSecondaryCurrency=e.observable(!1),l.siteLoadedDeferred=i.Deferred(),l.siteSecondaryInfoLoaded=i.Deferred();var d="/img/no-image.jpg";return n&&n.siteInfo&&n.siteInfo.noimage&&(d=n.siteInfo.noimage),l.getCurrency=function(e){return l.currencyViewModel.currencyMap[e]},l.setSiteSecondaryCurrency=function(){l.siteSecondaryCurrency(l.getCurrency(l.siteSecondaryCurrencyCode))},i.when(l.currencyViewModel.siteCurrenciesLoaded,l.siteSecondaryInfoLoaded).done(function(){l.setSiteSecondaryCurrency(),l.siteLoadedDeferred.resolve()}),l.noImageSrc=e.observable(d),null!=n&&t.request(r.ENDPOINT_SITES_GET_SITE,{},function(e){l.siteSecondaryCurrencyCode=e.secondaryCurrency,l.exchangeRate(e.exchangeRate?e.exchangeRate:null),l.payShippingInSecondaryCurrency(!!e.payShippingInSecondaryCurrency&&e.payShippingInSecondaryCurrency),l.payTaxInSecondaryCurrency(!!e.payTaxInSecondaryCurrency&&e.payTaxInSecondaryCurrency),l.siteSecondaryInfoLoaded.resolve()},function(e){console.log("site failed")},n.siteInfo.id),l.updateSiteSecondaryCurrencyCode=function(e){e&&e!=l.siteSecondaryCurrencyCode&&(l.siteSecondaryCurrencyCode=e,l.setSiteSecondaryCurrency())},l}return s.prototype.getCurrentLocale=function(){var e=t.getStoredValue(r.LOCAL_STORAGE_USER_CONTENT_LOCALE);return null!=e?JSON.parse(e)[0].name:i(":root").attr("lang")},s.prototype.setContextData=function(e){var i=this;for(var a in e)i[a]=e[a];if(i.selectedPriceListGroup()||e.priceListGroup){for(var n=!1,o=JSON.parse(t.getStoredValue(r.LOCAL_STORAGE_PRICELISTGROUP_ID)),s=0;s<i.priceListGroup.activePriceListGroups.length;s++)if(o&&o==i.priceListGroup.activePriceListGroups[s].id){i.selectedPriceListGroup(i.priceListGroup.activePriceListGroups[s]),n=!0;break}e.priceListGroup&&!n&&i.selectedPriceListGroup(e.priceListGroup.defaultPriceListGroup),"pending"===i.priceListGroupDeferred.state()&&i.priceListGroupDeferred.resolve()}e.priceListGroup&&i.activePriceListGroups(e.priceListGroup.activePriceListGroups),e&&e.hasOwnProperty("siteInfo")&&e.siteInfo.hasOwnProperty("noimage")&&i.noImageSrc(e.siteInfo.noimage?e.siteInfo.noimage:"/img/no-image.jpg")},s.initializeVisitorService=function(e){e&&e.visitorServiceHost&&e.tenantId&&e.oracleUnifiedVisitHost&&(window.OracleUnifiedVisit={accountId:e.tenantId+"_"+e.siteInfo.id,host:e.visitorServiceHost,handle:function(){window.ATGSvcs&&ATGSvcs.visitIDsLoaded&&ATGSvcs.visitIDsLoaded(),a.getInstance().setItem(r.VISITOR_ID,window.OracleUnifiedVisit.visitorId()),a.getInstance().setItem(r.VISIT_ID,window.OracleUnifiedVisit.visitId()),n.handleVisitDetails()}},require([e.oracleUnifiedVisitHost]))},s.getInstance=function(e,t,r){return s.singleInstance||(s.singleInstance=new s(e,t,r),s.initializeVisitorService(t)),t&&s.singleInstance.setContextData(t),s.singleInstance},s}),define("viewModels/dynamicProperty",["knockout","koValidate","ccKoValidateRules","storeKoExtensions","CCi18n"],function(e,t,r,i,a){"use strict";function n(){var t=this;t.id=e.observable(),t.label=e.observable(),t.type=e.observable(),t.uiEditorType=e.observable(),t.default=e.observable(null),t.required=e.observable(!1),t.length=e.observable(),t.name=e.observable(),t.promptText=e.observable(),t.values=[],t.value=e.observable(),t.value.extend({required:!1}),t.isValid=function(){return void 0===t.value()||null===t.value()?!t.required():void 0===t.value.isValid||t.value.isValid()},t.validateNow=function(){return void 0!==t.value.isModified&&t.value.isModified(!0),t.isValid()},t.reset=function(){t.value(null),t.value.isModified(!1)},t.initializeMetadata=function(e,r){t.id(e.id),t.label(e.label),t.name(e.name),null!=e.promptText&&t.promptText(e.promptText),t.type(e.type),t.uiEditorType(e.uiEditorType),null!=e.default&&t.default(e.default),t.required(e.required),e.length&&t.length(e.length);var i={required:!1};i.required={params:t.required(),message:a.t("ns.common:resources.dynamicPropertyRequired",{fieldName:t.label()})},t.length()>0&&"checkbox"!==t.type()&&"number"!==t.type()&&"date"!=t.type()&&(i.maxLength={params:t.length(),message:a.t("ns.common:resources.maxlengthValidationMsg",{maxLength:t.length(),fieldName:t.label()})}),t.value.rules.remove(function(e){return"required"==e.rule}),t.value.extend(i),void 0!==t.value()&&null!==t.value()||!t.default()||t.value(t.default()),"checkbox"===t.type()&&t.value()!==!0&&t.value(!1),"enumerated"===t.type()&&(t.values=e.values)},t.getMetadata=function(){var e=new Object;return e.id=t.id(),e.label=t.label(),e.type=t.type(),e.uiEditorType=t.uiEditorType(),e.default=t.default(),e.required=t.required(),e.length=t.length(),e.name=t.name(),e.promptText=t.promptText(),e.values=t.values,e}}return n}),define("viewModels/dynamicPropertyMetaContainer",["knockout","viewModels/dynamicProperty"],function(e,t){"use strict";function r(){if(r.singleInstance)throw new Error("Cannot instantiate more than one DynamicPropertyMetaContainer view model, use getInstance()");var e=this;e.dynamicPropertyMetaCache={}}return r.prototype.intializeDynamicProperties=function(e,r){for(var i=this,a=[],n=0;n<e.length;n++){var o=new t;o.initializeMetadata(e[n],!0),a.push(o)}i.dynamicPropertyMetaCache[r]=a},r.getInstance=function(){return r.singleInstance||(r.singleInstance=new r),r.singleInstance},r}),define("viewModels/address",["knockout","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","ccLogger","ccRestClient","viewModels/dynamicPropertyMetaContainer"],function(e,t,r,i,a,n,o,s){"use strict";function c(r,i,a,c,l){function d(e){var t=this,r=t.countriesList();t.country(e),t.selectedCountry(e);for(var i=r.length,a=0;a<i;a++)if(r[a].countryCode===e){if(!(r[a].regions.length>0))return t.computedState([]),t.stateList([]);t.computedState([]),t.stateList(r[a].regions);break}}var u=this;if(!r||""===r)throw n.error("Address ID not set"),new Error("Address ID not set");return u.alias=e.observable(""),u.prefix=e.observable(""),u.firstName=e.observable(""),u.middleName=e.observable(""),u.lastName=e.observable(""),u.suffix=e.observable(""),u.country=e.observable(""),u.postalCode=e.observable(""),u.address1=e.observable(""),u.address2=e.observable(""),u.address3=e.observable(""),u.city=e.observable(""),u.state=e.observable(""),u.county=e.observable(""),u.phoneNumber=e.observable(""),u.email=e.observable(),u.jobTitle=e.observable(""),u.companyName=e.observable(""),u.faxNumber=e.observable(""),u.type=e.observable(""),u.repositoryId="",u.dynamicPropertyMetaInfo=s.getInstance(),u.isDefaultBillingAddress=e.observable(!1),u.isDefaultShippingAddress=e.observable(!1),u.computedDefaultBilling=e.computed(function(){return u.isDefaultBillingAddress()&&u.saveAddressTo()===t.ORDER_ACCOUNT},u),u.computedDefaultShipping=e.computed(function(){return u.isDefaultShippingAddress()&&u.saveAddressTo()===t.ORDER_ACCOUNT},u),u.postalCodePattern=e.observable(""),u.US_POSTAL_CODE_PATTERN="^[0-9]{5}([ -][0-9]{4})?$",u.CANADA_POSTAL_CODE_PATTERN="^[abceghjklmnprstvxyABCEGHJKLMNPRSTVXY]{1}[0-9]{1}[a-zA-Z]{1} *[0-9]{1}[a-zA-Z]{1}[0-9]{1}$",u.DEFAULT_POSTAL_CODE_PATTERN="^[0-9a-zA-Z]{1,}([ -][0-9a-zA-Z]{1,})?$",u.stateList=e.observableArray(),u.selectedCountry=e.observable(),u.selectedState=e.observable(),u.state_ISOCode=e.observable(),u.countriesList=e.observableArray(),u.countriesList(c),u.defaultCountryCode=e.observable(l),u.isDefaultAddress=e.observable(!1),u.saveToAccount=e.observable(!1),u.saveAddressTo=e.observable(t.PROFILE),u.invalidTracker=e.observable(),u.alias.extend({maxLength:{params:t.CYBERSOURCE_ALIAS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("aliasText"),maxLength:t.CYBERSOURCE_ALIAS_MAXIMUM_LENGTH})}}),u.prefix.extend({required:!1}),u.firstName.extend({required:{params:!0,message:a.translate("firstNameRequired")},maxLength:{params:t.CYBERSOURCE_FIRSTNAME_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("firstNameText"),maxLength:t.CYBERSOURCE_FIRSTNAME_MAXIMUM_LENGTH})}}),u.middleName.extend({required:!1}),u.lastName.extend({required:{params:!0,message:a.translate("lastNameRequired")},maxLength:{params:t.CYBERSOURCE_LASTNAME_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("lastNameText"),maxLength:t.CYBERSOURCE_LASTNAME_MAXIMUM_LENGTH})}}),u.suffix.extend({required:!1}),u.country.extend({required:{params:!0,message:a.translate("countryRequired")}}),u.address1.extend({required:{params:!0,message:a.translate("addressLine1Required")},maxLength:{params:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("addressLine1Text"),maxLength:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH})}}),u.address2.extend({required:!1,maxLength:{params:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("addressLine2Text"),maxLength:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH})}}),u.address3.extend({required:!1,maxLength:{params:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("addressLine3Text"),maxLength:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH})}}),u.city.extend({required:{params:!0,message:a.translate("cityRequired")},maxLength:{params:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("cityText"),maxLength:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH})}}),u.state.extend({required:{params:!0,onlyIf:function(){return u.stateList().length>0},message:a.translate("stateRequired")}}),u.county.extend({required:!1,maxLength:{params:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("countyText"),maxLength:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH})}}),u.type.extend({required:{params:!0,onlyIf:function(){return u.saveToAccount()},message:a.translate("nickNameRequiredText")},maxLength:{params:t.ACCOUNT_NICKNAME_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("nickNamePlaceHolderText"),maxLength:t.ACCOUNT_NICKNAME_MAXIMUM_LENGTH})}}),u.postalCode.extend({required:{params:!0,message:a.translate("zipCodeRequired")},maxLength:{params:t.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("zipCodeText"),maxLength:t.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH})},observablePattern:{params:u.postalCodePattern,onlyIf:function(){return""!=u.postalCodePattern()},message:a.translate("zipCodeInvalid")}}),u.phoneNumber.extend({required:{params:!0,onlyIf:function(){return u.saveToAccount()},message:a.translate("phoneNumberRequiredText")},pattern:{params:"^[0-9()+ -]+$",message:a.translate("phoneNumberInvalid")},maxLength:{params:t.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("phoneNumberText"),maxLength:t.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH})}}),u.jobTitle.extend({required:!1}),u.companyName.extend({required:{params:!0,onlyIf:function(){return u.saveToAccount()},message:a.translate("companyNameRequiredText")}}),u.faxNumber.extend({required:!1}),u.isDefaultAddress.extend({required:!0}),u.isDefaultBillingAddress.extend({required:!0}),u.isDefaultShippingAddress.extend({required:!0}),u.alias.isData=!0,u.prefix.isData=!0,u.firstName.isData=!0,u.middleName.isData=!0,u.lastName.isData=!0,u.suffix.isData=!0,u.country.isData=!0,u.postalCode.isData=!0,u.address1.isData=!0,u.address2.isData=!0,u.address3.isData=!0,u.city.isData=!0,u.state.isData=!0,u.county.isData=!0,u.phoneNumber.isData=!0,u.jobTitle.isData=!0,u.companyName.isData=!0,u.faxNumber.isData=!0,u.stateIsDropDown=e.computed(function(){return u.stateList().length>0},u),u.selectedCountry.subscribe(function(e){if(void 0===u.selectedCountry()||""===u.selectedCountry())u.country(""),u.postalCodePattern("");else for(var r=0;r<u.countriesList().length;r++)u.countriesList()[r].countryCode==u.selectedCountry()&&u.country(u.countriesList()[r].displayName);void 0!==u.selectedState()&&""!==u.selectedState()&&u.selectedState(null),u.stateList([]);for(var r=0;r<u.countriesList().length;r++)u.countriesList()[r].countryCode===u.selectedCountry()&&(u.stateList(u.countriesList()[r].regions),u.selectedCountry()===t.UNITED_STATES?u.postalCodePattern(u.US_POSTAL_CODE_PATTERN):u.selectedCountry()===t.CANADA?u.postalCodePattern(u.CANADA_POSTAL_CODE_PATTERN):u.postalCodePattern(u.DEFAULT_POSTAL_CODE_PATTERN))}),u.computedCountry=e.computed({read:function(){var e=this.selectedCountry();return e?[e]:[]},write:function(e){1===e.length?(this.selectedCountry(e[0]),d.call(this,e[0])):this.selectedCountry(null)},owner:this}),u.computedState=e.computed({read:function(){var e=this.selectedState();return e?[e]:[]},write:function(e){1===e.length?(this.selectedState(e[0]),this.state(this.selectedState())):this.selectedState(null)},owner:this}),u.selectedState.subscribe(function(e){if(u.selectedState()){for(var t=0;t<u.stateList().length;t++)if(u.stateList()[t].abbreviation===u.selectedState()){u.state(u.stateList()[t].displayName),u.state_ISOCode(u.stateList()[t].regionCode);break}}else u.state(""),u.state_ISOCode(""),u.selectedState("")}),u.postalCode.subscribe(function(e){}),u.compare=function(e){return u.alias()===e.alias()&&u.prefix()===e.prefix()&&u.firstName()===e.firstName()&&u.middleName()===e.middleName()&&u.lastName()===e.lastName()&&u.suffix()===e.suffix()&&u.address1()===e.address1()&&u.address2()===e.address2()&&u.address3()===e.address3()&&u.city()===e.city()&&u.state()===e.state()&&u.postalCode()===e.postalCode()&&u.country()===e.country()&&u.county()===e.county()&&u.phoneNumber()===e.phoneNumber()&&u.jobTitle()===e.jobTitle()&&u.companyName()===e.companyName()&&u.faxNumber()===e.faxNumber()},u.compareTo=function(e){return u.alias()===e.alias()&&u.address1()===e.address1()&&u.address2()===e.address2()&&u.address3()===e.address3()&&u.city()===e.city()&&u.state()===e.state()&&u.postalCode()===e.postalCode()&&u.country()===e.country()&&u.county()===e.county()&&u.phoneNumber()===e.phoneNumber()&&u.jobTitle()===e.jobTitle()&&u.companyName()===e.companyName()&&u.faxNumber()===e.faxNumber()},u.isModified=function(){return u.alias.isModified()||u.firstName.isModified()||u.lastName.isModified()||u.address1.isModified()||u.address2.isModified()||u.address3.isModified()||u.county.isModified()||u.city.isModified()||u.state.isModified()||u.postalCode.isModified()||u.phoneNumber.isModified()||u.country.isModified()||u.isDefaultAddress.isModified()||u.isDefaultBillingAddress.isModified()||u.isDefaultShippingAddress.isModified()||u.companyName.isModified();
},u.isEmpty=function(){return""==u.alias()&&""==u.firstName()&&""==u.lastName()&&""==u.address1()&&""==u.address2()&&""==u.city()&&""==u.state()&&""==u.postalCode()},u.isValidForSelfRegistration=function(){return u.address1.isValid()&&u.address2.isValid()&&u.address3.isValid()&&u.city.isValid()&&u.state.isValid()&&u.postalCode.isValid()&&u.country.isValid()&&u.phoneNumber.isValid()&&u.companyName.isValid()},u.isValid=function(){return u.alias.isValid()&&u.prefix.isValid()&&u.firstName.isValid()&&u.middleName.isValid()&&u.lastName.isValid()&&u.suffix.isValid()&&u.address1.isValid()&&u.address2.isValid()&&u.address3.isValid()&&u.city.isValid()&&u.state.isValid()&&u.postalCode.isValid()&&u.country.isValid()&&u.phoneNumber.isValid()&&u.jobTitle.isValid()&&u.companyName.isValid()&&u.faxNumber.isValid()&&u.type.isValid()},u.validateForShippingMethod=function(){return u.country.isValid()&&u.state.isValid()&&u.postalCode.isValid()},u.validateNow=function(){return u.alias.isModified(!0),u.prefix.isModified(!0),u.firstName.isModified(!0),u.middleName.isModified(!0),u.lastName.isModified(!0),u.suffix.isModified(!0),u.address1.isModified(!0),u.address2.isModified(!0),u.address3.isModified(!0),u.city.isModified(!0),u.state.isModified(!0),u.postalCode.isModified(!0),u.country.isModified(!0),u.county.isModified(!0),u.phoneNumber.isModified(!0),u.jobTitle.isModified(!0),u.companyName.isModified(!0),u.faxNumber.isModified(!0),u.type.isModified(!0),u.isValid()},u.reset=function(){u.alias(""),u.firstName(""),u.lastName(""),u.address1(""),u.address2(""),u.address3(""),u.city(""),u.county(""),u.selectedState(""),u.state(""),u.postalCode(""),u.selectedCountry(""),u.country(""),u.phoneNumber(""),u.companyName(""),u.email(null),u.isDefaultAddress(!1),u.isDefaultBillingAddress(!1),u.isDefaultShippingAddress(!1),u.alias.isModified(!1),u.firstName.isModified(!1),u.lastName.isModified(!1),u.address1.isModified(!1),u.address2.isModified(!1),u.address3.isModified(!1),u.county.isModified(!1),u.city.isModified(!1),u.state.isModified(!1),u.postalCode.isModified(!1),u.country.isModified(!1),u.phoneNumber.isModified(!1),u.isDefaultAddress.isModified(!1),u.selectedCountry(u.defaultCountry())},u.copyTo=function(t){var r={ignore:["invalidTracker","saveToAccount","saveAddressTo"]},i=e.mapping.toJS(u,r),a=JSON.stringify(i);return e.mapping.fromJS(JSON.parse(a),u.listOfCopyToIgnoreProperties(),t),t.alias(u.alias()||""),t.prefix(u.prefix()||""),t.firstName(u.firstName()||""),t.middleName(u.middleName()||""),t.lastName(u.lastName()||""),t.suffix(u.suffix()||""),t.address1(u.address1()||""),t.address2(u.address2()||""),t.address3(u.address3()||""),t.city(u.city()||""),t.postalCode(u.postalCode()||""),t.county(u.county()||""),t.email(e.utils.unwrapObservable(u.email)),t.selectedCountry(u.selectedCountry()),t.selectedState(u.selectedState()),t.phoneNumber(u.phoneNumber()||""),t.jobTitle(u.jobTitle()||""),t.companyName(u.companyName()||""),t.faxNumber(u.faxNumber()||""),t.repositoryId=u.repositoryId,t.isDefaultAddress(u.isDefaultAddress()||!1),t.isDefaultBillingAddress(u.isDefaultBillingAddress()||!1),t.isDefaultShippingAddress(u.isDefaultShippingAddress()||!1),t.type(u.type()||""),t.__ko_mapping__.ignore=[],t},u.toJSON=function(){var t={ignore:["invalidTracker","saveToAccount","saveAddressTo"],include:["address1","address2","address3","alias","city","companyName","country","countryName","county","faxNumber","firstName","isDefaultAddress","jobTitle","lastName","middleName","phoneNumber","postalCode","prefix","suffix","regionName","repositoryId","state","selectedState","selectedCountry","isDefaultBillingAddress","isDefaultShippingAddress","isDefaultAddress","toJSON","state_ISOCode"]},r=e.mapping.toJS(this,t);return r.email||(r.email=null),delete r.countryList,delete r.stateList,delete r.stateIsDropDown,delete r.postalCodePattern,delete r.US_POSTAL_CODE_PATTERN,delete r.CANADA_POSTAL_CODE_PATTERN,delete r.DEFAULT_POSTAL_CODE_PATTERN,delete r.countriesList,r},u.listOfCopyToIgnoreProperties=function(){var e={ignore:["alias","prefix","firstName","lastName","middleName","suffix","address1","address2","address3","city","postalCode","county","email","selectedState","selectedCountry","phoneNumber","jobTitle","companyName","faxNumber","repositoryId","isDefaultAddress","isDefaultBillingAddress","isDefaultShippingAddress","type","computedCountry","computedState"]};return e},u.listOfCopyFromIgnoreProperties=function(){var e={ignore:["address1","address2","address3","alias","city","companyName","country","countryName","county","faxNumber","firstName","isDefaultAddress","jobTitle","lastName","middleName","phoneNumber","postalCode","prefix","suffix","regionName","repositoryId","state","invalidTracker","computedCountry","computedState"]};return e},u.copyFrom=function(t,r){u=this;var i,a=!1;e.mapping.fromJS(JSON.parse(JSON.stringify(t)),u.listOfCopyFromIgnoreProperties(),u),u.alias(t.alias||""),u.firstName(t.firstName||""),u.middleName(t.middleName||""),u.lastName(t.lastName||""),u.address1(t.address1||""),u.address2(t.address2||""),u.address3(t.address3||""),u.city(t.city||""),u.county(t.county||""),u.postalCode(t.postalCode||""),u.phoneNumber(t.phoneNumber||""),u.prefix(t.prefix||""),u.suffix(t.suffix||""),e.isObservable(u.email)&&u.email(t.email),u.repositoryId=t.repositoryId,t.selectedCountry?u.selectedCountry(t.selectedCountry):r&&($.each(r,function(e,r){if(r.countryCode===t.country)return a=!0,u.selectedCountry(r.countryCode),i=r.regions,!1}),a===!1&&u.selectedCountry("")),t.selectedState?u.selectedState(t.selectedState):i&&$.each(i,function(e,r){if(r.abbreviation===t.state)return u.selectedState(r.abbreviation),u.state_ISOCode(r.regionCode),!1}),u.jobTitle(t.jobTitle||""),u.companyName(t.companyName||""),u.faxNumber(t.faxNumber||""),u.isDefaultAddress(t.isDefaultAddress||!1),u.isDefaultBillingAddress(t.isDefaultBillingAddress||!1),u.isDefaultShippingAddress(t.isDefaultShippingAddress||!1),u.type(t.type||""),u.__ko_mapping__.ignore=[]},u.resetModified=function(){u.alias.isModified(!1),u.companyName.isModified(!1),u.firstName.isModified(!1),u.lastName.isModified(!1),u.address1.isModified(!1),u.address2.isModified(!1),u.city.isModified(!1),u.state.isModified(!1),u.postalCode.isModified(!1),u.country.isModified(!1),u.phoneNumber.isModified(!1),u.isDefaultAddress.isModified(!1),u.isDefaultBillingAddress.isModified(!1),u.isDefaultShippingAddress.isModified(!1)},u.defaultCountry=function(){if(u.countriesList()&&u.countriesList().length>0){if(null!==u.defaultCountryCode())for(var e in u.countriesList())if(u.defaultCountryCode()===u.countriesList()[e].countryCode)return u.defaultCountryCode();return u.countriesList()[0].countryCode}},u.selectedCountry(u.defaultCountry()),u.populateDynamicPropertiesMetaData=function(){var e=this,r={};r[t.PARENT]=t.ENDPOINT_CONTACT_INFO_TYPE,e.dynamicPropertyMetaInfo&&e.dynamicPropertyMetaInfo.dynamicPropertyMetaCache&&!e.dynamicPropertyMetaInfo.dynamicPropertyMetaCache.hasOwnProperty(t.ENDPOINT_CONTACT_INFO_TYPE)&&o.request(t.ENDPOINT_GET_ITEM_TYPE,r,function(r){e.dynamicPropertyMetaInfo.intializeDynamicProperties(r.specifications,t.ENDPOINT_CONTACT_INFO_TYPE)},function(e){},t.ENDPOINT_CONTACT_INFO_TYPE)},u}return c}),define("viewModels/shipping-group-relationship",["require","knockout","ccConstants"],function(e){"use strict";function t(e,t){t=t||0,this.catRefId=e.catRefId,this.productId=e.productId,this.childItems=void 0,this.quantity=r.observable(t),this.shippingOptions=r.observableArray(),this.shippingAddress=r.observable(),this.shippingMethod=r.observable()}var r=e("knockout");e("ccConstants");return t.prototype.generateKey=function(){var e=this.shippingAddress(),t=this.shippingMethod(),r="";return e&&(r+=JSON.stringify(e.toJSON())),t&&(r+=t.repositoryId),r},t.prototype.asMap=function(e){var t={},r=this.generateKey(),i={};if(this.commerceItemId)var a=this.catRefId+"_"+this.commerceItemId;else var a=this.catRefId;var n;this.shippingAddress()&&(n=this.shippingAddress().toJSON()),!e||!n||n.email&&n.email==e||(n.email=e);var o=this.shippingMethod()?{value:this.shippingMethod().repositoryId}:null;return this.commerceItemId?i[a]={productId:this.productId,catRefId:this.catRefId,quantity:parseFloat(this.quantity(),10),childItems:this.childItems,commerceItemId:this.commerceItemId}:i[a]={productId:this.productId,catRefId:this.catRefId,childItems:this.childItems,quantity:parseFloat(this.quantity(),10)},t[r]={items:i,shippingAddress:n,shippingMethod:o},t},t.prototype.addQuantity=function(e){this.quantity(parseFloat(this.quantity())+parseFloat(e))},t}),define("viewModels/cart-item-external-data",["knockout"],function(e){"use strict";function t(t){t=t||{},this.name=e.observable(t.name),this.actionCode=e.observable(t.actionCode),this.values=e.observable(t.values)}return t.prototype.toJSON=function(){var t=e.toJS(this);return t},t}),define("viewModels/cart-item",["require","knockout","pubsub","CCi18n","jquery","ccConstants","pageLayout/site","currencyHelper","koMapping","viewModels/shipping-group-relationship","viewModels/cart-item-external-data","ccStoreConfiguration"],function(e){"use strict";function t(){return{productId:arguments[0],productData:arguments[1],quantity:arguments[2],catRefId:arguments[3],selectedOptions:arguments[4],currency:arguments[5],discountInfo:arguments[6],rawTotalPrice:arguments[7],externalPrice:arguments[8],externalPriceQuantity:arguments[9],configuratorId:arguments[10],childItems:arguments[11],commerceItemId:arguments[12],unpricedExternalMessage:arguments[13],externalData:arguments[14],actionCode:arguments[15],lineAttributes:arguments[16],backOrderQuantity:arguments[17],preOrderQuantity:arguments[18],externalRecurringCharge:arguments[19],externalRecurringChargeFrequency:arguments[20],externalRecurringChargeDuration:arguments[21],addOnItem:arguments[22],shopperInput:arguments[23],configurablePropertyId:arguments[24],configurationOptionId:arguments[25]}}function r(e){var h=this;if(arguments.length>1&&"object"!=typeof arguments[0])return r.call(this,t.apply(void 0,arguments));e=e||{};var f=e.externalData||[],m=e.productData||{};if(h.productId=e.productId,h.productData=i.observable(e.productData),h.quantity=i.observable(e.quantity),h.repositoryId="",h.availabilityDate=i.observable(m.availabilityDate||null),h.catRefId=e.catRefId,h.itemTotal=i.observable(0),h.expanded=i.observable(!1),h.stockStatus=i.observable(!0),h.stockState=i.observable(m.stockState||""),h.orderableQuantityMessage=i.observable(),h.updatableQuantity=i.observable(e.quantity),h.commerceItemQuantity=i.observable(e.quantity),h.orderableQuantity=i.observable(),h.backOrderableQuantity=i.observable(e.backOrderQuantity),h.preOrderableQuantity=i.observable(e.preOrderQuantity),h.selectedOptions=e.selectedOptions,h.selectedSkuProperties=[],h.discountInfo=i.observable(e.discountInfo),h.rawTotalPrice=i.observable(e.rawTotalPrice),h.detailedItemPriceInfo=i.observableArray(),h.detailedRecurringChargeInfo=i.observableArray(),h.externalPrice=i.observable(e.externalPrice),h.externalPriceQuantity=i.observable(e.externalPriceQuantity),h.externalData=i.observableArray(f.map(function(e){return new u(e)})),h.addOnItem=!1,e.addOnItem&&(h.addOnItem=e.addOnItem),h.shopperInput=void 0,e.shopperInput&&(h.shopperInput=e.shopperInput),h.configurablePropertyId=void 0,e.configurablePropertyId&&(h.configurablePropertyId=e.configurablePropertyId),h.configurationOptionId=void 0,e.configurationOptionId&&(h.configurationOptionId=e.configurationOptionId),h.actionCode=i.observable(e.actionCode),h.externalRecurringCharge=i.observable(e.externalRecurringCharge),h.externalRecurringChargeFrequency=i.observable(e.externalRecurringChargeFrequency),h.externalRecurringChargeDuration=i.observable(e.externalRecurringChargeDuration),h.assetId=i.observable(e.assetId),h.serviceId=i.observable(e.serviceId),h.customerAccountId=i.observable(e.customerAccountId),h.billingAccountId=i.observable(e.billingAccountId),h.serviceAccountId=i.observable(e.serviceAccountId),h.activationDate=i.observable(e.activationDate),h.deactivationDate=i.observable(e.deactivationDate),h.isPersonalized=i.observable(!1),h.shippingGroupRelationships=i.observableArray([new d(h,e.quantity)]).extend({validation:[{validator:function(e){if(e){var t=e.reduce(function(e,t){return e+=parseFloat(t.quantity())},0);return!(t>h.quantity())}},message:n.t("ns.common:resources.quantityAllocationExceeded")},{validator:function(e){var t=e.reduce(function(e,t){return e+=parseFloat(t.quantity())},0);return!(t<h.quantity())},message:n.t("ns.common:resources.quantityNotFullyAllocated")}]}).isModified(!0),e.lineAttributes)for(var g=0;g<e.lineAttributes().length;g++)h[e.lineAttributes()[g].id()]=i.observable(e.lineAttributes()[g].value());h.displayName=i.observable(m.displayName||""),h.configuratorId=e.configuratorId,h.childItems=e.childItems,h.invalid=!1,h.isGWPChoicesAvaliable=i.observable(!1),m.giftProductData&&(h.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:m.giftProductData.giftWithPurchaseIdentifier,promotionId:m.giftProductData.promotionId,giftWithPurchaseQuantity:m.giftProductData.giftWithPurchaseQuantity}]),h.commerceItemId=e.commerceItemId,h.updatableQuantity.extend({required:{params:!0,message:n.t("ns.common:resources.quantityRequireMsg")},digit:{params:!0,message:n.t("ns.common:resources.quantityNumericMsg")},trigger:{value:"0",message:n.t("ns.common:resources.removeItemMsg")}}),h.originalPrice=i.observable(0),h.currentPrice=i.observable(0),h.priceListGroupId=i.observable(s.getInstance().selectedPriceListGroup().id),h.priceChangedMessage=i.computed(function(){return n.t("ns.common:resources.productPriceChanged",{originalPrice:c.handleFractionalDigits(h.originalPrice(),e.currency?"":e.currency.fractionalDigits),currency:void 0===e.currency?"":e.currency.symbol})}),h.unpricedExternalMessage=i.observable(e.unpricedExternalMessage||""),h.isUnpricedError=i.observable(h.unpricedExternalMessage().length>0),h.unpricedErrorMessage=i.computed(function(){var e="";return e=h.childItems&&h.childItems.length>0?n.t("ns.common:resources.configurableProductNoPrice",{message:h.unpricedExternalMessage()}):n.t("ns.common:resources.noPrice")}),h.productPriceChanged=i.observable(!1),h.productPriceChanged.extend({trigger:{value:!0,message:h.priceChangedMessage}}),p.getInstance().resetShippingGroupRelationships!==!1&&o.Topic(a.topicNames.CART_UPDATE_QUANTITY_SUCCESS).subscribe(h.resetShippingGroupRelationships.bind(h)),h.setUnpricedError=function(e){h.isUnpricedError(!0),h.unpricedExternalMessage(e?e:"")},h.clearUnpricedError=function(){h.isUnpricedError(!1),h.unpricedExternalMessage("")},h.revertQuantity=function(){h.updatableQuantity(h.quantity())},h.removeSpaces=function(e){return e?e.replace(/\s+/g,"-"):""},h.optionText=function(e){for(var t=h.selectedOptions[e],r=e+1;r<h.selectedOptions.length;r++){var i=h.selectedOptions[r];if(i.optionValue)return n.t("ns.common:resources.optionHasNext",{optionName:t.optionName,optionValue:t.optionValue})}return n.t("ns.common:resources.optionLast",{optionName:t.optionName,optionValue:t.optionValue})},h.toJSON=function(){var e=l.defaultOptions().ignore;l.defaultOptions().ignore=["productData","itemTotal","updatableQuantity","productPriceChanged","originalPrice","priceChangedMessage","isGWPChoicesAvaliable","giftData","unpricedErrorMessage","unpricedExternalMessage","isUnpricedError","isPersonalized","currentPrice","shippingGroupRelationships"];var t=l.toJS(h);return l.defaultOptions().ignore=e,t},h.addLimitsValidation=function(e,t,r,i){var a;if(h.orderableQuantity=t,h.stockStatus(e),r&&(a=r.orderLimit,h.availabilityDate(r.availabilityDate)),h.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),h.updatableQuantity.rules.remove(function(e){return"maxItemQuantity"==e.rule}),null!==t&&!isNaN(t)&&t>0){var o=n.t("ns.common:resources.insufficientStockMsg",{stockLimit:a?a:t});h.updatableQuantity.extend({maxItemQuantity:{params:{orderableQuantity:t,totalQuantity:h.getItemQuantityInCart,orderLimit:a},message:o}})}else{var s=n.t("ns.common:resources.outOfStockMsg");h.updatableQuantity.extend({max:{params:0,message:s}})}var c="";i&&r&&r.inStockQuantity>0&&h.updatableQuantity()>r.inStockQuantity&&(r.backOrderableQuantity>0?c=n.t("ns.common:resources.partialBackOrderMsg",{stockLimit:r.inStockQuantity}):r.preOrderableQuantity>0&&(c=n.t("ns.common:resources.partialPreOrderMsg",{stockLimit:r.inStockQuantity}))),h.orderableQuantityMessage(c),r&&h.stockState(r.stockStatus),h.updatableQuantity.isModified(!0)},h.addConfigurableStockValidation=function(e,t){for(var r=0,a=0,o=!1,s=null,c=null,l=0;l<e.length;l++)if(h.productId===e[l].productId&&h.catRefId===e[l].catRefId){if("IN_STOCK"===e[l].stockStatus||t&&("BACKORDERABLE"===e[l].stockStatus||"PREORDERABLE"===e[l].stockStatus))if(null!==e[l].orderableQuantity&&!isNaN(e[l].orderableQuantity)&&e[l].orderableQuantity>0){var d="";o=!0,s=e[l].availabilityDate,c=e[l].stockStatus,r=e[l].orderableQuantity,a=e[l].orderLimit,t&&e[l].inStockQuantity>0&&h.updatableQuantity()>e[l].inStockQuantity&&(e[l].backOrderableQuantity>0?d=n.t("ns.common:resources.partialBackOrderMsg",{stockLimit:e[l].inStockQuantity}):e[l].preOrderableQuantity>0&&(d=n.t("ns.common:resources.partialPreOrderMsg",{stockLimit:e[l].inStockQuantity})))}else o=!1;else o=!1;break}if(h.childItems&&o)for(var l=0;l<h.childItems.length;l++){for(var u=h.childItems[l].productId,p=h.childItems[l].catRefId,f=i.utils.unwrapObservable(h.childItems[l].quantity),m=0;m<e.length;m++)if(u===e[m].productId&&p===e[m].catRefId){if("IN_STOCK"===e[m].stockStatus||t&&("BACKORDERABLE"===e[m].stockStatus||"PREORDERABLE"===e[m].stockStatus))if(null!==e[m].orderableQuantity&&!isNaN(e[m].orderableQuantity)&&e[m].orderableQuantity>0){var g=Math.floor(e[m].orderableQuantity/f);r=r>g?g:r,a=a>e[m].orderLimit?e[m].orderLimit:a,o=!0}else o=!1;else o=!1;break}if(!o)break}if(h.stockStatus(o),h.availabilityDate(s),h.stockState(c),h.orderableQuantityMessage(d),h.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),h.updatableQuantity.rules.remove(function(e){return"maxItemQuantity"==e.rule}),o&&r>0){var v=n.t("ns.common:resources.insufficientStockMsg",{stockLimit:r>a?a:r});h.updatableQuantity.extend({maxItemQuantity:{params:{orderableQuantity:r,totalQuantity:h.getItemQuantityInCart,orderLimit:a,childItems:h.childItems},message:v}})}else{var y=n.t("ns.common:resources.configurableProductOutOfStockMsg");h.updatableQuantity.extend({max:{params:0,message:y}})}h.updatableQuantity.isModified(!0)},h.populateItemDynamicProperties=function(e){for(var t in e)h[t](e[t]())}}var i=e("knockout"),a=e("pubsub"),n=e("CCi18n"),o=e("jquery"),s=(e("ccConstants"),e("pageLayout/site")),c=e("currencyHelper"),l=e("koMapping"),d=e("viewModels/shipping-group-relationship"),u=e("viewModels/cart-item-external-data"),p=e("ccStoreConfiguration");return r.prototype.canAddShippingGroupRelationship=function(){var e=this.quantity()>this.shippingGroupRelationships().length;return e},r.prototype.addShippingGroupRelationship=function(){if(this.canAddShippingGroupRelationship()){this.shippingGroupRelationships.push(new d(this,1));var e=i.utils.arrayFirst(this.shippingGroupRelationships(),function(e){return e.quantity()>1});e.addQuantity(-1)}},r.prototype.removeShippingGroupRelationShip=function(e){if(this.shippingGroupRelationships().length>1){this.shippingGroupRelationships.remove(e);var t=this.shippingGroupRelationships()[0];t.addQuantity(e.quantity())}},r.prototype.resetShippingGroupRelationships=function(){this.shippingGroupRelationships().length<1?this.shippingGroupRelationships(new d(this,this.quantity())):(this.shippingGroupRelationships()[0].quantity(this.quantity()),this.shippingGroupRelationships.splice(1,this.shippingGroupRelationships().length))},r}),define("pageLayout/cart",["knockout","pubsub","notifier","notifications","storeKoExtensions","CCi18n","ccNumber","jquery","ccConstants","navigation","storageApi","pageLayout/site","viewModels/dynamicProperty","ccRestClient","viewModels/address","koMapping","ccStoreConfiguration","viewModels/cart-item","viewModels/shipping-group-relationship","viewModels/cart-item-external-data","currencyHelper"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f,m,g,v,y,b,E){"use strict";function I(r,a,o,l){if(I.singleInstance)throw new Error("Cannot instantiate more than one CartViewModel, use getInstance(pAdapter, pShoppingCartData)");var d=this,p=u.getInstance();d.currency=null,s.when(p.priceListGroupDeferred).done(function(){d.currency=p.selectedPriceListGroup().currency}),d.exchangeRate=e.observable(null),d.payShippingInSecondaryCurrency=e.observable(!1),d.payTaxInSecondaryCurrency=e.observable(!1),d.secondaryCurrency=e.observable(null),d.showSecondaryShippingData=e.pureComputed(function(){return null!=d.secondaryCurrency()&&d.payShippingInSecondaryCurrency()}),d.showSecondaryTaxData=e.pureComputed(function(){return null!=d.secondaryCurrency()&&d.payTaxInSecondaryCurrency()}),d.isChargeTaxShippingInSecondaryCurrency=e.pureComputed(function(){return d.payShippingInSecondaryCurrency()||d.payTaxInSecondaryCurrency()}),d.setSecondaryCurrencyData=function(e,r,i,a){d.exchangeRate(r),d.payTaxInSecondaryCurrency(a),d.secondaryCurrency(e),d.payShippingInSecondaryCurrency(i),s.Topic(t.topicNames.ORDER_SECONDARY_INFO_LOADED).publish(d)},d.user=o,d.deferLoadCart=s.Deferred(),d.deferLoadCartForUser=function(){d.user()&&(d.deferLoadCart.resolve(),h.dispose())};var h=d.user.subscribe(d.deferLoadCartForUser);d.isDirty=e.observable(!1),d.callPriceBeforeShippingMethods=!1,d.updatedFromRepository=!1,d.adapter=r,d.errors=e.observableArray([]),d.items=e.observableArray([]),d.allItems=e.observableArray([]),d.coupons=e.observableArray([]),d.orderItems=e.observableArray([]),d.orderCurrency={},d.couponMultiPromotions=e.observableArray([]),d.claimedCouponMultiPromotions=e.observableArray([]),d.numberOfItems=e.observable(0),d.total=e.observable(0),d.totalWithoutTax=e.observable(0),d.subTotal=e.observable(0),d.amount=e.observable(0),d.tax=e.observable(0),d.secondaryCurrencyTaxAmount=e.observable(0),d.secondaryCurrencyTotal=e.observable(0),d.primaryCurrencyTotal=e.observable(0),d.shipping=e.observable(0),d.secondaryCurrencyShippingAmount=e.observable(0),d.taxExclusiveAmount=e.observable(0),d.shippingDiscount=e.observable(0),d.secondaryCurrencyShippingDiscount=e.observable(0),d.currencyCode=e.observable(""),d.shippingMethod=e.observable(""),d.catalogId=e.observable(""),d.priceListGroupId=e.observable(""),d.shippingAddress=e.observable(""),d.currentCountry=e.observable(""),d.currentState=e.observable(""),d.selectedCountry=e.observable(""),d.selectedState=e.observable(""),d.shippingSurcharge=e.observable(0),d.secondaryCurrencyShippingSurcharge=e.observable(0),d.updatedProduct=e.observable(""),d.validateAndRedirectCart=e.observable(!1),d.orderDiscount=e.observable(0),d.orderDiscountDescList=e.observableArray([]),d.couponErrorMessage=e.observable(),d.skipPriceChange=e.observable(!1),d.isPricingRequired=e.observable(!1),d.invalidProductNames=[],d.isPreOrderBackOrderEnabled=!1,d.checkoutWithPaypalClicked=e.observable(!1),d.isMatchingCookieData=e.observable(!1),d.giftCards=e.observableArray([]),d.IINDetails=e.observableArray([]),d.dynamicProperties=e.observableArray([]),d.lineAttributes=e.observableArray([]),d.cartPriceListGroupId=e.observable(),d.showSelectedOptions=e.observable(!1),d.isSplitShipping=e.observable(!1),d.orderShippingGroups=e.observableArray(),d.mergeCart=e.observable(!1),d.storeConfiguration=g.getInstance(),d.usingImprovedShippingWidgets=e.observable(!1),l&&l.global&&l.global.site&&l.global.site.extensionSiteSettings&&l.global.site.extensionSiteSettings.storeEndpointSettings&&l.global.site.extensionSiteSettings.storeEndpointSettings.cartFields&&(d.fields=l.global.site.extensionSiteSettings.storeEndpointSettings.cartFields),d.callbacks={},d.combineLineItems=c.COMBINE_YES,d.giftWithPurchaseOrderMarkers=[],d.gwpQualified=!1,d.placeHolderItems=e.observableArray([]),d.skipGWPMessage=!1,d.currentOrderId=e.observable(null),d.currentOrderState=e.observable(null),d.recurringChargeAmount=e.observable(0),d.recurringChargeCurrencyCode=e.observable(""),d.recurringChargeShipping=e.observable(0),d.recurringChargeSubTotal=e.observable(0),d.recurringChargeSubTotalByFrequency=e.observableArray([]),d.recurringChargeTax=e.observable(0),d.recurringChargeTaxByFrequency=e.observableArray([]),d.recurringChargeTotal=e.observable(0),d.isOrderSubmissionInProgress=!1,d.isCurrentCallInProgress=!1,d.markDirty=function(){d.isDirty()||d.isOrderSubmissionInProgress||d.isDirty(!0)},d.emailAddressForGuestUser=null,d.cartUpdated=function(){d.isDirty()&&d.isDirty(!1),d.saveCartCookie(),s.Topic(t.topicNames.CART_UPDATED).publish(d),d.updateAllItemsArray(),d.validateAndRedirectCart()&&d.handleValidateCart()},d.isDirty.subscribe(d.priceCartIfNeccessary.bind(d)),d.handleValidateCart=function(){d.validatePrice=!0,s.Topic(t.topicNames.LOAD_CHECKOUT).publishWith(d,[{message:"success"}])},d.registerMultiShippingMethodsCallback=function(e){d.loadMultipleShippingMethods=e},d.updateCartItems=function(){if(d.events.length>0){var e,t=d.events.pop();switch(d.events.push(t),t.type){case w:e=t.product,d.addItem(e);break;case M:e=t.product,d.updateItemQuantity(e);break;case x:e=t.product,d.removeItemsByProduct(e.id),d.removeItem(e);break;case U:e=t.coupon,d.removeCouponFromCart(e);break;case k:e=t.coupon,d.addCouponToCart(e);break;case W:e=t.coupons,d.addMultipleCouponsToCart(e);break;case Y:e=t.product,d.addItem(e)}}},d.addItem=function(e){if(e&&e.childSKUs){var r,i,a=!1;if(d.isConfigurableItem(e)&&(i=[],i=d.getChildItemsDataAsCartItems(e)),e.selectedAddOnProducts&&e.selectedAddOnProducts.length>0){var n=d.getAddonDataAsCartItems(e);i&&i.length>0?i=i.concat(n):(i=[],i=n)}var o=null;if(!e.commerceItemId&&d.isConfigurableItem(e)?o=d.getConfigurableCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId):d.isProductWithAddons(e)?o=null:d.combineLineItems==c.COMBINE_YES&&(o=d.getCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId)),null!==o&&(r=o.quantity()+e.orderQuantity,o.quantity(r),e.giftProductData&&(o.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:e.giftProductData.giftWithPurchaseIdentifier,promotionId:e.giftProductData.promotionId,giftWithPurchaseQuantity:e.giftProductData.giftWithPurchaseQuantity}]),a=!0,s.Topic(t.topicNames.CART_UPDATE_QUANTITY_SUCCESS).publishWith(function(){})),null==e.commerceItemId&&d.isConfigurableItem(e)&&(o=d.getCartItemForReconfiguration(e.id,e.childSKUs[0].repositoryId,e.configuratorId),null!==o)){for(var l=[],u=0;u<o.childItems.length;u++)o.childItems[u].addOnItem&&l.push(o.childItems[u]);l.length>0&&(i=i.concat(l)),o.childItems=i,o.externalPrice(e.price),o.externalData((e.externalData||[]).map(function(e){return new b(e)})),o.actionCode(e.actionCode),o.externalRecurringCharge(e.externalRecurringCharge),o.externalRecurringChargeFrequency(e.externalRecurringChargeFrequency),o.externalRecurringChargeDuration(e.externalRecurringChargeDuration),o.assetId(e.assetId),o.serviceId(e.serviceId),o.customerAccountId(e.customerAccountId),o.billingAccountId(e.billingAccountId),o.serviceAccountId(e.serviceAccountId),o.activationDate(e.activationDate),o.deactivationDate(e.deactivationDate),o.clearUnpricedError(),o.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),d.getCartAvailability(),e.giftProductData&&(o.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:e.giftProductData.giftWithPurchaseIdentifier,promotionId:e.giftProductData.promotionId,giftWithPurchaseQuantity:e.giftProductData.giftWithPurchaseQuantity}]),a=!0}if(!a){r=e.orderQuantity;var p={productId:e.id,productData:e,quantity:r,catRefId:e.childSKUs[0].repositoryId,selectedOptions:e.selectedOptions,currency:d.currency,externalData:e.externalData,actionCode:e.actionCode,lineAttributes:d.lineAttributes,externalRecurringCharge:e.externalRecurringCharge,externalRecurringChargeFrequency:e.externalRecurringChargeFrequency,externalRecurringChargeDuration:e.externalRecurringChargeDuration,assetId:e.assetId,serviceId:e.serviceId,customerAccountId:e.customerAccountId,billingAccountId:e.billingAccountId,serviceAccountId:e.serviceAccountId,activationDate:e.activationDate,deactivationDate:e.deactivationDate,addOnItem:e.addOnItem,shopperInput:e.shopperInput};if(d.isConfigurableItem(e))s.extend(p,{configuratorId:e.configuratorId,childItems:i,externalPrice:e.price,externalPriceQuantity:-1});else if(d.isProductWithAddons(e)){s.extend(p,{childItems:i});for(var h=e.externalPriceQuantity,f=0;f<i.length;f++)if(i[f].externalPrice){h=-1;break}e.externalPrice&&s.extend(p,{externalPrice:e.externalPrice,externalPriceQuantity:h})}else e.externalPrice&&e.externalPriceQuantity&&s.extend(p,{externalPrice:e.externalPrice,externalPriceQuantity:e.externalPriceQuantity});var m=new v(p);m.skuProperties=e.skuProperties,m.selectedSkuProperties=e.selectedSkuProperties,d.items.push(m)}d.isDirty(!1),d.markDirty()}},d.addItems=function(e){for(var r,i=e.length,a=0;a<i;a++)if(r=e[a],r&&r.childSKUs){var n,o,c=!1;if(r.childItems){o=[];for(var l=0;l<r.childItems.length;l++){var u,p=r.childItems[l];u=p.catalogRefId?p.catalogRefId:p.catRefId;var h={productId:p.productId,quantity:p.quantity,catRefId:u,selectedOptions:p.selectedOptions,currency:d.currency,addOnItem:p.addOnItem,shopperInput:p.shopperInput,configurablePropertyId:p.configurablePropertyId,configurationOptionId:p.configurationOptionId};o[l]=new v(h)}}var f=d.getCartItem(r.id,r.childSKUs[0].repositoryId,r.commerceItemId);if(r.childItems&&r.childItems.length>0&&(f=null),null!==f){if(n=f.quantity()+r.orderQuantity,f.quantity(n),f.shippingGroupRelationships()&&f.shippingGroupRelationships().length>0){var m=f.shippingGroupRelationships()[0].quantity()+r.orderQuantity,g=f.shippingGroupRelationships()[0];g.quantity(m),g.updatableQuantity&&g.updatableQuantity(m)}r.giftProductData&&(f.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:r.giftProductData.giftWithPurchaseIdentifier,promotionId:r.giftProductData.promotionId,giftWithPurchaseQuantity:r.giftProductData.giftWithPurchaseQuantity}]),c=!0,s.Topic(t.topicNames.CART_UPDATE_QUANTITY_SUCCESS).publishWith(function(){})}if(!c){n=r.orderQuantity;var y,b={productId:r.id,productData:r,quantity:n,catRefId:r.childSKUs[0].repositoryId,selectedOptions:r.selectedOptions,currency:d.currency,shopperInput:r.shopperInput};r.childItems?s.extend(b,{configuratorId:r.configuratorId,childItems:o}):r.externalPrice&&r.externalPriceQuantity&&s.extend(b,{externalPrice:r.externalPrice,externalPriceQuantity:r.externalPriceQuantity}),y=new v(b),y.skuProperties=r.skuProperties,y.selectedSkuProperties=r.selectedSkuProperties,d.items.push(y)}}d.isDirty(!1),d.markDirty()},d.addToCart=function(){var e=d.getCookieDataAndCompare();d.events.push(new N(w,1,this)),d.mergeCart()||!e||d.isMatchingCookieData()?d.addItem(this):(d.getLocalData(e),0==e.items.length&&d.addItem(this))},s.Topic(t.topicNames.CART_PRICE_COMPLETE).subscribe(d.updateCartItems),d.removeFromCart=function(e){if(!d.isDirty()){d.events.push(new N(x,0,this));var t=d.getCookieDataAndCompare();if(t&&t.items.length>0&&!d.isMatchingCookieData())d.getLocalData(t);else{if(e)var r=d.getCartItem(this.id,this.childSKUs[0].repositoryId,e.commerceItemId);else var r=d.getCartItem(this.id,this.childSKUs[0].repositoryId);null!==r&&(r.updatableQuantity(0),d.removeItem(r))}}},d.removeChildItemFromCart=function(e,t,r){var i=d.items();r&&(i=r);for(var a=0;a<i.length;a++){if(i[a].commerceItemId==e.commerceItemId)return void i.splice(a,1);i[a].childItems&&i[a].childItems.length>0&&(d.removeChildItemFromCart(e,t,i[a].childItems),i[a].childItems&&0==i[a].childItems.length&&delete i[a].childItems)}!r&&t&&d.markDirty()},d.editChildItemFromCart=function(e,t){var r=d.items();t&&(r=t);for(var i=0;i<r.length;i++){if(r[i].commerceItemId==e.commerceItemId){r[i]=e,d.markDirty();break}r[i].childItems&&r[i].childItems.length>0&&d.editChildItemFromCart(e,r[i].childItems)}},d.addAddOnChildItemsToCartItem=function(e,t){var r=e,i=d.getAddonDataAsCartItems(t),a=r.childItems;
r.childItems?(a=a.concat(i),r.childItems=a):r.childItems=i,d.markDirty()},d.getCookieDataAndCompare=function(){var e=d.getCookieData();return e&&d.isMatchingCookieData(d.compareItems(e.items)),e},d.removeItem=function(e){if(void 0!==e){d.items.remove(e),d.allItems.remove(e);var r=d.events.pop();r&&r.type==j||d.markDirty(),s.Topic(t.topicNames.CART_REMOVE_SUCCESS).publishWith([{message:"success",commerceItemId:e.commerceItemId}])}},d.emptyCart=function(){d.items.removeAll(),d.allItems.removeAll(),d.shippingMethod(""),s.Topic(t.topicNames.CHECKOUT_RESET_SHIPPING_METHOD).publish(),d.numberOfItems(0),d.total(0),d.totalWithoutTax(0),d.subTotal(0),d.amount(0),d.shipping(0),d.secondaryCurrencyShippingAmount(0),d.taxExclusiveAmount(0),d.shippingDiscount(0),d.secondaryCurrencyShippingDiscount(0),d.shippingSurcharge(0),d.secondaryCurrencyShippingSurcharge(0),d.tax(0),d.secondaryCurrencyTaxAmount(0),d.secondaryCurrencyTotal(0),d.primaryCurrencyTotal(0),d.currencyCode(""),d.orderDiscount(0),d.giftCards([]),d.IINDetails([]),d.giftWithPurchaseOrderMarkers=[],d.placeHolderItems.removeAll(),d.orderDiscountDescList()&&d.orderDiscountDescList.removeAll(),d.coupons()&&d.coupons().length>0&&d.coupons.removeAll(),d.couponMultiPromotions()&&d.couponMultiPromotions().length>0&&(d.couponMultiPromotions.removeAll(),d.claimedCouponMultiPromotions.removeAll()),d.dynamicProperties()&&d.dynamicProperties().length>0&&d.dynamicProperties.removeAll(),d.cartUpdated()},d.handleOrderSubmit=function(){d.emptyCart(),d.user().loggedIn()&&d.user().orderId()&&""!=d.user().orderId()&&(d.user().orderId(""),d.user().persistedOrder(null),d.user().setLocalData("orderId"))},d.updateShippingMethod=function(){this&&this.repositoryId?(d.shippingMethod(this.repositoryId),d.shipping(this.shippingCost),d.secondaryCurrencyShippingAmount(this.secondaryCurrencyShippingCost()),d.items().length&&d.priceCartForCheckout()):(d.shippingMethod(""),d.shippingDiscount(0),d.secondaryCurrencyShippingDiscount(0),d.shippingSurcharge(0),d.secondaryCurrencyShippingSurcharge(0),0!=d.shipping()&&d.markDirty())},d.shippingMethodsLoaded=function(){var e,r=!1;if(this.shippingOptions()){for(var i=0;i<this.shippingOptions().length;i++)if(d.shippingMethod()&&d.shippingMethod()===this.shippingOptions()[i].repositoryId){e=this.shippingOptions()[i],r=!0;break}if(!r)for(var i=0;i<this.shippingOptions().length;i++)if(this.defaultShipping()===this.shippingOptions()[i].repositoryId){e=this.shippingOptions()[i];break}}s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).publishWith(e,[{message:"success"}])},d.updateShippingAddress=function(){if(this&&this.shippingAddress&&this.shippingAddress.validateForShippingMethod()){var e=d.shippingAddress();d.shippingAddress(this.shippingAddress.toJSON()),!d.isShippingAddressChanged(d.shippingAddress(),e)&&d.shippingMethod()||s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(this,[{message:"success"}])}else d.shippingAddress("")},d.updateShippingAddressAndReloadMethod=function(){if(this&&this.shippingAddress&&this.shippingAddress().validateForShippingMethod()){var e=d.shippingAddress();d.shippingAddress(this.shippingAddress.toJSON()),!d.isShippingAddressChanged(d.shippingAddress(),e)&&d.shippingMethod()||s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(this,[{message:"success"}])}else d.shippingAddress("")},d.resetShippingAddress=function(){d.shippingAddress("")},d.updateQuantity=function(e){e&&e.commerceItemId&&(this.commerceItemId=e.commerceItemId),d.events.push(new N(M,0,this));var t=d.getCookieDataAndCompare();d.mergeCart()||!t||d.isMatchingCookieData()?d.updateItemQuantity(this):d.getLocalData(t)},d.updateItemQuantity=function(e){var r;if(r=e.childSKUs?d.getCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId):d.getCartItem(e.productId,e.catRefId,e.commerceItemId),null!==r){var i=r;if(i.productPriceChanged()&&i.productPriceChanged(!1),i.updatableQuantity.isValid()){var a=parseInt(i.updatableQuantity());a?(i.quantity(parseFloat(i.updatableQuantity())),d.validateProduct(i),s.Topic(t.topicNames.CART_UPDATE_QUANTITY_SUCCESS).publishWith(function(){})):d.removeItem(i)}}},d.validateProduct=function(e){var t=this.catalogId();d.user().catalogId&&(t=d.user().catalogId());var r=new Array(e.catRefId,e.productId,t),i={},a={};a[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PRODUCT_AVAILABILITY,a[c.IDENTIFIER_KEY]="stockStatusForProdValidation";var n=d.storeConfiguration.getFilterToUse(a);n&&(i[c.FILTER_KEY]=n),d.adapter.loadJSON("getStockStatus",r,i,function(e){d.validateProductForPricing(e)},function(e){d.reloadCart()})},d.validateProductForPricing=function(e){if("IN_STOCK"===e.stockStatus||"PREORDERABLE"===e.stockStatus||"BACKORDERABLE"===e.stockStatus){for(var t=0;t<d.items().length;t++)if(d.items()[t].productId===e.productId&&d.items()[t].catRefId===e.catRefId){if(d.items()[t].updatableQuantity()<=e.orderableQuantity){d.items()[t].stockStatus(!0);var r="";return d.isPreOrderBackOrderEnabled&&e.inStockQuantity>0&&d.items()[t].updatableQuantity()>e.inStockQuantity&&(e.backOrderableQuantity>0?r=n.t("ns.common:resources.partialBackOrderMsg",{stockLimit:e.inStockQuantity}):e.preOrderableQuantity>0&&(r=n.t("ns.common:resources.partialPreOrderMsg",{stockLimit:e.inStockQuantity}))),d.items()[t].orderableQuantityMessage(r),d.items()[t].stockState(e.stockStatus),d.updatedProduct(d.items()[t].catRefId),void d.markDirty()}return void d.reloadCart()}d.reloadCart()}else d.reloadCart()};var f=function(){i.emptyGrowlMessages();for(var e=0;e<d.items().length;e++)d.items()[e].revertQuantity()};return d.getCartItem=function(e,t,r){for(var i=0;i<d.items().length;i++)if(d.items()[i].productId===e&&d.items()[i].catRefId===t&&(null==r&&!d.isConfigurableItem(d.items()[i])||r&&r==d.items()[i].commerceItemId))return d.items()[i];return null},d.getConfigurableCartItem=function(e,t,r){for(var i=0;i<d.items().length;i++)if(d.items()[i].productId===e&&d.items()[i].catRefId===t&&d.isConfigurableItem(d.items()[i])&&(!r&&!d.isConfigurableItem(d.items()[i])||r&&d.isConfigurableItem(d.items()[i])&&r==d.items()[i].commerceItemId))return d.items()[i];return null},d.getCartItemForReconfiguration=function(e,t,r){for(var i=0;i<d.items().length;i++)if(d.items()[i].productId===e&&d.items()[i].catRefId===t&&r&&d.isConfigurableItem(d.items()[i])&&r==d.items()[i].configuratorId)return d.items()[i];return null},d.addSkuIdFromConfigurableProduct=function(e,t){for(var r=0;t.childItems&&r<t.childItems.length;r++)e.indexOf(t.childItems[r].catalogRefId)===-1&&e.push(t.childItems[r].catalogRefId),t.childItems[r].childItems&&t.childItems[r].childItems.length>0&&d.addSkuIdFromConfigurableProduct(e,t.childItems[r])},d.addProductIdFromConfigurableProduct=function(e,t){for(var r=0;t.childItems&&r<t.childItems.length;r++)e.indexOf(t.childItems[r].productId)===-1&&e.push(t.childItems[r].productId),t.childItems[r].childItems&&t.childItems[r].childItems.length>0&&d.addProductIdFromConfigurableProduct(e,t.childItems[r])},d.createChildItemTree=function(e,t){for(var r=[],i=0;t.childItems&&i<t.childItems.length;i++)for(var a=0;a<e.length;a++){var n=s.extend(!0,{},e[a]);if(n.repositoryId==t.childItems[i].catalogRefId){var o=n.parentProducts[0],l=n;delete l[c.PARENT_PRODUCTS],o.childSKUs=[l],n.productVariantOptions&&n.productVariantOptions.length>0&&(o.selectedOptions=n.productVariantOptions[0]),o.orderQuantity=parseInt(t.childItems[i].quantity),o.catalogRefId=t.childItems[i].catalogRefId,o.externalData=t.childItems[i].externalData,o.actionCode=t.childItems[i].actionCode,o.price=t.childItems[i].externalPrice,o.externalRecurringCharge=t.childItems[i].externalRecurringCharge,o.externalRecurringChargeFrequency=t.childItems[i].externalRecurringChargeFrequency,o.externalRecurringChargeDuration=t.childItems[i].externalRecurringChargeDuration,o.assetId=t.childItems[i].assetId,o.serviceId=t.childItems[i].serviceId,o.customerAccountId=t.childItems[i].customerAccountId,o.billingAccountId=t.childItems[i].billingAccountId,o.serviceAccountId=t.childItems[i].serviceAccountId,o.activationDate=t.childItems[i].activationDate,o.deactivationDate=t.childItems[i].deactivationDate,t.childItems[i].childItems&&t.childItems[i].childItems.length>0&&(o.childItems=d.createChildItemTree(e,t.childItems[i])),r.push(o);break}}return r},d.updateChildTreeProductData=function(e,t){for(var r=0;e.childItems&&r<e.childItems.length;r++){if(t.id==e.childItems[r].productId)for(var i=0;i<t.childSKUs.length;i++)t.childSKUs[i].repositoryId==e.childItems[r].catRefId&&e.childItems[r].productData(jQuery.extend(!0,{},t));e.childItems[r].childItems&&e.childItems[r].childItems.length>0&&d.updateChildTreeProductData(e.childItems[r],t)}},d.getChildItemsDataAsCartItems=function(e){var t=[];return e.childItems&&(t=e.childItems.map(function(e){var t={productId:e.id,productData:e,quantity:e.orderQuantity,catRefId:e.catalogRefId,selectedOptions:e.selectedOptions,currency:d.currency,externalPrice:e.price,externalPriceQuantity:-1,externalData:e.externalData,actionCode:e.actionCode,externalRecurringCharge:e.externalRecurringCharge,externalRecurringChargeFrequency:e.externalRecurringChargeFrequency,externalRecurringChargeDuration:e.externalRecurringChargeDuration,assetId:e.assetId,serviceId:e.serviceId,customerAccountId:e.customerAccountId,billingAccountId:e.billingAccountId,serviceAccountId:e.serviceAccountId,activationDate:e.activationDate,deactivationDate:e.deactivationDate,addOnItem:e.addOnItem,shopperInput:e.shopperInput};return e.childItems&&e.childItems.length>0&&s.extend(t,{childItems:d.getChildItemsDataAsCartItems(e)}),new v(t)})),t},d.getAddonDataAsCartItems=function(e){var t=[];e.selectedAddOnProducts&&(t=e.selectedAddOnProducts.map(function(e){for(var t=[],r=0;r<e.addOnOptions.length;r++){var i=e.addOnOptions[r];if(i){var a={productId:i.product.id,productData:i.product,quantity:i.quantity,catRefId:i.sku.repositoryId,selectedOptions:i.selectedOptions,currency:d.currency,externalData:i.externalData,actionCode:i.actionCode,lineAttributes:i.lineAttributes,externalRecurringCharge:i.externalRecurringCharge,externalRecurringChargeFrequency:i.externalRecurringChargeFrequency,externalRecurringChargeDuration:i.externalRecurringChargeDuration,assetId:i.assetId,serviceId:i.serviceId,customerAccountId:i.customerAccountId,billingAccountId:i.billingAccountId,serviceAccountId:i.serviceAccountId,activationDate:i.activationDate,deactivationDate:i.deactivationDate,addOnItem:!0,shopperInput:i.shopperInput,configurablePropertyId:e.repositoryId,configurationOptionId:i.repositoryId};i.externalPrice&&s.extend(a,{externalPrice:i.externalPrice,externalPriceQuantity:-1})}d.isProductWithAddons(i.product)&&s.extend(a,{childItems:d.getAddonDataAsCartItems(i.product)}),t.push(new v(a))}if(t.length>0)return t}));for(var r=[],i=0;i<t.length;i++)r=r.concat(t[i]);return r},d.updateChildItemPrices=function(e,t){for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].productId==t[i].productId&&e[r].catRefId==t[i].catRefId){t[i].detailedItemPriceInfo(e[r].detailedItemPriceInfo),e[r].amount&&t[i].itemTotal(e[r].amount),e[r].rawTotalPrice&&t[i].rawTotalPrice(e[r].rawTotalPrice),e[r].id&&(t[i].repositoryId=e[r].id,d.currentOrderState()!=c.QUOTED_STATES&&d.currentOrderState()!=c.PENDING_PAYMENTS&&d.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&(e[r].commerceItemId?t[i].commerceItemId=e[r].commerceItemId:t[i].commerceItemId=e[r].id)),t[i].childItems&&e[r].childItems&&d.updateChildItemPrices(e[r].childItems,t[i].childItems);break}},d.getChildItemsAsCartItems=function(t){var r=[];return t.childItems&&(r=t.childItems.map(function(t){var r={productId:t.productId,quantity:t.quantity,catRefId:t.catRefId,selectedOptions:t.selectedOptions,currency:d.currency,externalPrice:t.externalPrice,externalPriceQuantity:t.externalPriceQuantity,externalData:t.externalData,actionCode:t.actionCode,externalRecurringCharge:t.externalRecurringCharge,externalRecurringChargeFrequency:t.externalRecurringChargeFrequency,externalRecurringChargeDuration:t.externalRecurringChargeDuration,assetId:t.assetId,serviceId:t.serviceId,customerAccountId:t.customerAccountId,billingAccountId:t.billingAccountId,serviceAccountId:t.serviceAccountId,activationDate:t.activationDate,deactivationDate:t.deactivationDate,rawTotalPrice:t.rawTotalPrice,commerceItemId:t.commerceItemId,addOnItem:t.addOnItem,shopperInput:t.shopperInput,configurablePropertyId:t.configurablePropertyId,configurationOptionId:t.configurationOptionId};t.childItems&&t.childItems.length>0?s.extend(r,{childItems:d.getChildItemsAsCartItems(t)}):s.extend(r,{backOrderQuantity:t.backOrderQuantity,preOrderQuantity:t.preOrderQuantity});var i=new v(r);return i.displayName=e.observable(t.displayName),i.detailedItemPriceInfo(t.detailedItemPriceInfo),i.itemTotal(t.amount),i.detailedRecurringChargeInfo(t.detailedRecurringChargeInfo),i.repositoryId=t.id,i})),r},d.checkCpqItemValidity=function(e,t,r,i,a){for(var n=0;t.childItems&&n<t.childItems.length;n++){if(e.id==t.childItems[n].productId)if(e.active&&e.childSKUs&&0!=e.childSKUs.length){var o=0,s=!1;for(o=0;e.childSKUs&&o<e.childSKUs.length;o++)if(e.childSKUs[o].repositoryId==t.childItems[n].catRefId){s=!0;break}e.childSKUs[o]&&!e.childSKUs[o].active?t.childItems[n].addOnItem?a.indexOf(t.childItems[n])==-1&&a.push(t.childItems[n]):i.indexOf(t.childItems[n].catRefId)==-1&&i.push(t.childItems[n].catRefId):e.childSKUs[o]&&null==e.childSKUs[o].listPrice&&t.childItems[n].addOnItem?a.indexOf(t.childItems[n])==-1&&a.push(t.childItems[n]):!s&&t.childItems[n].addOnItem&&a.indexOf(t.childItems[n])==-1&&a.push(t.childItems[n])}else t.childItems[n].addOnItem?a.indexOf(t.childItems[n])==-1&&a.push(t.childItems[n]):r.indexOf(e.displayName)==-1&&r.push(e.displayName);t.childItems[n].childItems&&t.childItems[n].childItems.length>0&&d.checkCpqItemValidity(e,t.childItems[n],r,i,a)}},d.getChildItemsCookie=function(e){for(var t=[],r=0;e.childItems&&r<e.childItems.length;r++){var i=e.childItems[r];t[r]={productId:i.productId,quantity:i.quantity(),catRefId:i.catRefId,amount:i.itemTotal(),id:i.repositoryId,rawTotalPrice:i.rawTotalPrice(),stockStatus:i.stockStatus(),displayName:i.displayName(),selectedOptions:i.selectedOptions,selectedSkuProperties:i.selectedSkuProperties,discountInfo:i.discountInfo(),detailedItemPriceInfo:i.detailedItemPriceInfo(),externalPrice:i.externalPrice(),externalPriceQuantity:i.externalPriceQuantity(),configuratorId:i.configuratorId,externalData:i.externalData(),actionCode:i.actionCode(),commerceItemId:i.commerceItemId,unpricedExternalMessage:i.unpricedExternalMessage(),isGWPChoicesAvaliable:i.isGWPChoicesAvaliable(),giftData:i.giftData?i.giftData:null,giftWithPurchaseCommerceItemMarkers:i.giftWithPurchaseCommerceItemMarkers,priceListGroupId:i.priceListGroupId(),invalid:i.invalid,isPersonalized:i.isPersonalized(),detailedRecurringChargeInfo:i.detailedRecurringChargeInfo(),externalRecurringCharge:i.externalRecurringCharge(),externalRecurringChargeFrequency:i.externalRecurringChargeFrequency(),externalRecurringChargeDuration:i.externalRecurringChargeDuration(),assetId:i.assetId(),serviceId:i.serviceId(),customerAccountId:i.customerAccountId(),billingAccountId:i.billingAccountId(),serviceAccountId:i.serviceAccountId(),activationDate:i.activationDate(),deactivationDate:i.deactivationDate(),addOnItem:i.addOnItem,shopperInput:i.shopperInput,configurablePropertyId:i.configurablePropertyId,configurationOptionId:i.configurationOptionId},i.childItems&&i.childItems.length>0&&(t[r].childItems=d.getChildItemsCookie(i))}return t},d.getRemoveCouponReadText=function(){return n.t("ns.common:resources.removeCouponLinkReadText")},d.populateGiftCards=function(e,t){if(d.giftCards().length>0)for(var r=0;r<d.giftCards().length;r++){var i={},a=d.giftCards()[r];i.type=c.GIFT_CARD_PAYMENT_TYPE,i.giftCardNumber=a.giftCardNumber(),i.giftCardPin=a.giftCardPin(),a.amountInGiftCard()&&(t&&t.type===H&&t.product.giftCardNumber()===a.giftCardNumber()||(i.amount=a.amountInGiftCard())),e.payments.push(i)}},d.populateIINs=function(e,t){if(d.IINDetails().length>0)for(var r=0;r<d.IINDetails().length;r++){var i=d.IINDetails()[r];i.IIN=i.IIN;var a=c.IIN_PAYMENT_TYPE;i.type&&(a=i.type),i.type=a,e.payments.push(i)}},d.applyIINsToCart=function(e){d.IINDetails([]);for(var t=0;t<e.length;t++)d.IINDetails.push(e[t]);d.events.push(new N(q,0,e)),d.markDirty()},d.validateGiftCards=function(){for(var e=0;e<d.giftCards().length;e++){var t=d.giftCards()[e];if(!t.validateNow())return!1}return!0},d.updateAllItemsArray=function(){d.allItems.removeAll(),e.utils.arrayForEach(d.items(),function(e){d.allItems.push(e)}),e.utils.arrayForEach(d.placeHolderItems(),function(e){d.allItems.push(e)})},d.isConfigurableItem=function(e){return void 0!=e.configuratorId&&null!=e.configuratorId&&""!=e.configuratorId||void 0!=e.childItems&&null!=e.childItems&&""!=e.childItems},d.isProductWithAddons=function(e){return!!(e.selectedAddOnProducts&&e.selectedAddOnProducts.length>0)},d.getDerivedTotal=function(e,t){var r=this.isChargeTaxShippingInSecondaryCurrency()?e:t;return r},s.Topic(t.topicNames.CART_ADD).subscribe(d.addToCart),s.Topic(t.topicNames.CART_REMOVE).subscribe(d.removeFromCart),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(d.handleOrderSubmit),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).subscribe(d.handleOrderSubmit),s.Topic(t.topicNames.CART_UPDATE_QUANTITY).subscribe(d.updateQuantity),s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).subscribe(d.updateShippingMethod),s.Topic(t.topicNames.PAGE_CONTEXT_CHANGED).subscribe(i.emptyGrowlMessages),s.Topic(t.topicNames.PAGE_VIEW_CHANGED).subscribe(f),s.Topic(t.topicNames.PAGE_LAYOUT_UPDATED).subscribe(d.initCatalog.bind(d)),s.Topic(t.topicNames.LOAD_CHECKOUT).subscribe(d.checkPriceDataAndRedirect),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).subscribe(d.updateShippingAddress),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS_INVALID).subscribe(d.resetShippingAddress),s.Topic(t.topicNames.USER_PROFILE_ADDRESSES_REMOVED).subscribe(d.resetShippingAddress),s.Topic(t.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).subscribe(d.loadCartForProfile.bind(d)),s.Topic(t.topicNames.USER_LOAD_CART).subscribe(d.loadCartForProfile.bind(d)),s.Topic(t.topicNames.USER_CLEAR_CART).subscribe(d.clearCartForProfile.bind(d)),s.Topic(t.topicNames.REFRESH_USER_CART).subscribe(d.refreshUserCart.bind(d)),s.Topic(t.topicNames.REMOVE_INVALID_ITEMS).subscribe(d.handleInvalidItems.bind(d)),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).subscribe(d.clearPins.bind(d)),s.Topic(t.topicNames.PAGE_CHANGED).subscribe(function(e){d.clearLoadedOrder(e),d.clearPins()}),s.Topic(t.topicNames.USER_LOGOUT_SUBMIT).subscribe(d.clearPins.bind(d)),s.Topic(t.topicNames.USER_SESSION_RESET).subscribe(d.clearPins.bind(d)),s.Topic(t.topicNames.GIFTCARD_REAPPLY_PINS).subscribe(d.reApplyGiftCardPins.bind(d)),s.Topic(t.topicNames.PLACE_HOLDER_REMOVE).subscribe(function(e){d.removePlaceHolderFromCart(e)}),s.Topic(t.topicNames.USER_LOAD_SHIPPING).subscribe(function(e){d.user()&&!d.user().loggedIn()&&d.resetShippingAddress()}),d}function T(e){var t=null;if(e.variant&&e.variant.length>0){var r=e.variant;t=[];for(var i=0;i<r.length;i++)t.push({optionName:r[i].optionName,optionValue:r[i].optionValue})}return t}function P(t,r,i,a,n,o,s,c){var l=this;return l.code=e.observable(t),l.description=e.observable(r),l.status=e.observable(i),l.level=e.observable(a),l.id=e.observable(n),l.totalAdjustment=e.observable(o),l.name=e.observable(s),l.longDescription=e.observable(c),l.toJSON=function(){var t=e.toJS(l);return t},l}function C(t,r,i,a){var n=this;return n.code=e.observable(t),n.couponStatus=e.observable(i?i:""),n.promotions=e.observableArray([]),n.newPromotionInfo=function(t,r,i,a,n,o,s){var c={};return c.promotionId=e.observable(t?t:""),c.promotionDesc=e.observable(r?r:""),c.promotionApplied=e.observable(!!i&&i),c.promotionLevel=e.observable(a?a:""),c.totalAdjustment=e.observable(n?n:"0"),c.promotionName=e.observable(o?o:""),c.promotionLongDesc=e.observable(s?s:""),c.toJSON=function(){var t=e.toJS(c);return t},c},n.populatePromotionData=function(e,t,r){t.promotionDesc(e.promotionDesc),t.promotionApplied(r?r:e.promotionApplied),t.promotionLevel(e.promotionLevel),t.totalAdjustment(e.totalAdjustment),t.promotionName(e.promotionName),t.promotionLongDesc(e.promotionLongDesc)},n.populateCouponData=function(t,r){var i=this,a=e.observableArray([]),n=!1;if(t&&t.length>0)for(var o=0;o<t.length;o++){n=!1;for(var s=0;s<i.promotions().length;s++)if(t[o].promotionId==i.promotions()[s].promotionId()){i.populatePromotionData(t[o],i.promotions()[s],r),n=!0;break}n||a.push(i.newPromotionInfo(t[o].promotionId,t[o].promotionDesc,r?r:t[o].promotionApplied,t[o].promotionLevel,t[o].totalAdjustment,t[o].promotionName,t[o].promotionLongDesc))}for(var o=0;o<a().length;o++)i.promotions.push(a()[o])},n.toJSON=function(){var t=e.toJS(n);return t},r&&r.length>0&&n.populateCouponData(r,a),n}function S(e,t,r,i,a,n){for(var o=!1,s=0;s<e.length;s++){for(var l=!1,d=0;t&&d<t().length;d++)if(e[s].productId==t()[d].productId&&e[s].catRefId==t()[d].catRefId&&(!i.isConfigurableItem(e[s])&&!i.isConfigurableItem(t()[d])&&null!=e[s].commerceItemId&&e[s].commerceItemId==t()[d].commerceItemId||i.isConfigurableItem(e[s])&&i.isConfigurableItem(t()[d])&&null!=e[s].commerceItemId&&e[s].commerceItemId==t()[d].commerceItemId)){t()[d].quantity(e[s].quantity),t()[d].discountInfo(e[s].discountInfo),t()[d].rawTotalPrice(e[s].rawTotalPrice),t()[d].selectedOptions=e[s].variant,r&&t()[d].updatableQuantity(e[s].quantity),t()[d].itemTotal(e[s].price),t()[d].detailedItemPriceInfo(e[s].detailedItemPriceInfo),t()[d].repositoryId=e[s].id,i.isConfigurableItem(t()[d])&&i.isConfigurableItem(e[s])&&i.updateChildItemPrices(e[s].childItems,t()[d].childItems),t()[d].detailedRecurringChargeInfo(e[s].detailedRecurringChargeInfo),t()[d].repositoryId=e[s].id,t()[d].childItems&&t()[d].childItems.length>0&&e[s].childItems&&e[s].childItems.length>0&&i.updateChildItemPrices(e[s].childItems,t()[d].childItems),t()[d].giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,t()[d].isGWPChoicesAvaliable(!1),i.addGiftDataToItem(t()[d],a),delete t()[d].giftWithPurchaseSelections,i.updateItemDynamicProperties(t()[d],e[s]),l=!0;break}if(i.currentOrderState()!=c.QUOTED_STATES&&i.currentOrderState()!=c.PENDING_PAYMENTS&&i.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE){if(!l)for(var d=0;t&&d<t().length;d++)if(!t()[d].commerceItemId){t()[d].quantity(e[s].quantity),t()[d].discountInfo(e[s].discountInfo),t()[d].rawTotalPrice(e[s].rawTotalPrice),(r||t()[d].giftWithPurchaseCommerceItemMarkers&&t()[d].giftWithPurchaseCommerceItemMarkers.length||e[s].giftWithPurchaseCommerceItemMarkers&&e[s].giftWithPurchaseCommerceItemMarkers.length)&&t()[d].updatableQuantity(e[s].quantity),t()[d].itemTotal(e[s].price),t()[d].detailedItemPriceInfo(e[s].detailedItemPriceInfo),t()[d].repositoryId=e[s].id,i.isConfigurableItem(t()[d])&&i.isConfigurableItem(e[s])&&i.updateChildItemPrices(e[s].childItems,t()[d].childItems),t()[d].detailedRecurringChargeInfo(e[s].detailedRecurringChargeInfo),t()[d].repositoryId=e[s].id,t()[d].childItems&&t()[d].childItems.length>0&&e[s].childItems&&e[s].childItems.length>0&&i.updateChildItemPrices(e[s].childItems,t()[d].childItems),t()[d].giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,t()[d].isGWPChoicesAvaliable(!1),i.addGiftDataToItem(t()[d],a),delete t()[d].giftWithPurchaseSelections,i.updateItemDynamicProperties(t()[d],e[s]),t()[d].commerceItemId=e[s].id,l=!0;break}if((r||A(e[s].discountInfo))&&!l){var u=T(e[s]),p=null;i.isConfigurableItem(e[s])&&(p=[],p=i.getChildItemsAsCartItems(e[s]));var h={productId:e[s].productId,quantity:e[s].quantity,catRefId:e[s].catRefId,selectedOptions:u,currency:I.singleInstance.currency,discountInfo:e[s].discountInfo,rawTotalPrice:e[s].rawTotalPrice,externalPrice:e[s].externalPrice,externalPriceQuantity:e[s].externalPriceQuantity,configuratorId:e[s].configuratorId,childItems:p,commerceItemId:e[s].commerceItemId,unpricedExternalMessage:e[s].unpricedExternalMessage,externalData:e[s].externalData,actionCode:e[s].actionCode,lineAttributes:I.singleInstance.lineAttributes,externalRecurringCharge:e[s].externalRecurringCharge,externalRecurringChargeFrequency:e[s].externalRecurringChargeFrequency,externalRecurringChargeDuration:e[s].externalRecurringChargeDuration,assetId:e[s].assetId,serviceId:e[s].serviceId,customerAccountId:e[s].customerAccountId,billingAccountId:e[s].billingAccountId,serviceAccountId:e[s].serviceAccountId,activationDate:e[s].activationDate,deactivationDate:e[s].deactivationDate,addOnItem:e[s].addOnItem,shopperInput:e[s].shopperInput},f=new v(h);f.itemTotal(e[s].price),f.detailedItemPriceInfo(e[s].detailedItemPriceInfo),f.detailedRecurringChargeInfo(e[s].detailedRecurringChargeInfo),f.repositoryId=e[s].id,i.updateItemDynamicProperties(f,e[s]),f.giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,i.addGiftDataToItem(f,a),t.push(f),o=!0}}}for(var d=0;t&&d<t().length;d++){for(var l=!1,s=0;s<e.length;s++)if(e[s].productId==t()[d].productId&&e[s].catRefId==t()[d].catRefId){l=!0;break}l||(t.remove(t()[d]),d--)}return o}function A(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].giftWithPurchaseDiscountInfo&&e[t].giftWithPurchaseDiscountInfo.length)return!0;return!1}function _(e){for(var t={},r=0;r<e.childSKUs.length;r++)e.childSKUs[r].primaryThumbImageURL&&(t[e.childSKUs[r].repositoryId]=e.childSKUs[r].primaryThumbImageURL);return t}function O(e){this.operation="availability",this.products=new Array,this.catalogId=e.catalogId();for(var t=0;t<e.items().length;t++){var r=e.items()[t].productId,i=e.items()[t].catRefId;i&&(r=r+":"+i),this.products.push(r),this.getProductSkuFromChild=function(e){for(var t=0;t<e.childItems.length;t++){var r=e.childItems[t].productId,i=e.childItems[t].catRefId;i&&(r=r+":"+i),this.products.push(r),e.childItems[t].childItems&&e.childItems[t].childItems.length>0&&this.getProductSkuFromChild(e.childItems[t])}},e.isConfigurableItem(e.items()[t])&&e.items()[t].childItems&&e.items()[t].childItems.length>0&&this.getProductSkuFromChild(e.items()[t])}s.unique(this.products),this.products=this.products.join(",")}function R(e){this.shoppingCart=new Object,this.shoppingCart.items=e.items(),this.shoppingCart.coupons=e.coupons(),!e.mergeCart()&&e.currentOrderId()&&(this.id=e.currentOrderId()),e.giftWithPurchaseOrderMarkers&&e.giftWithPurchaseOrderMarkers.length&&(this.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers),this.combineLineItems=e.combineLineItems,this.payments=[],e.populateDynamicProperties(this)}function N(e,t,r){this.type=e,this.quantity=t,e==k||e==U?this.coupon=r:e===W?this.coupons=r:e===B?this.products=r:this.product=r}function D(e,t){this.operation="availability",this.products=new Array,this.catalogId=t,this.products.push(e.id+":"+e.catalogRefId),this.getProductSkuFromChild=function(e){for(var t=0;t<e.childItems.length;t++){var r=e.childItems[t].id,i=e.childItems[t].catalogRefId;i&&(r=r+":"+i),this.products.push(r),e.childItems[t].childItems&&e.childItems[t].childItems.length>0&&this.getProductSkuFromChild(e.childItems[t])}},e.configuratorId&&e.childItems&&e.childItems.length>0&&this.getProductSkuFromChild(e),this.getProductSkuFromAddons=function(e){for(var t=0;t<e.selectedAddOnProducts.length;t++)for(var r=0;r<e.selectedAddOnProducts[t].addOnOptions.length;r++){var i=e.selectedAddOnProducts[t].addOnOptions[r],a=i.product.repositoryId+":"+i.sku.repositoryId;this.products.push(a),i.product.selectedAddOnProducts&&i.product.selectedAddOnProducts.length>0&&this.getProductSkuFromAddons(i.product)}},e.selectedAddOnProducts&&e.selectedAddOnProducts.length>0&&this.getProductSkuFromAddons(e),s.unique(this.products),this.products=this.products.join(",")}function L(e,t){this.operation="availability",this.products=new Array,this.catalogId=t;for(var r,i=0;i<e.length;i++)if(r=e[i],this.products.push(r.id+":"+r.catalogRefId),r.childItems)for(var a=0;a<r.childItems.length;a++){var n=r.childItems[a].productId,o=r.childItems[a].catRefId;o&&(n=n+":"+o),this.products.push(n)}this.products=this.products.join(",")}var w=1,M=2,x=3,k=4,U=5,F=6,G=7,H=8,V=9,Y=10,j=11,q=12,$=13,B=14,W=15,K="CartViewModel",z="GiftWithPurchase",Q=c.APPLICATION_STOREFRONT;return I.prototype.loadCartForProfile=function(i){var a=this;r.clearError(K);if(a.isCurrentCallInProgress)a.isCurrentCallInProgress=!1;else if(a.isCurrentCallInProgress=!0,a.user()&&!a.user().loggedinAtCheckout()){if(i&&i.catalog){var o=i.catalog.repositoryId;this.catalogId()!=o&&this.catalogId(o)}i&&i.priceListGroup&&i.priceListGroup.id&&this.priceListGroupId(i.priceListGroup.id);var l={},d={};d[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PROFILE_ORDER,d[c.IDENTIFIER_KEY]="loadCartForProfile";var u=a.storeConfiguration.getFilterToUse(d);u&&(l[c.FILTER_KEY]=u),a.adapter.loadJSON("getCurrentProfileOrder","0",l,function(r){if(void 0===r&&(a.shippingAddress()&&e.utils.unwrapObservable(a.shippingAddress().email)&&(a.shippingAddress().email=null),s.Topic(t.topicNames.CART_READY).publish(a)),r&&r.orderId){a.user().orderId(r.orderId),a.user().persistedOrder(r),a.user().setLocalData("orderId");a.removeItems(r);a.mergeItems(r),a.isPricingRequired(!0),a.validateServerCart(),a.getProductData(),a.getDynamicPropertiesMetadata(!0),a.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM),a.updateDynamicProperties(r),r.discountInfo.orderImplicitDiscountList&&a.orderDiscountDescList(r.discountInfo.orderImplicitDiscountList),r.discountInfo.unclaimedCouponsMap&&a.populateCoupons(r.discountInfo.unclaimedCouponsMap,c.COUPON_STATUS_UNCLAIMED),r.discountInfo.orderCouponsMap&&a.populateCoupons(r.discountInfo.orderCouponsMap,c.COUPON_STATUS_CLAIMED),a.couponMultiPromotions.splice(0),r.discountInfo.unclaimedCouponMultiPromotions&&a.populateCouponMultiPromotions(r.discountInfo.unclaimedCouponMultiPromotions,c.COUPON_STATUS_UNCLAIMED,c.PROMOTION_NOT_APPLIED),r.discountInfo.claimedCouponMultiPromotions&&a.populateCouponMultiPromotions(r.discountInfo.claimedCouponMultiPromotions,c.COUPON_STATUS_CLAIMED,c.PROMOTION_APPLIED),a.populateClaimedCouponMultiPromotions(a.couponMultiPromotions());for(var i=a.coupons().length-1;i>=0;i--)r.discountInfo.orderCouponsMap.hasOwnProperty(a.coupons()[i].code())||r.discountInfo.unclaimedCouponsMap.hasOwnProperty(a.coupons()[i].code())||a.coupons.splice(i,0);if(r.shippingGroups&&1==r.shippingGroups.length&&a.shippingAddress&&""==a.shippingAddress()&&!(a.user()&&a.user().shippingAddressBook()&&a.user().shippingAddressBook.length>0)){var o={translate:function(e,t){return n.t("ns.common:resources."+e,t)}},l=new f("cart-shipping-address","",o,a.contextData.page.shippingCountriesPriceListGroup,a.contextData.page.defaultShippingCountry);l.copyFrom(r.shippingGroups[0].shippingAddress,a.contextData.page.shippingCountriesPriceListGroup),l.resetModified(),l.validateForShippingMethod()&&(a.shippingAddress(l),a.shippingMethod(r.shippingGroups[0].shippingMethod.value),s.Topic(t.topicNames.CART_SHIPPING_ADDRESS_UPDATED).publishWith())}}else a.items()&&a.items().length>0&&(a.validateServerCart(),a.getProductData(),a.createCurrentProfileOrder())},function(e){a.isCurrentCallInProgress=!1,a.loadCart()})}},I.prototype.loadOrderForProfile=function(e,t){var r=this;r.user()||(r.user=t),r.user().persistedOrder(null),r.emptyCart(),r.orderCurrency=e.priceListGroup.currency,r.orderItems(e.order.items),r.mergeItems(e),r.updateCartData(e,!1,!0),r.cartUpdated()},I.prototype.clearLoadedOrder=function(e){var r=this;!r.mergeCart()&&r.currentOrderId()&&(e.pageId==c.PAGE_TYPE_CHECKOUT||e.pageId==c.PAGE_TYPE_PAYMENT||r.currentOrderState()!=c.QUOTED_STATES&&r.currentOrderState()!=c.PENDING_PAYMENTS&&r.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE||(r.currentOrderId(null),r.currentOrderState(null),r.orderItems([]),r.orderCurrency={},r.emptyCart(),r.loadCartForProfile(r.user()),s.Topic(t.topicNames.LOAD_ORDER_RESET_ADDRESS).publish()))},I.prototype.isShippingAddressChanged=function(e,t){return e.state&&e.state!=t.state||e.postalCode&&e.postalCode!=t.postalCode||e.country&&e.country!=t.country;
},I.prototype.removeItems=function(e){for(var t=this,r=!1,i=e.shoppingCart.items,a=0;a<i.length;a++)i[a].isItemValid||(i[a].displayName&&t.invalidProductNames.indexOf(i[a].displayName)==-1&&t.invalidProductNames.push(i[a].displayName),i.splice(a,1),a--,r=!0);return r},I.prototype.compareItems=function(e){var t,r=this,i=e;if(i.length!=r.items().length||0==i.length)return!1;if(0==i.length)return!0;var a=r.events.pop();a&&r.events.push(a);for(var n=0;n<r.items().length;n++){t=!1;for(var o=0;o<i.length;o++)if(i[o].productId==r.items()[n].productId&&i[o].catRefId==r.items()[n].catRefId&&(!r.isConfigurableItem(i[o])&&!r.isConfigurableItem(r.items()[n])&&null!=i[o].commerceItemId&&i[o].commerceItemId==r.items()[n].commerceItemId||r.isConfigurableItem(i[o])&&r.isConfigurableItem(r.items()[n])&&i[o].commerceItemId==r.items()[n].commerceItemId)){a&&2==a.type&&a.product.id==i[o].productId||i[o].quantity!=r.items()[n].quantity()&&(r.items()[n].quantity(i[o].quantity),r.items()[n].updatableQuantity(i[o].quantity)),t=!0;break}if(!t)return!1}return!0},I.prototype.compareItemsAndQuantity=function(e){var t,r=this,i=e;if(i.length!=r.items().length||0==i.length)return!1;if(0==i.length)return!0;var a=r.events.pop();a&&r.events.push(a);for(var n=0;n<r.items().length;n++){t=!1;for(var o=0;o<i.length;o++)if(!r.isConfigurableItem(r.items()[o])&&i[o].productId==r.items()[n].productId&&i[o].catRefId==r.items()[n].catRefId&&(!r.isConfigurableItem(i[o])&&!r.isConfigurableItem(r.items()[n])&&null!=i[o].commerceItemId&&i[o].commerceItemId==r.items()[n].commerceItemId||r.isConfigurableItem(i[o])&&r.isConfigurableItem(r.items()[n])&&i[o].commerceItemId==r.items()[n].commerceItemId)){if((!a||2!=a.type||a.product.id!=i[o].productId)&&i[o].quantity!=r.items()[n].quantity())break;t=!0;break}if(!t)return!1}return!0},I.prototype.compareCoupons=function(e){var t,r=this;if(e.length!=r.coupons().length)return!1;if(0==e.length)return!0;for(var i=0;i<r.coupons().length;i++){t=!1;for(var a=0;a<e.length;a++)e[a].code==r.coupons()[i].code()&&(t=!0);if(!t)return!1}return!0},I.prototype.mergeItems=function(e){var t,r=this;t=e.order&&(r.currentOrderId()||r.mergeCart())?e.order.items:e.commerceItems&&r.mergeCart()?e.commerceItems:e.shoppingCart.items;for(var i=[],a=0;a<t.length;a++){var n=!1;t[a].catalogRefId&&(t[a].catRefId=t[a].catalogRefId),r.combineLineItems=1==(r.shouldCombineLineItems(r.items())&&r.shouldCombineLineItems(t))?c.COMBINE_YES:c.COMBINE_NO;var o=null;if(o=r.isConfigurableItem(t[a])?r.getConfigurableCartItem(t[a].productId,t[a].catRefId,t[a].commerceItemId):r.combineLineItems==c.COMBINE_YES?r.getCartItem(t[a].productId,t[a].catRefId):r.getCartItem(t[a].productId,t[a].catRefId,t[a].commerceItemId),null!==o){var s=t[a].quantity+o.quantity();o.quantity(s),o.updatableQuantity(s),o.discountInfo(t[a].discountInfo),o.rawTotalPrice(t[a].rawTotalPrice),o.detailedItemPriceInfo(t[a].detailedItemPriceInfo),o.detailedRecurringChargeInfo(t[a].detailedRecurringChargeInfo),n=!0}n||i.push(t[a])}for(var a=0;a<i.length;a++){var l=T(i[a]),d=null;r.isConfigurableItem(i[a])&&i[a].childItems&&i[a].childItems.length>0&&(d=[],d=r.getChildItemsAsCartItems(i[a]));var u={productId:i[a].productId,quantity:i[a].quantity,catRefId:i[a].catRefId,selectedOptions:l,currency:r.currency,discountInfo:i[a].discountInfo,rawTotalPrice:i[a].rawTotalPrice,externalPrice:i[a].externalPrice,externalPriceQuantity:i[a].externalPriceQuantity,configuratorId:i[a].configuratorId,childItems:d,commerceItemId:i[a].commerceItemId,externalData:i[a].externalData,actionCode:i[a].actionCode,externalRecurringCharge:i[a].externalRecurringCharge,externalRecurringChargeFrequency:i[a].externalRecurringChargeFrequency,externalRecurringChargeDuration:i[a].externalRecurringChargeDuration,assetId:i[a].assetId,serviceId:i[a].serviceId,customerAccountId:i[a].customerAccountId,billingAccountId:i[a].billingAccountId,serviceAccountId:i[a].serviceAccountId,activationDate:i[a].activationDate,deactivationDate:i[a].deactivationDate,addOnItem:i[a].addOnItem,shopperInput:i[a].shopperInput},p=new v(u);p.itemTotal(i[a].price),p.repositoryId=i[a].id,p.originalPrice(i[a].unitPrice),p.updatableQuantity(i[a].quantity),p.detailedItemPriceInfo(i[a].detailedItemPriceInfo),r.updateItemDynamicProperties(p,i[a]),e.priceListGroup&&null!=e.priceListGroup.repositoryId&&p.priceListGroupId(e.priceListGroup.repositoryId),p.detailedRecurringChargeInfo(i[a].detailedRecurringChargeInfo),r.items.push(p)}},I.prototype.validateServerCart=function(){var e=this;e.user().pageToRedirect()&&e.user().pageToRedirect()==e.checkoutLink?e.validateAndRedirectCart(!0):e.validateAndRedirectCart(!1)},I.prototype.clearCartForProfile=function(e){var t=this;t.user()||t.user(e),t.user()&&(t.user().persistedOrder(null),t.user().loggedinAtCheckout()||t.user().loggedoutAtCheckout()||""==t.user().orderId()||t.emptyCart(),t.user().orderId(""),t.user().setLocalData("orderId"))},I.prototype.refreshUserCart=function(e){var t=this;if(t.user()||t.user(e),!t.isCurrentCallInProgress&&!t.updatedFromRepository&&t.currentOrderState()!=c.PENDING_PAYMENTS&&t.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&t.user()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&!l.isPathEqualTo(t.checkoutLink)){var r={},i={};i[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PROFILE_ORDER,i[c.IDENTIFIER_KEY]="refreshCart";var a=t.storeConfiguration.getFilterToUse(i);a&&(r[c.FILTER_KEY]=a),t.adapter.loadJSON("getCurrentProfileOrder","0",r,function(e){if(null!=e&&e.orderId){t.user().orderId(e.orderId),t.user().persistedOrder(e),t.user().setLocalData("orderId");var r=t.removeItems(e);if(t.isPricingRequired(r),t.compareItemsAndQuantity(e.shoppingCart.items)||(t.updateCartData(e,!0),t.isPricingRequired(!0)),t.getProductData(),t.getDynamicPropertiesMetadata(!0),t.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM),t.updateDynamicProperties(e),1==e.shippingGroups.length&&t.shippingAddress&&""==t.shippingAddress()){var i={translate:function(e,t){return n.t("ns.common:resources."+e,t)}},a=new f("cart-shipping-address","",i,t.contextData.page.shippingCountriesPriceListGroup,t.contextData.page.defaultShippingCountry);a.copyFrom(e.shippingGroups[0].shippingAddress,t.contextData.page.shippingCountriesPriceListGroup),a.resetModified(),a.validateForShippingMethod()&&t.shippingAddress(a)}t.cartUpdated()}else t.user().orderId(""),t.user().persistedOrder(null),t.user().setLocalData("orderId")},function(e){t.loadCart()})}},I.prototype.handleInvalidItems=function(e){var t=this;if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND){t.removeItemsByProduct(e.moreInfo);t.markDirty()}if(e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND){var r=JSON.parse(e.moreInfo);t.removeItemsByProductCatRef(r.productId,r.catRefId);t.markDirty()}},I.prototype.initCatalog=function(){var e=this;if(arguments[0].data.global.user&&arguments[0].data.global.user.catalog){var t=arguments[0].data.global.user.catalog.repositoryId;this.catalogId()!=t&&this.catalogId(t)}if(arguments[0].data.global.user&&arguments[0].data.global.user.priceListGroup){var r=arguments[0].data.global.user.priceListGroup.id;this.priceListGroupId(r)}var i=d.getInstance().getItem(c.REDIRECTED_TO_WEB_PAYMENT),a=i&&(arguments[1].token&&arguments[1].paymentId||arguments[1].authorizationCode)?"true":"false";d.getInstance().setItem(c.REDIRECTED_TO_WEB_PAYMENT,"false"),l.isPathEqualTo(arguments[0].data.global.links.checkout.route)&&e.checkoutLink||"false"!==a||e.deferLoadCart.done(function(){e.loadCart()})},I.prototype.shouldCombineLineItems=function(e){for(var t=this,r=0;r<e.length;r++)for(var i=r+1;i<e.length;i++)if(!t.isConfigurableItem(e[r])&&!t.isConfigurableItem(e[i])&&e[r].productId==e[i].productId&&e[r].catRefId==e[i].catRefId&&e[r].commerceItemId!=e[i].commerceItemId)return!1;return!0},I.prototype.loadCart=function(){var e=this;if(e.isDirty(!1),d.getInstance().setItem(c.REDIRECTED_TO_WEB_PAYMENT,"false"),!e.updatedFromRepository&&(l.isPathEqualTo(e.checkoutLink)||!e.user()||!e.user().loggedIn()||e.user().loggedinAtCheckout()||!e.user().orderId())){var t=e.getCookieData();null!=t&&e.getLocalData(t)}e.cartPriceListGroupId()||d.getInstance().getItem("shoppingCart")&&e.cartPriceListGroupId(JSON.parse(d.getInstance().getItem("shoppingCart")).cartPriceListGroupId),e.combineLineItems=1==e.shouldCombineLineItems(e.items())?c.COMBINE_YES:c.COMBINE_NO},I.prototype.reloadCart=function(){var e=this;e.user()&&e.user().loggedIn()&&!e.user().loggedinAtCheckout()?(e.isDirty(!1),e.refreshUserCart(e.user())):e.loadCart()},I.prototype.getItemPrice=function(e){var t=0;if(null!=e.productData()){if(e.productData().childSKUs){for(var r=(e.productData().childSKUs,e.productData().childSKUs.length),i=0;i<r;i++)if(e.productData().childSKUs[i].repositoryId==e.catRefId){var a=e.productData().childSKUs[i];t=null!=a.salePrice?a.salePrice:null!=e.productData().salePrice?e.productData().salePrice:null!=a.listPrice?a.listPrice:e.productData().listPrice}}else t=null!=e.productData().salePrice?e.productData().salePrice:e.productData().listPrice;return t}},I.prototype.saveCartCookie=function(){var e=this,t=!1,r=new Object;r.numberOfItems=e.numberOfItems(),r.total=e.total(),r.totalWithoutTax=e.totalWithoutTax(),r.subTotal=e.subTotal(),r.amount=e.amount(),r.tax=e.tax(),r.currencyCode=e.currencyCode(),r.shipping=e.shipping(),r.shippingDiscount=e.shippingDiscount(),r.shippingSurcharge=e.shippingSurcharge(),r.orderDiscount=e.orderDiscount(),r.orderDiscountDescList=e.orderDiscountDescList(),r.coupons=e.coupons(),r.cartPriceListGroupId=u.getInstance().selectedPriceListGroup().id,r.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers,r.recurringChargeAmount=e.recurringChargeAmount(),r.recurringChargeCurrencyCode=e.recurringChargeCurrencyCode(),r.recurringChargeShipping=e.recurringChargeShipping(),r.recurringChargeSubTotal=e.recurringChargeSubTotal(),r.recurringChargeSubTotalByFrequency=e.recurringChargeSubTotalByFrequency(),r.recurringChargeTax=e.recurringChargeTax(),r.recurringChargeTaxByFrequency=e.recurringChargeTaxByFrequency(),r.recurringChargeTotal=e.recurringChargeTotal(),r.items=new Array;var i=e.getCookieData();"string"==typeof i&&(i=JSON.parse(i));var a={};if(null!=i)for(var n=0;n<i.items.length;n++)void 0===a[i.items[n].catRefId]&&(a[i.items[n].catRefId]=i.items[n].originalPrice);var o=e.user().persistedOrder();if(o&&o.shoppingCart.items)for(var s=o.shoppingCart,l=s.items.length,n=0;n<l;n++)void 0===a[s.items[n].catRefId]&&(a[s.items[n].catRefId]=s.items[n].unitPrice);if(e.lineAttributes){r.lineAttributes=new Array;for(var n=0;n<e.lineAttributes().length;n++){var p=e.lineAttributes()[n],h=p.id(),f=null;null!=p.value()&&(f=p.value()),r.lineAttributes.push({id:h,value:f})}}for(var n=0;n<e.items().length;n++){var m=0,g=e.getItemPrice(e.items()[n]);void 0==a[e.items()[n].catRefId]?m=g:""!=e.updatedProduct()&&e.updatedProduct()===e.items()[n].catRefId?(m=g,e.updatedProduct("")):m=a[e.items()[n].catRefId],e.cartPriceListGroupId()!=u.getInstance().selectedPriceListGroup().id&&void 0!=g&&(e.items()[n].priceListGroupId(u.getInstance().selectedPriceListGroup().id),m=g,t=!0),e.items()[n].originalPrice(m);var v=void 0;e.isConfigurableItem(e.items()[n])&&(v=[],v=e.getChildItemsCookie(e.items()[n]));var y={productId:e.items()[n].productId,quantity:e.items()[n].quantity(),catRefId:e.items()[n].catRefId,itemTotal:e.items()[n].itemTotal(),id:e.items()[n].repositoryId,rawTotalPrice:e.items()[n].rawTotalPrice(),originalPrice:m,selectedOptions:e.items()[n].selectedOptions,selectedSkuProperties:e.items()[n].selectedSkuProperties,discountInfo:e.items()[n].discountInfo(),detailedItemPriceInfo:e.items()[n].detailedItemPriceInfo(),externalPrice:e.items()[n].externalPrice(),externalPriceQuantity:e.items()[n].externalPriceQuantity(),configuratorId:e.items()[n].configuratorId,childItems:v,externalData:e.items()[n].externalData(),actionCode:e.items()[n].actionCode(),externalRecurringCharge:e.items()[n].externalRecurringCharge(),externalRecurringChargeFrequency:e.items()[n].externalRecurringChargeFrequency(),externalRecurringChargeDuration:e.items()[n].externalRecurringChargeDuration(),commerceItemId:e.items()[n].commerceItemId,unpricedExternalMessage:e.items()[n].unpricedExternalMessage(),isGWPChoicesAvaliable:e.items()[n].isGWPChoicesAvaliable(),giftData:e.items()[n].giftData?e.items()[n].giftData:null,giftWithPurchaseCommerceItemMarkers:e.items()[n].giftWithPurchaseCommerceItemMarkers,detailedRecurringChargeInfo:e.items()[n].detailedRecurringChargeInfo(),isPersonalized:e.items()[n].isPersonalized(),assetId:e.items()[n].assetId(),serviceId:e.items()[n].serviceId(),customerAccountId:e.items()[n].customerAccountId(),billingAccountId:e.items()[n].billingAccountId(),serviceAccountId:e.items()[n].serviceAccountId(),activationDate:e.items()[n].activationDate(),deactivationDate:e.items()[n].deactivationDate(),addOnItem:e.items()[n].addOnItem,shopperInput:e.items()[n].shopperInput};for(var b in e.lineAttributes())y[e.lineAttributes()[b].id()]=e.items()[n][e.lineAttributes()[b].id()]();r.items.push(y)}if(t&&e.cartPriceListGroupId(u.getInstance().selectedPriceListGroup().id),e.dynamicProperties){e.getDynamicPropertiesMetadata(!0),r.dynamicProperties=new Array;for(var n=0;n<e.dynamicProperties().length;n++){var p=e.dynamicProperties()[n],h=p.id(),f=null;null!=p.value()&&(f=p.value()),r.dynamicProperties.push({id:h,value:f})}}try{e.currentOrderState()!=c.PENDING_PAYMENT&&d.getInstance().setItem("shoppingCart",JSON.stringify(r))}catch(e){}},I.prototype.getLocalData=function(t){var r=this;if("string"==typeof t&&(t=JSON.parse(t)),t){if(r.numberOfItems(t.numberOfItems),r.total(t.total),r.totalWithoutTax(t.totalWithoutTax),r.subTotal(t.subTotal),r.amount(t.amount),r.tax(t.tax),r.currencyCode(t.currencyCode),r.shipping(t.shipping),r.shippingDiscount(t.shippingDiscount),r.shippingSurcharge(t.shippingSurcharge),r.orderDiscount(t.orderDiscount),r.orderDiscountDescList(t.orderDiscountDescList),r.cartPriceListGroupId(t.cartPriceListGroupId),r.giftWithPurchaseOrderMarkers=t.giftWithPurchaseOrderMarkers,r.coupons.splice(0),t.hasOwnProperty("coupons"))for(var i=0;i<t.coupons.length;i++){var a=new P(t.coupons[i].code,t.coupons[i].description,t.coupons[i].status,t.coupons[i].level,t.coupons[i].id,t.coupons[i].totalAdjustment,t.coupons[i].name,t.coupons[i].longDescription);r.coupons.push(a)}r.populateClaimedCouponMultiPromotions(r.couponMultiPromotions()),r.items.splice(0);for(var i=0;i<t.items.length;i++){var n=void 0;r.isConfigurableItem(t.items[i])&&(n=[],n=r.getChildItemsAsCartItems(t.items[i]));var o={productId:t.items[i].productId,quantity:t.items[i].quantity,catRefId:t.items[i].catRefId,selectedOptions:t.items[i].selectedOptions,currency:r.currency,discountInfo:t.items[i].discountInfo,rawTotalPrice:t.items[i].rawTotalPrice,externalPrice:t.items[i].externalPrice,externalPriceQuantity:t.items[i].externalPriceQuantity,configuratorId:t.items[i].configuratorId,childItems:n,commerceItemId:t.items[i].commerceItemId,unpricedExternalMessage:t.items[i].unpricedExternalMessage,externalData:t.items[i].externalData,actionCode:t.items[i].actionCode,backOrderQuantity:t.items[i].backOrderQuantity,preOrderQuantity:t.items[i].preOrderQuantity,externalRecurringCharge:t.items[i].externalRecurringCharge,externalRecurringChargeFrequency:t.items[i].externalRecurringChargeFrequency,externalRecurringChargeDuration:t.items[i].externalRecurringChargeDuration,assetId:t.items[i].assetId,serviceId:t.items[i].serviceId,customerAccountId:t.items[i].customerAccountId,billingAccountId:t.items[i].billingAccountId,serviceAccountId:t.items[i].serviceAccountId,activationDate:t.items[i].activationDate,deactivationDate:t.items[i].deactivationDate,addOnItem:t.items[i].addOnItem,shopperInput:t.items[i].shopperInput},s=new v(o);s.itemTotal(t.items[i].itemTotal),s.originalPrice(t.items[i].originalPrice),s.productPriceChanged(!1),s.detailedItemPriceInfo(t.items[i].detailedItemPriceInfo),s.priceListGroupId(t.cartPriceListGroupId),s.isGWPChoicesAvaliable(t.items[i].isGWPChoicesAvaliable),s.skuProperties=t.items[i].skuProperties,s.isPersonalized=e.observable(t.items[i].isPersonalized),t.items[i].giftWithPurchaseCommerceItemMarkers&&(s.giftWithPurchaseCommerceItemMarkers=t.items[i].giftWithPurchaseCommerceItemMarkers),t.items[i].giftData&&(s.giftData=t.items[i].giftData);for(var c in t.lineAttributes)s[t.lineAttributes[c].id]=e.observable(t.items[i][t.lineAttributes[c].id]);s.detailedRecurringChargeInfo(t.items[i].detailedRecurringChargeInfo),r.items.push(s)}}r.items().length>0&&r.getProductData(),r.getDynamicPropertiesMetadata(!0),t.hasOwnProperty("dynamicProperties")&&r.updateDynamicProperties(t)},I.prototype.processCartData=function(e){for(var t=this,r=!1,i=0;i<t.items().length;i++)for(var a=0;a<e.length;a++){var n=e[a];if(n.id==t.items()[i].productId)for(var o=_(n),s=0;s<n.childSKUs.length;s++)if(n.childSKUs[s].repositoryId==t.items()[i].catRefId){var c=n.childSKUs[s],l=jQuery.extend(!0,{},n);if(l.childSKUs=[c],t.items()[i].currentPrice(t.getItemPrice(t.items()[i])),!l.childSKUs[0].primaryThumbImageURL&&l.childSKUs[0].listingSKUId&&(l.childSKUs[0].primaryThumbImageURL=o[l.childSKUs[0].listingSKUId]),t.items()[i].productData(l),!A(t.items()[i].discountInfo())){var d=t.getItemPrice(t.items()[i]);if(c=c||{},c.saleVolumePrice||c.listVolumePrice||l.saleVolumePrice||l.listVolumePrice?t.items()[i].productPriceChanged(!1):t.items()[i].originalPrice()!=d&&t.items()[a].priceListGroupId()==u.getInstance().selectedPriceListGroup().id&&u.getInstance().selectedPriceListGroup().id==t.cartPriceListGroupId()?(t.skipPriceChange()&&t.items()[i].productPriceChanged()&&t.items()[i].currentPrice()==d||t.items()[i].invalid||(r=!0),null!=d&&t.items()[i].productPriceChanged(!0)):(t.items()[i].productPriceChanged(!1),t.items()[i].currentPrice()&&d&&t.items()[i].currentPrice()!=d&&!t.items()[i].invalid&&t.isPricingRequired(!0)),n.productVariantOptions)for(var p=0;p<n.productVariantOptions.length;p++)t.updateItemOptionDetails(n.productVariantOptions[p],t.items()[i].catRefId);break}}t.isConfigurableItem(t.items()[i])&&t.items()[i].childItems&&t.items()[i].childItems.length>0&&t.updateChildTreeProductData(t.items()[i],n)}return t.skipPriceChange(!1),t.showSelectedOptions(!0),r},I.prototype.getProductData=function(){var e=this;s.when(e.getProductDataForCart(),e.getAvailabilityOfCart()).done(function(r,i){s.Topic(t.topicNames.CART_READY).publish(e)})},I.prototype.filterInactiveAddons=function(e){if(e.addOnProducts&&e.addOnProducts.length>0)for(var t=e.addOnProducts.length,r=t-1;r>=0;r--)if(e.addOnProducts[r].addOnOptions&&0!=e.addOnProducts[r].addOnOptions.length&&e.addOnProducts[r].addOnOptions[0].product.active)for(var i=e.addOnProducts[r].addOnOptions.length-1;i>=0;i--)e.addOnProducts[r].addOnOptions[i].sku.active||e.addOnProducts[r].addOnOptions.splice(i,1);else e.addOnProducts.splice(r,1)},I.prototype.getProductDataForCart=function(){for(var e=this,r=s.Deferred(),i=[],a=0;a<e.items().length;a++)i.indexOf(e.items()[a].productId)===-1&&i.push(e.items()[a].productId),e.isConfigurableItem(e.items()[a])&&e.addProductIdFromConfigurableProduct(i,e.items()[a]);var n=new Array(e.catalogId(),i,!0,e.priceListGroupId(),e.fields,!0),o={},d={};d[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_PRODUCTS,d[c.IDENTIFIER_KEY]="getProductData";var p=e.storeConfiguration.getFilterToUse(d);return p&&(o[c.FILTER_KEY]=p),e.adapter.loadJSON("cart",n,o,function(i){for(var a=0;a<i.length;a++)e.filterInactiveAddons(i[a]);if(e.mergeCart())for(var n=0;n<i.length;n++)i[n].active||i[n].displayName&&e.invalidProductNames.indexOf(i[n].displayName)==-1&&e.invalidProductNames.push(i[n].displayName);var o=e.removeInvalidItems(i,e.invalidProductNames),c=e.removeUnlinkedAddonItems(i,e.invalidProductNames);o||(o=c);var d=e.processCartData(i);1==o||d===!0||e.isPricingRequired()?(e.events.push(new N(V,0,i)),l.isPathEqualTo(e.checkoutLink)&&""!=e.shippingMethod()?e.priceCartForCheckout():e.markDirty(),e.isPricingRequired(!1)):e.cartPriceListGroupId()&&e.cartPriceListGroupId()!=u.getInstance().selectedPriceListGroup().id?(e.events.push(new N(V,0,i)),e.markDirty()):s.Topic(t.topicNames.CART_PRICE_COMPLETE).publish(),e.mergeCart()?(e.notifyInvalidProducts("cart"),e.isDirty()||e.markDirty(),e.mergeCart(!1)):e.notifyInvalidProducts(),e.updateAllItemsArray(),r.resolve(i)},function(t){r.reject(t),t.errors&&t.errors.length>0&&(e.handleListProductsFailure(t),e.getProductData())}),r},I.prototype.notifyInvalidProducts=function(e){var t=this,i="";if(t.invalidProductNames.length>0){for(var a="",o=t.invalidProductNames.length-1,s=0;s<o;s++)a+=n.t("ns.common:resources.productNameHasNext",{productName:t.invalidProductNames[s]});a+=t.invalidProductNames[o],i=n.t("ns.common:resources.invalidCartItemsError",{productNames:a})}i&&(e?r.sendWarningToPage(K,i,!0,e,!0):(t.user().redirectNotificationMessage(i),r.sendWarning(K,i,!0))),t.invalidProductNames=[]},I.prototype.removeItemsByProduct=function(e){for(var t=this,r=!1,i=0;i<t.items().length;i++)t.items()[i].productId===e&&(t.items.remove(t.items()[i]),i--,r=!0,t.isPricingRequired(!0));return r},I.prototype.removeChildItemsByProduct=function(e,t){var r=this,i=r.items();t&&(i=t);for(var a=!1,n=0;n<i.length;n++)i[n].productId===e?(i.remove(i[n]),n--,a=!0,r.isPricingRequired(!0)):i[n].childItems&&i[n].childItems.length>0&&(a=r.removeChildItemsByProduct(e,i[n].childItems),i[n].childItems&&0==i[n].childItems.length&&delete i[n].childItems);return a},I.prototype.removeItemsByProductCatRef=function(e,t){for(var r=this,i=!1,a=0;a<r.items().length;a++)r.items()[a].productId===e&&r.items()[a].catRefId===t&&(r.items.remove(r.items()[a]),a--,i=!0,r.isPricingRequired(!0));return i},I.prototype.markInvalidItems=function(e,t){for(var r=this,i=0;i<r.items().length;i++)for(var a=r.items()[i],n=!1,o=0;o<e.length;o++)if(e[o].id==a.productId){if(!e[o].active||!e[o].childSKUs||0==e[o].childSKUs.length){a.invalid=!0;break}for(var s=0;e[o].childSKUs&&s<e[o].childSKUs.length;s++)if(e[o].childSKUs[s].repositoryId==a.catRefId&&e[o].childSKUs[s].active){n=!0;break}if(n)break;a.invalid=!0}return!1},I.prototype.removeUnlinkedAddonItems=function(e,t){for(var r=this,i=[],a=0;a<r.items().length;a++)for(var n=0;n<e.length;n++)if(r.items()[a].productId==e[n].id){r.items()[a].childItems&&r.items()[a].childItems.length>0&&r.processInvalidAddonItems(r.items()[a],e[n],e,i);break}if(i.length>0){for(var a=0;a<i.length;a++)t.push(i[a]);return!0}return!1},I.prototype.processInvalidAddonItems=function(e,t,r,i){for(var a=this,n=!1,o=[],s=0;e.childItems&&s<e.childItems.length;s++)if(n=!1,e.childItems[s].addOnItem){for(var c=0;c<t.addOnProducts.length;c++){for(var l=0;l<t.addOnProducts[c].addOnOptions.length;l++)if(t.addOnProducts[c].addOnOptions[l].product&&t.addOnProducts[c].addOnOptions[l].product.repositoryId==e.childItems[s].productId&&t.addOnProducts[c].addOnOptions[l].sku&&t.addOnProducts[c].addOnOptions[l].sku.repositoryId==e.childItems[s].catRefId){n=!0;break}if(n)break}if(n){if(e.childItems[s].childItems&&e.childItems[s].childItems.length>0)for(var d=0;d<r.length;d++)if(r[d].id==e.childItems[s].productId){a.processInvalidAddonItems(e.childItems[s],r[d],r,i);break}}else i.push(e.childItems[s].displayName()),o.push(e.childItems[s])}for(var s=0;s<o.length;s++)a.removeChildItemFromCart(o[s],!1)},I.prototype.removeInvalidItems=function(e,t){for(var r=this,i=!1,a=0;a<r.items().length;a++){for(var n=r.items()[a],o="",l=!1,d=!1,u=!1,p=[],h=0;h<e.length;h++){if(e[h].id==n.productId){if(!e[h].active||!e[h].childSKUs||0==e[h].childSKUs.length||e[h].notForIndividualSale){d=!0,o=e[h].displayName;break}for(var f=0;e[h].childSKUs&&f<e[h].childSKUs.length;f++)if(e[h].childSKUs[f].repositoryId==n.catRefId&&e[h].childSKUs[f].active&&null!=e[h].childSKUs[f].listPrice){l=!0;break}l||(d=!0,o=e[h].displayName)}if(r.isConfigurableItem(n)){var m=[],g=[],v=[];if(r.checkCpqItemValidity(e[h],n,g,m,v),g.length>0&&(d=!0,t=t.concat(g),s.unique(t)),m.length>0){d=!0;for(var y=0;y<e.length;y++)if(e[y].id==n.productId){o=e[y].displayName;break}break}v.length>0&&(u=!0,p=v)}}if(r.currentOrderState()!=c.PENDING_PAYMENTS&&r.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE)if(!l||d)r.items.remove(n),t&&o&&t.indexOf(o)==-1&&t.push(o),i=!0,a--;else if(u)for(var b=0;b<p.length;b++)r.removeChildItemFromCart(p[b],!1),t&&t.indexOf(p[b].displayName())==-1&&t.push(p[b].displayName()),i=!0}return i},I.prototype.updateItemOptionDetails=function(e,t){for(var r=0;r<this.items().length;r++)if(this.items()[r].catRefId===t&&this.items()[r].selectedOptions)for(var i=0;i<this.items()[r].selectedOptions.length;i++)if(this.items()[r].selectedOptions[i].optionId===e.optionId){this.items()[r].selectedOptions[i].optionName=e.optionName;var a=e.optionValueMap;for(var n in a)if(a[n]===this.items()[r].selectedOptions[i].optionValueId){this.items()[r].selectedOptions[i].optionValue=n;break}break}var o=this.getCookieData();if(o){for(var s=o.items,c=0;c<this.items().length;c++)for(var l=0;l<s.length;l++)if(this.items()[c].catRefId===s[l].catRefId){s[l].selectedOptions=this.items()[c].selectedOptions;break}o.items=s;try{d.getInstance().setItem("shoppingCart",JSON.stringify(o))}catch(e){}}},I.prototype.getCookieData=function(){var e=null;try{e=d.getInstance().getItem("shoppingCart"),e&&"string"==typeof e&&(e=JSON.parse(e))}catch(e){}return e},I.prototype.getCookieUserData=function(){var e=null;try{e=d.getInstance().getItem("user"),e&&"string"==typeof e&&(e=JSON.parse(e))}catch(e){}return e},I.prototype.checkPriceDataAndRedirect=function(){var e=this;s.when(e.checkPriceDataBeforeCheckout(),e.validateCartAvailability()).done(function(t,r){t===!0||0==r?(e.redirect(e.cartLink),e.notifyInvalidProducts("cart")):e.checkoutWithPaypalClicked()?e.redirect(c.PAYPAL_CHECKOUT_TYPE):(e.redirect(e.checkoutLink),e.notifyInvalidProducts("checkout"))})},I.prototype.checkPriceDataBeforeCheckout=function(){for(var e=this,t=s.Deferred(),r=[],i=0;i<e.items().length;i++)r.indexOf(e.items()[i].productId)===-1&&r.push(e.items()[i].productId);var a=e.catalogId();e.user().catalogId()&&(a=e.user().catalogId());var n=new Array(a,r,!0,u.getInstance().selectedPriceListGroup().id,e.fields,!0),o={},d={};d[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_PRODUCTS,d[c.IDENTIFIER_KEY]="getProductDataAndRedirect";var p=e.storeConfiguration.getFilterToUse(d);return p&&(o[c.FILTER_KEY]=p),e.adapter.loadJSON("cart",n,o,function(r){e.markInvalidItems(r,e.invalidProductNames);var i=!1;e.items().length>0?(i=e.processCartData(r),(i===!0||e.isPricingRequired())&&(l.isPathEqualTo(e.checkoutLink)&&""!=e.shippingMethod()?e.priceCartForCheckout():e.markDirty(),e.isPricingRequired(!1))):(i=null,e.isPricingRequired()&&(e.markDirty(),e.isPricingRequired(!1)),e.notifyInvalidProducts()),t.resolve(i)},function(r){t.reject(r),r.errors&&r.errors.length>0&&(e.handleListProductsFailure(r),e.checkPriceDataAndRedirect()),e.checkoutWithPaypalClicked(!1)}),t},I.prototype.getProductIdsForItemsInCart=function(){for(var e=this,t=[],r=0;r<e.items().length;r++)t.push(e.items()[r].productId);return t},I.prototype.handleListProductsFailure=function(e){for(var t=this,r=0;r<e.errors.length;r++){var i=e.errors[r];i.errorCode==c.GET_PRODUCT_NO_PRODUCT_FOUND&&(i.devMessage&&t.invalidProductNames.indexOf(i.devMessage)==-1&&t.invalidProductNames.push(i.devMessage),t.removeItemsByProduct(i.moreInfo),t.isPricingRequired(!0))}},I.prototype.getCartAvailability=function(){var e=this,t=new O(e),r={};r[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,r[c.IDENTIFIER_KEY]="stockStatusesForCart";var i=e.storeConfiguration.getFilterToUse(r);i&&(t[c.FILTER_KEY]=i),e.adapter.loadJSON("getStockStatuses","0",t,function(t){for(var r=0;r<e.items().length;r++)if(e.isConfigurableItem(e.items()[r]))e.items()[r].getItemQuantityInCart=e.getUpdatableItemQuantityInCart.bind(e,e.items(),e.items()[r].productId,e.items()[r].catRefId),e.items()[r].addConfigurableStockValidation(t,e.isPreOrderBackOrderEnabled);else for(var i=0;i<t.length;i++)if(e.items()[r].productId===t[i].productId&&e.items()[r].catRefId===t[i].catRefId){"IN_STOCK"===t[i].stockStatus||"PREORDERABLE"===t[i].stockStatus||"BACKORDERABLE"===t[i].stockStatus?(e.items()[r].getItemQuantityInCart=e.getUpdatableItemQuantityInCart.bind(e,e.items(),e.items()[r].productId,e.items()[r].catRefId),e.items()[r].addLimitsValidation(!0,t[i].orderableQuantity,t[i],e.isPreOrderBackOrderEnabled)):e.items()[r].addLimitsValidation(!1,t[i].orderableQuantity,t[i],e.isPreOrderBackOrderEnabled);break}},function(t){t.orderableQuantity=0;for(var r=0;r<e.items().length;r++)e.items()[r].addLimitsValidation(!1,0,t,e.isPreOrderBackOrderEnabled)})},I.prototype.getAvailabilityOfCart=function(){var e=this,t=s.Deferred();if(e.currentOrderState()!=c.PENDING_PAYMENTS&&e.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE){var r=new O(e),i={};i[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,i[c.IDENTIFIER_KEY]="stockStatusesForCart";var a=e.storeConfiguration.getFilterToUse(i);a&&(r[c.FILTER_KEY]=a),e.adapter.loadJSON("getStockStatuses","0",r,function(r){for(var i=0;i<e.items().length;i++)if(e.items()[i].childItems)e.items()[i].getItemQuantityInCart=e.getUpdatableItemQuantityInCart.bind(e,e.items(),e.items()[i].productId,e.items()[i].catRefId),e.items()[i].addConfigurableStockValidation(r);else for(var a=0;a<r.length;a++)if(e.items()[i].productId===r[a].productId&&e.items()[i].catRefId===r[a].catRefId){"IN_STOCK"===r[a].stockStatus||"PREORDERABLE"===r[a].stockStatus||"BACKORDERABLE"===r[a].stockStatus?(e.items()[i].getItemQuantityInCart=e.getUpdatableItemQuantityInCart.bind(e,e.items(),e.items()[i].productId,e.items()[i].catRefId),e.items()[i].addLimitsValidation(!0,r[a].orderableQuantity,r[a],e.isPreOrderBackOrderEnabled)):e.items()[i].addLimitsValidation(!1,r[a].orderableQuantity,r[a],e.isPreOrderBackOrderEnabled);break}t.resolve(r)},function(r){for(var i=0;i<e.items().length;i++)e.items()[i].addLimitsValidation(!1,0,r,e.isPreOrderBackOrderEnabled);t.reject(r)})}return t},I.prototype.getUpdatableItemQuantityInCart=function(e,t,r,i,a){for(var n=this,o=0,s=0;s<e.length;s++)if(a||e[s].productId!==t){if(a){if(e[s].productId===a){if(i&&r&&e[s].catRefId!=r)continue;o+=parseInt(e[s].updatableQuantity(),10)}else if(e[s].childItems&&e[s].childItems.length>0)for(var c=e[s].childItems,l=0;l<c.length;l++)c[l].productId===a&&(o+=n.getUpdatableItemQuantityInCart([c[l]],c[l].productId)*parseInt(e[s].updatableQuantity(),10))}else if(e[s].childItems&&e[s].childItems.length>0)for(var c=e[s].childItems,l=0;l<c.length;l++)c[l].productId===t&&(o+=n.getUpdatableItemQuantityInCart([c[l]],c[l].productId)*parseInt(e[s].updatableQuantity(),10))}else{if(i&&r&&e[s].catRefId!=r)continue;o+=parseInt(e[s].updatableQuantity(),10)}return o},I.prototype.getItemQuantityInCart=function(e,t,r,i,a){for(var n=this,o=0,s=0;s<e.length;s++)if(a||e[s].productId!==t){if(a){if(e[s].productId===a){if(i&&r&&e[s].catRefId!=r)continue;o+=parseInt(e[s].quantity(),10)}else if(e[s].childItems&&e[s].childItems.length>0)for(var c=e[s].childItems,l=0;l<c.length;l++)c[l].productId===a&&(o+=n.getItemQuantityInCart([c[l]],c[l].productId)*parseInt(e[s].quantity(),10))}else if(e[s].childItems&&e[s].childItems.length>0)for(var c=e[s].childItems,l=0;l<c.length;l++)c[l].productId===t&&(o+=n.getItemQuantityInCart([c[l]],c[l].productId)*parseInt(e[s].quantity(),10))}else{if(i&&r&&e[s].catRefId!=r)continue;o+=parseInt(e[s].quantity(),10)}return o},I.prototype.priceCartIfNeccessary=function(e){var t=this;if(e)if(t.callbacks&&t.callbacks.hasOwnProperty(c.PREPRICING)&&"function"==typeof t.callbacks[c.PREPRICING]&&t.callbacks[c.PREPRICING](),t.items().length>0)!l.isPathEqualTo(t.checkoutLink)&&t.user()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()||t.user()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&!t.shippingMethod()?t.priceItemsAndPersist():!t.callPriceBeforeShippingMethods&&t.shippingMethod()?t.usingImprovedShippingWidgets()?t.priceCartForCheckout():t.populateShipppingMethods():t.priceItems();else{t.emptyCart(),t.events.pop();var r=t.getCookieUserData();
r&&t.user().orderId(r.orderId),0==t.items().length&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&t.user().orderId()&&""!=t.user().orderId()&&t.removeCurrentProfileOrder()}},I.prototype.populateShipppingMethods=function(){var e=this;if(e.hasSplitShippingInformation()||e.shippingAddress().afterValidation&&e.shippingMethod())e.priceCartForCheckout();else{var r={};r[c.SHIPPING_ADDRESS_FOR_METHODS]=e.shippingAddress()?{toJSON:function(){return e.shippingAddress()}}:e.shippingAddress(),r[c.PRODUCT_IDS_FOR_SHIPPING]=this.getProductIdsForItemsInCart(),s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(r,[{message:"success"}])}},I.prototype.priceItemsAndPersist=function(){var e=this,t=!1,r=e.getCookieUserData();r&&e.user().orderId(r.orderId),e.user().loggedIn()&&e.user().orderId()&&""!=e.user().orderId()?e.updateCurrentProfileOrder(!1,t):e.createCurrentProfileOrder()},I.prototype.createCartPricingModel=function(){var e=this,t=new R(e);return t},I.prototype.updateCurrentProfileOrder=function(e,i){var a=this,o=a.events.pop();if(a.isOrderSubmissionInProgress)console.warn(n.t("ns.common:resources.priceOrderBlockedText"));else{var l=new R(a);a.populateGiftCards(l,o),a.populateIINs(l,o),a.populateDynamicProperties(l),l.merge=e,l.clearCoupons=i,this.currentOrderState()!=c.PENDING_PAYMENTS&&a.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&a.adapter.persistUpdate("order",a.user().orderId(),l,function(r){a.isCurrentCallInProgress=!1,a.isPricingRequired(!1),a.updateCart(r,o,e),a.shippingMethod()&&(a.skipGWPMessage=!0,a.usingImprovedShippingWidgets()?a.priceCartForCheckout():a.populateShipppingMethods()),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),a.callbacks&&a.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof a.callbacks[c.PRICING_SUCCESS_CB]&&a.callbacks[c.PRICING_SUCCESS_CB](r)},function(e){if(a.isCurrentCallInProgress=!1,e.status==c.HTTP_UNAUTHORIZED_ERROR)a.handleSessionExpiry(o);else if(e.errorCode==c.COUPON_APPLY_ERROR)a.handleCouponPricingError(e,o);else if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND||e.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE)a.handleInvalidAddItem(e,o),a.notifyInvalidProducts(),a.reloadCart(),a.tax(0),a.secondaryCurrencyTaxAmount(0);else if(e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR)a.handleGiftCardError(e);else if(e.errorCode==c.UNLINKED_ADD_ON_PRODUCT)a.reloadCart();else if(e.errorCode==c.ADDON_VOLUME_PRICE_ERROR){var t=e.message+" "+n.t("ns.common:resources.removeItemFromCart");r.sendError(K,t,!0),a.isDirty(!1)}else if(e.errorCode==c.INVALID_SHOPPER_INPUT){var i=JSON.parse(e.moreInfo),s=i.productId,l=a.findCartProductById(s);l&&(s=l.displayName);var t=n.t("ns.common:resources.invalidShopperInputError",{productName:s});r.sendError(K,t,!0),a.isDirty(!1)}else a.shippingMethod(""),a.reloadCart(),a.tax(0),a.secondaryCurrencyTaxAmount(0);a.callbacks&&a.callbacks.hasOwnProperty(c.PRICING_FAILURE_CB)&&"function"==typeof a.callbacks[c.PRICING_FAILURE_CB]&&a.callbacks[c.PRICING_FAILURE_CB](e)})}},I.prototype.handleInvalidAddItem=function(e,t){var r=this;if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND&&t&&t.type===w&&t.product.id==e.moreInfo&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1)r.invalidProductNames.push(t.product.displayName);else if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND&&t&&t.type===w&&t.product.selectedAddOnProducts&&t.product.selectedAddOnProducts.length>0)r.handleInvalidAddonItem(t.product.selectedAddOnProducts,e.moreInfo);else if(e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND){var i=JSON.parse(e.moreInfo);t&&t.type===w&&t.product.id==i.productId&&t.product.childSKUs[0].repositoryId==i.catRefId&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1?r.invalidProductNames.push(t.product.displayName):t&&t.type===w&&t.product.selectedAddOnProducts&&t.product.selectedAddOnProducts.length>0&&r.handleInvalidAddonItem(t.product.selectedAddOnProducts,i.productId,i.catRefId)}else e.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE&&t&&t.type===w&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1&&r.invalidProductNames.push(t.product.displayName)},I.prototype.handleInvalidAddonItem=function(e,t,r){var i=this;if(e&&e.length>0)for(var a=0;a<e.length;a++)for(var n=0;n<e[a].addOnOptions.length;n++)r&&e[a].addOnOptions[n].sku.repositoryId==r&&e[a].addOnOptions[n].product.id==t&&i.invalidProductNames.indexOf(e[a].addOnOptions[n].product.displayName)==-1?i.invalidProductNames.push(e[a].addOnOptions[n].product.displayName):e[a].addOnOptions[n].product.id==t&&i.invalidProductNames.indexOf(e[a].addOnOptions[n].product.displayName)==-1&&i.invalidProductNames.push(e[a].addOnOptions[n].product.displayName),e[a].addOnOptions[n].product.selectedAddOnProducts&&e[a].addOnOptions[n].product.selectedAddOnProducts.length>0&&i.handleInvalidAddonItem(e[a].addOnOptions[n].product.selectedAddOnProducts,t,r)},I.prototype.findCartProductById=function(e,t){var r=this,i=r.items();t&&(i=t);for(var a=0;a<i.length;a++){if(i[a].productId==e)return i[a].productData();if(i[a].childItems&&i[a].childItems.length>0){var n=r.findCartProductById(e,i[a].childItems);if(n)return n}}},I.prototype.createCurrentProfileOrder=function(){var e=this,i={incomplete:!0};if(e.items()&&e.items().length>0&&!e.isOrderSubmissionInProgress){var a=e.events.pop(),o=new R(e);e.populateGiftCards(o,a),e.populateIINs(o,a),e.adapter.persistCreate("order","0",o,i,function(r){e.isPricingRequired(!1),e.updateCart(r,a,!1),e.shippingMethod()?(e.skipGWPMessage=!0,e.populateShipppingMethods()):e.updateCart(r,a,!1,!0),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof e.callbacks[c.PRICING_SUCCESS_CB]&&e.callbacks[c.PRICING_SUCCESS_CB](r)},function(t){if(t.status==c.HTTP_UNAUTHORIZED_ERROR)e.handleSessionExpiry(a);else{if(t.errorCode==c.COUPON_APPLY_ERROR)e.handleCouponPricingError(t,a);else if(t.errorCode==c.GIFTCARD_APPLY_ERROR||t.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||t.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||t.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR)e.handleGiftCardError(t);else if(t.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||t.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND||t.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE)e.handleInvalidAddItem(t,a),e.notifyInvalidProducts();else if(t.errorCode==c.UNLINKED_ADD_ON_PRODUCT){if(a&&a.type==w&&a.product.selectedAddOnProducts){var i=JSON.parse(t.moreInfo);e.handleInvalidAddonItem(a.product.selectedAddOnProducts,i.productId,i.catRefId),e.notifyInvalidProducts()}}else if(t.errorCode==c.ADDON_VOLUME_PRICE_ERROR){var o=t.message+" "+n.t("ns.common:resources.removeItemFromCart");r.sendError(K,o,!0),e.isDirty(!1)}else if(t.errorCode==c.INVALID_SHOPPER_INPUT){var i=JSON.parse(t.moreInfo),s=i.productId,l=e.findCartProductById(s);l&&(s=l.displayName);var o=n.t("ns.common:resources.invalidShopperInputError",{productName:s});r.sendError(K,o,!0),e.isDirty(!1)}e.loadCart()}e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_FAILURE_CB)&&"function"==typeof e.callbacks[c.PRICING_FAILURE_CB]&&e.callbacks[c.PRICING_FAILURE_CB](t)})}else e.isOrderSubmissionInProgress&&console.warn(n.t("ns.common:resources.priceOrderBlockedText"))},I.prototype.removeCurrentProfileOrder=function(){var e=this;e.adapter.persistRemove("order",e.user().orderId(),null,function(t){e.user().orderId(""),e.user().persistedOrder(null),e.user().setLocalData("orderId")},function(t){e.loadCart()})},I.prototype.addCoupon=function(e){var t=this;if(e){var r=t.getCookieDataAndCompare(),i=new P(e,"","","","");t.events.push(new N(k,1,i)),r&&!t.isMatchingCookieData()?t.getLocalData(r):t.addCouponToCart(i)}},I.prototype.addMultipleCoupons=function(e){var t,r=this,i=e.length;if(i>0){for(var a=r.getCookieDataAndCompare(),n=0;n<i;n++){t=e[n];var o=new P(t,"","","","");e[n]=o}r.events.push(new N(W,1,e)),a&&!r.isMatchingCookieData()?r.getLocalData(a):r.addMultipleCouponsToCart(e)}},I.prototype.addMultipleCoupons=function(e){var t,r=this,i=e.length;if(i>0){for(var a=r.getCookieDataAndCompare(),n=0;n<i;n++){t=e[n];var o=new P(t,"","","","");e[n]=o}r.events.push(new N(W,1,e)),a&&!r.isMatchingCookieData()?r.getLocalData(a):r.addMultipleCouponsToCart(e)}},I.prototype.addGiftCard=function(e){var t=this;e.giftCardNumber&&e.giftCardPin&&(t.giftCards.push(e),t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentGiftCardCheck(e):(t.events.push(new N(F,0,e)),t.markDirty()))},I.prototype.addMultipleGiftCards=function(e){var t,r=this,i=e.length;if(i>0){for(var a=0;a<i;a++)t=e[a],t.giftCardNumber&&t.giftCardPin&&r.giftCards.push(t);r.currentOrderState()==c.PENDING_PAYMENTS||r.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?r.pendingPaymentGiftCardCheck(e):(r.events.push(new N($,0,e)),r.markDirty())}},I.prototype.pendingPaymentGiftCardCheck=function(e){for(var t=this,r="inquireBalance",i=[],a={},n=0;n<t.giftCards().length;n++){var o=t.giftCards()[n],a={};a.paymentMethodType=c.GIFT_CARD_PAYMENT_TYPE,a.giftCardNumber=o.giftCardNumber(),a.giftCardPin=o.giftCardPin(),null!=a.giftCardPin&&void 0!=a.giftCardPin&&""!=a.giftCardPin&&i.push(a)}var s={};s.orderId=t.currentOrderId(),s.op=r,s.profileId=t.user().id?t.user().id():t.user().customerId(),s.payments=i;var l="addPayments";h.request(l,s,function(e){t.updateGiftCardDetailsForPendingPayment(e)},function(r){t.handleGiftCardErrorPendingPayment(r,e)})},I.prototype.updateGiftCardDetailsForPendingPayment=function(e){var r=this;if(e.paymentResponses&&r.giftCards().length>0)for(var i=0;i<r.giftCards().length;i++){for(var a=!1,n=r.giftCards()[i],o=0;o<e.paymentResponses.length;o++){var c=e.paymentResponses[o];if(n.giftCardNumber()==c.giftCardNumber){n.amountInGiftCard(c.balance);var l=r.isChargeTaxShippingInSecondaryCurrency()&&e.amountsRemaining?e.amountsRemaining.secondaryCurrencyRemainingAmount:e.amountRemaining;l>=parseFloat(c.balance)?(n.amountUsed(parseFloat(c.balance)),n.isAmountRemaining(!1),l=parseFloat(l)-parseFloat(c.balance)):(n.amountUsed(parseFloat(l)),n.isAmountRemaining(!0),l=0),n.maskedGiftCardNumber(c.maskedCardNumber),n.isApplyGiftCardClicked(!1),a=!0;break}}0==a?n.isPinCleared(!0):n.isPinCleared(!1)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(r.giftCards()),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).publish(l),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(r)},I.prototype.pendingPaymentRemoveGiftCard=function(e){var r=this;s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(r.giftCards()),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT).publish(e.amountUsed()),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(r)},I.prototype.handleGiftCardErrorPendingPayment=function(e,r){var i=this;i.giftCards.remove(function(e){return e.giftCardNumber()==r.giftCardNumber()}),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(i.giftCards()),s.Topic(t.topicNames.GIFTCARD_PRICING_FAILED).publish(e,r),i.isDirty(!1)},I.prototype.clearPins=function(){for(var e=this,r=0;r<e.giftCards().length;r++){var i=e.giftCards()[r];i.giftCardPin(""),i.isPinCleared(!0),i.isApplyGiftCardClicked(!1)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(e.giftCards())},I.prototype.reApplyGiftCardPins=function(e){var t=this;t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentGiftCardCheck(e):(t.events.push(new N(H,0,e)),t.markDirty())},I.prototype.removeGiftCard=function(e){var t=this;t.giftCards.remove(function(t){return t.giftCardNumber()==e.giftCardNumber()}),t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentRemoveGiftCard(e):(t.events.push(new N(G,0,e)),t.markDirty())},I.prototype.addCouponToCart=function(e){var t=this;t.coupons.push(e),t.couponMultiPromotions.push(new C(e.code())),t.markDirty()},I.prototype.addMultipleCouponsToCart=function(e){for(var t,r=this,i=e.length,a=0;a<i;a++)t=e[a],r.coupons.push(t),r.couponMultiPromotions.push(new C(t.code()));r.markDirty()},I.prototype.addMultipleCouponsToCart=function(e){for(var t,r=this,i=e.length,a=0;a<i;a++)t=e[a],r.coupons.push(t),r.couponMultiPromotions.push(new C(t.code()));r.markDirty()},I.prototype.removeCoupon=function(e){var t=this;if(e.code){var r=t.getCookieDataAndCompare();t.events.push(new N(U,0,e)),r&&!t.isMatchingCookieData()?t.getLocalData(r):t.removeCouponFromCart(e)}},I.prototype.removeCouponFromCart=function(e){var t=this;t.coupons.remove(function(t){return t.code()==e.code()}),t.couponMultiPromotions.remove(function(t){return t.code()==e.code()}),t.markDirty()},I.prototype.handleSessionExpiry=function(e){var t=this;if(e&&e.type===w){var i=e.product,a=t.addToCart.bind(i);a()}else e&&(e.type===M||e.type===x||e.type===k||e.type===W||e.type===U)&&l.isPathEqualTo(t.cartLink)?(r.sendError(K,n.t("ns.common:resources.cartSessionExpired"),!0),t.user().clearUserData()):e&&(e.type===k||e.type===W||e.type===U)&&l.isPathEqualTo(t.checkoutLink)&&(t.isDirty(!1),t.markDirty())},I.prototype.handleCouponPricingError=function(e,t){var i=this;e.message&&t&&(t.type===k||t.type===W)&&i.coupons()[i.coupons().length-1].code()==e.moreInfo?i.couponErrorMessage(e.message):!e.message||t&&t.type==k&&t.type==W||r.sendError(K,n.t("ns.common:resources.orderPricingPromotionError"),!0),e.moreInfo&&(i.isDirty(!1),i.coupons.remove(function(t){return t.code()==e.moreInfo}),i.couponMultiPromotions.remove(function(t){return t.code()==e.moreInfo}),i.markDirty())},I.prototype.handleCurrencyPricingError=function(){var t=this;t.cartPriceListGroupId(u.getInstance().selectedPriceListGroup().id),h.setStoredValue(c.LOCAL_STORAGE_PRICELISTGROUP_ID,e.toJSON(u.getInstance().selectedPriceListGroup().id)),t.isDirty(!1),t.markDirty()},I.prototype.priceItems=function(){var e=this,i=e.events.pop(),a=new R(e);e.populateGiftCards(a,i),e.populateIINs(a,i),e.adapter.persistCreate(c.ENDPOINT_ORDERS_PRICE_ORDER,"0",a,function(r){e.isPricingRequired(!1),e.updateCart(r,i,!1),e.callPriceBeforeShippingMethods&&e.populateShipppingMethods(),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof e.callbacks[c.PRICING_SUCCESS_CB]&&e.callbacks[c.PRICING_SUCCESS_CB](r)},function(t){if(t.errorCode==c.SELECTED_CURRENCY_NOT_FOUND)e.handleCurrencyPricingError();else if(t.errorCode==c.COUPON_APPLY_ERROR)e.handleCouponPricingError(t,i);else if(t.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||t.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND||t.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE)e.handleInvalidAddItem(t,i),e.notifyInvalidProducts(),e.loadCart(),e.tax(0),e.secondaryCurrencyTaxAmount(0);else if(t.errorCode==c.GIFTCARD_APPLY_ERROR||t.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||t.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||t.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR)e.handleGiftCardError(t,i);else if(t.errorCode==c.ANONYMOUS_USER_ACCESS_CONTROL_ERROR)r.sendError("UserNotAuthorized",n.t("ns.common:resources.anonymousAccessControlError"),!0);else if(t.errorCode==c.UNLINKED_ADD_ON_PRODUCT){if(i&&i.type==w&&i.product.selectedAddOnProducts){var a=JSON.parse(t.moreInfo);e.handleInvalidAddonItem(i.product.selectedAddOnProducts,a.productId,a.catRefId),e.notifyInvalidProducts(),e.loadCart()}}else if(t.errorCode==c.ADDON_VOLUME_PRICE_ERROR){var o=t.message+" "+n.t("ns.common:resources.removeItemFromCart");r.sendError(K,o,!0),e.isDirty(!1)}else if(t.errorCode==c.INVALID_SHOPPER_INPUT){var a=JSON.parse(t.moreInfo),s=a.productId,l=e.findCartProductById(s);l&&(s=l.displayName);var o=n.t("ns.common:resources.invalidShopperInputError",{productName:s});r.sendError(K,o,!0),e.isDirty(!1)}else e.tax(0),e.secondaryCurrencyTaxAmount(0);e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_FAILURE_CB)&&"function"==typeof e.callbacks[c.PRICING_FAILURE_CB]&&e.callbacks[c.PRICING_FAILURE_CB](t)})},I.prototype.hasSingleShippingInformation=function(){var e=!1;return this.isSplitShipping()||(e=""!==this.shippingAddress()&&""!==this.shippingMethod()),e},I.prototype.hasSplitShippingInformation=function(){var e=!1;return this.isSplitShipping()&&(e=this.items().every(function(e){return e.shippingGroupRelationships.isValid()&&e.shippingGroupRelationships().every(function(e){return e.shippingAddress()&&e.shippingMethod()})})),e},I.prototype.hasShippingInformation=function(){var e=this.hasSplitShippingInformation()||this.hasSingleShippingInformation();return e},I.prototype.setUnpricedErrorAndSaveCart=function(t,r){var i=this;e.utils.arrayForEach(i.items(),function(e){e.commerceItemId==t&&i.isConfigurableItem(e)&&e.childItems&&e.childItems.length>0&&e.setUnpricedError(r)}),i.saveCartCookie()},I.prototype.clearAllUnpricedErrorsAndSaveCart=function(){var t=this;e.utils.arrayForEach(t.items(),function(e){e.clearUnpricedError()}),t.saveCartCookie()},I.prototype.setExternalPricesForItems=function(t){var r=this;e.utils.arrayForEach(r.items(),function(e){t.commerceItemId==e.commerceItemId&&e.externalPrice(t.externalPrice)})},I.prototype.priceCartForCheckout=function(){var i=this,a=i.events.pop();if(i.hasShippingInformation()&&!i.isOrderSubmissionInProgress){var o=new R(i);this.isSplitShipping()?o.shippingGroups=this.createShippingGroups():(o.shippingMethod={value:this.shippingMethod()},o.shippingAddress=this.shippingAddress(),this.user().emailAddress()&&!e.utils.unwrapObservable(o.shippingAddress.email)?o.shippingAddress.email=this.user().emailAddress():this.user().loggedIn()||!this.emailAddressForGuestUser||e.utils.unwrapObservable(o.shippingAddress.email)&&o.shippingAddress.email==this.emailAddressForGuestUser||(o.shippingAddress.email=this.emailAddressForGuestUser)),o.populateShippingMethods=!0,i.populateGiftCards(o,a),i.populateIINs(o,a),i.items().length>0?this.currentOrderState()!=c.PENDING_PAYMENTS&&this.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&(i.user()&&i.user().loggedIn()&&!i.user().loggedinAtCheckout()?(o.checkout=!0,o.clearCoupons=!1,o.merge=!1,i.adapter.persistUpdate("order",i.user().orderId(),o,function(e){i.isPricingRequired(!1),i.updateCart(e,a,!1),s.Topic(t.topicNames.ORDER_PRICING_SUCCESS).publish([{message:"success"}]),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish()},function(e){if(e.errorCode==c.SELECTED_CURRENCY_NOT_FOUND)i.handleCurrencyPricingError();else if(e.errorCode==c.COUPON_APPLY_ERROR)i.handleCouponPricingError(e,a);else if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND)i.loadCart(),i.tax(0),i.secondaryCurrencyTaxAmount(0);else if(e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR)i.handleGiftCardError(e,a);else if(e.errorCode==c.INVALID_SHIPPING_METHOD&&i.usingImprovedShippingWidgets())i.populateShipppingMethods();else if(e.errorCode==c.UNLINKED_ADD_ON_PRODUCT)i.loadCart();else if(e.errorCode==c.ADDON_VOLUME_PRICE_ERROR){var o=e.message+" "+n.t("ns.common:resources.removeItemFromCart");r.sendError(K,o,!0),i.isDirty(!1)}else if(e.errorCode==c.INVALID_SHOPPER_INPUT){var l=JSON.parse(e.moreInfo),d=l.productId,u=i.findCartProductById(d);u&&(d=u.displayName);var o=n.t("ns.common:resources.invalidShopperInputError",{productName:d});r.sendError(K,o,!0),i.isDirty(!1)}else i.shippingMethod(""),i.loadCart(),i.tax(0),i.secondaryCurrencyTaxAmount(0),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publishWith(e);s.Topic(t.topicNames.DESTROY_SHIPPING_METHODS_SPINNER).publishWith(e)})):i.adapter.loadJSON("orderPricing","0",o,function(e){i.isPricingRequired(!1),i.updateCart(e,a,!1),s.Topic(t.topicNames.ORDER_PRICING_SUCCESS).publish([{message:"success"}]),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish()},function(e){if(e.errorCode==c.SELECTED_CURRENCY_NOT_FOUND)i.handleCurrencyPricingError();else if(e.errorCode==c.COUPON_APPLY_ERROR)i.handleCouponPricingError(e,a);else if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND)i.loadCart(),i.tax(0),i.secondaryCurrencyTaxAmount(0);else if(e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR)i.handleGiftCardError(e,a);else if(e.errorCode==c.INVALID_SHIPPING_METHOD&&i.usingImprovedShippingWidgets())i.populateShipppingMethods();else if(e.errorCode==c.UNLINKED_ADD_ON_PRODUCT)i.loadCart();else if(e.errorCode==c.ADDON_VOLUME_PRICE_ERROR){var o=e.message+" "+n.t("ns.common:resources.removeItemFromCart");r.sendError(K,o,!0),i.isDirty(!1)}else if(e.errorCode==c.INVALID_SHOPPER_INPUT){var l=JSON.parse(e.moreInfo),d=l.productId,u=i.findCartProductById(d);u&&(d=u.displayName);var o=n.t("ns.common:resources.invalidShopperInputError",{productName:d});r.sendError(K,o,!0),i.isDirty(!1)}else i.shippingMethod(""),i.loadCart(),i.tax(0),i.secondaryCurrencyTaxAmount(0),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publishWith(e);s.Topic(t.topicNames.DESTROY_SHIPPING_METHODS_SPINNER).publishWith(e)})):(i.emptyCart(),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publish(),i.user()&&i.user().loggedIn()&&!i.user().loggedinAtCheckout()&&i.removeCurrentProfileOrder())}else i.isOrderSubmissionInProgress&&console.warn(n.t("ns.common:resources.priceOrderBlockedText"))},I.prototype.handleGiftCardError=function(e,r){var i=this,a=r.product;if(r.type===F)i.giftCards.remove(function(e){return e.giftCardNumber()==a.giftCardNumber()});else if(r.type===$)for(var n=0;n<a.length;n++)i.giftCards.remove(function(e){return e.giftCardNumber()==a[n].giftCardNumber()});else r.type===H&&e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR&&(i.giftCards.remove(function(e){return e.giftCardNumber()==a.giftCardNumber()}),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(i.giftCards()),i.isDirty(!1),i.isDirty(!0));s.Topic(t.topicNames.GIFTCARD_PRICING_FAILED).publish(e,a,r),i.isDirty(!1)},I.prototype.updateCart=function(e,r,i,a){var n=this;(i||n.items().length>0)&&(n.updateCartData(e,i,a),n.updateGiftCardDetails(e,r),n.updateDynamicProperties(e),n.cartUpdated(),s.Topic(t.topicNames.CART_PRICE_COMPLETE).publish(),r&&r.type===w?s.Topic(t.topicNames.CART_ADD_SUCCESS).publish(r.product):r&&r.type===M?s.Topic(t.topicNames.CART_UPDATE_SUCCESS).publish():r&&r.type===k?s.Topic(t.topicNames.COUPON_APPLY_SUCCESSFUL).publish():r&&r.type===U&&s.Topic(t.topicNames.COUPON_DELETE_SUCCESSFUL).publish(),s.Topic(t.topicNames.CART_PRICE_SUCCESS).publish(n))},I.prototype.updateGiftCardDetails=function(e,i){var a=this,o=[];if(e.payments&&a.giftCards().length>0){for(var l=0;l<a.giftCards().length;l++){for(var d=!1,u=a.giftCards()[l],p=0;p<e.payments.length;p++){var h=e.payments[p];if(h.paymentMethod==c.GIFT_CARD_PAYMENT_TYPE&&u.giftCardNumber()==h.giftCardNumber){u.amountInGiftCard(h.balance),u.amountUsed(h.amount),u.isAmountRemaining(h.isAmountRemaining),u.maskedGiftCardNumber(h.maskedCardNumber),u.isApplyGiftCardClicked(!1),d=!0;break}}i&&i.product&&i.product.giftCardNumber&&i.product.giftCardNumber()===u.giftCardNumber()&&u.isPinCleared(!1),0==d&&o.push(u)}for(var f=0;f<o.length;f++)a.giftCards.remove(function(e){return e.giftCardNumber()==o[f].giftCardNumber()});o&&o.length>0&&r.sendError(K,n.t("ns.common:resources.orderPricingPromotionError"),!0)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(a.giftCards()),a.updateRemainingAmount(e)},I.prototype.updateRemainingAmount=function(e){var r=this,i=null;if(e.payments&&r.giftCards().length>0){for(var a=r.getDerivedTotal(r.secondaryCurrencyTotal(),r.total()),n=r.isChargeTaxShippingInSecondaryCurrency()?r.secondaryCurrency().fractionalDigits:r.currency.fractionalDigits,o=0,c=0,l=0;l<e.payments.length;l++){var d=e.payments[l];"true"!=d.default_initial&&(c=parseFloat(o)+parseFloat(d.amount),o=E.handleFractionalDigits(c,n))}c=parseFloat(a)-parseFloat(o),i=E.handleFractionalDigits(c,n)}s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).publish(i)},I.prototype.updateCartData=function(e,t,r){var i=this;e&&(e.orderId||e.id)&&(e.orderId?i.user().orderId(e.orderId):e.id&&i.user().orderId(e.id),i.user().setLocalData("orderId"));var a=null;if(e.priceListGroup&&e.priceListGroup.currency&&(i.currency=e.priceListGroup.currency),s.when(u.getInstance().siteLoadedDeferred).done(function(){var t=u.getInstance().getCurrency(e.secondaryCurrencyCode);i.setSecondaryCurrencyData(t,e.exchangeRate,e.payShippingInSecondaryCurrency,e.payTaxInSecondaryCurrency)}),a=e.order&&(i.currentOrderId()||i.mergeCart())?S(e.order.items,i.items,t,i,e,r):S(e.shoppingCart.items,i.items,t,i,e,r),i.combineLineItems===c.COMBINE_YES&&(i.combineLineItems=1==i.shouldCombineLineItems(i.items())?c.COMBINE_YES:c.COMBINE_NO),e.order&&(i.currentOrderId()||i.mergeCart())?i.numberOfItems(e.order.numberOfItems):i.numberOfItems(e.shoppingCart.numberOfItems),i.total(e.priceInfo.total),i.totalWithoutTax(e.priceInfo.totalWithoutTax),i.subTotal(e.priceInfo.subTotal),i.shipping(e.priceInfo.shipping),i.secondaryCurrencyShippingAmount(e.priceInfo.secondaryCurrencyShippingAmount),i.taxExclusiveAmount(e.priceInfo.taxExclusiveAmount),i.tax(e.priceInfo.tax),i.secondaryCurrencyTaxAmount(e.priceInfo.secondaryCurrencyTaxAmount),i.currencyCode(e.priceInfo.currencyCode),i.shippingSurcharge(e.priceInfo.shippingSurchargeValue),i.secondaryCurrencyShippingSurcharge(e.priceInfo.secondaryCurrencyShippingSurchargeValue),i.secondaryCurrencyTotal(e.priceInfo.secondaryCurrencyTotal),i.primaryCurrencyTotal(e.priceInfo.primaryCurrencyTotal),e.recurringChargePriceInfo&&(i.recurringChargeAmount(e.recurringChargePriceInfo.amount),i.recurringChargeCurrencyCode(e.recurringChargePriceInfo.currencyCode),i.recurringChargeShipping(e.recurringChargePriceInfo).shipping,i.recurringChargeSubTotal(e.recurringChargePriceInfo.subTotal),i.recurringChargeSubTotalByFrequency(e.recurringChargePriceInfo.subTotalByFrequency),i.recurringChargeTax(e.recurringChargePriceInfo.tax),i.recurringChargeTaxByFrequency(e.recurringChargePriceInfo.taxByFrequency),i.recurringChargeTotal(e.recurringChargePriceInfo.total)),e.discountInfo){e.discountInfo.orderDiscount?i.orderDiscount(e.discountInfo.orderDiscount):i.orderDiscount(0),e.discountInfo.shippingDiscount?(i.shippingDiscount(e.discountInfo.shippingDiscount),i.secondaryCurrencyShippingDiscount(e.discountInfo.secondaryCurrencyShippingDiscount)):(i.shippingDiscount(0),i.secondaryCurrencyShippingDiscount(0)),e.discountInfo.orderImplicitDiscountList&&i.orderDiscountDescList(e.discountInfo.orderImplicitDiscountList),e.discountInfo.unclaimedCouponsMap&&i.populateCoupons(e.discountInfo.unclaimedCouponsMap,c.COUPON_STATUS_UNCLAIMED),e.discountInfo.orderCouponsMap&&i.populateCoupons(e.discountInfo.orderCouponsMap,c.COUPON_STATUS_CLAIMED),i.couponMultiPromotions.splice(0),e.discountInfo.unclaimedCouponMultiPromotions&&i.populateCouponMultiPromotions(e.discountInfo.unclaimedCouponMultiPromotions,c.COUPON_STATUS_UNCLAIMED,c.PROMOTION_NOT_APPLIED),e.discountInfo.claimedCouponMultiPromotions&&i.populateCouponMultiPromotions(e.discountInfo.claimedCouponMultiPromotions,c.COUPON_STATUS_CLAIMED,c.PROMOTION_APPLIED),i.populateClaimedCouponMultiPromotions(i.couponMultiPromotions());for(var n=i.coupons().length-1;n>=0;n--)e.discountInfo.orderCouponsMap.hasOwnProperty(i.coupons()[n].code())||e.discountInfo.unclaimedCouponsMap.hasOwnProperty(i.coupons()[n].code())||i.coupons.splice(n,1);e.shippingGroups?i.orderShippingGroups(e.shippingGroups):(i.shippingDiscount([]),i.secondaryCurrencyShippingDiscount(0))}i.amount(e.priceInfo.amount),i.skipGWPMessage||i.sendGWPMessages(e),i.skipGWPMessage=!1,i.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers,i.placeHolderItems.removeAll(),e.giftWithPurchaseInfo&&e.giftWithPurchaseInfo.length&&i.updatePlaceHolderItems(e.giftWithPurchaseInfo);for(var n=0;n<i.items().length;n++)if(null==i.items()[n].productData()){i.getProductData();break}return a},I.prototype.addGiftDataToItem=function(e,t){if(e.discountInfo().length){var r=e.discountInfo();e.giftData=[];for(var i=0;i<r.length;i++)if(r[i].giftWithPurchaseDiscountInfo&&r[i].giftWithPurchaseDiscountInfo.length)for(var a=0;a<r[i].giftWithPurchaseDiscountInfo.length;a++){var n=r[i].giftWithPurchaseDiscountInfo[a];if(n.giftWithPurchaseChoicesAvailable)for(var o=n.giftWithPurchaseIdentifier,s=0;s<t.giftWithPurchaseInfo.length;s++)if(t.giftWithPurchaseInfo[s].giftWithPurchaseIdentifier==o&&t.giftWithPurchaseInfo[s].promotionId==r[i].promotionId){var c={};c.giftWithPurchaseType=t.giftWithPurchaseInfo[s].giftWithPurchaseType,c.giftWithPurchaseDetail=t.giftWithPurchaseInfo[s].giftWithPurchaseDetail,c.promotionId=t.giftWithPurchaseInfo[s].promotionId,c.giftWithPurchaseIdentifier=t.giftWithPurchaseInfo[s].giftWithPurchaseIdentifier,c.giftWithPurchaseQuantity=n.giftWithPurchaseQuantity,e.giftData.push(c),e.isGWPChoicesAvaliable(!0);break}}}},I.prototype.updatePlaceHolderItems=function(e){for(var t=this,r=0;r<e.length;r++)if(e[r].giftWithPurchaseQuantityAvailableForSelection){var i=e[r].giftWithPurchaseQuantityAvailableForSelection;if(i){var a=e[r];a.displayName=n.t("ns.common:resources.freeProductText"),a.imageData={primaryThumbImageURL:"/img/GWP_GiftWithPurchase.jpg",primaryImageAltText:a.displayName,primaryImageTitle:a.displayName},a.quantity=1,a.itemTotal=0,a.quantityDisabled=!0,a.id=Math.floor(1e4*Math.random()),a.isPlaceHolderItem=!0}for(;i;)t.placeHolderItems.push(a),i--}t.numberOfItems(t.numberOfItems()+t.placeHolderItems().length)},I.prototype.removePlaceHolderFromCart=function(e){var r=this;r.placeHolderItems.remove(e),r.allItems.remove(e),s.Topic(t.topicNames.CART_REMOVE_SUCCESS).publishWith([{message:"success"}]),r.numberOfItems(r.numberOfItems()-1)},I.prototype.sendGWPMessages=function(e){var i=this;if(r.clearError(z),i.gwpQualified&&(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1),e.pricingMessages&&e.pricingMessages.giftWithPurchaseMessages&&e.pricingMessages.giftWithPurchaseMessages.length){for(var a,n,o,c=e.pricingMessages.giftWithPurchaseMessages,l=!1,d=!1,u=null,p=0;p<c.length;p++)"GWPFullFailure"!=c[p].identifier||d?"GWPQualified"!=c[p].identifier||i.gwpQualified?"GWPInvalidated"!=c[p].identifier||l||(o=c[p].summary,l=!0,s.Topic(t.topicNames.GWP_INVALIDATED_MESSAGE).publish(c[p])):(n=c[p].summary,u==c[p].params[0]?(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1,u=null):(s.Topic(t.topicNames.GWP_QUALIFIED_MESSAGE).publish(c[p]),i.gwpQualified=!0,u=c[p].params[0])):(a=c[p].summary,d=!0,c[p].params[0]==u?(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1,u=null):u=c[p].params[0],s.Topic(t.topicNames.GWP_FAILURE_MESSAGE).publish(c[p]));d&&!i.gwpQualified?r.sendError(z,a,!0):i.gwpQualified?r.sendSuccess(z,n,!0):l&&r.sendError(z,o,!0)}},I.prototype.populateCoupons=function(e,t){var r=this,i=[],a=!1,n=r.coupons().length;for(var o in e){for(var s=0;s<n;s++)if(o==r.coupons()[s].code()){r.coupons()[s].description(e[r.coupons()[s].code()].promotionDesc),r.coupons()[s].status(t),r.coupons()[s].level(e[r.coupons()[s].code()].promotionLevel),r.coupons()[s].id(e[r.coupons()[s].code()].promotionId),r.coupons()[s].totalAdjustment(e[r.coupons()[s].code()].totalAdjustment),r.coupons()[s].name(e[r.coupons()[s].code()].promotionName),r.coupons()[s].longDescription(e[r.coupons()[s].code()].promotionLongDesc),a=!0;break}a||i.push(new P(o,e[o].promotionDesc,t,e[o].promotionLevel,e[o].promotionId,e[o].totalAdjustment,e[o].promotionName,e[o].promotionLongDesc))}for(var s=0;s<i.length;s++)r.coupons.push(i[s])},I.prototype.populateCouponMultiPromotions=function(e,t,r){var i=this,a=[],n=!1,o=i.couponMultiPromotions().length;for(var s in e){n=!1;for(var c=0;c<o;c++)if(s==i.couponMultiPromotions()[c].code()){i.couponMultiPromotions()[c].couponStatus(t),i.couponMultiPromotions()[c].populateCouponData(e[s],r),
n=!0;break}n||a.push(new C(s,e[s],t,r))}for(var c=0;c<a.length;c++)i.couponMultiPromotions.push(a[c])},I.prototype.populateClaimedCouponMultiPromotions=function(t){var r=this;r.claimedCouponMultiPromotions.splice(0);for(var i=0;i<t.length;i++)if(t[i].couponStatus()===c.COUPON_STATUS_CLAIMED){for(var a=[],n=0;n<t[i].promotions().length;n++)t[i].promotions()[n].promotionApplied()&&a.push(e.mapping.toJS(t[i].promotions()[n]));r.claimedCouponMultiPromotions.push(new C(t[i].code(),a,c.COUPON_STATUS_CLAIMED,c.PROMOTION_APPLIED))}},I.prototype.populateShippingMethodsForShippingGroup=function(t,r,i){var a=this,n={};n.shoppingCart={},n.shoppingCart.items=[],n.shoppingCart.items.push({catRefId:t.catRefId,productId:t.productId,quantity:t.quantity()}),a.adapter.persistCreate(c.ENDPOINT_ORDERS_PRICE_ORDER,"0",n,function(n){var o={},l=t.shippingAddress();if(l){o[c.PRODUCT_IDS_FOR_SHIPPING]=[t.productId],o[c.POPULATE_SHIPPING_METHODS]=!0,o[c.SHIPPING_ADDRESS_FOR_METHODS]=l.toJSON(),o.priceInfo={amount:a.amount(),total:a.total(),shipping:a.shipping(),totalWithoutTax:a.totalWithoutTax(),currencyCode:a.currencyCode(),shippingSurchargeValue:a.shippingSurcharge(),tax:a.tax(),subTotal:a.subTotal()};var d=e.observableArray();S(n.shoppingCart.items,d,!0),o.items=d(),t.shippingOptions.removeAll(),a.loadMultipleShippingMethods&&s.isFunction(a.loadMultipleShippingMethods)&&a.loadMultipleShippingMethods(r,i,o)}},function(e){i(e)})},I.prototype.events=new Array,I.prototype.validateCartAvailability=function(){var e=this,t=s.Deferred();if(e.items().length>0){var r=new O(e),i={};i[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,i[c.IDENTIFIER_KEY]="stockStatsToValidateCart";var a=e.storeConfiguration.getFilterToUse(i);a&&(r[c.FILTER_KEY]=a),e.adapter.loadJSON("getStockStatuses","0",r,function(r){t.resolve(e.validateCartForCheckout(r))},function(r){t.reject(r),e.redirect(e.cartLink),e.notifyInvalidProducts("cart")})}return t},I.prototype.validateCartForCheckout=function(e){for(var t=this,r=0;r<t.items().length;r++)if(t.isConfigurableItem(t.items()[r]))t.items()[r].getItemQuantityInCart=t.getUpdatableItemQuantityInCart.bind(t,t.items(),t.items()[r].productId,t.items()[r].catRefId),t.items()[r].addConfigurableStockValidation(e,t.isPreOrderBackOrderEnabled);else for(var i=0;i<e.length;i++)if(t.items()[r].productId===e[i].productId&&t.items()[r].catRefId===e[i].catRefId){"IN_STOCK"===e[i].stockStatus||"PREORDERABLE"===e[i].stockStatus||"BACKORDERABLE"===e[i].stockStatus?(t.items()[r].getItemQuantityInCart=t.getUpdatableItemQuantityInCart.bind(t,t.items(),t.items()[r].productId,t.items()[r].catRefId),t.items()[r].addLimitsValidation(!0,e[i].orderableQuantity,e[i],t.isPreOrderBackOrderEnabled)):t.items()[r].addLimitsValidation(!1,e[i].orderableQuantity,e[i],t.isPreOrderBackOrderEnabled);break}for(var r=0;r<t.items().length;r++)for(var i=0;i<e.length;i++)if(t.items()[r].productId===e[i].productId&&t.items()[r].catRefId===e[i].catRefId){if("PREORDERABLE"!==e[i].stockStatus&&"IN_STOCK"!==e[i].stockStatus&&"BACKORDERABLE"!==e[i].stockStatus||!(t.items()[r].quantity()<=e[i].orderableQuantity)||!t.items()[r].updatableQuantity.isValid())return t.redirect(t.cartLink),t.checkoutWithPaypalClicked(!1),!1;break}return!0},I.prototype.redirect=function(e){var r=this;r.validateAndRedirectCart()||(r.checkoutLink==e||e==c.PAYPAL_CHECKOUT_TYPE)&&(r.user().loggedIn()||r.user().isUserSessionExpired())?(r.validateAndRedirectCart(!1),e==c.PAYPAL_CHECKOUT_TYPE?r.user().validateAndRedirectPage(e):r.user().validateAndRedirectPage(r.checkoutLink)):l.isPathEqualTo(e)?r.reloadCart():e==c.PAYPAL_CHECKOUT_TYPE?s.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.goTo(e)},I.prototype.setContext=function(e){this.contextData=e,this.cartLink=this.contextData.global.links.cart.route,this.checkoutLink=this.contextData.global.links.checkout.route,this.isTaxIncluded=this.contextData.global.site.isTaxIncluded,this.showTaxSummary=this.contextData.global.site.showTaxSummary,this.isPreOrderBackOrderEnabled=this.contextData.global.preorderBackorderEnabled},I.prototype.validateDynamicProperties=function(){for(var e=this,t=0;t<e.dynamicProperties().length;t++){var r=e.dynamicProperties()[t];if(!r.validateNow())return!1}return!0},I.prototype.updateDynamicProperties=function(e){var t=this;if(e.dynamicProperties&&t.dynamicProperties){for(var r=!1,i=0;i<e.dynamicProperties.length;i++){for(var a=!1,n=0;n<t.dynamicProperties().length;n++)if(e.dynamicProperties[i].id===t.dynamicProperties()[n].id()){t.dynamicProperties()[n].value(e.dynamicProperties[i].value),a=!0;break}if(!a){r=!0;var o=new p;o.id(e.dynamicProperties[i].id),o.value(e.dynamicProperties[i].value),t.dynamicProperties.push(o)}}r&&t.getDynamicPropertiesMetadata(!1)}},I.prototype.updateItemDynamicProperties=function(t,r){if(r.dynamicProperties)for(var i=0;i<r.dynamicProperties.length;i++)t[r.dynamicProperties[i].id]=e.observable(r.dynamicProperties[i].value)},I.prototype.populateDynamicProperties=function(e){for(var t=this,r=0;r<t.dynamicProperties().length;r++){var i=t.dynamicProperties()[r],a=i.id(),n=i.value();e[a]=n}},I.prototype.getDynamicPropertiesMetadata=function(e){var t=this,r=!0;if(e){var i=null;try{i=t.getStorageItem("cartDynPropsMetadata"),i&&(i=JSON.parse(i),t.processDynamicPropertiesMetadata(i,!1),r=!1)}catch(e){}}if(r){var a={},n={};n[c.ENDPOINT_KEY]=c.ENDPOINT_METADATA_GET_METADATA,n[c.IDENTIFIER_KEY]="dynamicProperties";var o=t.storeConfiguration.getFilterToUse(n);o&&(a[c.FILTER_KEY]=o),t.adapter.loadJSON("dynamicProperties","order",a,function(e){e&&t.processDynamicPropertiesMetadata(e,!0)},function(e){})}},I.prototype.getItemDynamicPropertiesMetadata=function(e){var t=this;t.adapter.loadJSON(c.ENDPOINT_GET_ITEM_TYPE,e,null,function(r){r&&t.processItemDynamicPropertiesMetadata(r,e)},function(e){})},I.prototype.processDynamicPropertiesMetadata=function(e,t){for(var r=this,i=[],a=0;a<e.length;a++){for(var n=!0,o=0;o<r.dynamicProperties().length&&n;o++)e[a].id===r.dynamicProperties()[o].id()&&(n=!1,r.dynamicProperties()[o].initializeMetadata(e[a],!1));if(n){var s=new p;s.initializeMetadata(e[a],!0),i.push(s)}}for(var a=0;a<i.length;a++)r.dynamicProperties.push(i[a]);if(t)try{for(var c=new Array,a=0;a<r.dynamicProperties().length;a++)c.push(r.dynamicProperties()[a].getMetadata());var l=JSON.stringify(c);r.setStorageItem("cartDynPropsMetadata",l,10800)}catch(e){}},I.prototype.processItemDynamicPropertiesMetadata=function(e,t){var r=this,i=[];if(t==c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM){for(var a=0;a<e.specifications.length;a++){for(var n=!0,o=0;o<r.lineAttributes().length&&n;o++)e.specifications[a].id===r.lineAttributes()[o].id()&&(n=!1,r.lineAttributes()[o].initializeMetadata(e.specifications[a],!1));if(n){var s=new p;s.initializeMetadata(e.specifications[a],!0),i.push(s)}}for(var a=0;a<i.length;a++)r.lineAttributes.push(i[a])}},I.prototype.setStorageItem=function(e,t,r){void 0!==r&&null!==r||(r=3600);var i=new Date,a=Math.round(i.setSeconds(i.getSeconds()+r)/1e3);d.getInstance().setItem(e,t),d.getInstance().setItem(e+"_time",a)},I.prototype.getStorageItem=function(e){var t=new Date,r=Math.round(t/1e3),i=d.getInstance().getItem(e),a=d.getInstance().getItem(e+"_time");return void 0!==a&&null!==a||(a=0),a<r?(this.removeStorageItem(e),null):i},I.prototype.removeStorageItem=function(e){d.getInstance().removeItem(e),d.getInstance().removeItem(e+"_time")},I.prototype.setCallbackFunctions=function(e){var t=this;if(e&&Object.keys(e)&&Object.keys(e).length>0)for(var r in e)t.callbacks[r]=e[r]},I.prototype.createShippingGroups=function(e){var t,r=this,i=null;if(this.user().emailAddress()&&(i=this.user().emailAddress()),!this.user().loggedIn()&&this.emailAddressForGuestUser&&(i=this.emailAddressForGuestUser),e)for(var a=0;a<this.items().length;a++)this.items()[a].shippingGroupRelationships()[0].quantity()!=this.items()[a].quantity()&&this.items()[a].shippingGroupRelationships()[0].quantity(this.items()[a].quantity());var n=0;if(this.isSplitShipping()||e){var o=this.items().reduce(function(e,t){if(t.shippingGroupRelationships())for(var a=0;a<t.shippingGroupRelationships().length;a++)t.shippingGroupRelationships()[a].commerceItemId=t.commerceItemId,r.isSplitShipping()||t.shippingGroupRelationships()[a].shippingAddress(r.shippingAddress()),t.childItems&&t.childItems.length>0&&(t.shippingGroupRelationships()[a].childItems=t.childItems);return t.shippingGroupRelationships().forEach(function(t){var r=t.asMap(i),a=Object.keys(r)[0],o=e[a],c=r[a];if(t.commerceItemId)var l=t.catRefId+"_"+t.commerceItemId;else var l=t.catRefId;var d=o?o.items[l]:void 0,u=c.items[l];o?t.shippingGroupId=o.shippingGroupId:(c.shippingGroupId=n.toString(),t.shippingGroupId=n.toString(),n++),d?d.quantity+=u.quantity:s.extend(!0,e,r)}),e},{});t=Object.keys(o).map(function(e){return o[e]}).filter(function(e){if(e.items=Object.keys(e.items).map(function(t){return e.items[t]}).filter(function(e){if(e.quantity>0)return e}),e.items.length)return e})}return t},I.prototype.splitItems=function(e,t,r){var i=this,a=!1;i.combineLineItems=c.COMBINE_NO,i.events.push(new N(j,11,e)),i.removeItem(e);for(var n=0;n<t.length;n++){var o={productId:e.productId,productData:e.productData(),quantity:t[n],catRefId:e.catRefId,selectedOptions:e.selectedOptions,currency:i.currency,externalData:e.externalData(),actionCode:e.actionCode(),lineAttributes:i.lineAttributes,externalRecurringCharge:e.externalRecurringCharge(),externalRecurringChargeFrequency:e.externalRecurringChargeFrequency(),externalRecurringChargeDuration:e.externalRecurringChargeDuration(),assetId:e.assetId(),serviceId:e.serviceId(),customerAccountId:e.customerAccountId(),billingAccountId:e.billingAccountId(),serviceAccountId:e.serviceAccountId(),activationDate:e.activationDate(),deactivationDate:e.deactivationDate(),childItems:e.childItems,addOnItem:e.addOnItem,shopperInput:e.shopperInput},s=new v(o);s.populateItemDynamicProperties(r[n]),s.isPersonalized(!0),!a&&A(e.discountInfo())&&(s.giftWithPurchaseCommerceItemMarkers=e.giftWithPurchaseCommerceItemMarkers,a=!0),i.items.push(s)}i.getCartAvailability(),i.markDirty()},I.prototype.addItemToCart=function(e,t,r){function i(e,t,r){var i=[{errorCode:e,catRefId:t,errorMessage:r}];return i}function a(e,t){for(var i=[],a=0;a<t.length;a++){var n={errorCode:t[a].errorCode,catRefId:t[a].catRefId,errorMessage:t[a].errorMessage};i.push(n)}"function"==typeof r&&r(e,i)}var o=this,l=[];l.push(e.catalogRefId),o.isConfigurableItem(e)&&e.childItems&&e.childItems.length>0&&o.addSkuIdFromConfigurableProduct(l,e);var d=new Array(o.catalogId(),l,!1,u.getInstance().selectedPriceListGroup().id),p={},h={};h[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_SKUS,h[c.IDENTIFIER_KEY]="skuListing";var f=o.storeConfiguration.getFilterToUse(h);f&&(p[c.FILTER_KEY]=f),o.adapter.loadJSON("sku",d,p,function(r){for(var l,d=[],u=!0,p=r.items?r.items:r,h=0;h<p.length;h++)p[h].parentProducts[0]&&!p[h].parentProducts[0].active&&(d.push(p[h].repositoryId),u=!1);if(u){for(var h=0;h<p.length;h++){var f=s.extend(!0,{},p[h]);if(f.repositoryId==e.catalogRefId){l=f.parentProducts[0];var m=f;delete m[c.PARENT_PRODUCTS],l.childSKUs=[m],f.productVariantOptions&&f.productVariantOptions.length>0&&(l.selectedOptions=f.productVariantOptions[0]),l.orderQuantity=parseInt(e.quantity),l.itemTotal=e.amount,l.price=e.externalPrice,l.catalogRefId=e.catalogRefId,o.isConfigurableItem(e)&&void 0!=e.configuratorId&&null!=e.configuratorId&&""!=e.configuratorId&&(l.configuratorId=e.configuratorId),l.externalData=e.externalData,l.actionCode=e.actionCode,l.externalRecurringCharge=e.externalRecurringCharge,l.externalRecurringChargeFrequency=e.externalRecurringChargeFrequency,l.externalRecurringChargeDuration=e.externalRecurringChargeDuration,l.assetId=e.assetId,l.serviceId=e.serviceId,l.customerAccountId=e.customerAccountId,l.billingAccountId=e.billingAccountId,l.serviceAccountId=e.serviceAccountId,l.activationDate=e.activationDate,l.deactivationDate=e.deactivationDate;break}}o.isConfigurableItem(e)&&(l.childItems=o.createChildItemTree(p,e));var g=new D(l,o.catalogId()),v={};v[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,v[c.IDENTIFIER_KEY]="stockStatsForItem";var y=o.storeConfiguration.getFilterToUse(v);y&&(g[c.FILTER_KEY]=y),o.adapter.loadJSON("getStockStatuses","0",g,function(r){for(var s=[],d=!0,u=0;u<r.length;u++)"IN_STOCK"!=r[u].stockStatus&&"PREORDERABLE"!=r[u].stockStatus&&"BACKORDERABLE"!=r[u].stockStatus&&(s.push(r[u].catRefId),d=!1);if(d){var p=o.getCookieDataAndCompare(),h=o.getCartItemForReconfiguration(l.id,l.childSKUs[0].repositoryId,l.configuratorId);null!==h?o.events.push(new N(Y,1,l)):o.events.push(new N(w,1,l)),p&&!o.isMatchingCookieData()?(o.getLocalData(p),0==p.items.length&&o.addItem(l)):o.addItem(l);var f={pricingsuccess:function(e){f&&"function"==typeof t&&(t(l),f=null)},pricingfailure:function(t){f&&(a(e,i(c.PRODUCT_ADD_TO_CART_PRICING_ERROR,"",t.message)),f=null)}};o.setCallbackFunctions(f)}else{for(var m=[],u=0;u<s.length;u++){var g={sku:s[u]},v={errorCode:c.PRODUCT_ADD_TO_CART_OUT_OF_STOCK,catRefId:s[u],errorMessage:n.t("ns.common:resources.skuOutOfStockError",g)};m.push(v)}a(l,m)}},function(t){a(e,i(c.PRODUCT_ADD_TO_CART_INVENTORY_ERROR,"",t.message))})}else{for(var b=[],h=0;h<d.length;h++){var E={sku:d[h]},I={errorCode:c.CREATE_ORDER_SKU_NOT_FOUND,catRefId:d[h],errorMessage:n.t("ns.common:resources.skuNotFoundError",E)};b.push(I)}a(e,b)}},function(t){a(e,i(c.PRODUCT_ADD_TO_CART_GET_SKU_ERROR,"",t.message))})},I.prototype.addItemsToCart=function(e,t,r,i){function a(e,t,r){var i=[{errorCode:e,catRefId:t,errorMessage:r}];return i}function o(e){for(var t=[],i=0;i<e.length;i++){var a={errorCode:e[i].errorCode,catRefId:e[i].catRefId,errorMessage:e[i].errorMessage};t.push(a)}"function"==typeof r&&r(t)}for(var s,l=this,d=[],p=e.length,h=0;h<p;h++)if(s=e[h],s.catalogRefId?d.push(s.catalogRefId):s.catRefId&&d.push(s.catRefId),s.childItems)for(var f=0;f<s.childItems.length;f++)s.childItems[f].catalogRefId?d.push(s.childItems[f].catalogRefId):s.childItems[f].catRefId&&d.push(s.childItems[f].catRefId);var m=[];if(d.length>0){var g=new Array(l.catalogId(),d,!0,u.getInstance().selectedPriceListGroup().id),v={},y={};y[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_SKUS,y[c.IDENTIFIER_KEY]="skuListing";var b=l.storeConfiguration.getFilterToUse(y);b&&(v[c.FILTER_KEY]=b),l.adapter.loadJSON("sku",g,v,function(r){var s,d=[],u=[],p=[],h=!0,f=!1,g=!1,v=r.items||r;if(r.deletedSkus&&r.deletedSkus.length>0)for(var y=[],b=0;b<r.deletedSkus.length;b++)for(var E=0;E<e.length;E++)e[E].catalogRefId!=r.deletedSkus[b]&&e[E].catRefId!=r.deletedSkus[b]||u.push({displayName:e[E].displayName||r.deletedSkus[b]});0==v.length&&o(a(c.NONE_OF_THE_ITEMS_ADDED,"",n.t("ns.common:resources.noneOfTheItemsCanBeAdded")));for(var I=0;I<v.length;I++)v[I].parentProducts[0]&&!v[I].parentProducts[0].active?(u.push({displayName:v[I].parentProducts[0].displayName,SKUId:v[I].repositoryId}),h=!1):v[I]&&v[I].parentProducts[0]&&v[I].parentProducts[0].notForIndividualSale&&(u.push({displayName:v[I].parentProducts[0].displayName}),g=!0),v[I]&&v[I].configurable&&(p.push(v[I]),f=!0);for(var T,P=e.length,I=0;I<v.length;I++)for(var C=0;C<P;C++){T=e[C];var S=v[I],A=T.catalogRefId;if(A||(A=T.catRefId),!S.listPrice&&i){u.push({displayName:S.parentProducts[0].displayName});break}if(S.repositoryId==A&&(S.listPrice||!i)&&(s=S.parentProducts[0],s.active&&!s.notForIndividualSale)){var _=S;delete _[c.PARENT_PRODUCTS],s.childSKUs=[_],S.productVariantOptions&&S.productVariantOptions.length>0&&(s.selectedOptions=S.productVariantOptions[0]),s.orderQuantity=parseInt(T.orderQuantity),s.orderQuantity||(void 0!=T.quantityDesired?s.orderQuantity=parseInt(T.quantityDesired()):s.orderQuantity=parseInt(T.quantity)),s.itemTotal=T.amount,s.catalogRefId=T.catalogRefId,s.catalogRefId||(s.catalogRefId=T.catRefId),T.configurationId&&(s.configuratorId=T.configurationId),T.childItems&&(s.childItems=T.childItems),d.push(s)}}if(0==d.length)return void o(a(c.NONE_OF_THE_ITEMS_ADDED,"",n.t("ns.common:resources.noneOfTheItemsCanBeAdded")));var O=new L(d,l.catalogId()),R={};R[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,R[c.IDENTIFIER_KEY]="stockStatsForItem";var D=l.storeConfiguration.getFilterToUse(R);if(D&&(O[c.FILTER_KEY]=D),l.adapter.loadJSON("getStockStatuses","0",O,function(e){for(var r=[],i=!0,s=0;s<e.length;s++)"IN_STOCK"!=e[s].stockStatus&&"PREORDERABLE"!=e[s].stockStatus&&"BACKORDERABLE"!=e[s].stockStatus&&(r.push(e[s]),i=!1);for(var s=0;s<d.length;s++)for(var u=0;u<r.length;u++){if(d[s].catalogRefId==r[u].catRefId){r[u].displayName=d[s].displayName,d.splice(s,1),s--;break}if(d[s].childItems&&d[s].childItems.length>0){for(var p=d[s].childItems.length-1;p>=0;p--)d[s].childItems[p].catRefId==r[u].catRefId&&(r[u].displayName=d[s].childItems[u].displayName,d[s].childItems.splice(p,1));if(d[s].childItems&&0==d[s].childItems.length){d.splice(s,1),s--;break}}}if(0==d.length)return void o(a(c.NONE_OF_THE_ITEMS_ADDED,"",n.t("ns.common:resources.noneOfTheItemsCanBeAdded")));var h=l.getCookieDataAndCompare();l.events.push(new N(B,1,d)),h&&!l.isMatchingCookieData()?(l.getLocalData(h),0==h.items.length&&l.addItems(d)):l.addItems(d);var f={pricingsuccess:function(e){f&&"function"==typeof t&&(t(d),f=null)},pricingfailure:function(e){f&&(o(a(c.PRODUCT_ADD_TO_CART_PRICING_ERROR,"",e.message)),f=null)}};if(l.setCallbackFunctions(f),!i){for(var g=r[0].displayName,v=r[0].catRefId,s=1;s<r.length;s++)g=g+" ,"+r[s].displayName,v=v+","+r[s].catRefId;var y={displayName:g},b={errorCode:c.PRODUCT_ADD_TO_CART_OUT_OF_STOCK,catRefId:v,errorMessage:n.t("ns.common:resources.outOfStockError",y)};m.push(b),o(m)}},function(e){o(a(c.PRODUCT_ADD_TO_CART_INVENTORY_ERROR,"",e.message))}),u&&u.length>0){var w={};y=u[0].displayName;for(var M=u[0].SKUId,I=1;I<u.length;I++)y+=u[I].displayName,M=M+","+u[I].SKUId;var w={displayName:y},x={errorCode:c.CREATE_ORDER_SKU_NOT_FOUND,catRefId:M,errorMessage:n.t("ns.common:resources.productNotFoundError",w)};m.push(x)}if(f&&p[0].parentProducts&&p[0].parentProducts[0]){var k=p[0].repositoryId;y=p[0].parentProducts[0].displayName;for(var I=1;I<p.length;I++)y=y+","+p[I].parentProducts[0].displayName,k=p[I].repositoryId;var w={displayName:y},x={errorCode:c.CONFIGURABLE_PRODUCTS_NOT_ALLOWED_FAILURE_CODE,catRefId:k,errorMessage:n.t("ns.common:resources.configurableProductError",w)};m.push(x)}m.length>0&&o(m)},function(e){o(a(c.PRODUCT_ADD_TO_CART_GET_SKU_ERROR,"",e.message))})}else o(a(c.NONE_OF_THE_ITEMS_ADDED,"",n.t("ns.common:resources.noneOfTheItemsCanBeAdded")))},I.prototype.requestQuote=function(e,t,r,i){var a=this,n={};e&&(n.note=e),t&&(n.orderId=t),a.adapter.persistCreate("requestQuote","0",a.addDynamicProperties(n),null,r,i)},I.prototype.rejectQuote=function(e,t,r,i){var a=this,n={};e&&(n.note=e),t&&(n.orderId=t),a.adapter.persistCreate("rejectQuote","0",n,null,r,i)},I.prototype.addDynamicProperties=function(e){for(var t=this,r=0;r<t.dynamicProperties().length;r++){var i=t.dynamicProperties()[r],a=i.id(),n=null;null!=i.value&&(n=i.value()),e[a]=n}return e},I.getInstance=function(e,t,r,i){return I.singleInstance||(I.singleInstance=new I(e,t,i,r),I.singleInstance.isPricingRequired(!0),I.singleInstance.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM)),t&&t.items&&(I.singleInstance.updatedFromRepository=!0,I.singleInstance.getLocalData(t)),r&&I.singleInstance.setContext(r),I.singleInstance},I.prototype.loadTemplateOrderItems=function(e){var i=this;if(i.user()&&i.user().loggedIn()&&!i.user().isUserSessionExpired()){var a={},n={};n[c.ENDPOINT_KEY]=c.ENDPOINT_GET_ORDER,n[c.IDENTIFIER_KEY]="templateOrder";var o=i.storeConfiguration.getFilterToUse(n);o&&(a[c.FILTER_KEY]=o),h.request(c.ENDPOINT_GET_ORDER,a,function(e){var a=e.state;a==c.TEMPLATE||a==c.PENDING_APPROVAL_TEMPLATE||a==c.SCHEDULED_ORDER_STATE_REJECTED||a==c.PENDING_PAYMENT_TEMPLATE?(i.mergeItems(e),i.markDirty(),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).publish(e.shippingMethod.value),i.shippingMethod(e.shippingMethod.value),i.cartUpdated(),i.user().validateAndRedirectPage("/cart")):r.sendError("scheduledOrder","Invalid order state.",!0)},function(e){l.goTo(i.contextData.global.links[404].route)},e)}else l.doLogin(l.getPath(),i.contextData.global.links.home.route)},I.prototype.loadOrderItems=function(e){var r=this;r.mergeItems(e),r.getProductData(),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).publish(e.shippingMethod.value),r.shippingMethod(e.shippingMethod.value),r.user().validateAndRedirectPage("/cart")},I.setApplication=function(e){Q=e},I}),define("viewModels/paymentDetails",["knockout","ccConstants","pubsub"],function(e,t,r){"use strict";function i(a,n){if(i.singleInstance)throw new Error("Cannot instantiate more than one PaymentDetails, use getInstance(pAdapter, data)");var o=this;return o.nameOnCard=e.observable(),o.cardType=e.observable(),o.cardNumber=e.observable(),o.cardCVV=e.observable(),o.endMonth=e.observable(),o.endYear=e.observable(),o.selectedCardType=e.observable(),o.selectedEndMonth=e.observable(),o.selectedEndYear=e.observable(),o.cardTypeList=e.observableArray(),o.cards=null,o.gateways=null,o.payULatamCountryList=null,o.enabledTypes=null,o.IINPromotionsEnabled=!0,o.monthList=e.observableArray(),o.endYearList=e.observableArray(),o.cardIINPattern=e.observable("[0-9]"),o.cardNumberLength=e.observable("16"),o.cvvLength=e.observable("3"),o.startDateRequired=e.observable(!1),o.endMonthPlaceholderText=e.observable(""),o.endYearPlaceholderText=e.observable(""),o.cardTypePlaceholderText=e.observable(""),o.isCardPaymentDisabled=e.observable(!1),o.isPaypalDisabled=e.observable(!1),o.isCardEnabledForScheduledOrder=e.observable(!1),o.isGiftCardEnabledForScheduledOrder=e.observable(!1),o.isInvoiceEnabledForScheduledOrder=e.observable(!1),o.isCashEnabledForScheduledOrder=e.observable(!1),o.isPayULEnabledForScheduledOrder=e.observable(!1),o.isPaypalEnabledForScheduledOrder=e.observable(!1),o.isCardEnabledForApproval=e.observable(!1),o.isGiftCardEnabledForApproval=e.observable(!1),o.isInvoiceEnabledForApproval=e.observable(!1),o.isCashEnabledForApproval=e.observable(!1),o.isPayULEnabledForApproval=e.observable(!1),o.isPaypalEnabledForApproval=e.observable(!1),o.isValid=function(){return o.nameOnCard.isValid()&&o.cardType.isValid()&&o.cardNumber.isValid()&&o.cardCVV.isValid()&&o.endMonth.isValid()&&o.endYear.isValid()},o.isModified=function(){return o.nameOnCard.isModified||o.cardType.isModified||o.cardNumber.isModified||o.cardCVV.isModified||o.endMonth.isModified||o.endYear.isModified?o.nameOnCard.isModified&&o.nameOnCard.isModified()||o.cardType.isModified&&o.cardType.isModified()||o.cardNumber.isModified&&o.cardNumber.isModified()||o.cardCVV.isModified&&o.cardCVV.isModified()||o.endMonth.isModified&&o.endMonth.isModified()||o.endYear.isModified&&o.endYear.isModified():!!(o.nameOnCard&&o.cardType&&o.cardNumber&&o.cardCVV&&o.endMonth&&o.endYear)},o.resetModified=function(){o.nameOnCard.isModified&&o.nameOnCard.isModified(!1),o.cardType.isModified&&o.cardType.isModified(!1),o.cardNumber.isModified&&o.cardNumber.isModified(!1),o.cardCVV.isModified&&o.cardCVV.isModified(!1),o.endMonth.isModified&&o.endMonth.isModified(!1),o.endYear.isModified&&o.endYear.isModified(!1)},o.validatePaymentDetails=function(){return o.nameOnCard.isModified(!0),o.cardType.isModified(!0),o.cardNumber.isModified(!0),o.cardCVV.isModified(!0),o.endMonth.isModified(!0),o.endYear.isModified(!0),o.isValid()},o.resetPaymentDetails=function(e){o.nameOnCard(null),o.selectedCardType(null),o.cardType(void 0),o.cardNumber(null),o.cardCVV(null),o.selectedEndMonth(void 0),o.selectedEndYear(void 0),o.endMonth(null),o.endYear(null),o.nameOnCard.isModified&&o.nameOnCard.isModified(!1),o.cardType.isModified&&o.cardType.isModified(!1),o.cardNumber.isModified&&o.cardNumber.isModified(!1),o.cardCVV.isModified&&o.cardCVV.isModified(!1),o.endMonth.isModified&&o.endMonth.isModified(!1),o.endYear.isModified&&o.endYear.isModified(!1)},o.resetCVV=function(){o.cardCVV.isModified&&o.cardCVV.isModified(!1),o.cardCVV("")},o.populatePaymentData=function(r,i){if(o.cardTypeList=e.observableArray(r.cards),o.cards=r.cards,o.gateways=r.gateways,o.payULatamCountryList=r.payULatamCountryList,o.cashPaymentCountryList=r.cashPaymentCountryList,o.enabledTypes=r.enabledTypes,o.IINPromotionsEnabled=r.IINPromotionsEnabled,i().isB2BUser()){var a=i().currentOrganization().derivedUseAllPaymentMethodsFromSite;if(void 0!=a&&a)o.enabledTypes=r.enabledTypes;else{for(var n=r.enabledTypes.length,s=i().currentOrganization().derivedPaymentMethods,c=[],l=0;l<n;l++)for(var d=0;d<s.length;d++)r.enabledTypes[l]==s[d]&&c.push(r.enabledTypes[l]);o.enabledTypes=c}}else o.enabledTypes=r.enabledTypes;o.enabledTypes&&o.enabledTypes.indexOf(t.CARD_PAYMENT_TYPE)<0&&o.isCardPaymentDisabled(!0),o.enabledTypes&&o.enabledTypes.indexOf(t.PAYPAL_PAYMENT_TYPE)<0?o.isPaypalDisabled(!0):o.isPaypalDisabled(!1);for(var l=0;l<r.scheduledOrderEnabledGateways.length;l++)r.scheduledOrderEnabledGateways[l]===t.CARD_PAYMENT_TYPE&&o.isCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.GIFT_CARD_PAYMENT_TYPE&&o.isGiftCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.INVOICE_PAYMENT_TYPE&&o.isInvoiceEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.CASH_PAYMENT_TYPE&&o.isCashEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.PAYULATAM_CHECKOUT_TYPE&&o.isPayULEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.PAYPAL_PAYMENT_TYPE&&o.isPaypalEnabledForScheduledOrder(!0);for(var l=0;l<r.approvalEnabledGateways.length;l++)r.approvalEnabledGateways[l]===t.CARD_PAYMENT_TYPE&&o.isCardEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.GIFT_CARD_PAYMENT_TYPE&&o.isGiftCardEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.INVOICE_PAYMENT_TYPE&&o.isInvoiceEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.CASH_PAYMENT_TYPE&&o.isCashEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.PAYULATAM_CHECKOUT_TYPE&&o.isPayULEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.PAYPAL_PAYMENT_TYPE&&o.isPaypalEnabledForApproval(!0)},o.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");o.customProperties=e.mapping.fromJS(r)},$.Topic(r.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.USER_LOGOUT_SUBMIT).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.USER_SESSION_RESET).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.ORDER_SUBMISSION_FAIL).subscribe(this.resetCVV),o}return i.getInstance=function(e,t,r){return i.singleInstance||(i.singleInstance=new i(e,t)),t&&i.singleInstance.populatePaymentData(t,r),i.singleInstance},i}),define("viewModels/giftCardViewModel",["knockout","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","CCi18n","pageLayout/site","viewModels/paymentDetails"],function(e,t,r,i,a,n,o,s){"use strict";function c(){var r=this;if(r.giftCardNumber=e.observable(""),r.maskedGiftCardNumber=e.observable(""),r.giftCardPin=e.observable(""),r.amountInGiftCard=e.observable(""),r.paymentGroupId=e.observable(""),r.amountUsed=e.observable(0),r.isAmountRemaining=e.observable(!1),r.GIFTCARD_PIN_MAX_LENGTH=e.observable(4),r.GIFTCARD_NUMBER_MAX_LENGTH=e.observable(19),r.isPinCleared=e.observable(!1),r.isApplyGiftCardClicked=e.observable(!1),r.IS_GIFT_CARD_PIN_REQUIRED=e.observable(!0),r.triggerValidations=e.observable(!0),c.prototype.setGiftCardNumberMaxLength=function(e){if(e){var t=this;t.GIFTCARD_NUMBER_MAX_LENGTH(e),t.giftCardNumber.extend({validatable:!1}),t.giftCardNumber.extend({required:{params:!0,onlyIf:t.conditionsApply,message:n.t("ns.common:resources.giftCardNumberRequired",{})},maxLength:{params:t.GIFTCARD_NUMBER_MAX_LENGTH(),message:n.t("ns.common:resources.maxlengthValidationMsg",{maxLength:t.GIFTCARD_NUMBER_MAX_LENGTH(),fieldName:n.t("ns.common:resources.giftCardNumberText",{})})}})}},c.prototype.setGiftCardPinDetails=function(e,t){if(void 0!=e&&null!=e&&void 0!=t&&null!=t){var r=this;t<=0&&(e=!1,t=0),r.IS_GIFT_CARD_PIN_REQUIRED(e),r.GIFTCARD_PIN_MAX_LENGTH(t),r.giftCardPin.extend({validatable:!1}),r.giftCardPin.extend({required:{params:r.IS_GIFT_CARD_PIN_REQUIRED(),onlyIf:r.conditionsApply,message:n.t("ns.common:resources.giftCardPinRequired",{})},maxLength:{params:r.GIFTCARD_PIN_MAX_LENGTH(),message:n.t("ns.common:resources.maxlengthValidationMsg",{maxLength:r.GIFTCARD_PIN_MAX_LENGTH(),fieldName:n.t("ns.common:resources.giftCardPinText",{})})}})}},s.getInstance()&&s.getInstance().enabledTypes&&s.getInstance().enabledTypes.indexOf(t.GIFT_CARD_PAYMENT_TYPE)>-1){var i=o.getInstance();for(var a in i.extensionSiteSettings){var l=i.extensionSiteSettings[a];if(l[t.PAYMENT_METHOD_TYPES]&&l[t.PAYMENT_METHOD_TYPES].indexOf(t.GIFT_CARD_PAYMENT_TYPE)!=-1){void 0!=l.giftCardMaxLength&&r.GIFTCARD_NUMBER_MAX_LENGTH(l.giftCardMaxLength),void 0!=l.giftCardPinRequired&&void 0!=l.giftCardPinMaxLength&&(r.IS_GIFT_CARD_PIN_REQUIRED(l.giftCardPinRequired),r.GIFTCARD_PIN_MAX_LENGTH(l.giftCardPinMaxLength));break}}}r.setGiftCardNumberMaxLength(r.GIFTCARD_NUMBER_MAX_LENGTH()),r.setGiftCardPinDetails(r.IS_GIFT_CARD_PIN_REQUIRED(),r.GIFTCARD_PIN_MAX_LENGTH()),r.isValid=function(){return r.giftCardNumber.isValid()&&r.giftCardPin.isValid()},r.conditionsApply=function(){return r.triggerValidations()},r.validateNow=function(){return r.giftCardNumber.isModified(!0),r.giftCardPin.isModified(!0),r.isValid()},r.reset=function(){r.giftCardNumber(""),r.maskedGiftCardNumber(""),r.giftCardPin(""),r.amountInGiftCard(""),r.amountUsed(0),r.giftCardNumber.isModified(!1),r.giftCardPin.isModified(!1),r.isApplyGiftCardClicked(!1)},r.clearPin=function(){r.giftCardPin("")},r.createCustomProperties=function(t){var i={};for(var a in t)"string"==typeof t[a]&&(i[t[a]]="");r.customProperties=e.mapping.fromJS(i)}}return c}),define("ccStoreServerLogger",["knockout","pubsub","jquery","ccRestClient","ccConstants","storageApi","pageViewTracker"],function(e,t,r,i,a,n,o){"use strict";function s(){if(s.singleInstance)throw new Error("Cannot instantiate more than one CCStoreServerLogger. Use getInstance() method");var e=this;e.loggingEnabled=!0;var l="",d="",u=[],p=[],h=["debug","info","warning","error"],f={getPage:"0001",paymentTimeOut:"0002",createOrderFailure:"0003",updateOrderFailure:"0004",paymentGroupFailure:"0005",orderSubmissionFailure:"0006"},m={getPage:"Landed on __pageId__ page",paymentTimeOut:"Unable to Authorize payment due to time-out, while placing order for order ID __orderId__",createOrderFailure:"Unable to create order due to error code __errorCode__",updateOrderFailure:"Unable to update the order with order ID __orderId__ due to error code __errorCode__",paymentGroupFailure:"Unable to place order for order ID __orderId__ as the payment state is found to be __paymentState__ for the payment group ID __paymentGroupId__",orderSubmissionFailure:"Order Submission Failed for order with order ID __orderId__"},g={error:"[ERROR]",warning:"[WARN]",info:"[INFO]",debug:"[DEBUG]"},v=function(e){try{n.getInstance().setItem("logLevel",e)}catch(e){}},y=function(){var e=null;try{e=n.getInstance().getItem("logLevel")}catch(e){}return e},b=function(e){var t=[];switch(e){case"debug":t.push("debug");case"info":t.push("info");case"warning":t.push("warning");case"error":t.push("error");break;default:t=u}return t};e.setDefaultLogLevel=function(){"info"!=l&&(l="info",u=b(l),v(l))},e.setLogLevel=function(e){h.indexOf(e.toLowerCase())>-1&&l!=e.toLowerCase()&&(l=e.toLowerCase(),u=b(l),v(e))},y()?(l=y().toLowerCase(),u=b(l)):e.setDefaultLogLevel();var E=function(e){try{n.getInstance().setItem("pageIdListToLog",e)}catch(e){}},I=function(){var e=null;try{e=n.getInstance().getItem("pageIdListToLog"),e=e.split(",")}catch(e){}return e};if(e.setPagesToLog=function(e){null!=e&&(p=e,E(p))},e.addPageIdToLog=function(e){
p.indexOf(e)<0&&(p.push(e),E(p))},e.disablePageIdToLog=function(e){var t=this;null!=e&&p.indexOf(e)>-1&&(p.splice(p.indexOf(e),1),t.setPagesToLog(p))},I())p=I();else{var T=["checkout","payment","confirmation"];e.setPagesToLog(T)}var P=function(e,t){var r={},n=function(e){},o=function(e){};null!=t&&null!=e&&(r={logLevel:e,messages:t},i.request(a.ENDPOINT_LOGS_CREATE_LOG,r,n,o))},C=function(e,t,r){var i=g[r];if(null!=i){var a=o.getVisitorId(),n=o.getVisitId(),s=e+"-"+i+" "+t+", "+n+", "+a,c={LogData:s},l=[];l.push(c),P(r,l)}},S=function(e,t,r,i,a){a.loggingEnabled&&u.indexOf(t)>-1&&p.indexOf(d)>-1&&null!=r&&(null!=e&&""!=e||(e=c),null==i&&(i=f[e],null==i&&(i=e)),C(i,r,t))};e.logInfo=function(e,t,r){var i=this,a="info";S(e,a,t,r,i)},e.logWarning=function(e,t,r){var i=this,a="warning";S(e,a,t,r,i)},e.logDebug=function(e,t,r){var i=this,a="debug";S(e,a,t,r,i)},e.logError=function(e,t,r){var i=this,a="error";S(e,a,t,r,i)},e.getMessage=function(e,t){var r="";if(null!=e){var i=m[e];if(null!=i)for(var a=0;a<Object.keys(t).length;a++)r=Object.keys(t)[a],i=i.replace("__"+r+"__",t[r])}return i};var A=function(e,t){d=t.pageId};r.Topic(t.topicNames.PAGE_LAYOUT_LOADED).subscribe(A)}var c="UnstatedEvent";return s.getInstance=function(){return s.singleInstance||(s.singleInstance=new s),s.singleInstance},s}),define("viewModels/cashViewModel",["knockout","pageLayout/site","ccConstants","viewModels/paymentDetails"],function(e,t,r,i){"use strict";function a(){if(a.singleInstance)throw new Error("Cannot instantiate more than one cashViewModels, use getInstance()");var o=this;o.isPayingByCash=e.observable(!1),o.isCashPaymentEnabled=e.observable(!1),o.paymentDetails=i.getInstance(),o.setCashEnabledCountries=function(){for(var e in t.getInstance().extensionSiteSettings){var i=t.getInstance().extensionSiteSettings[e];i[r.PAYMENT_METHOD_TYPES]&&i[r.PAYMENT_METHOD_TYPES].split(",").indexOf(r.CASH_PAYMENT_TYPE)!=-1&&i[r.SELECTED_COUNTRIES]&&(n=i[r.SELECTED_COUNTRIES])}},o.verifyCashPaymentToBeEnabled=function(e){o.paymentDetails.enabledTypes.indexOf(r.CASH_PAYMENT_TYPE)!=-1&&n.indexOf(e)!=-1?o.isCashPaymentEnabled(!0):(o.isCashPaymentEnabled(!1),o.isPayingByCash(!1))},o.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");o.customProperties=e.mapping.fromJS(r)}}var n=[];return a.getInstance=function(){return a.singleInstance||(a.singleInstance=new a),a.singleInstance},a}),define("ccClientErrorCodes",[],function(){"use strict";function e(){}return e.SYNTAX_ERROR="15000",e.REFERENCE_ERROR="15001",e.TYPE_ERROR="15002",e.EVAL_ERROR="15003",e.RANGE_ERROR="15004",e.URI_ERROR="15005",e.GENERIC_ERROR="15006",e.NO_SPECIFIED_ERROR="15007",e.FILE_IS_NOT_AN_EXTENSION="15008",e}),define("sfExceptionHandler",["knockout","ccRestClient","ccConstants","ccClientErrorCodes","pubsub","pageViewTracker"],function(e,t,r,i,a,n){"use strict";function o(){}var s,c,l,d,u=[],p=0,h=10,f={},m=[],g="";return o.prototype.subscribe=function(){s=this,s.logWindowOnErrorBinding=s.logWindowOnError.bind(s),s.logExceptionErrorBinding=s.logExceptionError.bind(s),$.Topic(a.topicNames.EXCEPTION_HANDLER).subscribe(s.logExceptionErrorBinding),$.Topic(a.topicNames.ONERROR_EXCEPTION_HANDLER).subscribe(s.logWindowOnErrorBinding)},o.prototype.getErrorCode=function(e){return e?(e=e.toLowerCase(),l=e==="RangeError".toLowerCase()||e==="RangeError:".toLowerCase()?i.RANGE_ERROR:e==="TypeError".toLowerCase()||e==="TypeError:".toLowerCase()?i.TYPE_ERROR:e==="SyntaxError".toLowerCase()||e==="SyntaxError:".toLowerCase()?i.SYNTAX_ERROR:e==="ReferenceError".toLowerCase()||e==="ReferenceError:".toLowerCase()?i.REFERENCE_ERROR:e==="EvalError".toLowerCase()||e==="EvalError:".toLowerCase()?i.EVAL_ERROR:e==="URIError".toLowerCase()||e==="URIError:".toLowerCase()?i.URI_ERROR:i.GENERIC_ERROR):l=i.NO_SPECIFIED_ERROR,l},o.prototype.logExceptionError=function(e){s=this,s.errorCode=s.getErrorCode(e.name),s.errorUrl=location.href,s.errorLine="",s.errorMessage="";var t;for(t in e)"fileName"===t?s.errorUrl=e[t]:"lineNumber"===t&&(s.errorLine=e[t]);s.errorMessage=e.toString(),!s.errorLine&&e.line>0&&(s.errorLine=e.line),s.sendErrorReport(s.errorMessage,s.errorLine,s.errorUrl,s.errorCode)},o.prototype.logWindowOnError=function(e,t,r,i,a){s=this;var n,o,c,l=e.split(" ");for(o=0,c=l.length;o<c;o+=1)if(l[o].indexOf("Error")>=0){n=l[o];break}s.errorCode=s.getErrorCode(n),s.errorCode||(s.errorCode=" "),e?s.errorMessage=e:s.errorMessage=" ",t?s.errorUrl=t:s.errorUrl=" ",r?s.errorLine=r:s.errorLine=" ",i?s.errorCol=i:s.errorCol=" ",a&&(s.errorObj=a),s.sendErrorReport(s.errorMessage,s.errorLine,s.errorUrl,s.errorCode,s.errorCol,s.errorObj)},navigator.findBrowserVersion=function(){var e,t,r=navigator.appName,i=navigator.userAgent;return t=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),t&&null!==(e=i.match(/version\/([\.\d]+)/i))&&(t[2]=e[1]),t=t?[t[1],t[2]]:[r,navigator.appVersion,"-?"]}(),o.prototype.sendErrorReport=function(e,t,r,i,a,o){var s=n.getVisitorId(),l=n.getVisitId(),d=window.location.href,f=null;o&&(f=o.stack),"undefined"!=typeof e&&p<h&&(p+=1,c={message:e,url:r,browserURL:d,line:t,column:a,osVersion:window.navigator.platform,locale:window.navigator.language,browserVersion:navigator.findBrowserVersion[0]+" "+navigator.findBrowserVersion[1],time:(new Date).toISOString(),clientErrorCode:i,visitorId:s,visitId:l,stack:f},g=i+"#"+d+"#"+r+"#"+t+"#"+a,m.indexOf(g)<0&&(m.push(g),u.push(c),this.reportErrorsToServer()))},o.prototype.reportErrorsToServer=function(){u.length>0&&(d=r.ENDPOINT_ERRORLOGS_CREATE_ERRORLOG,f={},f={clientSideErrors:u},t.request(d,f,this.sendSuccess,this.sendError),u=[],p=0)},o.prototype.sendSuccess=function(e){},o.prototype.sendError=function(e){},o}),define("viewModels/cash",["knockout","ccConstants","koMapping"],function(e,t,r){"use strict";function i(){var i=this;i.paymentMethodType=t.CASH_PAYMENT_TYPE,i.type=t.CASH_PAYMENT_TYPE,i.amount=e.observable(),i.billingAddress=e.observable(void 0),i.seqNum=null,i.message=e.observable(),i.paymentGroupId=null,i.isEdit=e.observable(!1),i.createCustomProperties=function(t){var r={};for(var a in t)"string"==typeof t[a]&&(r[t[a]]="");i.customProperties=e.mapping.fromJS(r)},i.toJSON=function(){var e=r.defaultOptions().ignore;r.defaultOptions().ignore=["message","paymentGroupId","gatewayName","isAmountRemaining","paymentMethod","paymentState","uiIntervention","isEdit"];var t=r.toJS(i);return r.defaultOptions().ignore=e,t},i.resetPaymentDetails=function(){},i.validatePaymentData=function(){return!0}}return i}),define("viewModels/creditCard",["knockout","ccConstants","CCi18n","koMapping"],function(e,t,r,i){"use strict";function a(){var a=this;a.paymentMethodType=t.CARD_PAYMENT_TYPE,a.type=t.CARD_PAYMENT_TYPE,a.amount=e.observable(),a.billingAddress=e.observable(void 0),a.nameOnCard=e.observable(),a.cardType=e.observable(),a.cardNumber=e.observable(),a.cardCVV=e.observable(),a.expiryMonth=e.observable(),a.expiryYear=e.observable(),a.endMonth=e.observable(),a.endYear=e.observable(),a.triggerValidations=e.observable(!0),a.seqNum=null,a.cardIINPattern=e.observable("[0-9]"),a.cardNumberLength=e.observable("16"),a.cvvLength=e.observable("3"),a.startDateRequired=e.observable(!1),a.message=e.observable(),a.maskedNumber=e.observable(),a.paymentGroupId=null,a.gatewayName=null,a.uiIntervention=null,a.isEdit=e.observable(!1),a.isCardPaymentDisabled=e.observable(!1),Object.defineProperty(a,"gatewayName",{value:null,enumerable:!1,writable:!0}),Object.defineProperty(a,"uiIntervention",{value:null,enumerable:!1,writable:!0}),a.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");a.customProperties=e.mapping.fromJS(r)},a.toJSON=function(){var e=i.defaultOptions().ignore;i.defaultOptions().ignore=["cardIINPattern","cardNumberLength","cvvLength","startDateRequired","message","maskedNumber","paymentGroupId","gatewayName","uiIntervention","isAmountRemaining","paymentMethod","paymentState","isCardPaymentDisabled","triggerValidations","isEdit"];var t=i.toJS(a);return i.defaultOptions().ignore=e,a.billingAddress()&&(delete t.billingAddress,t.billingAddress=a.billingAddress().toJSON()),t},a.setMaskedNumber=function(e,t){a.maskedNumber(a.cardNumber().replace(e,t))},a.conditionsApply=function(){return a.triggerValidations()&&a.paymentMethodType==t.CARD_PAYMENT_TYPE&&!a.isCardPaymentDisabled()},a.nameOnCard.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.nameOnCardRequired")}}),a.cardType.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.cardTypeRequired")}}),a.cardNumber.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.cardNumberRequired")},maxLength:{params:t.CYBERSOURCE_CARD_NUMBER_MAXIMUM_LENGTH,message:r.t("cardNumberMaxLength",{maxLength:t.CYBERSOURCE_CARD_NUMBER_MAXIMUM_LENGTH})},creditcard:{params:{iin:a.cardIINPattern,length:a.cardNumberLength},onlyIf:a.conditionsApply,message:r.t("ns.common:resources.cardNumberInvalid")}}),a.cardCVV.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.cardCVVRequired")},minLength:{params:3,message:r.t("ns.common:resources.cardCVVNumberMinLength")},maxLength:{params:4,message:r.t("ns.common:resources.cardCVVNumberMaxLength")},number:{param:!0,message:r.t("ns.common:resources.cardCVVNumberInvalid")},cvv:{params:a.cvvLength,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.cardCVVInvalid")}}),a.expiryMonth.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.endMonthRequired")},endmonth:{params:a.expiryYear,message:r.t("ns.common:resources.endMonthInvalid")}}),a.expiryYear.extend({required:{params:!0,onlyIf:a.conditionsApply,message:r.t("ns.common:resources.endYearRequired")}}),a.resetPaymentDetails=function(e){a.nameOnCard(null),a.cardType(null),a.cardNumber(null),a.cardCVV(null),a.expiryMonth(null),a.expiryYear(null),a.nameOnCard.isModified&&a.nameOnCard.isModified(!1),a.cardType.isModified&&a.cardType.isModified(!1),a.cardNumber.isModified&&a.cardNumber.isModified(!1),a.cardCVV.isModified&&a.cardCVV.isModified(!1),a.expiryMonth.isModified&&a.expiryMonth.isModified(!1),a.expiryYear.isModified&&a.expiryYear.isModified(!1),a.isCardPaymentDisabled(!1),void 0!==e&&null!==e&&e!==!1||(a.nameOnCard.extend({validatable:!1}),a.cardType.extend({validatable:!1}),a.cardNumber.extend({validatable:!1}),a.cardCVV.extend({validatable:!1}),a.expiryMonth.extend({validatable:!1}),a.expiryYear.extend({validatable:!1}))},a.resetCardCvv=function(){a.cardCVV(null)},a.validatePaymentData=function(){return a.nameOnCard.isModified(!0),a.cardType.isModified(!0),a.cardNumber.isModified(!0),a.cardCVV.isModified(!0),a.expiryMonth.isModified(!0),a.expiryYear.isModified(!0),a.isValid()},a.isModified=function(){return a.nameOnCard.isModified()||a.cardType.isModified()||a.cardNumber.isModified()||a.cardCVV.isModified()||a.expiryMonth.isModified()||a.expiryYear.isModified()},a.resetModified=function(){a.nameOnCard.isModified(!1),a.cardType.isModified(!1),a.cardNumber.isModified(!1),a.cardCVV.isModified(!1),a.expiryMonth.isModified(!1),a.expiryYear.isModified(!1)},a.isValid=function(){return a.nameOnCard.isValid()&&a.cardType.isValid()&&a.cardNumber.isValid()&&a.cardCVV.isValid()&&a.expiryMonth.isValid()&&a.expiryYear.isValid()}}return a}),define("viewModels/giftCard",["knockout","ccConstants","CCi18n","pageLayout/site","koMapping"],function(e,t,r,i,a){"use strict";function n(){var n=this;n.paymentMethodType=t.GIFT_CARD_PAYMENT_TYPE,n.type=t.GIFT_CARD_PAYMENT_TYPE,n.amount=e.observable(),n.billingAddress=e.observable(void 0),n.giftCardNumberMaxLength=e.observable(19),n.giftCardPinMaxLength=e.observable(4),n.isGiftCardPinRequired=e.observable(!0),n.message=e.observable(),n.paymentGroupId=null,n.maskedNumber=e.observable(),n.isGiftCardReApplied=e.observable(!1),n.giftCardNumber=e.observable(),n.giftCardPin=e.observable(),n.isEdit=e.observable(!1),n.triggerValidations=e.observable(!0),n.seqNum=null;var o=i.getInstance();for(var s in o.extensionSiteSettings){var c=o.extensionSiteSettings[s];if(c[t.PAYMENT_METHOD_TYPES]&&c[t.PAYMENT_METHOD_TYPES].indexOf(t.GIFT_CARD_PAYMENT_TYPE)!=-1){void 0!=c.giftCardMaxLength&&n.giftCardNumberMaxLength(c.giftCardMaxLength),void 0!=c.giftCardPinRequired&&void 0!=c.giftCardPinMaxLength&&(n.isGiftCardPinRequired(c.giftCardPinRequired),n.giftCardPinMaxLength(c.giftCardPinMaxLength));break}}n.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");n.customProperties=e.mapping.fromJS(r)},n.toJSON=function(){var e=a.defaultOptions().ignore;a.defaultOptions().ignore=["giftCardNumberMaxLength","giftCardPinMaxLength","isGiftCardPinRequired","message","paymentGroupId","maskedNumber","balance","gatewayName","isAmountRemaining","maskedCardNumber","paymentMethod","paymentState","uiIntervention","isGiftCardReApplied","triggerValidations","isEdit"];var t=a.toJS(n);return a.defaultOptions().ignore=e,t},n.setMaskedNumber=function(e,t){n.maskedNumber(n.giftCardNumber().replace(e,t))},n.conditionsApply=function(){return n.triggerValidations()&&n.paymentMethodType==t.GIFT_CARD_PAYMENT_TYPE},n.giftCardNumber.extend({required:{params:!0,onlyIf:n.conditionsApply,message:r.t("ns.common:resources.giftCardNumberRequired",{})},maxLength:{params:n.giftCardNumberMaxLength(),message:r.t("ns.common:resources.maxlengthValidationMsg",{maxLength:n.giftCardNumberMaxLength(),fieldName:r.t("ns.common:resources.giftCardNumberText",{})})}}),n.giftCardPin.extend({required:{params:n.isGiftCardPinRequired(),onlyIf:n.conditionsApply,message:r.t("ns.common:resources.giftCardPinRequired",{})},maxLength:{params:n.giftCardPinMaxLength(),onlyIf:function(){return n.paymentMethodType==t.GIFT_CARD_PAYMENT_TYPE},message:r.t("ns.common:resources.maxlengthValidationMsg",{maxLength:n.giftCardPinMaxLength(),fieldName:r.t("ns.common:resources.giftCardPinText",{})})}}),n.resetPaymentDetails=function(){n.giftCardNumber(null),n.giftCardPin(null),n.giftCardNumber.isModified&&n.giftCardNumber.isModified(!1),n.giftCardNumber.extend({validatable:!1}),n.giftCardPin.isModified&&n.giftCardPin.isModified(!1),n.giftCardPin.extend({validatable:!1})},n.resetGiftCardPin=function(){n.giftCardPin(null)},n.validatePaymentData=function(){return n.giftCardNumber.isModified(!0),n.giftCardPin.isModified(!0),n.isValid()},n.isValid=function(){return n.giftCardNumber.isValid()&&n.giftCardPin.isValid()}}return n}),define("viewModels/invoice",["knockout","ccConstants","CCi18n","koMapping"],function(e,t,r,i){"use strict";function a(){var a=this;a.paymentMethodType=t.INVOICE_PAYMENT_TYPE,a.type=t.INVOICE_PAYMENT_TYPE,a.amount=e.observable(),a.billingAddress=e.observable(void 0),a.message=e.observable(),a.paymentGroupId=null,a.maskedNumber=e.observable(""),a.isEdit=e.observable(!1),a.PONumber=e.observable(),a.seqNum=null,a.PONumber.extend({maxLength:{params:t.PONUMBER_MAXIMUM_LENGTH,message:r.t("maxPOLengthValidationMsg",{maxLength:t.PONUMBER_MAXIMUM_LENGTH})}}),a.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");a.customProperties=e.mapping.fromJS(r)},a.toJSON=function(){var e=i.defaultOptions().ignore;i.defaultOptions().ignore=["message","paymentGroupId","maskedNumber","gatewayName","isAmountRemaining","paymentMethod","paymentState","uiIntervention","isEdit"];var t=i.toJS(a);return i.defaultOptions().ignore=e,a.billingAddress()&&(delete t.billingAddress,t.billingAddress=a.billingAddress().toJSON()),t},a.setMaskedNumber=function(e,t){a.PONumber()&&a.maskedNumber(a.PONumber().replace(e,t))},a.resetPaymentDetails=function(){a.PONumber(null),a.PONumber.isModified&&a.PONumber.isModified(!1),a.PONumber.extend({validatable:!1})},a.validatePaymentData=function(){return a.PONumber.isModified(!0),a.isValid()},a.isValid=function(){return a.PONumber.isValid()}}return a}),define("viewModels/paypal",["knockout","ccConstants","koMapping"],function(e,t,r){"use strict";function i(){var i=this;i.paymentMethodType=t.PAYPAL_PAYMENT_TYPE,i.type=t.PAYPAL_PAYMENT_TYPE,i.amount=e.observable(),i.billingAddress=e.observable(void 0),i.seqNum=null,i.message=e.observable(),i.paymentGroupId=null,i.isEdit=e.observable(!1),i.createCustomProperties=function(t){var r={};for(var a in t)"string"==typeof t[a]&&(r[t[a]]="");i.customProperties=e.mapping.fromJS(r)},i.toJSON=function(){var e=r.defaultOptions().ignore;r.defaultOptions().ignore=["message","isEdit"];var t=r.toJS(i);return r.defaultOptions().ignore=e,t},i.validatePaymentData=function(){return!0}}return self.resetPaymentDetails=function(){},i}),define("viewModels/payu",["knockout","ccConstants","koMapping"],function(e,t,r){"use strict";function i(){var i=this;i.paymentMethodType=t.PAYULATAM_CHECKOUT_TYPE,i.type=t.PAYULATAM_CHECKOUT_TYPE,i.amount=e.observable(),i.billingAddress=e.observable(void 0),i[t.CURRENCY]=void 0,i[t.PAYMENT_ID]=void 0,i[t.TRANSACTION_STATUS]=void 0,i[t.TRANSACTION_TYPE]=void 0,i[t.SIGNATURE]=void 0,i.seqNum=null,i.message=e.observable(),i.paymentGroupId=null,i.isEdit=e.observable(!1),i.createCustomProperties=function(t){var r={};for(var a in t)"string"==typeof t[a]&&(r[t[a]]="");i.customProperties=e.mapping.fromJS(r)},i.toJSON=function(){var e=r.defaultOptions().ignore;r.defaultOptions().ignore=["message","isEdit"];var t=r.toJS(i);return r.defaultOptions().ignore=e,t},i.validatePaymentData=function(){return!0},i.resetPaymentDetails=function(){}}return i}),define("viewModels/loyalty",["knockout","ccConstants","CCi18n","koMapping"],function(e,t,r,i){"use strict";function a(){}return a}),define("viewModels/storeCredit",["knockout","ccConstants","CCi18n","koMapping"],function(e,t,r,i){"use strict";function a(){var r=this;r.paymentMethodType=t.STORE_CREDIT_PAYMENT_TYPE,r.type=t.STORE_CREDIT_PAYMENT_TYPE,r.amount=e.observable(),r.storeCreditNumber=e.observable(),r.triggerValidations=e.observable(!0),r.billingAddress=e.observable(void 0),r.storeCreditNumber.extend({required:!1}),r.seqNum=null,r.message=e.observable(),r.paymentGroupId=null,r.gatewayName=null,r.uiIntervention=null,r.isStoreCreditPaymentDisabled=e.observable(!1),Object.defineProperty(r,"gatewayName",{value:null,enumerable:!1,writable:!0}),Object.defineProperty(r,"uiIntervention",{value:null,enumerable:!1,writable:!0}),r.createCustomProperties=function(t){var i={};for(var a in t)"string"==typeof t[a]&&(i[t[a]]="");r.customProperties=e.mapping.fromJS(i)},r.toJSON=function(){var e=i.defaultOptions().ignore;i.defaultOptions().ignore=["message","maskedNumber","paymentGroupId","gatewayName","uiIntervention","isAmountRemaining","paymentMethod","paymentState","isStoreCreditPaymentDisabled","triggerValidations"];var t=i.toJS(r);return i.defaultOptions().ignore=e,t},r.setMaskedNumber=function(e,t){r.storeCreditNumber()&&r.maskedNumber(r.storeCreditNumber().replace(e,t))},r.conditionsApply=function(){return r.triggerValidations()&&r.paymentMethodType==t.STORE_CREDIT_PAYMENT_TYPE&&!r.isStoreCreditPaymentDisabled()},r.resetPaymentDetails=function(){r.storeCreditNumber(null)},r.validatePaymentData=function(){return!r.storeCreditNumber()||(r.storeCreditNumber.isModified(!0),r.isValid())},r.isModified=function(){return r.storeCreditNumber.isModified()},r.resetModified=function(){r.storeCreditNumber.isModified(!1)},r.isValid=function(){return r.storeCreditNumber.isValid()}}return a}),define("viewModels/paymentsViewModel",["knockout","ccConstants","ccRestClient","CCi18n","pageLayout/site","viewModels/cash","viewModels/creditCard","viewModels/giftCard","viewModels/invoice","viewModels/paypal","viewModels/payu","viewModels/loyalty","viewModels/storeCredit"],function(e,t,r,i,a,n,o,s,c,l,d,u,p){"use strict";function h(){if(h.singleInstance)throw new Error("Cannot instantiate more than one PaymentsViewModel, use getInstance(data)");var f=this;return f.completedPayments=e.observableArray([]),f.pendingPayments=e.observableArray([]),f.failedPayments=e.observableArray([]),f.paymentDue=e.observable(),f.loyaltyPaymentDue=e.observable(),f.historicalCompletedPayments=e.observableArray([]),f.historicalCompletedLoyaltyPayments=e.observableArray([]),f.cashEnabledCountries=[],f.scheduleOrderEnabledGateways=[],f.approvalEnabledGateways=[],f.isCardGatewayGeneric=!1,f.isLoyaltyEnabled=e.observable(!1),f.isCardPaymentDisabled=e.observable(!1),f.isPaypalDisabled=e.observable(!1),f.isStoreCreditEnabled=e.observable(!1),f.isCardEnabledForScheduledOrder=e.observable(!1),f.isGiftCardEnabledForScheduledOrder=e.observable(!1),f.isInvoiceEnabledForScheduledOrder=e.observable(!1),f.isCashEnabledForScheduledOrder=e.observable(!1),f.isPayULEnabledForScheduledOrder=e.observable(!1),f.isPaypalEnabledForScheduledOrder=e.observable(!1),f.isLoyaltyEnabledForScheduledOrder=e.observable(!1),f.isStoreCreditEnabledForScheduledOrder=e.observable(!1),f.isCardEnabledForApproval=e.observable(!1),f.isGiftCardEnabledForApproval=e.observable(!1),f.isInvoiceEnabledForApproval=e.observable(!1),f.isCashEnabledForApproval=e.observable(!1),f.isPayULEnabledForApproval=e.observable(!1),f.isPaypalEnabledForApproval=e.observable(!1),f.isLoyaltyEnabledForApproval=e.observable(!1),f.isStoreCreditEnabledForApproval=e.observable(!1),f.excludeFieldsMap=["amount","cardNumber","cardType","giftCardNumber","seqNum","customPaymentProperties"],f.setCashEnabledCountries=function(){for(var e in a.getInstance().extensionSiteSettings){var r=a.getInstance().extensionSiteSettings[e];r[t.PAYMENT_METHOD_TYPES]&&r[t.PAYMENT_METHOD_TYPES].split(",").indexOf(t.CASH_PAYMENT_TYPE)!=-1&&r[t.SELECTED_COUNTRIES]&&(f.cashEnabledCountries=r[t.SELECTED_COUNTRIES])}},f.populatePaymentData=function(r,a){if(f.cardTypeList=e.observableArray(r.cards),f.gateways=r.gateways,f.payULatamCountryList=r.payULatamCountryList,f.paymentMethods=e.observableArray(),a().isB2BUser()){var n=a().currentOrganization().derivedUseAllPaymentMethodsFromSite;if(void 0!=n&&n)f.enabledTypes=r.enabledTypes;else{for(var o=r.enabledTypes.length,s=a().currentOrganization().derivedPaymentMethods,c=[],l=0;l<o;l++)for(var d=0;d<s.length;d++)r.enabledTypes[l]==s[d]&&c.push(r.enabledTypes[l]);f.enabledTypes=c}}else f.enabledTypes=r.enabledTypes;f.enabledTypes&&f.enabledTypes.indexOf(t.CARD_PAYMENT_TYPE)<0&&f.isCardPaymentDisabled(!0),f.enabledTypes&&f.enabledTypes.indexOf(t.PAYPAL_PAYMENT_TYPE)<0?f.isPaypalDisabled(!0):f.isPaypalDisabled(!1),f.enabledTypes&&f.enabledTypes.indexOf(t.STORE_CREDIT_PAYMENT_TYPE)>0&&f.isStoreCreditEnabled(!0),f.setCashEnabledCountries(),f.scheduleOrderEnabledGateways=r.scheduledOrderEnabledGateways,f.approvalEnabledGateways=r.approvalEnabledGateways,f.isCardGatewayGeneric=r.isCardGatewayGeneric;for(var l=0;l<r.scheduledOrderEnabledGateways.length;l++)r.scheduledOrderEnabledGateways[l]===t.CARD_PAYMENT_TYPE&&f.isCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.GIFT_CARD_PAYMENT_TYPE&&f.isGiftCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.INVOICE_PAYMENT_TYPE&&f.isInvoiceEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.CASH_PAYMENT_TYPE&&f.isCashEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.PAYULATAM_CHECKOUT_TYPE&&f.isPayULEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.PAYPAL_PAYMENT_TYPE&&f.isPaypalEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.LOYALTY_POINTS_PAYMENT_TYPE&&f.isLoyaltyEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[l]===t.STORE_CREDIT_PAYMENT_TYPE&&f.isStoreCreditEnabledForScheduledOrder(!0);for(var l=0;l<r.approvalEnabledGateways.length;l++)r.approvalEnabledGateways[l]===t.CARD_PAYMENT_TYPE&&f.isCardEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.GIFT_CARD_PAYMENT_TYPE&&f.isGiftCardEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.INVOICE_PAYMENT_TYPE&&f.isInvoiceEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.CASH_PAYMENT_TYPE&&f.isCashEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.PAYULATAM_CHECKOUT_TYPE&&f.isPayULEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.PAYPAL_PAYMENT_TYPE&&f.isPaypalEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.LOYALTY_POINTS_PAYMENT_TYPE&&f.isLoyaltyEnabledForApproval(!0),r.approvalEnabledGateways[l]===t.STORE_CREDIT_PAYMENT_TYPE&&f.isStoreCreditEnabledForApproval(!0);for(var l=0;l<f.enabledTypes.length;l++)f.enabledTypes[l]==t.CASH_PAYMENT_TYPE?f.paymentMethods().push({name:i.t("ns.common:resources.cashPaymentMethod"),value:f.enabledTypes[l]}):f.enabledTypes[l]==t.LOYALTY_POINTS_PAYMENT_TYPE?f.isLoyaltyEnabled(!0):f.paymentMethods().push({name:i.t("ns.common:resources."+f.enabledTypes[l]),value:f.enabledTypes[l]})},f.createPaymentAuthDetails=function(t,r,i,a,n){var o={};return o.emailAddress=t,o.billingAddress=r,o.paymentDetails=i,n.payments=[],n.payments.push(e.toJS(a)),o.orderDetails=n,o},f.createPaymentGroup=function(e){var r=null;switch(e){case t.CARD_PAYMENT_TYPE:r=new o;break;case t.GIFT_CARD_PAYMENT_TYPE:r=new s;break;case t.CASH_PAYMENT_TYPE:r=new n;break;case t.INVOICE_PAYMENT_TYPE:r=new c;break;case t.PAYPAL_PAYMENT_TYPE:r=new l;break;case t.PAYULATAM_CHECKOUT_TYPE:r=new d;break;case t.LOYALTY_POINTS_PAYMENT_TYPE:r=new u;break;case t.STORE_CREDIT_PAYMENT_TYPE:r=new p}return r},f.processPayments=function(i,a,n,o,s,c,l){var d=this,u=null;u=l?l:d.pendingPayments();for(var p=0;p<u.length;p++)if(!u[p].validatePaymentData())return;var h={};n&&(h.orderId=n),o&&(h.uuid=o),s&&(h.profileId=s),c&&(h.channel=c);var f=[];l&&l.length>0?f=d.preparePaymentsRequest(l):d.pendingPayments()&&d.pendingPayments().length>0&&(f=d.preparePaymentsRequest(d.pendingPayments())),h.payments=f;var m=function(t){var r=[];r=l?l:d.pendingPayments();for(var a=0;a<t.paymentResponses.length;a++)for(var n=0;n<r.length;n++)if(t.paymentResponses[a].seqNum==r[n].seqNum){for(var o in t.paymentResponses[a])$.inArray(o,d.excludeFieldsMap)==-1&&(e.isObservable(r[n][o])?r[n][o](t.paymentResponses[a][o]):r[n][o]=t.paymentResponses[a][o]);break}i(t)};r.request(t.ADD_ORDER_PAYMENTS,h,m,a)},f.inquireBalance=function(e,i,a){var n={};n.op=t.INQUIRE_GIFT_CARD_BALANCE;var o=[];a&&a.length>0&&(o=f.preparePaymentsRequest(a)),n.payments=o,r.request(t.ADD_ORDER_PAYMENTS,n,e,i)},f.preparePaymentsRequest=function(e){for(var t=[],r=0;r<e.length;r++){e[r].seqNum=r.toString();var i={},a=null;a=e[r].toJSON&&$.isFunction(e[r].toJSON)?e[r].toJSON():e[r];for(var n in a)$.isFunction(a[n])||(i[n]=a[n]);t.push(i)}return t},f.resetPaymentsContainer=function(){f.completedPayments([]),f.pendingPayments([]),f.failedPayments([]),f.historicalCompletedPayments([]),f.historicalCompletedLoyaltyPayments([]),f.paymentDue(0),f.loyaltyPaymentDue(0)},f.populateViewModelWithServerData=function(e,t){if(t.paymentResponses&&t.paymentResponses.length>0)for(var r in t.paymentResponses[0])e[r]=t.paymentResponses[0][r]},f.hasSufficientPoints=function(e,t,r){var i=!1;if(e&&e.selectedProgramDetails()&&e.selectedProgramDetails().loyaltyPointDetails)for(var a=e.selectedProgramDetails().loyaltyPointDetails,n=0;n<a.length;n++)if(a[n].pointsType&&a[n].pointsType==t&&a[n].pointsBalance&&a[n].pointsBalance>=r){i=!0;break}return i},f}return h.getInstance=function(e,t){return h.singleInstance||(h.singleInstance=new h),e&&h.singleInstance.populatePaymentData(e,t),h.singleInstance},h}),define("pageLayout/order",["knockout","pubsub","notifier","CCi18n","ccLogger","ccRestClient","ccConstants","jquery","navigation","spinner","viewModels/address","viewModels/paymentDetails","viewModels/giftCardViewModel","storageApi","viewModels/dynamicProperty","ccStoreServerLogger","viewModels/cashViewModel","pageViewTracker","sfExceptionHandler","ccStoreConfiguration","viewModels/paymentsViewModel","pageLayout/site"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f,m,g,v,y,b,E,I){"use strict";function T(a,l,p,h){if(T.prototype.singleInstance)throw new Error("Cannot instantiate more than one OrderViewModel, use OrderViewModel.getInstance(pAdapter, pCart, pData)");var f=this;return f.adapter=a,f.cart=l,f.schedule=e.observable(),f.showSchedule=e.observable(!1),f.id=e.observable(),f.billingAddress=e.observable(),f.shippingAddress=e.observable(),f.shippingAddressAsBilling=e.observable(!1),f.paymentDetails=e.observable(u.getInstance()),f.paymentsViewModel=e.observable(E.getInstance()),f.emailAddress=e.observable(),f.order=e.observable(),f.orderProfileId=e.observable(),f.paymentGateway=e.observable(),f.selectedShippingOption=e.observable(),f.isPaypalVerified=e.observable(!1),f.isPayULatamCheckout=e.observable(!1),f.op=e.observable(),f.giftCards=e.observableArray([]),f.amountRemaining=e.observable(),f.amountRemaining(null),f.isCashPayment=e.observable(!1),f.cashModel=e.observable(g.getInstance()),f.cashModel().isPayingByCash(f.isCashPayment()),f.isInvoicePayment=e.observable(!1),f.isPayLater=e.observable(!1),f.poNumber=e.observable(),f.isOrderValid=e.observable(!1),f.isSplitPayment=e.observable(!1),f.isShippingAddressModified=!1,f.isBillingAddressModified=!1,f.enableOrderButton=e.observable(!0),f.isOrderLocked=!1,f.isOrderEditable=e.observable(!0),f.isOrderSubmitted=!1,f.checkoutGuest=e.observable(o.GUEST),f.checkoutLogin=e.observable(o.LOGIN),f.checkoutOption=e.observable(o.GUEST).extend({throttle:400}),f.guestEmailAddress=e.observable(""),f.createAccount=e.observable(!1),f.user=h,f.registerUser=!1,f.webCheckoutShippingMethodValue=null,f.storeServerLog=m.getInstance(),f.exceptionHandler=new y,f.loadedOrderShippingAddress=null,f.isPaymentDisabled=e.observable(!1),f.payments=e.observableArray([]),f.approvalRequired=e.observable(!1),f.isAutherizeCalled=!1,f.validationCallbacks=[],f.fields=null,f.storeConfiguration=b.getInstance(),f.isCashPayment.subscribe(function(e){f.cashModel().isPayingByCash(e)}),f.registerSplitPaymentCallbacks=function(e,t,r,i){f.createOrderSuccessHandler=e,f.createOrderFailureHandler=t,f.validateSplitPaymentsHandler=r,f.invokePaymentsAPIHandler=i},f.guestEmailAddress.subscribe(function(e){f.guestEmailAddress.isValid()?f.cart().emailAddressForGuestUser=f.guestEmailAddress():f.cart().emailAddressForGuestUser=""}),f.registerPointsPaymentCallbacks=function(e){f.validatePointsPaymentHandler=e},f.updateBillingAddress=function(){f.billingAddress(this)},f.preparePayULatamDataForCreateOrder=function(e){f.paymentGateway(new N(e,f.cart().total(),f.cart().currency.currencyCode))},f.updateShippingAddress=function(){f.shippingAddress(this);var e={};e[o.SHIPPING_ADDRESS_FOR_METHODS]=f.shippingAddress(),e[o.PRODUCT_IDS_FOR_SHIPPING]=l().getProductIdsForItemsInCart(),l().updateShippingAddress.bind(e)()},f.updatePaypalPaymentType=function(e){var t;f.paymentGateway()&&f.paymentGateway().type===e&&f.paymentGateway().customProperties&&(t=f.paymentGateway().customProperties),f.paymentGateway(new R(e)),t&&(f.paymentGateway().customProperties=t)},f.updateShippingMethod=function(){if(this&&this.repositoryId){var e={};e.value=this.repositoryId,e.shippingOption=this,f.selectedShippingOption(e)}else f.selectedShippingOption("")},f.updateEmail=function(){f.emailAddress(this)},f.resetAddress=function(){f.billingAddress()&&f.billingAddress().reset(),f.shippingAddress()&&f.shippingAddress().reset()},f.updatePaymentDetails=function(){var e=this;if(f.paymentDetails&&f.paymentDetails())for(var t in e)f.paymentDetails()[t]&&f.paymentDetails()[t](e[t]);else f.paymentDetails(e)},f.updatePaymentGatewayData=function(e){var t=e.parameters;if(t){for(var r=t.split("&"),i={},a=0;a<r.length;a++){var n=r[a].split("=");i[n[0]]=n[1]}if(i[o.PAYMENT_ID]&&i[o.TOKEN]&&i[o.PAYER_ID])f.paymentGateway(new R(o.PAYPAL_CHECKOUT_TYPE,i[o.PAYMENT_ID],i[o.TOKEN],i[o.PAYER_ID])),f.isPaypalVerified(!0);else if(t.indexOf(o.PAYU_REFERENCE_POL)!=-1){f.createSpinner();var s=i[o.PAYU_TRANSACTION_STATE];if(s==o.PAYU_TRANSACTION_APPROVED_CODE||s==o.PAYU_TRANSACTION_PENDING_CODE||s==o.PAYU_TRANSACTION_DECLINED_CODE||s==o.PAYU_TRANSACTION_EXPIRED_CODE||s==o.PAYU_TRANSACTION_ERROR_CODE){var l=i[o.PAYU_REFERENCE_CODE],d=i[o.PAYU_TX_VALUE],u=i[o.CURRENCY],p=i[o.SIGNATURE];f.paymentGateway(new N(o.PAYULATAM_CHECKOUT_TYPE,d,u,l,s,o.PAYULATAM_RESPONSE_TYPE,p)),
f.getOrder()}}else f.clearPaypalData()}else f.isPaypalVerified()&&c.getPathWithoutLocale()!=f.checkoutLink&&f.clearPaypalData()},f.loadOrderForSubmit=function(e){var a=this;if(e.pageId==o.PAGE_TYPE_CHECKOUT&&a.user()&&a.user().loggedIn()&&!a.user().isUserSessionExpired()&&a.cart().currentOrderId()){var e={},u={};u[o.ENDPOINT_KEY]=o.ENDPOINT_GET_ORDER,u[o.IDENTIFIER_KEY]="orderForSubmit";var p=a.storeConfiguration.getFilterToUse(u);p&&(e[o.FILTER_KEY]=p),n.request(o.ENDPOINT_GET_ORDER,e,function(e){var n=e.state;if(n==o.QUOTED_STATES||n==o.INCOMPLETE)a.cart().loadOrderForProfile(e,a.user),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),a.cart().shippingMethod(e.shippingMethod.value),a.user().orderId(a.cart().currentOrderId()),a.user().setLocalData("orderId");else if(n==o.PENDING_PAYMENTS||n==o.PENDING_PAYMENT_TEMPLATE){a.isOrderEditable(!1),a.cart().loadOrderForProfile(e,a.user);var u={translate:function(e,t){return i.t("ns.common:resources."+e,t)}},p=new d("cart-shipping-address","",u,a.contextData.page.shippingCountriesPriceListGroup,a.contextData.page.defaultShippingCountry);p.copyFrom(e.shippingGroups[0].shippingAddress,a.contextData.page.shippingCountriesPriceListGroup),p.resetModified(),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS).publishWith(p,[{message:"success"}]);var h={};h[o.SHIPPING_ADDRESS_FOR_METHODS]=a.shippingAddress(),h[o.PRODUCT_IDS_FOR_SHIPPING]=l().getProductIdsForItemsInCart(),s.Topic(t.topicNames.VERIFY_SHIPPING_METHODS).publishWith(h,[{message:"success"}]),a.cart().shippingMethod(e.shippingMethod.value),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),a.loadedOrderShippingAddress=e.shippingAddress;var f=a.cart().getDerivedTotal(e.priceInfo.secondaryCurrencyTotal,e.priceInfo.total);a.amountRemaining(f),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(a),e.scheduledOrder&&e.scheduledOrder.length>0&&(a.showSchedule(!0),a.schedule()&&a.schedule().fromJS(e.scheduledOrder[0])),a.user().orderId(a.cart().currentOrderId()),a.user().setLocalData("orderId"),a.isAutherizeCalled||r.sendWarning(L,i.t("ns.common:resources.orderCannotBeUpdatePendingPaymentText"),!0),!a.emailAddress()&&a.user().emailAddress()&&a.emailAddress(a.user().emailAddress())}else c.goTo(a.contextData.global.links[404].route)},function(e){c.goTo(a.contextData.global.links[404].route)},a.cart().currentOrderId())}a.isOrderEditable(!0)},f.updatePayments=function(e){f.payments([]);for(var t=e.length,r=0;r<t;r++)f.payments().push(e[r])},f.addPayment=function(e){f.payments.push(e)},f.hasPaymentType=function(e){for(var t=f.payments().length,r=0;r<t;r++)if(f.payments()[r].type===e)return!0;return!1},f.validateShippingGroupRelationships=function(){r.clearError("checkoutAddressBook-ShippingGroupRelationships"),this.cart().hasSplitShippingInformation()||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutAddressBook-ShippingGroupRelationships",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validateShippingAddress=function(){r.clearError("checkoutAddressBook-Shipping"),f.shippingAddress&&(f.shippingAddress().validateNow()||this.errorFlag?this.shippingAddress().afterValidation=!0:(this.errorFlag=!0,r.sendError("checkoutAddressBook-Shipping",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateSchedule=function(){r.clearError("checkoutScheduledOrder-Schedule"),f.showSchedule()&&f.schedule&&(f.schedule().validateNow()||this.errorFlag?this.schedule().afterValidation=!0:(this.errorFlag=!0,r.sendError("checkoutScheduledOrder-Schedule",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateBillingAddress=function(){r.clearError("checkoutAddressBook-Billing"),f.billingAddress().phoneNumber.isValid()||f.billingAddress().phoneNumber(f.shippingAddress().phoneNumber()),f.billingAddress&&!f.isPaypalVerified()&&f.billingAddress()&&(f.billingAddress().validateNow()||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutAddressBook-Billing",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateCheckoutCartSummary=function(){r.clearError("checkoutCartSummary"),0!==f.cart().items().length||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutCartSummary",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validateCheckoutOrderSummary=function(){!this.selectedShippingOption||this.selectedShippingOption()||this.errorFlag?r.clearError("checkoutOrderSummary-shippingMethods"):(this.errorFlag=!0,r.sendError("checkoutOrderSummary",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validateCheckoutPaymentDetails=function(){r.clearError("checkoutPaymentDetails");var e=f.cart().getDerivedTotal(this.cart().secondaryCurrencyTotal(),this.cart().total());this.paymentDetails&&this.payments()<1&&(e>0||this.paymentDetails().isModified())&&(this.isPaypalVerified()||this.cashModel().isPayingByCash()||this.isPayULatamCheckout()||this.isInvoicePayment()||this.showSchedule()&&!this.paymentDetails().isCardEnabledForScheduledOrder()||!(null==this.amountRemaining()||this.amountRemaining()>0)||this.paymentDetails().validatePaymentDetails()||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutPaymentDetails",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateGiftcards=function(){r.clearError("checkoutGiftCards"),this.giftCards&&this.giftCards().length>0&&(this.cart().validateGiftCards()||(s.Topic(t.topicNames.SHOW_GIFT_CARD_ERROR_PANEL).publish(),this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutGiftCards",i.t("ns.common:resources.checkoutErrorMsg"),!0))))},f.validatePaymentMethodsForScheduledOrder=function(){r.clearError("checkoutPaymentMethodsForScheduledOrder"),this.showSchedule()&&(this.cashModel().isPayingByCash()||this.paymentDetails&&this.paymentDetails().isCardEnabledForScheduledOrder()||this.giftCards&&this.giftCards().length>0||this.isInvoicePayment()||this.isPayULatamCheckout()||this.isPaypalVerified()||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutPaymentMethodsForScheduledOrder",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateRegisteredUser=function(){this.user().validateLogin(),this.user().isLoginValid()||this.errorFlag?(s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).publishWith(this.user().emailAddress(),[{message:"success"}]),s.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).publishWith(this.user(),[{message:"success"}])):(this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validateGuestUser=function(){if(this.guestEmailAddress.isValid()||this.createAccount()!==!1)if(this.user().isValid()||this.createAccount()!==!0){var e=n.getStoredValue(o.LOCAL_STORAGE_USER_CONTENT_LOCALE);null!=e&&(e=JSON.parse(e),s.Topic(t.topicNames.CHECKOUT_USER_LOCALE).publishWith(e[0].name,[{message:"success"}])),s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).publishWith(this.guestEmailAddress(),[{message:"success"}])}else this.user().validateUser(),this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.common:resources.checkoutErrorMsg"),!0));else this.guestEmailAddress.isModified(!0),this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validateCheckoutRegistration=function(){r.clearError("checkoutRegistration"),this.user().loggedIn()||(this.checkoutOption()===this.checkoutLogin()?f.validateRegisteredUser():f.validateGuestUser())},f.isGiftCardDisabled=e.computed(function(){return!!f.approvalRequired()||!!(0==f.cart().items().length||0==f.amountRemaining()||f.isCashPayment()||f.isInvoicePayment()||f.showSchedule()&&!f.paymentDetails().isGiftCardEnabledForScheduledOrder()||f.approvalRequired()&&!f.paymentDetails().isGiftCardEnabledForApproval())}),f.validateDynamicProperties=function(){r.clearError("checkoutDynamicProperties");this.cart().validateDynamicProperties()||this.errorFlag||(this.errorFlag=!0,r.sendError("checkoutDynamicProperties",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validatePlaceHolderItems=function(){r.clearError("placeHolderItems"),this.cart().placeHolderItems().length&&(this.errorFlag||(this.errorFlag=!0,this.placeHolderItemsMsgDisplayed=!0,r.sendWarning("placeHolderItems",i.t("ns.common:resources.placeHolderItemsErrorMsg"),!0)),this.cart().placeHolderItems.subscribe(function(){this.cart().placeHolderItems().length&&(this.placeHolderItemsMsgDisplayed=!1)},this))},f.invokePaymentValidations=function(){o.LOYALTY_POINTS_PAYMENT_TYPE==this.cart().currency.currencyType?this.paymentsViewModel().isLoyaltyEnabled()&&(this.cart().isChargeTaxShippingInSecondaryCurrency()&&(this.isSplitPayment()?this.validateSplitPaymentsHandler():(this.validateCheckoutPaymentDetails(),this.validateGiftcards(),this.validatePaymentMethodsForScheduledOrder())),this.validatePointsPaymentHandler&&this.validatePointsPaymentHandler()):this.isSplitPayment()?this.validateSplitPaymentsHandler():(this.validateCheckoutPaymentDetails(),this.validateGiftcards(),this.validatePaymentMethodsForScheduledOrder())},f.reset=function(){this.user().reset(),this.createAccount(!1),this.guestEmailAddress.isModified&&this.guestEmailAddress.isModified(!1),this.guestEmailAddress(""),f.cart().emailAddressForGuestUser=""},f.checkSingleException=function(e){if(e.errorCode==o.CHECKOUT_SESSION_EXPIRED_ERROR)return r.sendError(o.CHECKOUT_SESSION_EXPIRED,e.message,!0),!0;if(e.errorCode==o.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==o.CREATE_ORDER_SKU_NOT_FOUND||e.errorCode==o.PRODUCT_NOT_FOR_INDIVIDUAL_SALE)return r.sendError(L,e.message,!0),f.cart().loadCart(),!0;if(e.errorCode==o.UNLINKED_ADD_ON_PRODUCT)return f.cart().loadCart(),!0;if(e.errorCode==o.ADDON_VOLUME_PRICE_ERROR){var t=e.message+" "+i.t("ns.common:resources.removeItemFromCart");r.sendError(L,t,!0)}else if(e.errorCode==o.INVALID_SHOPPER_INPUT){var a=JSON.parse(e.moreInfo),n=a.productId,s=f.cart().findCartProductById(n);s&&(n=s.displayName);var t=i.t("ns.common:resources.invalidShopperInputError",{productName:n});r.sendError(L,t,!0)}else{if(e.errorCode==o.ORDER_CANNOT_BE_UPDATED){f.id("");var c=i.t("ns.common:resources.orderSubmissionFailed");return r.sendError(L,c,!0),!0}if(e.errorCode==o.COUPON_APPLY_ERROR)f.cart().handleCouponPricingError(e,null);else if(e.errorCode==o.PROCESS_COMPLETION_FAILED_CODE){var c=i.t("ns.common:resources.processCompletionFailed");e.message=c,r.sendError(L,c,!0)}else if(e.errorCode==o.CONFIGURABLE_PRODUCTS_NOT_ALLOWED_FAILURE_CODE){var c=i.t("ns.common:resources.orderPricingPromotionError");e.message=c,r.sendError(L,c,!0)}else if(e.errorCode==o.PAYMENT_REVERSAL_FAILED_CODE){f.id("");var c=i.t("ns.common:resources.paymentReversalFailed");e.message=c,r.sendError(L,c,!0)}else if(e.errorCode==o.INVALID_PROFILE_FOR_CHECKOUT){var l=i.t("ns.common:resources.invalidProfileForCheckout");e.message=l,r.sendError(L,l,!0)}else{if(e.status==o.HTTP_UNAUTHORIZED_ERROR){var c=i.t("ns.common:resources.orderSubmissionFailed");return r.sendError(L,c,!0),!1}if(!f.isPaypalVerified())return r.sendError(L,e.message,!0),!0}}},s.Topic(t.topicNames.ORDER_CREATE).subscribe(this.createOrder.bind(this)),s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).subscribe(f.updateEmail),s.Topic(t.topicNames.CHECKOUT_BILLING_ADDRESS).subscribe(f.updateBillingAddress),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS).subscribe(f.updateShippingAddress),s.Topic(t.topicNames.USER_PROFILE_ADDRESSES_REMOVED).subscribe(f.resetAddress),s.Topic(t.topicNames.CHECKOUT_PAYMENT_DETAILS).subscribe(f.updatePaymentDetails),s.Topic(t.topicNames.ORDER_CREATED).subscribe(this.authPayment.bind(this)),s.Topic(t.topicNames.PAYMENT_AUTH_SUCCESS).subscribe(this.paymentAuthorized.bind(this)),s.Topic(t.topicNames.PAYMENT_AUTH_DECLINED).subscribe(this.paymentDeclined),s.Topic(t.topicNames.PAYMENT_AUTH_TIMED_OUT).subscribe(this.paymentTimeout),s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).subscribe(f.updateShippingMethod),s.Topic(t.topicNames.ORDER_COMPLETED).subscribe(this.clear.bind(this)),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).subscribe(f.handleRedirect.bind(f)),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(f.handleSubmissionSuccess.bind(f)),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).subscribe(f.handleScheduledOrderSubmissionSuccess.bind(f)),s.Topic(t.topicNames.PAGE_CHANGED).subscribe(f.updatePaymentGatewayData.bind(f)),s.Topic(t.topicNames.PAGE_READY).subscribe(f.loadOrderForSubmit.bind(f)),s.Topic(t.topicNames.CONTINUE_TO_PAYPAL).subscribe(this.createOrder.bind(this)),s.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(this.resetAddress.bind(this)),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).subscribe(this.updateGiftCards.bind(this)),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).subscribe(this.updateAmountRemaining.bind(this)),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT).subscribe(this.updateAmountRemainingPendingPayment.bind(this)),s.Topic(t.topicNames.USER_CREATION_FAILURE).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.USER_AUTO_LOGIN_FAILURE).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_SUCCESSFUL).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_NOCHANGE).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_INVALID).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_FAILURE).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.CART_PRICE_COMPLETE).subscribe(this.disablePaymentIfNecessary.bind(this)),f}function P(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f,m){var g=this;e&&(g.id=e),g.shoppingCart=t,g.appliedPromotions=r,g.isAnonymousCheckout=l,g.combineLineItems=m,a&&(g.scheduleOnly=!0,g.schedule=a),f?g.shippingGroups=f:(n&&(g.shippingAddress=n),i&&(g.shippingMethod={value:i.value})),o&&(g.billingAddress=o),u&&(g.payments=u),g.visitorId=s,g.visitId=c,l||(g.profileId=d),g.op=p,g.giftWithPurchaseOrderMarkers=h}function C(e){s.extend(this,{productId:e.productId,quantity:e.quantity,catRefId:e.productData().childSKUs[0].repositoryId,externalPrice:e.externalPrice,externalPriceQuantity:e.externalPriceQuantity,giftWithPurchaseCommerceItemMarkers:e.giftWithPurchaseCommerceItemMarkers,externalData:e.externalData,actionCode:e.actionCode,commerceItemId:e.commerceItemId,externalRecurringCharge:e.externalRecurringCharge,externalRecurringChargeFrequency:e.externalRecurringChargeFrequency,externalRecurringChargeDuration:e.externalRecurringChargeDuration,assetId:e.assetId,serviceId:e.serviceId,customerAccountId:e.customerAccountId,billingAccountId:e.billingAccountId,serviceAccountId:e.serviceAccountId,activationDate:e.activationDate,deactivationDate:e.deactivationDate})}function S(e,t,r){var i=this;i.items=e,i.coupons=t,i.orderTotal=r}function A(e,t,r,i){var a=this;a.emailAddress=e,a.billingAddress=t,a.paymentDetails=r,a.orderDetails=i}function _(e){var t=this;t.nameOnCard=e.nameOnCard(),null==e.selectedCardType()?t.cardType=e.cardType():t.cardType=e.selectedCardType(),t.cardNumber=e.cardNumber(),t.cardCVV=e.cardCVV(),t.endMonth=e.endMonth(),t.endYear=e.endYear(),null==e.selectedCardType()?t.selectedCardType=e.cardType():t.selectedCardType=e.selectedCardType(),null==e.selectedEndMonth()?t.selectedEndMonth=e.endMonth():t.selectedEndMonth=e.selectedEndMonth(),null==e.selectedEndYear()?t.selectedEndYear=e.endYear():t.selectedEndYear=e.selectedEndYear()}function O(e){var t=this;t.nameOnCard=e.nameOnCard(),null==e.selectedCardType()?t.cardType=e.cardType():t.cardType=e.selectedCardType(),t.cardNumber=e.cardNumber(),t.cardCVV=e.cardCVV(),t.expiryMonth=e.endMonth(),t.expiryYear=e.endYear().toString(),null==e.selectedCardType()?t.selectedCardType=e.cardType():t.selectedCardType=e.selectedCardType(),null==e.selectedEndMonth()?t.selectedEndMonth=e.endMonth():t.selectedEndMonth=e.selectedEndMonth(),null==e.selectedEndYear()?t.selectedEndYear=e.endYear():t.selectedEndYear=e.selectedEndYear()}function R(e,t,r,i,a){var n=this;n.type=e,n[o.PAYMENT_ID]=t,n[o.TOKEN]=r,n[o.PAYER_ID]=i,n[o.PAYMENT_GROUP_ID]=a}function N(e,t,r,i,a,n,s){var c=this;c.type=e,c[o.AMOUNT]=t,c[o.CURRENCY]=r,c[o.PAYMENT_ID]=i,c[o.TRANSACTION_STATUS]=a,c[o.TRANSACTION_TYPE]=n,c[o.SIGNATURE]=s}function D(t,r,i,a,n){var o={};return o.msg=t.toString(),o.shoppingCartItems=r,o.emailId=i,o.visitorId=a,o.visitId=n,o.toJSON=function(){var t=e.toJS(o);return t},o}var L="OrderViewModel";return T.prototype.isPaymentsDisabled=function(){var e=this,r=e.cart().getDerivedTotal(e.cart().secondaryCurrencyTotal(),e.cart().total()),i=0==r;return i&&s.Topic(t.topicNames.PAYMENTS_DISABLED).publish(),i},T.prototype.isPointPaymentsDisabled=function(){var e=this,t=e.cart().getDerivedTotal(e.cart().primaryCurrencyTotal(),e.cart().total()),r=0==t;return r},T.prototype.updateGiftCards=function(e){var t=this;t.giftCards([]);for(var r=0;r<e.length;r++){var i=e[r];t.giftCards.push(i)}},T.prototype.updateAmountRemaining=function(e){var t=this;t.amountRemaining(e)},T.prototype.updateAmountRemainingPendingPayment=function(e){var t=this,r=t.amountRemaining()+e;t.amountRemaining(r)},T.prototype.createOrderAfterRegistration=function(e){!this.registerUser||!this.contextData.global.guestCheckoutEnabled&&e&&e.errorCode===o.CREATE_PROFILE_USER_EXISTS?(this.destroySpinner(),this.enableOrderButton(!0),this.registerUser=!1,e&&r.sendError(L,e.message,!0),n.getStoredValue(o.PAYULATAM_CHECKOUT_REGISTRATION)===o.PAYULATAM_CHECKOUT_REGISTRATION_FAILURE&&n.clearStoredValue(o.PAYULATAM_CHECKOUT_REGISTRATION)):(this.createOrder(),this.registerUser=!1)},T.prototype.createOrderAfterProfileUpdate=function(){this.user&&!this.user().isUserSessionExpired()?(this.placeOrder&&(this.cart().currentOrderState()==o.PENDING_PAYMENTS||this.cart().currentOrderState()==o.PENDING_PAYMENT_TEMPLATE?this.isSplitPayment()?this.invokePaymentsAPIHandler():this.addPaymentsToOrder():this.createOrder(),this.enableOrderButton(!0),this.placeOrder=!1),this.destroySpinner()):this.destroySpinner()},T.prototype.handleSubmissionSuccess=function(e){var t=this;c.goTo(this.contextData.global.links.confirmation.route+"/"+e[0].uuid),t.isOrderSubmitted=!0,t.approvalRequired(!1),t.enableOrderButton(!0),t.isPaypalVerified()&&t.clearPaypalData(),t.user().loggedIn()||t.reset()},T.prototype.handleScheduledOrderSubmissionSuccess=function(e){var t=this;c.goTo(this.contextData.global.links.scheduledOrders.route+"/"+e[0].scheduleOrderId),t.isOrderSubmitted=!0,t.enableOrderButton(!0),t.isPaypalVerified()&&t.clearPaypalData(),t.user().loggedIn()||t.reset(),this.destroySpinner()},T.prototype.handleRedirect=function(e){var t=this;if(t.enableOrderButton(!0),c.getPathWithoutLocale()==t.cartLink&&(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked()))c.goTo(t.cartLink);else if(c.getPathWithoutLocale()==t.checkoutLink&&t.isPaypalVerified())c.goTo(t.checkoutLink);else{var i=c.getPathWithoutLocale().split("?");i[0]==t.checkoutLink&&c.getPathWithoutLocale().indexOf("orderId=")!=-1?c.goTo(c.getPathWithoutLocale()):c.goTo(t.checkoutLink)}e.data&&(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked())&&r.sendErrorToPage(o.PAYPAL_PLACE_ORDER_ERROR,e.data.message,!0,"checkout",!0),(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked())&&t.clearPaypalData()},T.prototype.handleCheckoutWithPaypal=function(){var e=this;e.cashModel().isPayingByCash(!1),e.shippingAddress()&&e.shippingAddress().address1()&&!e.emailAddress()&&c.getPathWithoutLocale()==e.checkoutLink&&!e.user().loggedIn()?s.Topic(t.topicNames.PAYPAL_EMAIL_VALIDATION).publishWith(e,[{message:"fail"}]):e.continueCheckoutWithPaypal()},T.prototype.continueCheckoutWithPaypal=function(){var e=this;!e.cart().shippingMethod()&&e.shippingAddress()&&e.shippingAddress().validateForShippingMethod()&&h.getInstance().setItem("checkoutAddressWithoutShippingMethod",JSON.stringify(e.shippingAddress().toJSON())),e.guestEmailAddress()&&h.getInstance().setItem("guestEmailAddress",e.guestEmailAddress()),e.updatePaypalPaymentType(o.PAYPAL_CHECKOUT_TYPE),e.cart().checkoutWithPaypalClicked(!0),e.cart().skipPriceChange(!0),e.cart().handleValidateCart(),e.id(null),e.op(o.ORDER_OP_INITIATE)},T.prototype.clear=function(){var e=this;e.id(null),e.emailAddress(""),e.order(null),e.orderProfileId(null),e.selectedShippingOption(null),e.op(null),e.giftCards([]),e.isInvoicePayment(!1),e.isPayLater(!1),e.poNumber(""),e.enableOrderButton(!0),e.createAccount(!1),e.guestEmailAddress.isModified&&e.guestEmailAddress.isModified(!1),e.guestEmailAddress(""),e.checkoutOption(o.GUEST),e.isOrderLocked=!1,e.isOrderSubmitted=!1,e.payments([]),e.amountRemaining(null),e.approvalRequired(!1),e.isAutherizeCalled=!1,e.loadedOrderShippingAddress=null,e.cart().currentOrderId(null),e.cart().currentOrderState(null)},T.prototype.clearPaypalData=function(){var e=this;e.paymentGateway(new R),e.cart().checkoutWithPaypalClicked(!1),e.isPaypalVerified(!1),e.id(null),e.op(null)},T.prototype.getOrder=function(){var e=this;e.giftCards([]),e.cart().giftCards([]),e.cart().dynamicProperties([]);var a=e.paymentGateway().type,l={};e.paymentGateway().type==o.PAYPAL_CHECKOUT_TYPE?(l[o.PAYER_ID]=e.paymentGateway().PayerID,l[o.TOKEN]=e.paymentGateway().token,l[o.PAYMENT_ID]=e.paymentGateway().paymentId):e.paymentGateway().type==o.PAYULATAM_CHECKOUT_TYPE?(l[o.AMOUNT]=e.paymentGateway().amount,l[o.CURRENCY]=e.paymentGateway().currency,l[o.PAYMENT_ID]=e.paymentGateway().paymentId,l[o.TRANSACTION_STATUS]=e.paymentGateway().transactionStatus,l[o.TRANSACTION_TYPE]=e.paymentGateway().transactionType,l[o.SIGNATURE]=e.paymentGateway().signature):e.payments().length>0&&(a=e.payments()[0].type,e.payments()[0].customProperties&&(l.customProperties=e.payments()[0].customProperties));var d={};d[o.ENDPOINT_KEY]=o.ENDPOINT_GET_INITIAL_ORDER,d[o.IDENTIFIER_KEY]="getOrder";var u=e.storeConfiguration.getFilterToUse(d);u&&(l[o.FILTER_KEY]=u),e.adapter.loadJSON(o.ENDPOINT_GET_INITIAL_ORDER,a,l,function(a){var l=!(!e.user()||!e.user().loggedIn());if(l)e.cart().emptyCart(),e.cart().mergeItems(a),e.cart().updateCartData(a,!1,l),e.cart().cartUpdated();else{e.cart().loadCart();var d=h.getInstance().getItem("guestEmailAddress");d&&(e.guestEmailAddress(d),h.getInstance().removeItem("guestEmailAddress"))}if(a.state==o.PENDING_PAYMENT||a.state==o.PENDING_PAYMENT_TEMPLATE){e.cart().currentOrderState(a.state),e.cart().currentOrderId(a.id),e.cart().orderCurrency=a.priceListGroup.currency,e.cart().orderItems(a.shoppingCart.items);var u=e.cart().getDerivedTotal(a.priceInfo.secondaryCurrencyTotal,a.priceInfo.total);e.amountRemaining(u),e.isAutherizeCalled=!0,e.isOrderEditable(!1)}if(a.state==o.QUOTED_STATES&&(e.cart().currentOrderState(a.state),e.cart().currentOrderId(a.id),e.cart().orderCurrency=a.priceListGroup.currency,e.cart().orderItems(a.shoppingCart.items),e.isOrderEditable(!1)),e.isPaypalVerified()){e.id(a.id);for(var p=a.payments,f="",m=0;m<p.length;m++)if(p[m]&&p[m].type==o.PAYPAL_CHECKOUT_TYPE){f=p[m].paymentGroupId;var g=new R(o.PAYPAL_CHECKOUT_TYPE,e.paymentGateway().paymentId,e.paymentGateway().token,e.paymentGateway().PayerID,f);e.paymentGateway(g)}var v=h.getInstance().getItem("checkoutAddressWithoutShippingMethod");s.Topic(t.topicNames.PAYPAL_CHECKOUT_SHIPPING_ADDRESS).publish(a.shippingAddress),s.Topic(t.topicNames.EXTERNAL_CHECKOUT_BILLING_ADDRESS).publish(a.billingAddress),a.shippingMethod&&!v?s.Topic(t.topicNames.PAYPAL_CHECKOUT_SHIPPING_METHOD_VALUE).publishWith(a.shippingMethod.value):s.Topic(t.topicNames.PAYPAL_CHECKOUT_NO_SHIPPING_METHOD).publish(),a.dynamicProperties&&e.cart().updateDynamicProperties(a);var y=a.priceInfo.secondaryCurrencyTotal?a.priceInfo.secondaryCurrencyTotal:a.priceInfo.total;if(1==p.length&&p[0]&&p[0].type==o.PAYPAL_PAYMENT_TYPE&&p[0].amount!=y){var b=i.t("ns.common:resources.reapplyGIftCards");r.sendError("GC",b,!0)}}else if(e.paymentGateway().type==o.PAYULATAM_CHECKOUT_TYPE){if(a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_APPROVED||a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_PENDING||a.payments[0].paymentState==o.PAYMENT_GROUP_STATE_SETTLED)s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:a.id,uuid:a.uuid}]);else if(a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_DECLINED||a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_EXPIRED||a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_ERROR){s.Topic(t.topicNames.WEB_CHECKOUT_SHIPPING_ADDRESS).publish(a.shippingAddress),a.shippingMethod&&(e.webCheckoutShippingMethodValue=a.shippingMethod.value),!e.user().loggedIn()&&a.shippingAddress.email&&e.guestEmailAddress(a.shippingAddress.email);var E="";a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_DECLINED?E=i.t("ns.common:resources.paymentDeclinedMsg"):a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_EXPIRED?E=i.t("ns.common:resources.paymentExpiredMsg"):a.payments[0].transactionStatusByQuery==o.PAYU_TRANSACTION_ERROR&&(E=i.t("ns.common:resources.paymentErrorMsg")),n.clearStoredValue(o.PAYULATAM_CHECKOUT_REGISTRATION),c.goTo(e.checkoutLink),r.sendErrorToPage(L,E,!0,"checkout",!0),s("#CC-messages").attr("aria-live","assertive")}e.paymentGateway(null),e.destroySpinner()}s.Topic(t.topicNames.ORDER_RETRIEVED_INITIAL).publishWith(a,[{message:"success",order:a}])},function(i){e.destroySpinner(),e.clearPaypalData(),e.paymentGateway(null),e.payments([]),s.Topic(t.topicNames.GET_INITIAL_ORDER_FAIL).publish([{message:"fail"}]),r.sendError(L,i.message,!0)})},T.prototype.addPaymentsToOrder=function(){var t=this,r=void 0;t.billingAddress()&&(r=t.billingAddress().toJSON());var i="";if(t.op()==o.ORDER_OP_INITIATE)i=t.op();else var a=h.getInstance().getItem(o.PAYMENT_GROUP_AFTER_PAYPAL);var s=[];if(!t.isSplitPayment()&&o.LOYALTY_POINTS_PAYMENT_TYPE==t.cart().currency.currencyType&&t.paymentsViewModel().isLoyaltyEnabled())for(var c=t.paymentsViewModel().preparePaymentsRequest(t.paymentsViewModel().pendingPayments()),l=0;l<c.length;l++)if(c[l].paymentMethodType==o.LOYALTY_POINTS_PAYMENT_TYPE){if(c[l].amount&&null==c[l].amount){var d=t.cart().getDerivedTotal(t.cart().primaryCurrencyTotal(),t.cart().total());c[l].amount=d}c[l].billingAddress&&null==c[l].billingAddress&&(c[l].billingAddress=r),s.push(c[l])}if(t.cashModel().isPayingByCash()){var u={};u.paymentMethodType=o.CASH_PAYMENT_TYPE,t.cashModel().customProperties&&Object.keys(t.cashModel().customProperties).length-1>0&&(u.customProperties=e.mapping.toJS(t.cashModel().customProperties)),u.billingAddress=r,u.amount=t.amountRemaining(),s.push(u),i=o.ORDER_OP_INITIATE}else{if(t.giftCards())for(var l=0;l<t.giftCards().length;l++){var u={};u.paymentMethodType=o.GIFT_CARD_PAYMENT_TYPE,u.giftCardNumber=t.giftCards()[l].giftCardNumber(),u.giftCardPin=t.giftCards()[l].giftCardPin(),t.giftCards()[l].isAmountRemaining()&&!t.isPaypalVerified()||(u.amount=t.giftCards()[l].amountUsed()),u.paymentGroupId=t.giftCards()[l].paymentGroupId,t.giftCards()[l].customProperties&&Object.keys(t.giftCards()[l].customProperties).length-1>0&&(u.customProperties=e.mapping.toJS(t.giftCards()[l].customProperties)),u.amount=t.giftCards()[l].amountUsed(),u.billingAddress=r,s.push(u)}if(t.payments().length>0)e.utils.arrayForEach(t.payments(),function(e){e.billingAddress=r,e.type&&(e.paymentMethodType=e.type,delete e.type),s.push(e)});else if(t.isPaypalVerified()||t.amountRemaining&&0!=t.amountRemaining())if(t.paymentGateway()&&t.paymentGateway().type){var u={};u.paymentMethodType=t.paymentGateway().type,u.billingAddress=r,""==i&&t.paymentGateway().type==o.PAYPAL_CHECKOUT_TYPE?(u.PayerID=t.paymentGateway().PayerID,u.token=t.paymentGateway().token,u.paymentId=t.paymentGateway().paymentId,u.paymentGroupId=a):t.paymentGateway().type==o.PAYULATAM_CHECKOUT_TYPE&&(u.currency=t.paymentGateway().currency),u.amount=t.amountRemaining(),s.push(u),t.createSpinner()}else if(t.isInvoicePayment()){var u={};u={paymentMethodType:o.INVOICE_PAYMENT_TYPE,PONumber:t.poNumber()},u.billingAddress=r,u.amount=t.amountRemaining(),s.push(u)}else if(t.paymentDetails&&t.paymentDetails()&&t.paymentDetails().isModified()){var u={};u=new O(t.paymentDetails()),t.paymentDetails().customProperties&&Object.keys(t.paymentDetails().customProperties).length-1>0&&(u.customProperties=e.mapping.toJS(t.paymentDetails().customProperties)),u.paymentMethodType=o.CARD_PAYMENT_TYPE,u.billingAddress=r,u.amount=t.amountRemaining(),s.push(u)}}if(t.user()&&t.user().orderId()&&t.user().loggedIn()&&!t.hasPaymentType(o.GENERIC_PAYMENT_TYPE)){var p="addPayments",f={};f.orderId=t.user().orderId(),""!=i&&(f.op=i),f.profileId=t.user().id(),f.payments=s,n.request(p,f,function(e){t.postPaymentOrderUpdateSuccess(e)},function(e){var r=new Object;r.orderId=t.id(),r.errorCode=e.errorCode,t.storeServerLog.logError("updateOrderFailure",t.storeServerLog.getMessage("updateOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e)})}else if(!this.user().isB2BUser()){var p="addPayments",f={};f.orderId=t.user().orderId(),""!=i&&(f.op=i),f.uuid=t.order().uuid,f.payments=s,n.request(p,f,function(e){t.postPaymentOrderUpdateSuccess(e)},function(e){var r=new Object;r.orderId=t.id(),r.errorCode=e.errorCode,t.storeServerLog.logError("updateOrderFailure",t.storeServerLog.getMessage("updateOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e)})}},T.prototype.createOrder=function(){if(this.cart().isOrderSubmissionInProgress=!0,this.cart().currentOrderState()==o.PENDING_PAYMENTS||this.cart().currentOrderState()==o.PENDING_PAYMENT_TEMPLATE)this.isSplitPayment()?this.invokePaymentsAPIHandler():this.addPaymentsToOrder();else{for(var t=this,i=e.observableArray([]),a=t.cart().giftWithPurchaseOrderMarkers,n=t.cart().items,l=0;l<n().length;l++){var d=new C(n()[l]);n()[l].childItems&&(d.childItems=n()[l].childItems,d.configuratorId=n()[l].configuratorId);for(var u=0;u<t.cart().lineAttributes().length;u++)d[t.cart().lineAttributes()[u].id()]=n()[l][t.cart().lineAttributes()[u].id()];i.push(d)}var p,h=new S(i,t.cart().coupons(),t.cart().total());p=t.cart().createShippingGroups();var f=void 0;t.showSchedule()&&t.schedule()&&(f=t.schedule().toJSON());var m=void 0;if(t.shippingAddress())if(t.paymentGateway()&&t.paymentGateway().type===o.PAYPAL_CHECKOUT_TYPE&&c.isPathEqualTo(t.cartLink)){var g=t.shippingAddress().isValid();g&&(m=t.shippingAddress().toJSON())}else m=t.shippingAddress().toJSON();var y=void 0;t.billingAddress()&&(y=t.billingAddress().toJSON());var b=!0;if(t.user().loggedIn()&&(b=!1,!t.emailAddress()&&t.user().emailAddress()&&t.emailAddress(t.user().emailAddress())),t.emailAddress()){var E=t.emailAddress().toString();p?p.forEach(function(e){e.shippingAddress.email=E}):m&&(m.email=E)}for(var I=[],l=0;l<t.cart().orderDiscountDescList().length;l++)I.push(t.cart().orderDiscountDescList()[l].promotionId);for(var T=0;T<t.cart().claimedCouponMultiPromotions().length;T++)for(var A=0;A<t.cart().claimedCouponMultiPromotions()[T].promotions().length;A++)I.push(t.cart().claimedCouponMultiPromotions()[T].promotions()[A].promotionId());var O=[];if(!t.isPayLater()){if(o.LOYALTY_POINTS_PAYMENT_TYPE==t.cart().currency.currencyType&&t.paymentsViewModel().isLoyaltyEnabled())for(var R=t.paymentsViewModel().preparePaymentsRequest(t.paymentsViewModel().pendingPayments()),l=0;l<R.length;l++)if(R[l].paymentMethodType==o.LOYALTY_POINTS_PAYMENT_TYPE){if(R[l].amount&&null==R[l].amount){var N=t.cart().getDerivedTotal(t.cart().primaryCurrencyTotal(),t.cart().total());R[l].amount=N}R[l].billingAddress&&null==R[l].billingAddress&&(R[l].billingAddress=y),O.push(R[l])}if(t.isSplitPayment())for(var R=t.paymentsViewModel().preparePaymentsRequest(t.paymentsViewModel().pendingPayments()),l=0;l<R.length;l++)if(R[l].paymentMethodType==o.CARD_PAYMENT_TYPE&&t.isCardPaymentClientSide)O.push({type:"card",amount:R[l].amount,seqNum:R[l].seqNum});else{if(R[l].paymentMethodType==o.LOYALTY_POINTS_PAYMENT_TYPE)continue;O.push(R[l])}else if(t.cashModel().isPayingByCash()){var D={};D.type=o.CASH_PAYMENT_TYPE,
t.cashModel().customProperties&&Object.keys(t.cashModel().customProperties).length-1>0&&(D.customProperties=e.mapping.toJS(t.cashModel().customProperties)),O.push(D)}else{if(t.giftCards())for(var l=0;l<t.giftCards().length;l++){var D={};D.type=o.GIFT_CARD_PAYMENT_TYPE,D.giftCardNumber=t.giftCards()[l].giftCardNumber(),D.giftCardPin=t.giftCards()[l].giftCardPin(),t.giftCards()[l].isAmountRemaining()&&!t.isPaypalVerified()||(D.amount=t.giftCards()[l].amountUsed()),D.paymentGroupId=t.giftCards()[l].paymentGroupId,t.giftCards()[l].customProperties&&Object.keys(t.giftCards()[l].customProperties).length-1>0&&(D.customProperties=e.mapping.toJS(t.giftCards()[l].customProperties)),O.push(D)}if(t.payments().length>0)e.utils.arrayForEach(t.payments(),function(e){O.push(e)});else if(t.isPaypalVerified()||t.amountRemaining&&0!=t.amountRemaining())if(t.paymentGateway()&&t.paymentGateway().type)O.push(t.paymentGateway()),t.createSpinner();else if(t.isInvoicePayment())O.push({type:o.INVOICE_PAYMENT_TYPE,PONumber:t.poNumber()});else if(t.paymentDetails&&t.paymentDetails()&&t.paymentDetails().isModified()){var D={};t.isCardPaymentClientSide||(D=new _(t.paymentDetails()),t.paymentDetails().customProperties&&Object.keys(t.paymentDetails().customProperties).length-1>0&&(D.customProperties=e.mapping.toJS(t.paymentDetails().customProperties))),D.type=o.CARD_PAYMENT_TYPE,O.push(D)}}}var w="";w=t.op()!=o.ORDER_OP_INITIATE?o.ORDER_OP_COMPLETE:t.op(),r.clearError(L);var M=v.getVisitorId(),x=v.getVisitId();if(t.user()&&t.user().orderId()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&!t.hasPaymentType(o.GENERIC_PAYMENT_TYPE)){var k=e.observable(new P(t.user().orderId,h,I,t.selectedShippingOption(),f,m,y,M,x,b,null,O,w,a,p,t.cart().combineLineItems));t.adapter.persistUpdate("updateOrder",t.user().orderId(),t.addDynamicProperties(JSON.parse(e.toJSON(k))),function(e){t.createOrderSuccessHandler&&s.isFunction(t.createOrderSuccessHandler)?(t.id(e.id),t.order(e),t.orderProfileId(e.orderProfileId),t.createOrderSuccessHandler(e)):t.postOrderCreateOrUpdateSuccess(e)},function(e){var r=new Object;e&&e.errors&&e.errors instanceof Array?(r.orderId=t.id(),r.errorCode="",e.errors.forEach(function(e){r.errorCode+=e.errorCode+", "}),r.errorCode=r.errorCode.slice(0,-2)):(r.orderId=t.id(),r.errorCode=e.errorCode),t.storeServerLog.logError("updateOrderFailure",t.storeServerLog.getMessage("updateOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e),t.createOrderFailureHandler&&s.isFunction(t.createOrderFailureHandler)&&t.createOrderFailureHandler(e)})}else{t.paymentGateway()&&t.paymentGateway().type==o.PAYPAL_CHECKOUT_TYPE||t.hasPaymentType(o.PAYPAL_CHECKOUT_TYPE)||t.hasPaymentType(o.GENERIC_PAYMENT_TYPE)||t.id(""),t.cart().currentOrderId()&&t.id(t.cart().currentOrderId());var U=e.observable(new P(t.id(),h,I,t.selectedShippingOption(),f,m,y,M,x,b,t.user().id(),O,w,a,p,t.cart().combineLineItems));t.adapter.persistCreate("order","id",t.addDynamicProperties(JSON.parse(e.toJSON(U))),function(e){t.createOrderSuccessHandler&&s.isFunction(t.createOrderSuccessHandler)?(t.id(e.id),t.order(e),t.orderProfileId(e.orderProfileId),t.createOrderSuccessHandler(e)):t.postOrderCreateOrUpdateSuccess(e)},function(e){var r=new Object;e&&e.errors&&e.errors instanceof Array?(r.errorCode="",e.errors.forEach(function(e){r.errorCode+=e.errorCode+", "}),r.errorCode=r.errorCode.slice(0,-2)):r.errorCode=e.errorCode,t.storeServerLog.logError("createOrderFailure",t.storeServerLog.getMessage("createOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e),t.createOrderFailureHandler&&s.isFunction(t.createOrderFailureHandler)&&t.createOrderFailureHandler(e)})}}},T.prototype.addDynamicProperties=function(e){for(var t=this,r=0;r<t.cart().dynamicProperties().length;r++){var i=t.cart().dynamicProperties()[r],a=i.id(),n=null;null!=i.value&&(n=i.value()),e[a]=n}var s=h.getInstance().getItem(o.LOCAL_STORAGE_CURRENT_CONTEXT);if(s){s=JSON.parse(s);for(var c in s)s.hasOwnProperty(c)&&e.hasOwnProperty(c)&&(e[c]=s[c])}return e},T.prototype.postOrderCreateOrUpdateSuccess=function(e){var a=this;if(a.cart().isOrderSubmissionInProgress=!1,a.id(e.id),a.order(e),a.orderProfileId(e.orderProfileId),a.op(""),a.user()&&a.user().loggedIn()&&a.user().id()==e.orderProfileId&&(a.user().orderId(e.id),a.user().setLocalData("orderId")),e.state==o.SUBMITTED)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,uuid:e.uuid}]);else if(e.state==o.TEMPLATE)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,scheduleOrderId:e.scheduledOrder.id?e.scheduledOrder.id:e.scheduledOrder[0].id,uuid:e.uuid}]);else if(e.state==o.PENDING_APPROVAL||e.state==o.PENDING_SCHEDULED_ORDER_APPROVAL)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),a.destroySpinner(),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,uuid:e.uuid}]);else{for(var n=e.payments,l=!1,d=!1,u=!1,p=0;p<n.length;p++)if(n[p].paymentState==o.PAYMENT_GROUP_STATE_AUTHORIZED_FAILED||n[p].paymentState==o.PAYMENT_GROUP_STATE_PAYMENT_REQUEST_FAILED){this.destroySpinner(),d=!0;var f="";if(n[p]&&n[p].message&&""!==n[p].message){f=n[p].message;var m={orderId:e.id,paymentState:n[p].paymentState,paymentGroupId:n[p].paymentGroupId};a.storeServerLog.logError("paymentGroupFailure",a.storeServerLog.getMessage("paymentGroupFailure",m))}else{var m={orderId:e.id};a.storeServerLog.logError("orderSubmissionFailure",a.storeServerLog.getMessage("orderSubmissionFailure",m)),f=i.t("ns.common:resources.orderSubmissionFailed")}r.sendError(L,f,!0),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:n[p]}]),l=!0,(a.isPaypalVerified()||a.cart().checkoutWithPaypalClicked())&&a.clearPaypalData();break}if(!l)for(var p=0;p<n.length;p++){if(n[p].type==o.PAYPAL_PAYMENT_TYPE&&n[p].uiIntervention==o.REDIRECT){d=!0,a.paymentGateway(null),h.getInstance().setItem(o.REDIRECTED_TO_WEB_PAYMENT,"true"),window.location=e.payments[p].REDIRECT;break}if(n[p].type===o.PAYPAL_PAYMENT_TYPE||n[p].type===o.GENERIC_PAYMENT_TYPE){u=!0,d=!0;break}if(n[p].type==o.CYBERSOURCE_GATEWAY&&n[p].uiIntervention==o.SOP){d=!0,this.destroySpinner(),c.goTo(a.paymentLink,!0),s.Topic(t.topicNames.ORDER_CREATED).publish([{message:"success",id:e.id,uuid:e.uuid}]);break}if(n[p].uiIntervention==o.PAYER_AUTH_REQUIRED){d=!0,this.destroySpinner(),c.goTo(a.paymentLink,!0),s.Topic(t.topicNames.ORDER_CREATED).publish([{message:"success",id:e.id,uuid:e.uuid,customPaymentProperties:n[p].customPaymentProperties}]);break}if(n[p].type&&n[p].type==o.PAYULATAM_CHECKOUT_TYPE&&n[p].uiIntervention==o.SOP){d=!0,s.Topic(t.topicNames.PAYULATAM_WEB_CHECKOUT).publishWith(n[p],[{message:"success",id:e.id,uuid:e.uuid}]),h.getInstance().setItem(o.REDIRECTED_TO_WEB_PAYMENT,"true");break}}if(d)(e.state===o.INCOMPLETE||u)&&s.Topic(t.topicNames.ORDER_CREATED_INITIAL).publishWith(e,[{message:"success",order:e}]),this.destroySpinner();else{this.destroySpinner();var f=i.t("ns.common:resources.orderSubmissionFailed");r.sendError(L,f,!0),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:e}])}}},T.prototype.postOrderCreateOrUpdateFailure=function(e){var a=this;if(this.destroySpinner(),a.cart().isOrderSubmissionInProgress=!1,e&&e.message&&""!==e.message)if(e.__stateData__&&(h.getInstance().removeItem(o.LOCAL_STORAGE_SHOPPER_CONTEXT),h.getInstance().setItem(o.LOCAL_STORAGE_SHOPPER_CONTEXT,e.__stateData__)),e.errorCode==o.INVENTORY_CONFIGURABLE_ITEM_CHECK_ERROR)e.message=i.t("ns.common:resources.orderPricingPromotionError"),r.sendError(L,e.message,!0);else if(e.errors instanceof Array){var n=!1;for(var c in e.errors){if(e.errors[c].errorCode==o.EXTERNAL_PRICE_CHANGED||e.errors[c].errorCode==o.EXTERNAL_PRICE_PARTIAL_FAILURE_ERROR){e.message=i.t("ns.common:resources.orderPricingPromotionError"),r.sendError(L,e.message,!0),n=!0;break}if(n=a.checkSingleException(e),1==n)break}}else a.checkSingleException(e);s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:e}])},T.prototype.authPayment=function(){var r=this,i=(r.order(),new A(r.emailAddress(),e.toJS(r.billingAddress()),r.paymentDetails(),r.order()));s.Topic(t.topicNames.ORDER_AUTHORIZE_PAYMENT).publish([{message:"success",details:i}])},T.prototype.paymentAuthorized=function(e){e[0].orderState==o.SUBMITTED&&s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e[0].id,uuid:e[0].uuid}])},T.prototype.paymentDeclined=function(e){s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publish([{message:"fail"}])},T.prototype.paymentTimeout=function(e){s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publish([{message:"fail"}])},T.prototype.setContext=function(e){this.contextData=e,this.paymentLink=this.contextData.global.links.payment.route,this.checkoutLink=this.contextData.global.links.checkout.route,this.cartLink=this.contextData.global.links.cart.route,this.isCardPaymentClientSide=this.contextData.page.payment.isCardPaymentClientSide,this.contextData&&this.contextData.global&&this.contextData.global.site&&this.contextData.global.site.extensionSiteSettings&&this.contextData.global.site.extensionSiteSettings.storeEndpointSettings&&this.contextData.global.site.extensionSiteSettings.storeEndpointSettings.cartFields&&(this.fields=this.contextData.global.site.extensionSiteSettings.storeEndpointSettings.cartFields)},T.prototype.destroySpinner=function(){s("#loadingModal").hide(),l.destroy()},T.prototype.createSpinner=function(e){var t={parent:"#loadingModal",posTop:"0",posLeft:"50%"},e=i.t("ns.common:resources.loadingText");s("#loadingModal").removeClass("hide"),s("#loadingModal").show(),t.loadingText=e,l.create(t)},T.prototype.addValidationCallback=function(e){e&&"function"==typeof e&&this.validationCallbacks.push(e)},T.prototype.triggerValidationCallbacks=function(){if(this.validationCallbacks.length>0)for(var e=this.validationCallbacks.length,t=0;t<e;t++)this.validationCallbacks[t]&&"function"==typeof this.validationCallbacks[t]&&this.validationCallbacks[t]()},T.prototype.addValidationError=function(e,t){this.errorFlag=!0;var a=t;a&&""!==a||(a=i.t("ns.common:resources.checkoutErrorMsg")),r.sendError(e,a,!0)},T.prototype.postPaymentOrderUpdateSuccess=function(e){for(var t=this,i=e.orderId,a=o.ENDPOINT_GET_ORDER,s=0;s<e.paymentResponses.length;s++)e.paymentResponses[s].type==o.PAYPAL_PAYMENT_TYPE&&h.getInstance().setItem(o.PAYMENT_GROUP_AFTER_PAYPAL,e.paymentResponses[s].paymentGroupId);n.request(a,null,function(r){for(var i=0;i<e.paymentResponses.length;i++)for(var a=0;a<r.payments.length;a++)if(e.paymentResponses[i].paymentGroupId==r.payments[a].paymentGroupId){r.payments[a].customPaymentProperties=e.paymentResponses[i].customPaymentProperties,r.payments[a].uiIntervention=e.paymentResponses[i].uiIntervention;break}t.postOrderCreateOrUpdateSuccess(r)},function(e){t.destroySpinner(),r.sendError(L,e.message,!0)},i)},T.prototype.handlePayments=function(){try{r.clearError("handlePlaceOrder"),this.enableOrderButton(!1),this.errorFlag=!1,this.isOrderSubmitted=!1,this.shippingAddressAsBilling()&&this.shippingAddress().copyTo(this.billingAddress()),this.isOrderLocked||this.isOrderSubmitted||(this.isOrderLocked=!0,this.triggerValidationCallbacks(),this.isPayLater()||this.invokePaymentValidations(),this.validateBillingAddress(),this.validateDynamicProperties(),this.errorFlag?(this.enableOrderButton(!0),r.sendError("handlePlaceOrder",i.t("ns.common:resources.checkoutErrorMsg"),!0)):(this.createSpinner(),this.isPayULatamCheckout()&&this.preparePayULatamDataForCreateOrder(o.PAYULATAM_CHECKOUT_TYPE),this.user().loggedIn()&&!this.user().isB2BUser()?(this.placeOrder=!0,this.user().handleUpdateProfile()):this.isSplitPayment()?this.invokePaymentsAPIHandler():this.addPaymentsToOrder()),this.isOrderLocked=!1)}catch(r){var e=this.user().loggedIn()?this.user().emailAddress():this.emailAddress(),t=new D(r,this.cart().items(),e,v.getVisitorId(),v.getVisitId());this.exceptionHandler.logWindowOnError(JSON.stringify(t),"","")}},T.prototype.disablePaymentIfNecessary=function(){var e=this;e.cart().items().length>0&&e.isPaymentsDisabled()?e.isPaymentDisabled(!0):e.isPaymentDisabled(!1)},T.prototype.handlePlaceOrder=function(){try{if(r.clearError("handlePlaceOrder"),this.enableOrderButton(!1),this.errorFlag=!1,this.isOrderSubmitted=!1,this.isShippingAddressModified=this.shippingAddress().isModified(),this.isBillingAddressModified=this.billingAddress().isModified(),this.shippingAddressAsBilling()&&this.shippingAddress().copyTo(this.billingAddress()),!this.isOrderLocked&&!this.isOrderSubmitted){if(this.isOrderLocked=!0,this.validateCheckoutRegistration(),this.validateCheckoutCartSummary(),this.showSchedule()&&this.validateSchedule(),this.cart().isSplitShipping()?this.validateShippingGroupRelationships():(this.validateShippingAddress(),this.validateCheckoutOrderSummary()),this.triggerValidationCallbacks(),this.isPayLater()||this.invokePaymentValidations(),this.validateBillingAddress(),this.validateDynamicProperties(),this.placeHolderItemsMsgDisplayed||this.validatePlaceHolderItems(),this.errorFlag)this.enableOrderButton(!0);else if(s.Topic(t.topicNames.CHECKOUT_SAVE_SHIPPING_ADDRESS).publishWith(this.shippingAddress(),[{message:"success"}]),this.createSpinner(),this.isPayULatamCheckout()&&this.preparePayULatamDataForCreateOrder(o.PAYULATAM_CHECKOUT_TYPE),this.createAccount()===!0){var e={widgetId:"checkoutRegistration"};this.user().updateLocalData(!0,!1),this.user().registerUser(e),this.registerUser=!0}else this.user().loggedIn()&&!this.user().isB2BUser()?(this.placeOrder=!0,this.user().handleUpdateProfile()):this.createOrder();this.isOrderLocked=!1}}catch(e){var i=this.user().loggedIn()?this.user().emailAddress():this.emailAddress(),a=new D(e,this.cart().items(),i,v.getVisitorId(),v.getVisitId());this.exceptionHandler.logWindowOnError(JSON.stringify(a),"","","",e),this.cart().isOrderSubmissionInProgress=!1}},T.prototype.checkOrderForApproval=function(e){var t=this,r={};r.orderId=e.orderId;var i="checkRequiresApproval";n.request(i,r,function(e){t.approvalRequired(e.requiresApproval)},function(e){})},T.getInstance=function(e,t,r,i,a){return T.prototype.singleInstance||(T.prototype.singleInstance=new T(e,t,r,a)),i&&T.prototype.singleInstance.setContext(i),T.prototype.singleInstance},T}),define("pageLayout/layout-mapping",["knockout"],function(e,t){"use strict";function r(t){var r=this;return this.ignore=["data"],this.regions={create:function(i){var a;return a=new t.RegionViewModel,e.mapping.fromJS(i.data,r,a),a.handleMetadata(),a}},this.widget={create:function(i){var a,n=null;return i.data.id&&(a=t.widgetCache.get("widget",i.data.id),void 0!==a&&void 0!==a.hit&&a.hit?n=a.result:(n=new t.WidgetViewModel(t.basePath),e.mapping.fromJS(i.data,r,n),t.initializeWidget(n,!0),t.widgetCache.set("widget",i.data.id,n))),n}},this.widgets={create:function(e){return r.widget.create(e)}},this}return r}),define("pageLayout/context-handler",["knockout"],function(e){"use strict";function t(){return this.values={global:{},page:{},user:{}},this.eventAnchor=$({}),this}return t.prototype.exclusiveSet=function(t,r,i){var a,n;if(i=i||"user",n=this.values[i],t){for(a in n)n.hasOwnProperty(a)&&a!==t&&this.values[a]&&(this.eventAnchor.trigger(t,null),e.isObservable(n[a])?n[a](null):(n[a]=e.observable(null),n[a].isData=!0));this.set(t,r,i)}},t.prototype.set=function(t,r,i){var a,n;i=i||"user",n=this.values[i],t&&n&&(a=e.utils.unwrapObservable(r),(!n[t]||a!==n[t]()&&(a||n[t]()))&&(n[t]?n[t](a):(n[t]=e.observable(a),n[t].isData=!0),this.eventAnchor.trigger(t,n[t])))},t.prototype.get=function(t,r){var i;return r=r||"user",i=this.values[r],t&&i?e.isObservable(i[t])?i[t]:(i[t]=e.observable(),i[t].isData=!0,i[t]):null},t.prototype.listen=function(e,t){e&&(this.eventAnchor.on(e,t),t(null,this.values[e]))},t.prototype.unlisten=function(e,t){e&&this.eventAnchor.off(e,t)},t.prototype.flush=function(t){var r;t&&(this.eventAnchor=$({}));for(r in this.values.page)this.values.page.hasOwnProperty(r)&&(t||this.eventAnchor.trigger(r,null),e.isObservable(this.values[r])?this.values.page[r](null):this.values.page[r]=null);for(r in this.values.user)this.values.user.hasOwnProperty(r)&&(t||this.eventAnchor.trigger(r,null),e.isObservable(this.values.user[r])?this.values.user[r](null):this.values.user[r]=null)},t}),define("pageLayout/view-model-builder",["knockout","viewModels/paymentsViewModel"],function(e,t){"use strict";return{page:{scope:"global",cachable:!0,load:!0},layout:{cachable:!1,load:function(t,r,i){var a;a=i&&i.model?i.model:new r.masterViewModel;var n={ignore:["data","regions"]};return e.mapping.fromJS(t,n,a),a.data=t.data,a}},region:{cachable:!1,load:function(t,r,i){var a,n=null;return null!==t.id&&void 0!==t.id&&(a=r.cache.get("region",t.id),void 0!==a&&void 0!==a.hit&&a.hit?(n=a.result,t.metadata&&n.metadata(t.metadata)):(n=new r.RegionViewModel,e.mapping.fromJS(t,r.layoutMapping,n),r.cache.set("region",t.id,n))),n.handleMetadata(),n}},widgetDefinition:{cachable:!0,load:function(t,r,i){var a=!1,n=new r.WidgetViewModel(r.basePath);return i&&i.load===!0&&(a=!0),e.mapping.fromJS(t,{},n),r.initializeWidget(n,a),n}},widget:{cachable:!0,load:function(t,r,i){var a=!0,n=new r.WidgetViewModel(r.basePath);return i&&i.load===!1&&(a=!1),e.mapping.fromJS(t,{},n),r.initializeWidget(n,a),n}},category:{cachable:!0,load:!0},product:{cachable:!0,load:function(e,t,r){var i=!0;r&&r.load===!1&&(i=!1);var a=new t.ProductViewModel(e,r);return a.fetchSkuProperties(),a}},store:{scope:"global",cachable:!0,load:!0},links:{scope:"global",cachable:!1,load:!0},payment:{scope:"page",cachable:!1,create:!0,load:function(e,r,i){return t.getInstance(e,r.contextHandler.get("user","global")),r.PaymentDetails.getInstance(r.adapter,e,r.contextHandler.get("user","global"))}},cart:{scope:"global",cachable:!1,load:function(e,t,r){return t.CartViewModel.getInstance(t.adapter,e,r,t.contextHandler.get("user","global"))}},order:{scope:"page",cachable:!1,load:function(e,t,r){return t.OrderViewModel.getInstance(t.adapter,t.contextHandler.get("cart","global"),e,r,t.contextHandler.get("user","global"))}},confirmation:{cachable:!0,load:!0},productList:{cachable:!0,load:function(e,t,r){return e.products}},categoryList:{cachable:!1,load:function(e,t,r){return e}},search:{scope:"global",cachable:!1,load:function(e,t,r){return t.SearchViewModel.getInstance(t.adapter,e,r)}},site:{scope:"global",cachable:!1,load:function(e,t,r){return t.SiteViewModel.getInstance(t.adapter,e,r)}},shippingmethods:{scope:"page",cachable:!1,load:function(e,t,r){return t.ShippingMethodsViewModel.getInstance(t.adapter,e)}},paymentauthorization:{scope:"page",cachable:!1,load:function(e,t,r){var i=new t.PaymentAuthResponseViewModel(t.adapter,e);return i}},space:{scope:"global",cachable:!1,load:function(e,t,r){return t.SpaceViewModel.getInstance(t.adapter,e,r)}},user:{scope:"global",cachable:!1,load:function(e,t,r){return t.UserViewModel.getInstance(t.adapter,e,r)}},orderDetails:{scope:"page",cachable:!1,load:function(e,t,r){return new t.OrderDetailsViewModel(e)}}}}),define("viewModels/searchResultDetails",["knockout","ccConstants","ccLogger"],function(e,t,r){"use strict";function i(){if(null!==a)throw new Error("Cannot instantiate more than one SearchResultDetails, use SearchResultDetails.getInstance()");this.initialize()}var a=null;return i.prototype={initialize:function(){this.searchResults=[],this.totalRecordsFound=0,this.recordsPerPage=t.DEFAULT_SEARCH_RECORDS_PER_PAGE,this.searchAdjustments={},this.breadcrumbs={},this.navigation={},this.pageCount=0,this.recordOffSet=0},update:function(e){var i=[],a=[];if(null!=e){if(e["@error"])return void r.error("An error occurred while searching -"+e["@error"]);if(e.resultsList){var n="records"in e.resultsList?e.resultsList.records:[];this.searchResults=this.formatSearchResults(n),this.totalRecordsFound="totalNumRecs"in e.resultsList?e.resultsList.totalNumRecs:0,this.recordsPerPage="totalNumRecs"in e.resultsList?e.resultsList.recsPerPage:t.DEFAULT_SEARCH_RECORDS_PER_PAGE,this.recordOffSet="firstRecNum"in e.resultsList?e.resultsList.firstRecNum-1:0;var o=this.totalRecordsFound%this.recordsPerPage>0?1:0;this.pageCount=this.totalRecordsFound>0?Math.floor(this.totalRecordsFound/this.recordsPerPage)+o:0,"pagingActionTemplate"in e.resultsList&&(this.pagingActionTemplate=e.resultsList.pagingActionTemplate)}e.searchAdjustments&&(e.searchAdjustments.originalTerms&&(i=e.searchAdjustments.originalTerms),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}),"undefined"!=typeof i[0]&&i[0]==t.PRODUCT_DISPLAYABLE&&i.splice(0,1),a=i.slice(),$.each(i,function(e,r){r.endsWith(t.SEARCH_WILDCARD)&&(i[e]=r.substr(0,r.length-1))}),e.searchAdjustments.originalTerms=i,e.searchAdjustments.originalSearchTerms=a),this.searchAdjustments=e.searchAdjustments,this.breadcrumbs=e.breadcrumbs,e.navigation&&(this.navigation=e.navigation.navigation),e.assemblerRequestInformation&&(this.assemblerRequestInformation=e.assemblerRequestInformation)}},formatSearchResults:function(e){for(var t=[],r=0;r<e.length;r++){var i=this.formatRecord(e[r].records[0]);i.childSKUs=this.formatChildSkus(e[r].records);var a=["sku.maxActivePrice","sku.minActivePrice","product.repositoryId"];for(var n in e[r].attributes)a.indexOf(n)==-1&&(i[n]=e[r].attributes[n]);e[r].attributes["sku.maxActivePrice"]&&e[r].attributes["sku.maxActivePrice"][0]&&(i.maxActivePrice=e[r].attributes["sku.maxActivePrice"][0]),e[r].attributes["sku.minActivePrice"]&&e[r].attributes["sku.minActivePrice"][0]&&(i.minActivePrice=e[r].attributes["sku.minActivePrice"][0]),i.originalRecord=e[r],t.push(i)}return t},formatChildSkus:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i]={salePrice:e[i].attributes["sku.salePrice"]?e[i].attributes["sku.salePrice"][0]:null,listPrice:e[i].attributes["sku.listPrice"]?e[i].attributes["sku.listPrice"][0]:null,repositoryId:e[i].attributes["sku.repositoryId"],largeImage:{url:e[i].attributes["sku.listingLargeImageURL"]?e[i].attributes["sku.listingLargeImageURL"][0]:""},smallImage:{url:e[i].attributes["sku.listingSmallImageURL"]?e[i].attributes["sku.listingSmallImageURL"][0]:""},primaryThumbImageURL:e[i].attributes["sku.listingThumbImageURL"]?e[i].attributes["sku.listingThumbImageURL"][0]:""};return r},formatRecord:function(e){var t,r,i={},a=["product.repositoryId","product.displayName","product.shippingSurcharge","product.listPrice","product.salePrice","product.description","sku.styleProperty","product.avgCustRating","product.primaryImageAltText","product.primaryImageTitle","product.primaryLargeImageURL","product.primarySmallImageURL","product.primaryMediumImageURL","product.primaryFullImageURL","product.primaryThumbImageURL","sku.listingFullImageURL"];for(var n in e.attributes)a.indexOf(n)==-1&&(i[n]=e.attributes[n]);if(e.attributes["product.repositoryId"]?(i.id=e.attributes["product.repositoryId"],i.repositoryId=e.attributes["product.repositoryId"]):(i.id="",i.repositoryId=""),e.attributes["product.displayName"]?i.displayName=e.attributes["product.displayName"][0]:i.displayName="",e.attributes["product.shippingSurcharge"]?i.shippingSurcharge=Number(e.attributes["product.shippingSurcharge"]):i.shippingSurcharge=0,i.listPrice=Number(e.attributes["product.listPrice"]),i.salePrice=Number(e.attributes["product.salePrice"]),e.attributes["product.description"]?e.attributes["product.description"]instanceof Array&&e.attributes["product.description"].length>0?(i.description=e.attributes["product.description"][0],i.longDescription=e.attributes["product.description"][0]):(i.description=e.attributes["product.description"],i.longDescription=e.attributes["product.description"]):(i.description="",i.longDescription=""),i.route=e.attributes["product.route"]&&e.attributes["product.route"][0]?e.attributes["product.route"][0]:"",Array.isArray(e.attributes["sku.styleProperty"])&&(t=e.attributes["sku.styleProperty"][0],t&&(Array.isArray(e.attributes["sku."+t])&&(r=e.attributes["sku."+t][0]),r&&(i.listingSku={},i.listingSku.images=[],i.listingSku.route=i.route+"?variantName="+t+"&variantValue="+r))),e.attributes["product.avgCustRating"]&&(i.avgCustRating=e.attributes["product.avgCustRating"]),e.attributes["product.primaryImageAltText"]&&(i.primaryImageAltText=e.attributes["product.primaryImageAltText"]),e.attributes["product.primaryImageTitle"]&&(i.primaryImageTitle=e.attributes["product.primaryImageTitle"]),i.primaryLargeImageURL=e.attributes["product.primaryLargeImageURL"]&&e.attributes["product.primaryLargeImageURL"][0]?e.attributes["product.primaryLargeImageURL"][0]:"",i.primarySmallImageURL=e.attributes["product.primarySmallImageURL"]&&e.attributes["product.primarySmallImageURL"][0]?e.attributes["product.primarySmallImageURL"][0]:"",i.primaryThumbImageURL=e.attributes["product.primaryThumbImageURL"]&&e.attributes["product.primaryThumbImageURL"][0]?e.attributes["product.primaryThumbImageURL"][0]:"",i.primaryMediumImageURL=e.attributes["product.primaryMediumImageURL"]&&e.attributes["product.primaryMediumImageURL"][0]?e.attributes["product.primaryMediumImageURL"][0]:"",i.primaryFullImageURL=e.attributes["product.primaryFullImageURL"]&&e.attributes["product.primaryFullImageURL"][0]?e.attributes["product.primaryFullImageURL"][0]:"",e.attributes["sku.listingFullImageURL"]&&e.attributes["sku.listingFullImageURL"][0]){var o={};o.metadata={},i.listingSku||(i.listingSku={},i.listingSku.images=[],i.listingSku.route=i.route),i.listingSku.images.push(o),e.attributes["sku.listingLargeImageURL"]&&(i.listingSku.primaryLargeImageURL=e.attributes["sku.listingLargeImageURL"][0]),e.attributes["sku.listingSmallImageURL"]&&(i.listingSku.primarySmallImageURL=e.attributes["sku.listingSmallImageURL"][0]),e.attributes["sku.listingThumbImageURL"]&&(i.listingSku.primaryThumbImageURL=e.attributes["sku.listingThumbImageURL"][0]),e.attributes["sku.listingMediumImageURL"]&&(i.listingSku.primaryMediumImageURL=e.attributes["sku.listingMediumImageURL"][0]),e.attributes["sku.listingFullImageURL"]&&(i.listingSku.primaryFullImageURL=e.attributes["sku.listingFullImageURL"][0])}return i}},i.getInstance=function(){return null===a&&(a=new i),a},i.getInstance()}),define("pageLayout/search",["knockout","pubsub","ccLogger","viewModels/searchResultDetails","ccConstants","pageViewTracker","navigation","ccStoreConfiguration"],function(e,t,r,i,a,n,o,s){"use strict";function c(l,d){if(c.prototype.singleInstance)throw new Error("Cannot instantiate more than one SearchViewModel, use SearchViewModel.getInstance(pAdapter, data)");var u=this;return u.adapter=l,u.isNewSearch=!0,u.isCategorySearch=!1,u.isRequesting=!1,u.searchLocale=e.observable(),u.storeConfiguration=s.getInstance(),u.createSearch=function(t){var r,i,o,s=this;r=e.observableArray([]),s.getFromUrlParam&&(s=u);for(var c in this)this.hasOwnProperty(c)&&(s[c]=this[c]);if(o={},s.searchText&&(o[a.SEARCH_TERM_KEY]=s.searchText),s.recSearchKey&&(o[a.SEARCH_NAV_EREC_SEARCHES_KEY]=s.recSearchKey),s.recSpellCorrectionKey&&(o[a.SEARCH_DYM_SPELL_CORRECTION_KEY]=s.recSpellCorrectionKey),o[a.SEARCH_NAV_ERECS_OFFSET]=s.recordOffSet,o[a.SEARCH_REC_PER_PAGE_KEY]=s.recordsPerPage,"undefined"!=typeof s.navigationDescriptors&&""!=s.navigationDescriptors&&(o[a.SEARCH_NAV_DESCRIPTORS_KEY]=s.navigationDescriptors),s.suppressResults&&(o[a.SEARCH_SUPPRESS_RESULTS]=!0),s.sortDirectiveProperty){var l=s.sortDirectiveProperty;l+=void 0!==s.sortDirectiveOrder&&"desc"===s.sortDirectiveOrder?"|1":"|0",o[a.SEARCH_SORT_ORDER]=l}else s.sortParam&&(o[a.SEARCH_SORT_ORDER]=s.sortParam);s.rangeFilter&&(o[a.SEARCH_RANGE_FILTER]=s.rangeFilter),s.recFilter&&(o[a.SEARCH_NAV_RECORD_FILTER_KEY]=s.recFilter),o[a.VISITOR_ID]=n.getVisitorId(),o[a.VISIT_ID]=n.getVisitId(),o[a.SEARCH_LANGUAGE]=u.searchLocale(),o[a.SEARCH_TYPE]=s.searchType,void 0!==s.newSearch?u.isNewSearch=s.newSearch:u.isNewSearch=!0,i="guidedsearch",u.isRequesting||(u.isRequesting=!0,void 0!==s.searchText?u.isCategorySearch=!1:u.isCategorySearch=!0,u.adapter.loadJSON("search",i,o,u.searchSuccess,u.searchError))},u.createSearchAndAddData=function(e){this.parameters.type==a.PARAMETERS_SEARCH_QUERY&&(null!=this.parameters.Ntt&&void 0!=this.parameters.Ntt?u.searchText=decodeURIComponent(this.parameters.Ntt):u.searchText="",null!=this.parameters.Nr&&void 0!=this.parameters.Nr&&(u.recFilter=decodeURIComponent(this.parameters.Nr)),null!=this.parameters.Ntk&&void 0!=this.parameters.Ntk&&(u.recSearchKey=decodeURIComponent(this.parameters.Ntk)),void 0===u.recSearchKey&&(u.recSearchKey=""),this.parameters.Nty?u.recDYMSuggestionKey=decodeURIComponent(this.parameters.Nty):u.recDYMSuggestionKey="",null!==this.parameters.N&&void 0!==this.parameters.N?u.navigationDescriptors=decodeURIComponent(this.parameters.N).replace(/\+/g," "):u.navigationDescriptors="",this.parameters.page&&"number"==typeof parseInt(this.parameters.page)?u.pageNumber=parseInt(this.parameters.page):u.pageNumber=1,"number"!=typeof parseInt(this.parameters.No)?u.recordOffSet=0+(u.pageNumber-1)*a.DEFAULT_SEARCH_RECORDS_PER_PAGE:u.recordOffSet=parseInt(this.parameters.No)+(u.pageNumber-1)*a.DEFAULT_SEARCH_RECORDS_PER_PAGE,"number"!=typeof parseInt(this.parameters.Nrpp)?u.recordsPerPage=a.DEFAULT_SEARCH_RECORDS_PER_PAGE:u.recordsPerPage=parseInt(this.parameters.Nrpp),null!==this.parameters.Ns&&void 0!==this.parameters.Ns&&(u.sortParam=decodeURIComponent(this.parameters.Ns),u.sortDirectiveProperty=null),null!==this.parameters.Nf&&void 0!==this.parameters.Nf&&(u.rangeFilter=decodeURIComponent(this.parameters.Nf)))},u.searchSuccess=function(e){if(e&&e["endeca:redirect"]&&e["endeca:redirect"].link&&e["endeca:redirect"].link.url){var n=e["endeca:redirect"].link.url;return"/"!==n.charAt(0)?navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)?window.open(n,"_newtab"):window.location.replace(n):o.goTo(n,!1,!0),void(u.isRequesting=!1)}var s=[{message:a.SEARCH_MESSAGE_SUCCESS,requestor:u}];e["@error"]?(r.error("search error returned :"+e["@error"]),s=[{message:a.SEARCH_MESSAGE_FAIL}]):(i.update(e),i.isNewSearch=u.isNewSearch),u.isCategorySearch?$.Topic(t.topicNames.SEARCH_RESULTS_FOR_CATEGORY_UPDATED).publishWith(i,s):$.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).publishWith(i,s),u.isRequesting=!1},u.searchError=function(e){if(u.isCategorySearch)$.Topic(t.topicNames.SEARCH_FAILED_TO_PERFORM).publish();else{var r=[{message:a.SEARCH_MESSAGE_FAIL}];$.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).publishWith(e,r)}u.isRequesting=!1},u.typeaheadSearch=function(e){var t,r;void 0!==this.searchText&&(this.searchText=this.searchText.trim()),void 0!==this.typeaheadConfig&&void 0!==this.typeaheadConfig.searchText&&(this.searchText=this.typeaheadConfig.searchText);var i=this.typeaheadConfig,o=function(e){u.successTypeahead(e,i)},s=n.getVisitorId(),c=n.getVisitId();r={},r[a.SEARCH_TERM_KEY]=this.searchText,r[a.SEARCH_NAV_EREC_SEARCHES_KEY]=a.TYPEAHEAD_SEARCH_INTERFACE,r[a.VISITOR_ID]=s,r[a.VISIT_ID]=c,r[a.SEARCH_TYPE]=a.SEARCH_TYPE_TYPEAHEAD,r[a.SEARCH_LANGUAGE]=u.searchLocale(),r[a.ASSEMBLER_PATH_QUERY_PARAM]=a.ASSEMBLER_DEFAULT_TYPEAHEAD_PATH,r[a.ASSEMBLER_REDIRECTS_QUERY_PARAM]="yes",r[a.ASSEMBLER_SITE_QUERY_PARAM]="default",void 0!==this.typeaheadConfig&&void 0!==this.typeaheadConfig.queryParams?(void 0!==this.newSearch&&(u.isNewSearch=this.newSearch),this.typeaheadConfig.queryParams.forEach(function(e,t){r[t]=e}),$.each(this.typeaheadConfig.queryParams,function(e,t){r[e]=t}),t="assembler",u.adapter.loadJSON("assembler",t,r,o,u.failureTypeahead)):(r[a.SEARCH_NAV_ERECS_OFFSET]=this.recordOffSet,r[a.SEARCH_REC_PER_PAGE_KEY]=this.recordsPerPage,void 0!==this.newSearch&&(u.isNewSearch=this.newSearch),t="assembler",u.adapter.loadJSON("assembler",t,r,u.typeaheadSuccess,u.typeaheadError));
},u.successTypeahead=function(e,t){var i=[{message:a.SEARCH_MESSAGE_SUCCESS}];if(e["@error"]&&(r.error("search error returned :"+e["@error"]),i=[{message:a.SEARCH_MESSAGE_FAIL}]),e.resultsList&&e.resultsList.records)for(var n=e.resultsList.records,o=0;o<n.length;o++){var s,c=n[o].records[0],l={};if($.each(t.displayProps,function(e,t){c.attributes[t]&&void 0!==c.attributes[t]?l[t]=c.attributes[t][0]:l[t]=""}),l["product.route"]=c.attributes["product.route"][0],Array.isArray(c.attributes["sku.styleProperty"])&&$.each(c.attributes["sku.styleProperty"],function(e,t){var r;Array.isArray(c.attributes["sku."+t])&&(r=c.attributes["sku."+t][0]),r&&(l["product.route"]=l["product.route"]+"?variantName="+t+"&variantValue="+r)}),n[o].attributes&&n[o].attributes["sku.minActivePrice"]&&Array.isArray(n[o].attributes["sku.minActivePrice"]))s=n[o].attributes["sku.minActivePrice"][0];else{var d,u=c.attributes["product.salePrice"]?c.attributes["product.salePrice"][0]:null,p=c.attributes["product.listPrice"]?c.attributes["product.listPrice"][0]:null,h=u?u:p;Array.isArray(n[o].records)&&n[o].records.length>0&&$.each(n[o].records,function(e,t){var r=t.attributes["sku.salePrice"]?t.attributes["sku.salePrice"][0]:null,i=t.attributes["sku.listPrice"]?t.attributes["sku.listPrice"][0]:null,a=r?r:i;a||(a=h),(!d||a<d)&&(d=a)}),s=d}l.displayPrice=s,l["product.repositoryId"]=c.attributes["product.repositoryId"][0],Array.isArray(c.attributes["product.primaryImageAltText"])?l["product.primaryImageAltText"]=c.attributes["product.primaryImageAltText"][0]:l["product.primaryImageAltText"]="",Array.isArray(c.attributes["product.primaryImageTitle"])?l["product.primaryImageTitle"]=c.attributes["product.primaryImageTitle"][0]:l["product.primaryImageTitle"]="",t.searchResults.push(l)}var e=void 0!==t.getSearchResponse&&t.getSearchResponse?e:null;t.displayCallback(t,e)},u.failureTypeahead=function(e){r.error("Couldn't execute typeahead search query.")},u.typeaheadSuccess=function(e){var n=[{message:a.SEARCH_MESSAGE_SUCCESS}];e["@error"]&&(r.error("search error returned :"+e["@error"]),n=[{message:a.SEARCH_MESSAGE_FAIL}]);var o=[];if(e.resultsList&&e.resultsList.records){var s=[];o=e.resultsList.records,i.update(e),s.push(i.searchResults),s.push(o)}$.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).publishWith(s,[{message:"success"}])},u.typeaheadError=function(e){var r=([{message:a.SEARCH_MESSAGE_FAIL}],[]);$.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).publishWith(r,[{message:"success"}])},$.Topic(t.topicNames.SEARCH_CREATE_CATEGORY_LISTING).subscribe(u.createSearch),$.Topic(t.topicNames.SEARCH_CREATE).subscribe(u.createSearch),$.Topic(t.topicNames.PAGE_PARAMETERS).subscribe(u.createSearchAndAddData),$.Topic(t.topicNames.SEARCH_TYPEAHEAD).subscribe(u.typeaheadSearch),u}return c.prototype.setContext=function(e){var t=this;e.global.locale&&t.searchLocale(e.global.locale),t.contextData=e},c.getInstance=function(e,t,r){return c.prototype.singleInstance||(c.prototype.singleInstance=new c(e,t)),r&&c.prototype.singleInstance.setContext(r),c.prototype.singleInstance},c.prototype.getFilteredNavState=function(e){for(var t=[],r=[a.VISITOR_ID,a.VISIT_ID,a.SEARCH_LANGUAGE,a.SEARCH_TYPE],i=e.split("&"),n=0;n<i.length;n++){var o=i[n].split("=");r.indexOf(o[0])==-1&&t.push(i[n])}return t.join("&")},c}),define("viewModels/shippingMethodItemViewModel",["knockout","pubsub","ccStoreUtils"],function(e,t,r){"use strict";function i(i,a){var n=this;return r.fromJS(i,n,!0),n.cartValue=e.observable(a),n.estimatedCostText=e.computed(function(){var e=n.calcCorrectAmout(n.cartValue());if(null!=e)var t=e.toFixed(2).toString();return t},n),n.secondaryCurrencyShippingCost=e.pureComputed(function(){return n.calcCorrectAmountInSecondaryCurrency(n.cartValue())},n),n.shippingCost=e.computed(function(){var e=n.calcCorrectAmout(n.cartValue());return e},n),n.cartUpdatedMethod=function(e){n.cartValue(e.amount())},$.Topic(t.topicNames.CART_UPDATED).subscribe(n.cartUpdatedMethod),n}return i.prototype.calcCorrectAmout=function(e){for(var t=this,r=0,i=0;i<t.ranges.length;i++){var a=t.ranges[i].high,n=t.ranges[i].low;null==t.ranges[i].high&&(a=Number.MAX_VALUE),e>=n&&e<=a&&(r=t.ranges[i].amount)}return r},i.prototype.calcCorrectAmountInSecondaryCurrency=function(e){for(var t=this,r=0,i=0;i<t.ranges.length;i++){var a=t.ranges[i].high,n=t.ranges[i].low;null==t.ranges[i].high&&(a=Number.MAX_VALUE),e>=n&&e<=a&&(r=t.ranges[i].secondaryCurrencyShippingAmount)}return r},i}),define("pageLayout/shippingmethods",["knockout","pubsub","ccConstants","viewModels/shippingMethodItemViewModel","ccLogger","pageLayout/cart","jquery","ccRestClient"],function(e,t,r,i,a,n,o,s){"use strict";function c(l,d){if(c.singleInstance)throw new Error("Cannot instantiate more than one ShippingMethodsViewModel, use getInstance(pAdapter, data)");var u=this;return u.adapter=l,u.shippingOptions=e.observableArray(),u.defaultShipping=e.observable(),u.defaultShippingName=e.observable(),u.isOrderInRequestPayloadAllowed=e.observable(!1),u.fetchRequestPayloadFlag=function(){var e=r.ENDPOINT_GET_CLOUD_CONFIGURATION;s.request(e,null,function(e){e&&e.clientConfiguration&&e.clientConfiguration.includeOrderDetailsInShippingMethodsPayload&&u.isOrderInRequestPayloadAllowed(!0)},function(e){u.isOrderInRequestPayloadAllowed(!1)})},u.loadShippingOptions=function(){var e=this[r.SHIPPING_ADDRESS_FOR_METHODS];if(e){if(!e.afterValidation||!u.cart.shippingMethod())if(u.isOrderInRequestPayloadAllowed()){var s=function(e){if(e.items&&1==e.items.length){u.shippingOptions.removeAll(),u.cart=n.getInstance(null,null,null);for(var a=0;a<e.items[0].shippingMethods.length;a++)u.shippingOptions.push(new i(e.items[0].shippingMethods[a],u.cart?u.cart.amount():0));u.setDefaultShipping();var s=[{message:r.SEARCH_MESSAGE_SUCCESS}];o.Topic(t.topicNames.SHIPPING_METHODS_LOADED).publishWith(u,s),u.cart.shippingMethodsLoaded.call(u)}},c=function(e){e&&e.message&&""!==e.message?a.error("order.loadShippingMethod"+e.message):a.error("order.loadShippingMethod - unknown error returned"),o.Topic(t.topicNames.LOAD_SHIPPING_METHODS_FAILED).publishWith(e)};void 0!==this[r.PROFILE_ID]&&(u[r.PROFILE_ID]=this[r.PROFILE_ID]),u.loadMultipleShippingOptions(s,c)}else{var l={};u.cart=n.getInstance(null,null,null),l[r.PRODUCT_IDS_FOR_SHIPPING]=this[r.PRODUCT_IDS_FOR_SHIPPING],void 0!==this[r.PROFILE_ID]&&(l[r.PROFILE_ID]=this[r.PROFILE_ID]),void 0!==this[r.SECONDARY_CURRENCY_CODE]&&(l[r.SECONDARY_CURRENCY_CODE]=this[r.SECONDARY_CURRENCY_CODE]),l.priceInfo={amount:u.cart.amount(),total:u.cart.total(),shipping:u.cart.shipping(),totalWithoutTax:u.cart.totalWithoutTax(),currencyCode:u.cart.currencyCode(),shippingSurchargeValue:u.cart.shippingSurcharge(),tax:u.cart.tax(),subTotal:u.cart.subTotal(),orderDiscount:u.cart.orderDiscount(),coupons:u.cart.coupons()},l.items=[];for(var d=0;d<u.cart.items().length;d++){var p=u.cart.items()[d];p.price=p.itemTotal,l.items.push(p)}l[r.SHIPPING_ADDRESS_FOR_METHODS]=e.toJSON(),l[r.POPULATE_SHIPPING_METHODS]=!0;var h=function(e){var a;if(u.shippingOptions.removeAll(),u.cart=n.getInstance(null,null,null),void 0!==e){for(a=0;a<e.length;a++)u.shippingOptions.push(new i(e[a],u.cart?u.cart.amount():0));u.setDefaultShipping()}var s=[{message:r.SEARCH_MESSAGE_SUCCESS}];o.Topic(t.topicNames.SHIPPING_METHODS_LOADED).publishWith(u,s),u.cart.shippingMethodsLoaded.call(u)},f=function(e){e&&e.message&&""!==e.message?a.error("order.loadShippingMethod"+e.message):a.error("order.loadShippingMethod - unknown error returned"),o.Topic(t.topicNames.LOAD_SHIPPING_METHODS_FAILED).publishWith(e)};u.loadMultipleShippingOptions(h,f,l)}delete e.afterValidation}},o.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).subscribe(u.loadShippingOptions),u.createProductIdsFromShippingGroupItems=function(e,t){for(var r=0;r<e.length;r++)t.indexOf(e[r].productId)==-1&&t.push(e[r].productId),e[r].childItems&&e[r].childItems.length>0&&u.createProductIdsFromShippingGroupItems(e[r].childItems,t)},u.loadMultipleShippingOptions=function(e,t,i){var a=null;if(i)a=i;else{u.cart=n.getInstance(null,null,null);var o=u.cart.createCartPricingModel();o.priceInfo={amount:u.cart.amount(),total:u.cart.total(),shipping:u.cart.shipping(),totalWithoutTax:u.cart.totalWithoutTax(),currencyCode:u.cart.currencyCode(),shippingSurchargeValue:u.cart.shippingSurcharge(),tax:u.cart.tax(),subTotal:u.cart.subTotal(),orderDiscount:u.cart.orderDiscount(),coupons:u.cart.coupons()},o.shippingGroups=u.cart.createShippingGroups(!0);for(var s=0;s<o.shippingGroups.length;s++){var c=[];u.createProductIdsFromShippingGroupItems(o.shippingGroups[s].items,c),o.shippingGroups[s].productIdForShippingSurcharge=c,delete o.shippingGroups[s].shippingMethod}void 0!==this[r.PROFILE_ID]&&(o[r.PROFILE_ID]=this[r.PROFILE_ID]),a=o}u.adapter.persistCreate(r.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS,"id",a,function(t){e(t)},function(e){t(e)})},u.cart=n.getInstance(null,null,null),u.cart.registerMultiShippingMethodsCallback(u.loadMultipleShippingOptions),u}return c.prototype.updateEstimatedTextCost=function(t){var r=this;e.utils.arrayForEach(r.shippingOptions(),function(e){e.cartValue(t)})},c.prototype.calcCorrectAmout=function(e,t){for(var r=0,i=0;i<e.ranges.length;i++){var a=e.ranges[i].high,n=e.ranges[i].low;null==e.ranges[i].high&&(a=Number.MAX_VALUE),t>=n&&t<=a&&(r=e.ranges[i].amount)}return r},c.prototype.setDefaultShipping=function(){var e=this;e.shippingOptions().length>=1&&(e.defaultShipping(e.shippingOptions()[0].repositoryId),e.defaultShippingName(e.shippingOptions()[0].displayName))},c.getInstance=function(e,t){return c.singleInstance||(c.singleInstance=new c(e,t),c.singleInstance.fetchRequestPayloadFlag()),c.singleInstance},c}),define("pageLayout/payment-auth-response",["pubsub","ccConstants","ccLogger","ccStoreServerLogger","ccStoreConfiguration"],function(e,t,r,i,a){"use strict";function n(r,n){var s=this;return s.adapter=r,s.numOfRetries=n.maxTries?n.maxTries:t.PAYMENT_AUTHORIZATION_DEFAULT_TRIES,s.delay=n.interval?n.interval:t.PAYMENT_AUTHORIZATION_DEFAULT_INTERVAL,s.storeServerLog=i.getInstance(),s.storeConfiguration=a.getInstance(),void 0!=o&&$.Topic(e.topicNames.PAYMENT_GET_AUTH_RESPONSE).unsubscribe(o),o=s.paymentAuthorizedRequest.bind(this),$.Topic(e.topicNames.PAYMENT_GET_AUTH_RESPONSE).subscribe(o),s}var o;return n.prototype.paymentAuthorizedRequest=function(e){var t=this;e[0].numOfRetries&&(t.numOfRetries=e[0].numOfRetries),e[0].delay&&(t.delay=e[0].delay),t.getPaymentAuthorization(e[0].transactionuuid,e[0].orderid,e[0].orderuuid,e[0].gatewayname,e[0].paymentGroupId)},n.prototype.getPaymentAuthorization=function(e,t,r,i,a){var n=this;n.checkForAuthorization(e,t,r,i,0,a)},n.prototype.checkForAuthorization=function(i,a,n,o,s,c){function l(){if(s<=u.numOfRetries)setTimeout(function(){u.checkForAuthorization(i,a,n,o,s+1,c)},u.delay);else{var t={orderId:a};u.storeServerLog.logError("paymentTimeOut",u.storeServerLog.getMessage("paymentTimeOut",t));var r=[{message:"fail",id:a,gatewayName:o}];$.Topic(e.topicNames.PAYMENT_AUTH_TIMED_OUT).publish(r)}}function d(e){var t;return e.length>0&&(t=e[e.length-1]),t}var u=this,p={},h={};h[t.ENDPOINT_KEY]=t.ENDPOINT_GET_PAYMENT_GROUP;var f=u.storeConfiguration.getFilterToUse(h);f&&(p[t.FILTER_KEY]=f),u.adapter.loadJSON("paymentGroup",c,p,function(r){if(r.stateAsString&&r.orderStatus)if(r.stateAsString===t.PAYMENT_GROUP_STATE_INITIAL)l();else if(r.stateAsString===t.PAYMENT_GROUP_STATE_REMOVED){var i=d(r.authorizationStatus);if(i){var s=[{message:"fail",id:a,uuid:n,responsedata:i,gatewayName:o}];s[0].responsedata.reasonCode=t.PROCESS_COMPLETION_FAILED,$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s)}}else if(r.stateAsString===t.PAYMENT_GROUP_STATE_AUTHORIZED||r.stateAsString===t.PAYMENT_GROUP_STATE_SETTLED){var i=d(r.authorizationStatus);if(i){var s=[{message:"success",id:a,uuid:n,responsedata:i,gatewayName:o,orderState:r.orderStatus,paymentGroupId:r.id}];i.authorizationDecision!==t.PAYMENT_AUTHORIZATION_ACCEPT&&1!=i.transactionSuccess||r.orderStatus!==t.SUBMITTED?i.authorizationDecision===t.PAYMENT_AUTHORIZATION_ACCEPT&&r.orderStatus==t.FAILED?(s[0].responsedata.reasonCode=t.PAYMENT_REVERSAL_FAILED,s[0].message="fail",$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s)):i.authorizationDecision!==t.PAYMENT_AUTHORIZATION_ACCEPT&&1!=i.transactionSuccess||r.orderStatus!==t.PENDING_PAYMENT?l():(s[0].orderState=r.orderStatus,$.Topic(e.topicNames.PAYMENT_AUTH_SUCCESS).publish(s)):($.Topic(e.topicNames.ORDER_COMPLETED).publish(s),$.Topic(e.topicNames.PAYMENT_AUTH_SUCCESS).publish(s))}}else{var i=d(r.authorizationStatus);if(i){var s=[{message:"success",id:a,uuid:n,responsedata:i,gatewayName:o,orderState:r.orderStatus,paymentGroupId:r.id}];i.authorizationDecision===t.PAYMENT_AUTHORIZATION_ACCEPT?($.Topic(e.topicNames.ORDER_COMPLETED).publish(s),$.Topic(e.topicNames.PAYMENT_AUTH_SUCCESS).publish(s)):(s[0].message="fail",$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s))}}else l()},function(e,t,i){e&&e.message&&""!==e.message?r.error("PaymentAuthResponseViewModel.checkForAuthorization - error -"+e.message):r.error("PaymentAuthResponseViewModel.checkForAuthorization -unknown error returned"),l()})},n}),define("pageLayout/parent-organisation",["knockout"],function(e){"use strict";function t(){this.id=e.observable(""),this.name=e.observable(""),this.description=e.observable(""),this.organizationLogoURL=e.observable(""),this.organizationLogoAltText=e.observable(""),this.organizationLogoTitle=e.observable(""),this.delegateApprovalManagement=e.observable("")}return t}),define("pageLayout/organization",["knockout","ccConstants","ccRestClient","viewModels/dynamicPropertyMetaContainer"],function(e,t,r,i){"use strict";function a(t,r){var a=this,n=a.listOfIgnoreProperties();return e.mapping.fromJS(t,n,a),a.blockSize=20,a.sortProperty="email:asc",a.adapter=r,a.id=e.observable(""),a.active=e.observable(!1),a.relativeRoles=e.observable([]),a.approvalRequired=e.observable(!1),a.orderPriceLimit=e.observable(""),a.delegateApprovalManagement=e.observable(!1),a.numberOfActiveApprovers=e.observable(),a.isApprovalWebhookEnabled=e.observable(!1),a.dynamicPropertyMetaInfo=i.getInstance(),t&&(a.id(t.id),a.active(t.active),a.relativeRoles(t.relativeRoles),a.approvalRequired(t.approvalRequired),a.orderPriceLimit(t.orderPriceLimit),a.delegateApprovalManagement(t.delegateApprovalManagement),a.isApprovalWebhookEnabled(t.useExternalApprovalWebhook),a.updatenumberOfActiveApprovers()),a}return a.prototype.updatenumberOfActiveApprovers=function(){var e,r,i=this;r={},r[t.OFFSET]=0,r[t.LIMIT]=i.blockSize,r[t.SORTS]=i.sortProperty;for(var a=i.relativeRoles().length,n=0;n<a;n++)"approver"===i.relativeRoles()[n].function&&(e=i.relativeRoles()[n].repositoryId);r.q='roles.id eq "'+e+'" AND active eq "1"',i.adapter.loadJSON(t.ENDPOINT_LIST_CONTACTS_BY_ORGANIZATION,null,r,function(e){i.numberOfActiveApprovers(e.totalResults)},function(e){})},a.prototype.populateOrganizationViewModel=function(t){var r=this,i=r.listOfIgnoreProperties();e.mapping.fromJS(t,i,r),t&&(r.id(t.id),r.active(t.active),r.relativeRoles(t.relativeRoles),r.approvalRequired(t.approvalRequired),r.orderPriceLimit(t.orderPriceLimit),r.delegateApprovalManagement(t.delegateApprovalManagement),r.isApprovalWebhookEnabled(t.useExternalApprovalWebhook),r.updatenumberOfActiveApprovers())},a.prototype.populateDynamicPropertiesMetaData=function(){var e=this,i={};i[t.PARENT]=t.ENDPOINT_ORGANIZATION_PARAM,e.dynamicPropertyMetaInfo&&e.dynamicPropertyMetaInfo.dynamicPropertyMetaCache&&!e.dynamicPropertyMetaInfo.dynamicPropertyMetaCache.hasOwnProperty(t.ENDPOINT_ORGANIZATION_PARAM)&&r.request(t.ENDPOINT_GET_ITEM_TYPE,i,function(r){e.dynamicPropertyMetaInfo.intializeDynamicProperties(r.specifications,t.ENDPOINT_ORGANIZATION_PARAM)},function(e){},t.ENDPOINT_ORGANIZATION_PARAM)},a.prototype.listOfIgnoreProperties=function(){var e={ignore:["id","active","relativeRoles","approvalRequired","orderPriceLimit","delegateApprovalManagement","numberOfActiveApprovers","isApprovalWebhookEnabled"]};return e},a}),define("pageLayout/user",["knockout","pubsub","notifier","CCi18n","ccRestClient","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","navigation","storageApi","pageLayout/parent-organisation","viewModels/dynamicProperty","pageLayout/organization","ccStoreConfiguration"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f){"use strict";function m(o,s){if(m.singleInstance)throw new Error("Cannot instantiate more than one UserViewModel, use getInstance(pAdapter, pUserData)");var c=this;return c.selectedPriceListGroup=e.observable(s.priceListGroup),c.currentOrganization=e.observable(),c.activePriceListGroups=e.observableArray([]),c.dynamicProperties=e.observableArray([]),e.mapping.fromJS(s,{ignore:["links","dynamicProperties"]},c),c.id=e.observable(""),c.login=e.observable(""),c.adapter=o,c.resetAll=e.observable(!1),c.emailAddress=e.observable(""),c.emailAddressForForgottenPwd=e.observable(""),c.emailMarketingMails=e.observable(!1),c.emailMarketingModified=e.observable(!1),c.GDPRProfileP13nConsentGranted=e.observable(),c.GDPRProfileP13nConsentModified=e.observable(),c.previousVisitDate=e.observable(),c.justAfterLogin=e.observable(!1),c.firstName=e.observable(""),c.loggedInUserName=e.observable(""),c.lastName=e.observable(""),c.password=e.observable(""),c.newPassword=e.observable(""),c.confirmPassword=e.observable(""),c.token="",c.shippingAddressBook=e.observableArray().extend({deferred:!0}),c.defaultShippingAddress=e.observable(),c.editShippingAddress=e.observable(),c.deleteShippingAddress=e.observable(!1),c.locale=e.observable(""),c.supportedLocales=[],c.client=e.observable(a),c.loginError=e.observable(""),c.loggedIn=e.observable(c.client().loggedIn),c.isLoginFailed=e.observable(!1),c.readyToDisplay=e.observable(!0),c.oldPassword=e.observable(""),c.emailAddress.isData=!0,c.firstName.isData=!0,c.lastName.isData=!0,c.password.isData=!0,c.newPassword.isData=!0,c.confirmPassword.isData=!0,c.oldPassword.isData=!0,c.emailAddressForForgottenPwd.isData=!0,c.locale.isData=!0,c.loggedinAtCheckout=e.observable(!1),c.loggedoutAtCheckout=e.observable(!1),c.persistedOrder=e.observable(),c.orderId=e.observable(""),c.countOfSubmittedOrders=e.observable(0),c.ignoreEmailValidation=e.observable(!0),c.isLoginNotEmail=e.observable(!1),c.ignorePasswordValidation=e.observable(!0),c.isUserProfileEdited=e.observable(!1),c.delaySuccessNotification=e.observable(!1),c.isSearchInitiatedWithUnsavedChanges=e.observable(!1),c.isUserSessionExpired=e.observable(!1),c.pageToRedirect=e.observable(),c.isSessionExpiredDuringSave=e.observable(!1),c.isUserLoggedOut=e.observable(!0),c.isPageRedirected=e.observable(!1),c.isResourcesLoaded=e.observable(!1),c.errorMessageKey=e.observable(""),c.successMessageKey=e.observable(""),c.passwordPolicies=e.observable(),c.isChangePassword=e.observable(!1),c.showCreateNewPasswordMsg=e.observable(!1),c.createNewPasswordError=e.observable(""),c.isPasswordExpired=e.observable(!1),c.hasFieldLevelError=e.observable(!1),c.ignoreConfirmPasswordValidation=e.observable(!0),c.forgotPasswordMsg=e.observable(""),c.myWishLists=e.observableArray(),c.joinedWishLists=e.observableArray(),c.isSesExpDuringPlaceOrder=e.observable(!1),c.parentOrganization=new u,s.parentOrganization&&e.mapping.fromJS(s.parentOrganization,{},c.parentOrganization),c.refreshPageAfterContactLogout=e.observable(!1),c.catalogId=e.observable(""),c.roles=e.observableArray([]),c.isDelegatedAdmin=e.observable(!1),c.isApprover=e.observable(!1),c.isAccountAddressManager=e.observable(!1),c.isProfileAddressManager=e.observable(!1),c.organizations=e.observableArray([]),c.defaultShippingAddressType=e.observable(),c.defaultBillingAddressType=e.observable(),c.redirectNotificationMessage=e.observable(""),c.sessionExpiredProfileRedirected=!1,c.approvalRequired=e.observable(!1),c.orderPurchaseLimit=e.observable(null),c.isHistoricalOrder=!1,c.loyaltyViewModel=e.observable(null),c.storeCreditContainer=e.observable(null),c.emailAddressFocused=function(){return c.ignoreEmailValidation(!0),!0},c.emailAddressLostFocus=function(){return c.ignoreEmailValidation(!1),!0},c.updatedShippingAddress=null,c.updatedShippingAddressBook=null,c.confirmPassword.subscribe(function(e){c.newPassword.isModified(!0)}),c.emailMarketingMails.subscribe(function(e){c.emailMarketingModified(!0)}),c.GDPRProfileP13nConsentGranted.subscribe(function(e){c.GDPRProfileP13nConsentModified(!0)}),c.updateShippingAddress=function(e){c.shippingAddressBook()&&(this.isDefaultAddress(0===c.shippingAddressBook().length),!c.isAddressSaved(this)&&this.isValid()&&c.shippingAddressBook.push(this))},c.updateLocale=function(){c.locale(this)},c.updateLocaleToSupported=function(){if(void 0!==c.locale.isModified){for(var e=a.getStoredValue(n.LOCAL_STORAGE_USER_CONTENT_LOCALE),r=!1,i=[],o=0;o<c.supportedLocales.length;o++)i.push(c.supportedLocales[o].name);a.previewMode&&!c.contextData&&e?(c.locale(JSON.parse(e)[0].name),r=!0):i.indexOf(c.contextData.global.user.locale)>-1?c.locale(c.contextData.global.user.locale):e?(c.locale(JSON.parse(e)[0].name),r=!0):(c.locale(c.contextData.global.locale),r=!0),c.locale.isModified(!0),r&&($.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).publishWith(c,[{message:"success"}]),c.locale.isModified(!1),$.Topic(t.topicNames.UPDATE_USER_LOCALE_NOT_SUPPORTED_ERROR).publish())}},c.showExpiredPasswordErrorMsg=e.computed(function(){return!c.isPasswordExpired()||!(c.oldPassword.isModified()&&!c.oldPassword.isValid()||c.newPassword.isModified()&&!c.newPassword.isValid()||c.confirmPassword.isModified()&&!c.confirmPassword.isValid()||c.hasFieldLevelError())},c),c.validateUser=function(){return c.ignoreEmailValidation(!1),c.ignorePasswordValidation(!1),c.ignoreConfirmPasswordValidation(!1),c.emailAddress.isModified(!0),c.firstName.isModified(!0),c.lastName.isModified(!0),c.newPassword.isModified(!0),c.confirmPassword.isModified(!0),c.isValid()},c.isValid=function(){return c.emailAddress.isValid()&&c.firstName.isValid()&&c.lastName.isValid()&&c.newPassword.isValid()&&c.confirmPassword.isValid()},c.reset=function(){(c.isUserLoggedOut()||!c.loggedIn()&&!c.isUserSessionExpired())&&(c.login(""),c.isResourcesLoaded()&&c.login.isModified(!1),c.loggedInUserName("")),c.emailAddress(""),c.firstName(""),c.lastName(""),c.loginError(""),c.resetPassword(),c.isLoginFailed(!1),c.emailMarketingMails(!1),c.GDPRProfileP13nConsentGranted(!1),c.isResourcesLoaded()&&(c.lastName.isModified(!1),c.emailAddress.isModified(!1),c.firstName.isModified(!1))},c.resetPassword=function(){c.password(""),c.newPassword(""),c.confirmPassword(""),c.oldPassword(""),c.isResourcesLoaded()&&(c.password.isModified(!1),c.newPassword.isModified(!1),c.confirmPassword.isModified(!1),c.oldPassword.isModified(!1)),c.isChangePassword(!1)},c.resetDetails=function(){c.firstName(""),c.lastName(""),c.resetPassword(),c.emailMarketingMails(!1),c.GDPRProfileP13nConsentGranted(!1),c.firstName.isModified(!1),c.lastName.isModified(!1),c.emailMarketingModified(!1),c.GDPRProfileP13nConsentModified(!1)},c.isLoginValid=function(){return c.ignoreEmailValidation(!1),this.login.isValid()&&this.password.isValid()},c.validateLogin=function(){var e=this;return e.login.isModified(!0),e.password.isModified(!0),e.isLoginValid()},c.resetLoginData=function(){var e=this;e.login(""),e.password(""),e.loginError(""),e.isLoginFailed(!1),e.isResourcesLoaded()&&(e.login.isModified(!1),e.password.isModified(!1))},c.resetModified=function(){var e=this;e.emailAddress.isModified(!1),e.firstName.isModified(!1),e.lastName.isModified(!1),e.oldPassword.isModified(!1),e.newPassword.isModified(!1),e.confirmPassword.isModified(!1),e.emailMarketingModified(!1),e.GDPRProfileP13nConsentModified(!1)},c.resetShippingAddressBookModified=function(){var t=this;e.utils.arrayForEach(t.shippingAddressBook(),function(e){e.resetModified()})},c.isProfileModified=function(){return!!(c.firstName.isModified()||c.lastName.isModified()||c.emailAddress.isModified()||c.emailMarketingModified()||c.locale.isModified()||c.GDPRProfileP13nConsentModified())},c.isPasswordModified=function(){return!!(c.oldPassword.isModified()||c.newPassword.isModified()||c.confirmPassword.isModified())},c.isPasswordValid=function(e){return e||c.oldPassword.isModified(!0),c.newPassword.isModified(!0),c.confirmPassword.isModified(!0),!(!c.newPassword.isValid()||!c.confirmPassword.isValid()||!e&&!c.oldPassword.isValid())},c.isProfileValid=function(){return c.firstName.isModified(!0),c.lastName.isModified(!0),c.emailAddress.isModified(!0),c.ignoreEmailValidation(!1),!!(c.firstName.isValid()&&c.lastName.isValid()&&c.emailAddress.isValid())},c.isAddressSaved=function(e){for(var t=0;t<c.shippingAddressBook().length;t++)if(e.compare(c.shippingAddressBook()[t]))return!0;return!1},c.isB2BUser=function(){return!(!c.parentOrganization||!c.parentOrganization.name())},c.isShippingAddressBookModified=function(){if(c.deleteShippingAddress())return!0;for(var e=0;e<c.shippingAddressBook().length;e++)if(c.shippingAddressBook()[e].isModified())return!0;return!1},c.isShippingAddressBookValid=function(){for(var e=0;e<c.shippingAddressBook().length;e++)if(!c.shippingAddressBook()[e].isValid())return!1;return!0},c.isDynamicPropertiesModified=function(){for(var e=0;e<c.dynamicProperties().length;e++)if(c.dynamicProperties()[e].value.isModified())return!0;return!1},c.selectDefaultAddress=function(e){for(var t=0;t<c.shippingAddressBook().length;t++){var r=c.shippingAddressBook()[t];r.isDefaultAddress(r===e)}},c.sortShippingAddresses=function(){c.updatedShippingAddressBook&&c.updatedShippingAddressBook.length&&c.updatedShippingAddressBook.sort(function(e,t){return e.isDefaultAddress?-1:t.isDefaultAddress?1:e.lastName&&t.lastName&&e.lastName.toLowerCase()==t.lastName.toLowerCase()?e.address1.toLowerCase()==t.address1.toLowerCase()?0:e.address1.toLowerCase()<t.address1.toLowerCase()?-1:1:e.lastName&&t.lastName&&e.lastName.toLowerCase()<t.lastName.toLowerCase()?-1:1})},c.loginSuccessFunc=function(e){if(c.loggedIn(c.client().loggedIn),c.isUserSessionExpired(!1),c.isLoginFailed(!1),c.isSesExpDuringPlaceOrder(!1),c.isUserLoggedOut(!1),c.password(""),c.password.isModified(!1),r.clearError(c.WIDGET_ID),c.id(c.client().profileId),l.isPathEqualTo(c.myAccountHash)||c.pageToRedirect()!=c.myAccountHash||(c.sessionExpiredProfileRedirected=!0),c.pageToRedirect()&&""!=c.pageToRedirect()&&c.pageToRedirect()!=c.checkoutHash){var i=c.pageToRedirect();if(c.pageToRedirect(null),l.isPathEqualTo(i)){var a=c.getLocalData();a.login==c.login()&&l.isPathEqualTo(c.myAccountHash)&&!c.isPasswordExpired()&&c.isSessionExpiredDuringSave()||(c.getCurrentUser(e,!0),l.isPathEqualTo(c.myAccountHash)&&(c.isSessionExpiredDuringSave(!1),$.Topic(t.topicNames.USER_PROFILE_SESSION_RESET).publish()))}c.isPageRedirected(!0),l.goTo(i)}else c.getCurrentUser(e,!0);c.isPasswordExpired(!1);var n=l.getPathWithoutLocale().split("?"),o={pageId:l.getPath(),parameters:n[1]};$.Topic(t.topicNames.PAGE_VIEW_CHANGED).publish(o)},c.loginErrorFunc=function(){c.isLoginFailed(!0),c.loginError(i.t("ns.common:resources.loginError")),c.password(""),c.password.isModified(!1)},c.processDynamicPropertiesMetadata=function(e){for(var t=this,r=[],i=0;i<e.length;i++){for(var a=!0,n=0;n<t.dynamicProperties().length&&a;n++)e[i].id===t.dynamicProperties()[n].id()&&(a=!1,t.dynamicProperties()[n].initializeMetadata(e[i],!1),t.dynamicProperties()[n].value(e[i].value));if(a){var o=new p;o.initializeMetadata(e[i],!0),o.value(e[i].value),r.push(o)}}for(var i=0;i<r.length;i++)t.dynamicProperties.push(r[i])},s.dynamicProperties&&c.processDynamicPropertiesMetadata(s.dynamicProperties),c.populateUserFromLocalData(!1),c.storeConfiguration=f.getInstance(),$.Topic(t.topicNames.USER_REGISTRATION_SUBMIT).subscribe(c.registerUser),$.Topic(t.topicNames.USER_LOGIN_SUBMIT).subscribe(c.handleLogin),$.Topic(t.topicNames.USER_LOGIN_CANCEL).subscribe(c.handleCancel),$.Topic(t.topicNames.LOCALE_READY).subscribe(c.loadResources.bind(c)),$.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).subscribe(c.handleUpdateProfile),$.Topic(t.topicNames.USER_PROFILE_UPDATE_CANCEL).subscribe(c.handleUpdateCancel),$.Topic(t.topicNames.PAGE_LAYOUT_LOADED).subscribe(c.handlePageChanged.bind(c)),$.Topic(t.topicNames.PAGE_METADATA_CHANGED).subscribe(c.handlePageChanged.bind(c)),$.Topic(t.topicNames.USER_LOGOUT_SUBMIT).subscribe(c.handleLogout.bind(c)),$.Topic(t.topicNames.USER_SESSION_VALID).subscribe(c.handleSessionValid.bind(c)),$.Topic(t.topicNames.USER_SESSION_EXPIRED).subscribe(c.handleSessionExpired.bind(c)),$.Topic(t.topicNames.CHECKOUT_SAVE_SHIPPING_ADDRESS).subscribe(c.updateShippingAddress),$.Topic(t.topicNames.CHECKOUT_USER_LOCALE).subscribe(c.updateLocale),$.Topic(t.topicNames.USER_LOCALE_NOT_SUPPORTED).subscribe(c.updateLocaleToSupported),c}return m.prototype.loadResources=function(){var e=this;e.firstName.extend({required:{params:!0,message:i.t("ns.common:resources.firstNameRequired")}}),e.lastName.extend({required:{params:!0,message:i.t("ns.common:resources.lastNameRequired")}}),e.locale.extend({required:{params:!0,message:i.t("ns.common:resources.localeRequired")}}),e.emailAddressForForgottenPwd.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.emailAddress.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.isLoginNotEmail?e.login.extend({required:{params:!0,message:function(){return e.isLoginNotEmail()?i.t("ns.common:resources.loginRequired"):i.t("ns.common:resources.emailAddressRequired")}},maxLength:{params:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()&&!e.isLoginNotEmail()},message:i.t("ns.common:resources.emailAddressInvalid")}}):e.login.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:n.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.password.extend({required:{params:!0,message:i.t("ns.common:resources.passwordRequired")}}),e.newPassword.extend({password:{params:{policies:e.passwordPolicies,login:e.emailAddress,observable:e.newPassword,includePreviousNPasswordRule:e.isChangePassword},onlyIf:function(){return(!e.ignoreEmailValidation()||e.newPassword.isModified())&&!e.ignorePasswordValidation()},message:i.t("ns.common:resources.passwordPoliciesErrorText")},required:{params:!0,message:i.t("ns.common:resources.passwordRequired")}}),e.oldPassword.extend({required:{params:!0,message:i.t("ns.common:resources.currentPasswordRequired")}}),e.confirmPassword.extend({required:{params:!0,message:i.t("ns.common:resources.confirmPasswordRequired")},match:{params:e.newPassword,onlyIf:function(){return!e.ignoreConfirmPasswordValidation()},message:i.t("ns.common:resources.passwordUnmatched")}}),e.isResourcesLoaded(!0)},m.prototype.populateUserFromLocalData=function(e){var t=this,r=t.getLocalData();null!=r&&(t.loggedinAtCheckout(r.loggedinAtCheckout),t.loggedoutAtCheckout(r.loggedoutAtCheckout),t.orderId(r.orderId),e&&r.login&&(t.loggedInUserName(r.loggedInUserName),t.login(r.login),t.isUserSessionExpired(r.isUserSessionExpired),t.isUserLoggedOut(r.isUserLoggedOut)))},m.prototype.getLocalData=function(){
var e=null;try{e=d.getInstance().getItem("user"),e&&(e=JSON.parse(e))}catch(e){}return e},m.prototype.setLocalData=function(e){var t=this;if(!e&&""==e)return!0;var r=t.getLocalData();switch(null==r&&(r={}),e){case"all":r={loggedinAtCheckout:t.loggedinAtCheckout(),loggedoutAtCheckout:t.loggedoutAtCheckout(),orderId:t.orderId(),loggedInUserName:t.loggedInUserName(),login:t.login(),isUserSessionExpired:t.isUserSessionExpired(),isUserLoggedOut:t.isUserLoggedOut()};break;case"checkoutFlag":r.loggedinAtCheckout=t.loggedinAtCheckout(),r.loggedoutAtCheckout=t.loggedoutAtCheckout();break;case"orderId":r.orderId=t.orderId();break;case"sessionExpiry":r.isUserSessionExpired=t.isUserSessionExpired(),r.isUserLoggedOut=t.isUserLoggedOut()}try{d.getInstance().setItem("user",JSON.stringify(r))}catch(e){}},m.prototype.updateLocalData=function(e,t){var r=this;r.loggedinAtCheckout(e),r.loggedoutAtCheckout(t),r.setLocalData("checkoutFlag")},m.prototype.removeLocalData=function(){try{d.getInstance().removeItem("user")}catch(e){}},m.prototype.removeSoftLoginCookie=function(){try{d.getInstance().saveToCookies("SOFT_LOGIN","",-1)}catch(e){}},m.prototype.resetForgotPassword=function(){var e=this,r={};r[n.LOGIN]=e.emailAddressForForgottenPwd(),e.adapter.persistCreate(n.ENDPOINT_FORGOT_PASSWORD,"id",r,null,function(e){$.Topic(t.topicNames.USER_RESET_PASSWORD_SUCCESS).publish(e)},function(e){$.Topic(t.topicNames.USER_RESET_PASSWORD_FAILURE).publish(e)})},m.prototype.handleLogin=function(){var e=this;return e.isLoginValid()?(a.setStoredValue(n.LOCAL_STORAGE_ORGANIZATION_ID,null),void e.client().login(this.login(),this.password(),function(){e.loginSuccessFunc(!1),$.Topic(t.topicNames.USER_LOGIN_SUCCESSFUL).publish()},function(r){r.error==n.PASSWORD_EXPIRED?(e.isPasswordExpired(!0),$.Topic(t.topicNames.USER_PASSWORD_EXPIRED).publish()):r.error==n.PASSWORD_GENERATED?(e.isPasswordExpired(!0),$.Topic(t.topicNames.USER_PASSWORD_GENERATED).publish()):(e.loginErrorFunc(),$.Topic(t.topicNames.USER_LOGIN_FAILURE).publish(r))})):(e.login.isModified(!0),e.password.isModified(!0),!1)},m.prototype.handleSamlLogin=function(){var e=this,r=l.getPathWithoutLocale();if(r.indexOf("?loggedIn=false")>-1){var i=r.indexOf("page=")+5;r=decodeURIComponent(r.substr(i)),r="/"===r.charAt(0)?r:"/"+r}else r=l.getRelativePath()+l.getQueryString();e.client().setSessionStoredValue("SSO_RETURN_URL",r),e.client().generateSamlAuthnRequest(function(e){var t=$("<form/>",{action:e.authnRequestTarget,method:"POST"});t.append($("<input>",{type:"text",name:"SAMLRequest",value:e.authnRequest})),$(document.body).append(t),t.submit()},function(r){e.loginErrorFunc(),$.Topic(t.topicNames.USER_LOGIN_FAILURE).publish(r)})},m.prototype.handleLogout=function(){var e=this;$.Topic(t.topicNames.USER_CLEAR_CART).publish([{message:"success"}]);var r=function(){if($.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),d.getInstance().removeItem(n.LOCAL_STORAGE_SHOPPER_CONTEXT),d.getInstance().removeItem(n.LOCAL_STORAGE_CURRENT_CONTEXT),e.clearUserData(),e.profileRedirect(),e.refreshPageAfterContactLogout())e.refreshPageAfterContactLogout(!1),window.location.assign(e.contextData.global.links.home.route);else{var r={pageId:l.getPath()};$.Topic(t.topicNames.PAGE_VIEW_CHANGED).publish(r)}},i=function(t){e.clearUserData(),e.profileRedirect(),window.location.assign(e.contextData.global.links.home.route)};e.loggedIn()?(e.parentOrganization&&e.parentOrganization.name()&&e.refreshPageAfterContactLogout(!0),e.client().logout(r,i)):(e.clearUserData(),$.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),e.profileRedirect())},m.prototype.profileRedirect=function(){var e=this;(l.isPathEqualTo(e.contextData.global.links.profile.route)||l.isPathEqualTo(e.contextData.global.links.orderHistory.route)||l.isPathEqualTo(e.contextData.global.links.orderDetails.route)||l.isPathEqualTo(e.contextData.global.links.scheduledOrders.route)||l.isPathEqualTo(e.contextData.global.links.assets.route)||l.isPathEqualTo(e.contextData.global.links.assetDetails.route))&&l.goTo(e.contextData.global.links.home.route)},m.prototype.clearUserData=function(){var e=this;e.isUserSessionExpired(!1),e.isUserLoggedOut(!0),e.removeLocalData(),e.removeSoftLoginCookie(),e.loggedIn(!1),e.editShippingAddress(null),e.deleteShippingAddress(!1),e.shippingAddressBook([]),e.resetLoginData(),e.reset(),e.updatedShippingAddress=null,e.updatedShippingAddressBook=null,e.id(null),e.parentOrganization=new u,e.organizations([]),e.locale(""),e.loyaltyViewModel(null),e.storeCreditContainer(null),$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]);for(var r=0;r<e.dynamicProperties().length;r++)e.dynamicProperties()[r].reset()},m.prototype.handleCancel=function(){var e=this;e.resetLoginData(),r.clearError(e.WIDGET_ID)},m.prototype.registerUser=function(e){var r=this,o=!1,s=!1;r.receiveEmail=r.emailMarketingMails()?"yes":"no";var c={};if(c[n.PROFILE_EMAIL]=r.emailAddress(),c[n.PROFILE_PASSWORD]=r.newPassword(),c[n.PROFILE_FIRST_NAME]=r.firstName(),c[n.PROFILE_LAST_NAME]=r.lastName(),c[n.PROFILE_RECEIVE_EMAIL]=r.receiveEmail,c[n.PROFILE_GDPR_CONSENT_GRANTED_KEY]=r.GDPRProfileP13nConsentGranted(),null!==r.shippingAddressBook()&&void 0!=r.shippingAddressBook()&&r.isShippingAddressBookValid()&&(c[n.PROFILE_SHIPPING_ADDRESSES]=r.shippingAddressBook()),!r.locale()){var l=a.getStoredValue(n.LOCAL_STORAGE_USER_CONTENT_LOCALE);l&&r.locale(JSON.parse(l)[0].name)}if(r.dynamicProperties().length>0&&r.isDynamicPropertiesModified()){for(var d=0;d<r.dynamicProperties().length;d++){var u=r.dynamicProperties()[d];if(!u.isValid()){o=!0;break}}o||(s=!0)}return o?void $.Topic(t.topicNames.USER_PROFILE_UPDATE_INVALID).publish():(s&&r.handleDynamicPropertiesUpdate(c),c[n.PROFILE_LOCALE]=r.locale(),void r.adapter.persistCreate(n.ENDPOINT_CREATE_PROFILE,n.ENDPOINT_CREATE_PROFILE,c,function(t){t.widgetId=e.widgetId,r.handleAutoLogin(e)},function(r){r.widgetId=e.widgetId,r.errorCode==n.CREATE_PROFILE_USER_EXISTS&&(r.message=i.t("ns.common:resources.accountAlreadyExists")),$.Topic(t.topicNames.USER_CREATION_FAILURE).publish(r)}))},m.prototype.handleAutoLogin=function(e){var r=this;r.orderId(""),r.login(r.emailAddress()),a.setStoredValue(n.LOCAL_STORAGE_ORGANIZATION_ID,null),r.client().login(r.login(),r.newPassword(),function(){var i={};i.widgetId=e.widgetId,r.loginSuccessFunc(!0),$.Topic(t.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).publish(i)},function(i){i.widgetId=e.widgetId,r.loginErrorFunc(),$.Topic(t.topicNames.USER_AUTO_LOGIN_FAILURE).publish(i)})},m.prototype.resetDynamicPropertiesValueIsModified=function(){for(var e=this,t=0;t<e.dynamicProperties().length;t++)e.dynamicProperties()[t].value.isModified&&e.dynamicProperties()[t].value.isModified(!1)},m.prototype.getCurrentUser=function(i,a){var o=this;o.redirectNotificationMessage("");var s={},c={};c[n.ENDPOINT_KEY]=n.ENDPOINT_GET_CURRENT_USER,c[n.IDENTIFIER_KEY]="userData";var d=o.storeConfiguration.getFilterToUse(c);d&&(s[n.FILTER_KEY]=d),o.adapter.loadJSON("getUser","getCurrentUser",s,function(r){o.currentOrganization(r.currentOrganization),e.mapping.fromJS(r,{ignore:["links","dynamicProperties"]},o),o.populateUserViewModel(r),o.resetModified(),o.readyToDisplay(!0),i?$.Topic(t.topicNames.AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL).publish():a&&!o.loggedinAtCheckout()?$.Topic(t.topicNames.CART_READY).subscribe(function(){$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]),$.Topic(t.topicNames.CART_READY).unsubscribe()}):$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]),o.sessionExpiredProfileRedirected&&(a=!0,o.sessionExpiredProfileRedirected=!1),a&&(r.parentOrganization&&r.parentOrganization.name&&(l.isPathEqualTo(o.checkoutHash)?o.navigateToPage(o.checkoutHash):$.Topic(t.topicNames.CART_READY).subscribe(o.navigateToHome())),$.Topic(t.topicNames.USER_LOAD_CART).publish(r))},function(e){e.status==n.HTTP_UNAUTHORIZED_ERROR&&(o.handleSessionExpired(),(l.isPathEqualTo(o.contextData.global.links.profile.route)||l.isPathEqualTo(o.contextData.global.links.orderHistory.route))&&l.doLogin(l.getPath(),o.contextData.global.links.home.route))}),o.navigateToHome=function(){setTimeout(function(){o.navigateToPage(o.contextData.global.links.home.route,function(){""!==o.redirectNotificationMessage()&&(r.sendWarningToPage("UserViewModel",o.redirectNotificationMessage(),!0,"home",!0),o.redirectNotificationMessage(""))})},2e3)}},m.prototype.populateUserViewModel=function(t){var r=this;r.emailAddress(t.email),r.firstName(t.firstName),r.lastName(t.lastName),r.loggedInUserName(t.firstName),r.login(r.emailAddress()),r.GDPRProfileP13nConsentGranted(t.GDPRProfileP13nConsentGranted);var i=t.receiveEmail;if("yes"==i?r.emailMarketingMails(!0):r.emailMarketingMails(!1),r.id(t.id),r.approvalRequired(t.derivedApprovalRequired),r.orderPurchaseLimit(t.derivedOrderPriceLimit),r.locale(""),t.catalog&&r.catalogId(t.catalog.repositoryId),r.catalog&&(r.catalog=void 0),t.currentOrganization){r.currentOrganization(t.currentOrganization),null==r.parentOrganization&&(r.parentOrganization=new u),e.mapping.fromJS(t.currentOrganization,{},r.parentOrganization),r.parentOrganization.id(t.currentOrganization.repositoryId);var o=JSON.parse(a.getStoredValue(n.LOCAL_STORAGE_ORGANIZATION_ID));!o&&t.currentOrganization&&a.setStoredValue(n.LOCAL_STORAGE_ORGANIZATION_ID,e.toJSON(t.currentOrganization.repositoryId))}else t.parentOrganization&&(e.mapping.fromJS(t.parentOrganization,{},r.parentOrganization),r.parentOrganization.id(t.parentOrganization.repositoryId));if(t.roles){var s=t.roles.length;r.roles([]);for(var c=0;c<s;c++)r.roles.push(t.roles[c]),t.roles[c].relativeTo.repositoryId===r.currentOrganization().repositoryId&&("accountAddressManager"===t.roles[c].function&&r.isAccountAddressManager(!0),"profileAddressManager"===t.roles[c].function&&r.isProfileAddressManager(!0),"admin"===t.roles[c].function?r.isDelegatedAdmin(!0):"approver"===t.roles[c].function&&r.isApprover(!0))}r.isB2BUser()&&r.isDelegatedAdmin()&&a.request(n.ENDPOINT_GET_ORGANIZATION,null,function(e){r.defaultShippingAddressType(e.derivedShippingAddressType),r.defaultBillingAddressType(e.derivedBillingAddressType),r.organizations&&r.organizations().length>0?r.organizations()[0].populateOrganizationViewModel(e):r.organizations.push(new h(e,r.adapter)),r.organizations&&r.organizations().length>0&&r.organizations()[0].populateDynamicPropertiesMetaData()},function(e){e.status==n.HTTP_UNAUTHORIZED_ERROR&&(r.handleSessionExpired(),(l.isPathEqualTo(r.contextData.global.links.profile.route)||l.isPathEqualTo(r.contextData.global.links.orderHistory.route))&&l.doLogin(l.getPath(),r.contextData.global.links.home.route))},r.parentOrganization.repositoryId()),r.selectedPriceListGroup(t.priceListGroup);var d=r.contextData.global.site.priceListGroup.activePriceListGroups;if(!r.isB2BUser()&&r.selectedPriceListGroup()){var p=!1;if(a.getStoredValue(n.LOCAL_STORAGE_PRICELISTGROUP_ID))for(var f=JSON.parse(a.getStoredValue(n.LOCAL_STORAGE_PRICELISTGROUP_ID)),m=0;m<d.length;m++)if(f&&f==d[m].id){r.selectedPriceListGroup(d[m]),p=!0;break}p||r.selectedPriceListGroup(r.contextData.global.site.priceListGroup.defaultPriceListGroup)}if(a.setStoredValue(n.LOCAL_STORAGE_PRICELISTGROUP_ID,e.toJSON(r.selectedPriceListGroup().id)),r.previousVisitDate(t.previousVisitDate),r.deleteShippingAddress(!1),r.updatedShippingAddress=t.shippingAddress,r.updatedShippingAddress&&(r.updatedShippingAddress.isDefaultAddress=!0),r.updatedShippingAddressBook=t.shippingAddresses,r.updatedShippingAddressBook.length)if(null==r.updatedShippingAddress)r.updatedShippingAddressBook[0].isDefaultAddress=!0;else for(var g=0,v=r.updatedShippingAddressBook.length;g<v;g++)r.updatedShippingAddressBook[g].isDefaultAddress=r.updatedShippingAddressBook[g].repositoryId===r.updatedShippingAddress.repositoryId;r.organizationAddressBook=[];for(var y in t.secondaryAddresses){var b=t.secondaryAddresses[y];b.isDefaultAddress=!1,r.organizationAddressBook.push(t.secondaryAddresses[y])}r.contactShippingAddress=t.contactShippingAddress,r.contactBillingAddress=t.contactBillingAddress,r.sortShippingAddresses(),r.isUserSessionExpired(!1),r.isUserLoggedOut(!1),r.populateUserFromLocalData(!1),r.setLocalData("all");for(var m=0;m<this.supportedLocales.length;m++)t.locale===this.supportedLocales[m].name&&(r.locale(t.locale),void 0!==r.locale.isModified&&r.locale.isModified(!1));r.locale()||r.updateLocaleToSupported(),r.processDynamicPropertiesMetadata(t.dynamicProperties),r.resetDynamicPropertiesValueIsModified()},m.prototype.setContext=function(e){var t=this;t.contextData=e,t.myAccountHash=t.contextData.global.links.profile.route,t.checkoutHash=t.contextData.global.links.checkout.route,t.homeHash=t.contextData.global.links.home.route,t.passwordPolicies(e.global.passwordPolicies),t.readyToDisplay(!0),e.global.user.catalog&&t.catalogId(e.global.user.catalog.repositoryId),t.catalog&&(t.catalog=void 0),e.global.supportedLocales&&e.global.supportedLocales.length>0?t.supportedLocales=e.global.supportedLocales:t.supportedLocales=e.global.site.additionalLanguages,e.global.user.firstName?t.populateUserViewModel(e.global.user):(t.populateUserFromLocalData(!0),t.isUserLoggedOut()||t.loggedIn()||t.isUserSessionExpired()||void 0==t.login()||""==t.login()||t.handleSessionExpired())},m.prototype.handlePageChanged=function(){var e=this;e.isPageRedirected()||!e.loggedIn()||e.loggedinAtCheckout()||$.Topic(t.topicNames.REFRESH_USER_CART).publish(e),e.isPageRedirected(!1)},m.prototype.handleSessionExpired=function(){var e=this;d.getInstance().removeItem(n.LOCAL_STORAGE_SHOPPER_CONTEXT),d.getInstance().removeItem(n.LOCAL_STORAGE_CURRENT_CONTEXT),e.isUserSessionExpired()||e.isUserLoggedOut()||(e.loggedIn(!1),l.isPathEqualTo(e.myAccountHash)||0!=e.isSesExpDuringPlaceOrder()||(e.resetLoginData(),e.reset(),e.id(null)),l.isPathEqualTo(e.checkoutHash)||l.getPath().indexOf(e.checkoutHash)>=0||$.Topic(t.topicNames.USER_CLEAR_CART).publish(e),e.populateUserFromLocalData(!0),e.orderId(""),e.loggedinAtCheckout(!1),e.loggedoutAtCheckout(!1),e.isUserSessionExpired(!0),e.isUserLoggedOut(!1),e.setLocalData("sessionExpiry"),e.readyToDisplay(!0))},m.prototype.handleSessionValid=function(){var e=this;e.loggedIn(e.client().loggedIn),e.isUserSessionExpired(!1),e.isUserLoggedOut(!1),e.setLocalData("sessionExpiry"),e.readyToDisplay(!0)},m.prototype.validatePrivilagePageRequest=function(e,t){var r=this;if(r.isUserProfileEdited())return!0;var i=t.currentTarget.pathname,a=i.indexOf("#!");return a>=0&&(i=i.substring(a+2)),r.validateAndRedirectPage(i),!1},m.prototype.navigateToPage=function(e,r){if(l.isPathEqualTo(e)){var i={pageId:l.getPath()};$.Topic(t.topicNames.PAGE_VIEW_CHANGED).publish(i)}else l.goTo(e),r&&r()},m.prototype.validateAndRedirectPage=function(e){var r,i=this;if(e!=n.PAYPAL_CHECKOUT_TYPE&&(r=[{message:"success",linkToRedirect:e}]),!i.loggedIn()&&i.isUserSessionExpired())e==n.PAYPAL_CHECKOUT_TYPE&&l.isPathEqualTo(i.checkoutHash)?$.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.doLogin(e);else if(i.loggedIn()){var a=function(){i.handleSessionValid(),i.pageToRedirect()&&""!=i.pageToRedirect()&&i.pageToRedirect()==e&&i.pageToRedirect(null),e==n.PAYPAL_CHECKOUT_TYPE?$.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.goTo(e)},o=function(t){t&&(i.handleSessionExpired(),l.doLogin(e))};i.client().refresh(a,o)}else l.goTo(e);return!1},m.prototype.handleUpdateProfile=function(){var e=this,r={},i=!1,a=!1,n=!1,o=!1,s=!1,c=!1;if(e.isProfileModified()&&(e.isProfileValid()?n=!0:i=!0,a=!0),e.isPasswordModified()&&(e.isPasswordValid()?s=!0:i=!0,a=!0),null!=e.editShippingAddress()&&($.inArray(e.editShippingAddress(),e.shippingAddressBook())<0&&e.shippingAddressBook.push(e.editShippingAddress()),1===e.shippingAddressBook().length&&e.shippingAddressBook()[0].isDefaultAddress(!0),e.editShippingAddress().isDefaultAddress()&&e.selectDefaultAddress(e.editShippingAddress())),e.isShippingAddressBookModified()){for(var l=0;l<e.shippingAddressBook().length;l++)if(!e.shippingAddressBook()[l].validateNow()){i=!0;break}c=!i,a=!0}if(e.dynamicProperties().length>0&&e.isDynamicPropertiesModified()){for(var d=0;d<e.dynamicProperties().length;d++){var u=e.dynamicProperties()[d];if(!u.isValid()){i=!0;break}}i||(o=!0),a=!0}return a?i?void $.Topic(t.topicNames.USER_PROFILE_UPDATE_INVALID).publish():(n&&e.handleAccountDetailsUpdate(r),o&&e.handleDynamicPropertiesUpdate(r),s&&e.handleUpdatePassword(r),c&&e.handleShippingAddressUpdate(r),void e.invokeUpdateProfile(r)):void $.Topic(t.topicNames.USER_PROFILE_UPDATE_NOCHANGE).publish()},m.prototype.handleAccountDetailsUpdate=function(e){var t=this;t.receiveEmail=t.emailMarketingMails()?"yes":"no",e[n.PROFILE_EMAIL]=t.emailAddress(),e[n.PROFILE_FIRST_NAME]=t.firstName(),e[n.PROFILE_LAST_NAME]=t.lastName(),e[n.PROFILE_RECEIVE_EMAIL]=t.receiveEmail,e[n.PROFILE_LOCALE]=t.locale(),e[n.PROFILE_GDPR_CONSENT_GRANTED_KEY]=t.GDPRProfileP13nConsentGranted()},m.prototype.handleDynamicPropertiesUpdate=function(e){for(var t=this,r=0;r<t.dynamicProperties().length;r++)t.dynamicProperties()[r].value.isModified&&t.dynamicProperties()[r].value.isModified()&&(e[t.dynamicProperties()[r].id()]=t.dynamicProperties()[r].value());t.resetDynamicPropertiesValueIsModified()},m.prototype.handleUpdatePassword=function(e){var t=this;e[n.PROFILE_OLD_PASSWORD]=t.oldPassword(),e[n.PROFILE_NEW_PASSWORD]=t.newPassword(),e[n.PROFILE_CONFIRM_PASSWORD]=t.confirmPassword()},m.prototype.handleShippingAddressUpdate=function(e){var t=this;e[n.PROFILE_SHIPPING_ADDRESSES]=t.shippingAddressBook()},m.prototype.invokeUpdateProfile=function(e){var r=this;r.adapter.loadJSON(n.ENDPOINT_UPDATE_PROFILE,r.id(),e,function(e){r.editShippingAddress(null),r.resetPassword(),$.Topic(t.topicNames.USER_PROFILE_UPDATE_SUCCESSFUL).publish(e)},function(e){var i=a.getStoredValue(n.LOCAL_STORAGE_USER_CONTENT_LOCALE);if(i){var o=JSON.parse(i)[0].name;r.locale()!==o&&r.locale(o)}else r.locale(r.contextData.global.locale);r.resetPassword(),$.Topic(t.topicNames.USER_PROFILE_UPDATE_FAILURE).publish(e)})},m.prototype.updateExpiredPassword=function(){var e=this,r={};r[n.PROFILE_LOGIN]=e.login(),r[n.PROFILE_OLD_PASSWORD]=e.oldPassword(),r[n.PROFILE_NEW_PASSWORD]=e.newPassword(),r[n.PROFILE_CONFIRM_PASSWORD]=e.confirmPassword(),e.adapter.persistCreate(n.ENDPOINT_UPDATE_EXPIRED_PASSWORD,"id",r,function(r){$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_SUCCESSFUL).publish(r);var i=e.newPassword();e.resetPassword(),e.password(i)},function(r){e.resetPassword(),$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_FAILURE).publish(r)})},m.prototype.validateTokenForPasswordUpdate=function(e,t,r){var i=this;e=decodeURIComponent(decodeURIComponent(e)),i.token=e;var a={};a[n.OP]=n.VALIDATE_TOKEN_OPERATION,a[n.TOKEN]=e,i.adapter.persistCreate(n.ENDPOINT_UPDATE_EXPIRED_PASSWORD,"id",a,function(e){"function"==typeof t&&t(e)},function(e){i.token="","function"==typeof r&&r(e)})},m.prototype.updateExpiredPasswordUsingToken=function(e,r,i,a,o,s){var c=this,l={};l[n.TOKEN]=e,l[n.PROFILE_LOGIN]=r,l[n.PROFILE_PASSWORD]=i,l[n.PROFILE_PASSWORD_CONFIRM]=a,c.adapter.persistCreate(n.ENDPOINT_UPDATE_EXPIRED_PASSWORD,"id",l,function(e){$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_SUCCESSFUL).publish(e),c.resetPassword(),c.token="","function"==typeof o&&o(e)},function(e){c.resetPassword(),c.emailAddressForForgottenPwd(""),$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_FAILURE).publish(e),"function"==typeof s&&s(e)})},m.getInstance=function(e,t,r){return m.singleInstance?!m.singleInstance.loggedInUserName()&&r&&r.global&&r.global.user&&r.global.user.firstName&&m.singleInstance.loggedInUserName(r.global.user.firstName):m.singleInstance=new m(e,t),r&&m.singleInstance.setContext(r),m.singleInstance},m}),define("viewModels/skuPropertiesHandler",["knockout","ccRestClient","ccConstants","ccLogger","ccStoreConfiguration"],function(e,t,r,i,a){function n(){var e=this;return e.fetchSkuProperties=function(a,n,o,s,c){o.parent="sku";var l=function(e){e&&e.base&&e.base.forEach(function(e){"sku-base"===e.propertyType&&a().push(e)}),e&&e.specifications&&e.specifications.forEach(function(e){"sku-custom"===e.propertyType&&a().push(e)}),"function"==typeof s&&s(a)},d=function(e){i.error("Failed to fetch SKU properties for "+n,e),"function"==typeof c&&c()},u={};u[r.ENDPOINT_KEY]=r.ENDPOINT_GET_ITEM_TYPE;var p=e.storeConfiguration.getFilterToUse(u);p&&(o[r.FILTER_KEY]=p),t.request(r.ENDPOINT_GET_ITEM_TYPE,o,l,d,n)},e.getBase=function(t,r,i){e.fetchSkuProperties(t,"sku",{includeBase:!0},r,i)},e.getAll=function(t,r,i,a){r&&(r+"").trim()?e.fetchSkuProperties(t,"sku-"+r,{includeBase:!0},i,a):e.getBase(t,i,a)},e.getCustom=function(t,r,i,a){r&&(r+"").trim()?e.fetchSkuProperties(t,"sku-"+r,{includeBase:!1},i,a):e.fetchSkuProperties(t,"sku",{includeBase:!1},i,a)},e.storeConfiguration=a.getInstance(),e}return new n}),define("pageLayout/product",["knockout","ccRestClient","ccConstants","pubsub","CCi18n","ccLogger","viewModels/skuPropertiesHandler","ccStoreConfiguration"],function(e,t,r,i,a,n,o,s){"use strict";function c(t,r){var i=this;t.childSKUs||(t.childSKUs=[]);var a={ignore:["addOnProducts"]};e.mapping.fromJS(t,a,i),i.product=t,i.filterInactiveAddons(t),i.addOnProducts=t.addOnProducts;var n=["id","salePrice","listPrice","primaryFullImageURL","primaryLargeImageURL","primaryMediumImageURL","primarySmallImageURL","primaryThumbImageURL","shippingSurcharge","type","displayName"],o=["childSKUs","thumbImageURLs","smallImageURLs","mediumImageURLs","largeImageURLs","fullImageURLs","sourceImageURLs","productImagesMetadata"];for(var c in n)void 0==i[n[c]]&&(i[n[c]]=e.observable(""));for(var c in o)void 0==i[o[c]]&&(i[o[c]]=e.observableArray([]));return i.minPrice=i.getMinimumPrice(),i.maxPrice=i.getMaximumPrice(!1),i.productSalePrice=i.getSalePrice(),i.productListPrice=i.getListPrice(),i.isOnSale=i.isOnSale(),i.hasPriceRange=i.hasRange(),i.stockStatus=e.observable(),i.variantName=e.observable(),i.variantValue=e.observable(),i.relatedProducts=t.relatedProducts,i.productVariantOptions&&i.productVariantOptions()&&(i.variantOptionsArray=i.populateVariantOptions(e.mapping.toJS(i.productVariantOptions()))),i.inStock=e.observable(!1),i.showStockStatus=e.observable(!1),i.filtered=e.observable(!1),i.skuProperties=e.observableArray([]),i.storeConfiguration=s.getInstance(),i.minListPrice=i.getMinimumPrice(!0),i.maxListPrice=i.getMaximumPrice(!0),i}return c.prototype.getMinimumPrice=function(e){var t,r,i,a,n,o=this,s=o.childSKUs()?o.childSKUs().length:0;if(o.minActivePrice&&!e)return o.minActivePrice();if(t=e?o.listPrice():o.salePrice()||0===o.salePrice()?o.salePrice():o.listPrice(),o.childSKUs())if(s>0)for(var n in o.childSKUs())i=o.childSKUs()[n],a=e?i.listPrice():i.salePrice()||0===i.salePrice()?i.salePrice():i.listPrice(),a||0==a||null==a||(a=t),(!r&&0!=r||a<r)&&(r=a);else r=t;return r},c.prototype.getMaximumPrice=function(e){var t,r,i,a,n,o=this,s=o.childSKUs().length;if(o.maxActivePrice&&!e)return o.maxActivePrice();if(t=e?o.listPrice():o.salePrice()||0===o.salePrice()?o.salePrice():o.listPrice(),o.childSKUs())if(s>0)for(var n in o.childSKUs())i=o.childSKUs()[n],a=e?i.listPrice():i.salePrice()||0===i.salePrice()?i.salePrice():i.listPrice(),a||0==a||null==a||(a=t),(!r&&0!=r||a>r)&&(r=a);else r=t;return r},c.prototype.isOnSale=function(){var e=this,t=e.childSKUs().length;if(!t&&e.product.salePrice)return!0;for(var r in e.childSKUs()){var i=e.childSKUs()[r];if(null!=i.salePrice()&&i.salePrice()>=0)return!0}return!1},c.prototype.hasRange=function(){var e=this;return e.minPrice=e.getMinimumPrice(),e.maxPrice=e.getMaximumPrice(!1),e.minPrice!=e.maxPrice&&!isNaN(parseFloat(e.minPrice))&&!isNaN(parseFloat(e.maxPrice))},c.prototype.getListPrice=function(){var e=this;return e.childSKUs().length>=1?e.getMaximumPrice(!0):e.listPrice()},c.prototype.getSalePrice=function(){var e=this;return!e.hasRange()&&e.isOnSale()?e.minPrice:e.salePrice()},c.prototype.getPrices=function(e,a){var n=this,o={},s=e,c={};c[r.ENDPOINT_KEY]=r.ENDPOINT_GET_PRODUCT_PRICES;var l=n.storeConfiguration.getFilterToUse(c);l&&(o[r.FILTER_KEY]=l);var d=r.ENDPOINT_GET_PRODUCT_PRICES;t.request(d,o,function(e){var t=function(e,t){e.levels(t.levels),e.numLevels(t.numLevels)};if(e.skuPrices)for(var a=n.childSKUs().length,o=e.skuPrices.length,s=0;s<a;s+=1)for(var c=0;c<o;c+=1)n.childSKUs()&&n.childSKUs()[s].repositoryId()==e.skuPrices[c].skuId&&(n.childSKUs()[s].listPrice(e.skuPrices[c].listPrice),n.childSKUs()[s].salePrice(e.skuPrices[c].salePrice),e.skuPrices[c].hasOwnProperty(r.LIST_VOLUME_PRICE)&&(e.skuPrices[c].listVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(n.childSKUs()[s].listVolumePrice.bulkPrice,e.skuPrices[c].listVolumePrice.bulkPrice):e.skuPrices[c].listVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(n.childSKUs()[s].listVolumePrice.tieredPrice,e.skuPrices[c].listVolumePrice.tieredPrice)),e.skuPrices[c].hasOwnProperty(r.SALE_VOLUME_PRICE)&&(e.skuPrices[c].saleVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(n.childSKUs()[s].saleVolumePrice.bulkPrice,e.skuPrices[c].saleVolumePrice.bulkPrice):e.skuPrices[c].saleVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(n.childSKUs()[s].saleVolumePrice.tieredPrice,e.skuPrices[c].saleVolumePrice.tieredPrice)));n.hasPriceRange=e.priceRange,e.priceRange===!0&&(n.maxPrice=e.priceMax,n.minPrice=e.priceMin),e.list&&n.listPrice(e.list),null===n.product.type&&e.skuPrices&&(n.childSKUs()&&n.childSKUs()[0]&&(n.childSKUs()[0].listPrice(e.skuPrices.listPrice||e.list),n.listPrice(e.skuPrices.listPrice||e.list)),e.skuPrices.hasOwnProperty(r.LIST_VOLUME_PRICE)&&(e.skuPrices.listVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(n.childSKUs()[0].listVolumePrice.bulkPrice,e.skuPrices.listVolumePrice.bulkPrice):e.skuPrices.listVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(n.childSKUs()[0].listVolumePrice.tieredPrice,e.skuPrices.listVolumePrice.tieredPrice)),e.skuPrices.hasOwnProperty(r.SALE_VOLUME_PRICE)&&(e.skuPrices.saleVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(n.childSKUs()[0].saleVolumePrice.bulkPrice,e.skuPrices.saleVolumePrice.bulkPrice):e.skuPrices.saleVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(n.childSKUs()[0].saleVolumePrice.tieredPrice,e.skuPrices.saleVolumePrice.tieredPrice))),e.sale||0===e.sale?n.salePrice(e.sale):n.salePrice(null),null===n.product.type&&e.skuPrices&&(n.childSKUs()&&n.childSKUs()[0]&&n.childSKUs()[0].salePrice(e.skuPrices.salePrice),n.salePrice(e.skuPrices.salePrice)),$.Topic(i.topicNames.PRODUCT_PRICE_CHANGED).publish()},function(e){},s)},c.prototype.getAvailability=function(e,i,a){var n=this,o={},s=e;o[r.SKU_ID]=i,o[r.CATALOG]=null==a?"":a;var c=r.ENDPOINT_GET_PRODUCT_AVAILABILITY,l={};l[r.ENDPOINT_KEY]=r.ENDPOINT_GET_PRODUCT_AVAILABILITY,l[r.IDENTIFIER_KEY]="productStockStatus";var d=n.storeConfiguration.getFilterToUse(l);d&&(o[r.FILTER_KEY]=d),t.request(c,o,function(e){if(null!=e.productSkuInventoryStatus)for(var t=e.productSkuInventoryStatus,r=n.product.childSKUs?n.product.childSKUs.length:0,i=0;i<r;i++){var a=n.product.childSKUs[i];a.quantity=t[a.repositoryId]}n.stockStatus(e)},function(e){var t={stockStatus:r.OUT_OF_STOCK};n.stockStatus(t)},s)},c.prototype.getSkuPrice=function(e){var t=this,r={};for(var i in t.childSKUs())t.childSKUs()[i].repositoryId()==e.repositoryId&&(r.listPrice=t.childSKUs()[i].listPrice(),r.salePrice=t.childSKUs()[i].salePrice(),r.listVolumePrice=t.childSKUs()[i].listVolumePrice,r.saleVolumePrice=t.childSKUs()[i].saleVolumePrice);return r},c.prototype.isConfigurable=function(){var e=this;if(e.configurable&&e.configurable())return!0;for(var t in e.childSKUs())if(e.childSKUs()[t].configurable&&e.childSKUs()[t].configurable())return!0;return!1},c.prototype.fetchSkuProperties=function(){var e=this;e.skuProperties([]),o.getAll(e.skuProperties,e.product.type)},c.prototype.populateVariantOptions=function(e){var t=this;if(e&&null!==e&&e.length>0)for(var r,i,a=[],n=0;n<e.length;n++)r=t.mapOptionsToArray(e[n].optionValueMap),i=t.productVariantModel(e[n].optionName,e[n].mapKeyPropertyAttribute,r,e[n].optionId),a.push(i);else t.imgMetadata=t.productImagesMetadata;return a},c.prototype.mapOptionsToArray=function(t){var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push({key:i,value:t[i],visible:e.observable(!0)});return r},c.prototype.productVariantModel=function(t,r,i,n){var o=this,s={},c={};s.optionDisplayName=t,s.parent=this,s.optionId=r,s.originalOptionValues=e.observableArray(i),s.actualOptionId=n;var l=e.observable(!0);1===i.length&&l(o.checkOptionValueWithSkus(r,i[0].value)),l()&&(s.optionCaption=a.t("ns.common:resources.optionCaption",{optionName:t},!0)),s.selectedOptionValue=e.observable(),s.countVisibleOptions=e.computed(function(){for(var e=0,t=0;t<s.originalOptionValues().length;t++)1==i[t].visible()&&(e+=1);return e},s),s.disable=e.computed(function(){return 0==s.countVisibleOptions()},s),s.selectedOption=e.computed({write:function(e){o.filtered(!1),s.selectedOptionValue(e),o.filterOptionValues(s.optionId)},read:function(){return s.selectedOptionValue()},owner:s}),s.selectedOption.extend({required:{params:!0,message:a.t("ns.common:resources.optionRequiredMsg",{optionName:t},!0)}}),s.optionValues=e.computed({write:function(e){s.originalOptionValues(e)},read:function(){return e.utils.arrayFilter(s.originalOptionValues(),function(e){return 1==e.visible()})},owner:s}),c.thumbImageURLs=1==o.thumbImageURLs().length&&o.thumbImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:o.thumbImageURLs(),c.smallImageURLs=1==o.smallImageURLs().length&&o.smallImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:o.smallImageURLs(),c.mediumImageURLs=1==o.mediumImageURLs().length&&o.mediumImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:o.mediumImageURLs,c.largeImageURLs=1==o.largeImageURLs().length&&o.largeImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:o.largeImageURLs(),c.fullImageURLs=1==o.fullImageURLs().length&&o.fullImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:o.fullImageURLs(),c.sourceImageURLs=1==o.sourceImageURLs().length&&o.sourceImageURLs()[0].indexOf("/img/no-image.jpg")>0?[]:o.sourceImageURLs();var d=[];if(o.thumbImageURLs&&o.thumbImageURLs().length>0)for(var u=0;u<o.thumbImageURLs().length;u++)d.push(o.productImagesMetadata[u]);return s},c.prototype.filterOptionValues=function(e){var t=this;if(!t.filtered()){for(var r=t.variantOptionsArray,i=0;i<r.length;i++){var a=r[i],n=t.getMatchingSKUs(r[i].optionId),o=t.updateOptionValuesFromSku(n,e,a);r[i].optionValues(o),t.filtered(!0)}t.updateSingleSelection(e)}},c.prototype.getMatchingSKUs=function(e){for(var t=this,r=t.childSKUs(),i=[],a=t.variantOptionsArray,n={},o=0;o<a.length;o++)a[o].optionId!=e&&void 0!=a[o].selectedOption()&&(n[a[o].optionId]=a[o].selectedOption().value);for(var s=0;s<r.length;s++){var c=!0;for(var l in n)if(n.hasOwnProperty(l)&&(!r[s].dynamicPropertyMapLong[l]||r[s].dynamicPropertyMapLong[l]()!=n[l])){c=!1;break}c&&i.push(r[s])}return i},c.prototype.updateOptionValuesFromSku=function(e,t,r){for(var i=r.optionId,a=[],n=r.originalOptionValues(),o=0;o<e.length;o++){var s=e[o].dynamicPropertyMapLong[i];void 0!=s&&a.push(s())}for(var c=0;c<n.length;c++){var l=n[c].value,d=!1,u=a.indexOf(l);u!=-1&&(d=!0),n[c].visible(d)}return n},c.prototype.updateSingleSelection=function(e){for(var t=this,r=t.variantOptionsArray,i=0;i<r.length;i++){var a=r[i].optionId;if(1==r[i].countVisibleOptions()&&void 0==r[i].selectedOption()&&a!=e)for(var n=(t.validForSingleSelection(a),r[i].originalOptionValues()),o=0;o<n.length;o++)if(1==n[o].visible()){r[i].selectedOption(n[o]);break}}},c.prototype.validForSingleSelection=function(e){for(var t=this,r=t.variantOptionsArray,i=0;i<r.length;i++){if(r[i].disable()||r[i].optionId!=e&&void 0!=r[i].selectedOption())return!0;if(r[i].optionId!=e&&void 0==r[i].selectedOption()&&1==r[i].countVisibleOptions())return!0}return!1},c.prototype.checkOptionValueWithSkus=function(e,t){for(var r=this,i=r.childSKUs(),a=i.length,n=0;n<a;n++)if(!i[n].dynamicPropertyMapLong[e]||void 0===i[n].dynamicPropertyMapLong[e]())return!0;return!1},c.prototype.getSelectedSkuOptions=function(e){
for(var t=[],r=0;r<e.length;r++)e[r].disable()||t.push({optionName:e[r].optionDisplayName,optionValue:e[r].selectedOption().key,optionId:e[r].actualOptionId,optionValueId:e[r].selectedOption().value});return t},c.prototype.getProductsAvailability=function(e,i,a,n){var o={};o[r.PRODUCTS_PARAM]=a,o[r.CATALOG]=null==n?"":n;var s=r.ENDPOINT_PRODUCTS_AVAILABILITY;t.request(s,o,e,i)},c.prototype.filterInactiveAddons=function(e){if(e.addOnProducts&&e.addOnProducts.length>0)for(var t=e.addOnProducts.length,r=t-1;r>=0;r--)if(e.addOnProducts[r].addOnOptions&&0!=e.addOnProducts[r].addOnOptions.length&&e.addOnProducts[r].addOnOptions[0].product.active)for(var i=e.addOnProducts[r].addOnOptions.length-1;i>=0;i--)e.addOnProducts[r].addOnOptions[i].sku.active||e.addOnProducts[r].addOnOptions.splice(i,1);else e.addOnProducts.splice(r,1)},c}),define("swmRestClientConstructor",["jquery","ccRestClient","ccLogger","storageApi","pageLayout/site"],function(e,t,r,i,a){"use strict";function n(e,r){var a=this;a.isInitialized=!1,a.usingCCAuthentication=!1,a.isSynced=!1,a.unauthorizedCount=0,a.cors="withCredentials"in new XMLHttpRequest,a.corsFrameReady=!1,a.ccsyncInProgress=!1,a.ccsyncBlockedCallQue={items:[]},a.refreshTimeoutID=null,a.siteid="",a.ccsiteid="",a.apiuserid="",a.apiuserauth="";try{i.getInstance().removeItem("social.ccsyncprofileid"),i.getInstance().removeItem("social.ccsyncapiuserid")}catch(e){}a.ccrestapi=t,a.tenantid="",a.swmhost="",a.isPreview=!1,a.currentRequestId=0,a.commonSuccessCallback=e,a.commonErrorCallback=r,a.doRefresh=function(){if(a.usingCCAuthentication){var e=function(){},r=function(e){};a.refresh(e,r),t.storeRequestWasMade=!0}},a.stackedPostMessages={items:[]},a.setCorsFrameReady=function(){if(a.corsFrameReady=!0,a.stackedPostMessages&&a.stackedPostMessages.items.length>0){for(var e=0;e<a.stackedPostMessages.items.length;e++)a.proxyFrame.postMessage(a.stackedPostMessages.items[e].msgObj,a.swmhost);a.stackedPostMessages={items:[]}}}}return n.GET="GET",n.POST="POST",n.JSON="json",n.REQUEST_JSON_CONTENT_TYPE="application/json",n.REQUEST_FORM_URL_ENCODED="application/x-www-form-urlencoded",n.SWM_CCSYNC_ENDPOINT="/swm/rs/v1/users/cc",n.SWM_REFRESH_ENDPOINT="/swm/rs/v1/users/refresh",n.AUTH_HEADER_NAME="Authorization",n.CC_TENANTID_HEADER_NAME="X-CCTenantId",n.CC_SITEID_HEADER_NAME="X-CCSiteId",n.CC_ISPREVIEW_HEADER_NAME="X-CCIsPreview",n.ACCEPT_LANGUAGE_HEADER_NAME="Accept-Language",n.SWM_ACCESS_TOKEN="access_token",n.AUTH_HEADER_PREFIX="Bearer ",n.JWT_BEARER_GRANT_TYPE="urn:ietf:params:oauth:grant-type:jwt-bearer",n.TOKEN_REFRESH_TIMEOUT=5e3,n.IFRAME_ELEMENT="iframe",n.ZERO="0",n.IFRAME_STYLE="width: 0; height: 0; border: none;",n.IFRAME_NAME="swm_iframe",n.ID_ATTRIBUTE="id",n.NAME_ATTRIBUTE="name",n.WIDTH_ATTRIBUTE="width",n.HEIGHT_ATTRIBUTE="height",n.BORDER_ATTRIBUTE="border",n.STYLE_ATTRIBUTE="style",n.SRC_ATTRIBUTE="src",n.MAX_INT=4294967295,n.prototype.setSWMHost=function(e){this.swmhost=e},n.prototype.init=function(e,t,r){var i=this;if(i.tenantid=e,i.isPreview=1==t?"true":"false",i.locale=r,i.ccsiteid=a.getInstance().siteInfo.id,!i.cors&&!i.isInitialized){i.crossDomainUrl=i.swmhost+"/swm/pm/?tenantId="+e+"&isPreview="+i.isPreview,i.eventHandlerMap={},i.eventHandlerMap.initializedSWMFrame={success:i.setCorsFrameReady,error:i.setCorsFrameReady},i.initXDomainMessageListener();var n=i.createCrossDomainIFrame();null!=n&&(i.proxyFrame=n.contentWindow)}i.isInitialized=!0},n.prototype.createCrossDomainIFrame=function(){var e=this,t=n.IFRAME_NAME,r=document.createElement(n.IFRAME_ELEMENT);r.setAttribute(n.ID_ATTRIBUTE,t),r.setAttribute(n.NAME_ATTRIBUTE,t),r.setAttribute(n.WIDTH_ATTRIBUTE,n.ZERO),r.setAttribute(n.HEIGHT_ATTRIBUTE,n.ZERO),r.setAttribute(n.BORDER_ATTRIBUTE,n.ZERO),r.setAttribute(n.STYLE_ATTRIBUTE,n.IFRAME_STYLE),r.setAttribute(n.SRC_ATTRIBUTE,e.crossDomainUrl);var i=null;try{document.body.appendChild(r),window.frames[t].name=t,i=document.getElementById(t)}catch(e){}return i},n.prototype.initXDomainMessageListener=function(){var e=this;window.addEventListener("message",function(t){var r=t.origin;if(r===e.swmhost){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,n=i.success,o=i.payload,s=e.eventHandlerMap[a];s&&(n?s.success(o):s.error(JSON.stringify(o)))}},!1)},n.prototype.proxyRequest=function(e,t,r,i,a,o){var s=this;s.currentRequestId>=n.MAX_INT?s.currentRequestId=0:s.currentRequestId++;var c=s.currentRequestId;s.eventHandlerMap[c]={success:i,error:a};var l=t.replace("{siteid}",s.siteid);l=s.swmhost+s.insertParamsIntoUri(l,o),l.indexOf(n.SWM_REFRESH_ENDPOINT)==-1&&l.indexOf(n.SWM_CCSYNC_ENDPOINT)==-1&&(null==s.refreshTimeoutID?s.refreshTimeoutID=setTimeout(s.doRefresh,n.TOKEN_REFRESH_TIMEOUT):(clearTimeout(s.refreshTimeoutID),s.refreshTimeoutID=setTimeout(s.doRefresh,n.TOKEN_REFRESH_TIMEOUT)));var d=0===t.indexOf(n.SWM_CCSYNC_ENDPOINT),u=(d?n.REQUEST_FORM_URL_ENCODED:n.REQUEST_JSON_CONTENT_TYPE,r?d?r:JSON.stringify(r):""),p={};p.id=c,p.pMethod=e,p.pUrl=l,p.pData=u,p.pIsPreview=s.isPreview,p.pTenantId=s.tenantid,p.pCCSiteId=s.ccsiteid,p.pLocale=s.locale,p.pApiuserauth=s.apiuserauth,p.pAssertion=s.ccrestapi.tokenSecret,s.corsFrameReady?s.proxyFrame.postMessage(JSON.stringify(p),s.swmhost):s.stackedPostMessages.items.push({msgObj:JSON.stringify(p)})},n.prototype.syncCCUser=function(e,t){var r=this,a=function(t){r.isSynced=!0,r.siteid=t.siteId,r.apiuserid=t.userId,r.apiuserauth=t.access_token;try{i.getInstance().setItem("social.ccsyncprofileid",r.ccrestapi.profileId),i.getInstance().setItem("social.ccsyncapiuserid",t.userId)}catch(e){}e&&e(t)},o=function(e){r.isSynced=!1,null!=r.refreshTimeoutID&&clearTimeout(r.refreshTimeoutID),t&&t(e)};this.cors?this.corsRequest(n.POST,n.SWM_CCSYNC_ENDPOINT+"/{ccprofileid}","grant_type="+encodeURIComponent(n.JWT_BEARER_GRANT_TYPE)+"&assertion="+encodeURIComponent(r.ccrestapi.tokenSecret),a,o,{ccprofileid:r.ccrestapi.profileId}):this.proxyRequest(n.POST,n.SWM_CCSYNC_ENDPOINT+"/{ccprofileid}","grant_type="+encodeURIComponent(n.JWT_BEARER_GRANT_TYPE)+"&assertion="+encodeURIComponent(r.ccrestapi.tokenSecret),a,o,{ccprofileid:r.ccrestapi.profileId})},n.prototype.refresh=function(e,t){var r=this,i=function(t){r.isSynced=!0,r.apiuserauth=t.access_token,e&&e(t)},a=function(e){};r.apiuserauth?r.cors?r.corsRequest(n.POST,n.SWM_REFRESH_ENDPOINT,{},i,a):r.proxyRequest(n.POST,n.SWM_REFRESH_ENDPOINT,{},i,a):a()},n.prototype.clear=function(){var e=this;e.usingCCAuthentication=!1,e.isSynced=!1,e.siteid="",e.apiuserid="",e.apiuserauth="";try{i.getInstance().removeItem("social.ccsyncprofileid"),i.getInstance().removeItem("social.ccsyncapiuserid")}catch(e){}},n.prototype.request=function(e,t,a,n,o,s){var c=this,l=n,d=o;if(""==c.swmhost||!c.isInitialized)return void r.warn("rest client not initialized properly");null!=c.ccrestapi.profileId&&null!=c.ccrestapi.tokenSecret&&(c.usingCCAuthentication=!0);var u=i.getInstance().getItem("social.ccsyncprofileid"),p=i.getInstance().getItem("social.ccsyncapiuserid");if(u&&c.ccrestapi.profileId!==u||p&&c.apiuserid!==p){c.clear();var h='{"o:errorCode":"401.99"}';return void c.commonErrorCallback(h)}if(c.apiuserid===p&&c.ccrestapi.profileId===u||(c.isSynced=!1),c.usingCCAuthentication&&!c.isSynced){var f=function(r){c.ccsyncInProgress=!1,c.cors?c.corsRequest(e,t,a,l,d,s):c.proxyRequest(e,t,a,l,d,s),c.ccsyncBlockedCallQueExecution()},m=function(e){c.ccsyncInProgress=!1,null!=c.refreshTimeoutID&&clearTimeout(c.refreshTimeoutID),d&&d(e)};c.ccsyncInProgress?c.ccsyncBlockedCallQue.items.push({pMethod:e,pUrl:t,pData:a,pSuccessCallback:n,pErrorCallback:o,pJSONParams:s}):(c.ccsyncInProgress=!0,c.syncCCUser(f,m))}else c.cors?this.corsRequest(e,t,a,n,o,s):this.proxyRequest(e,t,a,n,o,s)},n.prototype.ccsyncBlockedCallQueExecution=function(){var e=this;if(e.ccsyncBlockedCallQue.items.length>0){for(var t=0;t<e.ccsyncBlockedCallQue.items.length;t++)e.cors?e.corsRequest(e.ccsyncBlockedCallQue.items[t].pMethod,e.ccsyncBlockedCallQue.items[t].pUrl,e.ccsyncBlockedCallQue.items[t].pData,e.ccsyncBlockedCallQue.items[t].pSuccessCallback,e.ccsyncBlockedCallQue.items[t].reqErrorCB,e.ccsyncBlockedCallQue.items[t].pJSONParams):e.proxyRequest(e.ccsyncBlockedCallQue.items[t].pMethod,e.ccsyncBlockedCallQue.items[t].pUrl,e.ccsyncBlockedCallQue.items[t].pData,e.ccsyncBlockedCallQue.items[t].pSuccessCallback,e.ccsyncBlockedCallQue.items[t].reqErrorCB,e.ccsyncBlockedCallQue.items[t].pJSONParams);e.ccsyncBlockedCallQue={items:[]}}},n.prototype.corsRequest=function(t,r,i,a,o,s){var c=this,l=t,d=r.replace("{siteid}",c.siteid);d=c.swmhost+c.insertParamsIntoUri(d,s),d.indexOf(n.SWM_REFRESH_ENDPOINT)==-1&&d.indexOf(n.SWM_CCSYNC_ENDPOINT)==-1&&(null==c.refreshTimeoutID?c.refreshTimeoutID=setTimeout(c.doRefresh,n.TOKEN_REFRESH_TIMEOUT):(clearTimeout(c.refreshTimeoutID),c.refreshTimeoutID=setTimeout(c.doRefresh,n.TOKEN_REFRESH_TIMEOUT)));var u=function(e){r.indexOf(n.SWM_CCSYNC_ENDPOINT)==-1&&(c.unauthorizedCount=0);var t=function(e,t){c.commonSuccessCallback(e,t),a(e,t)};t(e.data,e.textStatus)},p=function(e){var l=function(e,t,r){c.commonErrorCallback(e,t,r),o(e,t,r)};if(c.usingCCAuthentication)try{var d=JSON.parse(e.jqXHR.responseText);c.unauthorizedCount<=1&&401===d.status&&r.indexOf(n.SWM_CCSYNC_ENDPOINT)==-1?(c.isSynced=!1,c.unauthorizedCount++,c.request(t,r,i,a,o,s)):l(e.jqXHR.responseText,e.jqXHR.status,e.errorThrown)}catch(e){}else l(e.jqXHR.responseText,e.jqXHR.status,e.errorThrown)};l===n.GET&&(d=c.fixIECaching(d));var h=0===r.indexOf(n.SWM_CCSYNC_ENDPOINT),f=h?n.REQUEST_FORM_URL_ENCODED:n.REQUEST_JSON_CONTENT_TYPE,m=i?h?i:JSON.stringify(i):"",g={};g={dataType:n.JSON,contentType:f,type:l,url:d,data:m,processData:!1,success:function(e,t,r){u({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){p({jqXHR:e,textStatus:t,errorThrown:r})}};var v={};v[n.CC_ISPREVIEW_HEADER_NAME]=c.isPreview,v[n.ACCEPT_LANGUAGE_HEADER_NAME]=c.locale,h?(v[n.CC_TENANTID_HEADER_NAME]=c.tenantid,v[n.CC_SITEID_HEADER_NAME]=c.ccsiteid):c.apiuserauth&&c.apiuserauth.length>0&&(v[n.AUTH_HEADER_NAME]=n.AUTH_HEADER_PREFIX+c.apiuserauth),g.headers=v,e.ajax(g)},n.prototype.insertParamsIntoUri=function(e,t){var r=e;for(var i in t)t.hasOwnProperty(i)&&(r=r.replace("{"+i+"}",encodeURIComponent(t[i])));return r},n.prototype.fixIECaching=function(e){return e&&"Microsoft Internet Explorer"==navigator.appName&&(e+=(e.indexOf("?")!==-1?"&":"?")+"__ie__fix__="+(new Date).getTime()),e},n.getTimestamp=function(e){var t=new Date/1e3,r=parseInt(e,10),i=t+r;return parseInt(+i,10)},n}),define("swmRestClient",["swmRestClientConstructor","ccRestClient","ccLogger","pubsub","jquery","ccConstants","storageApi"],function(e,t,r,i,a,n,o){"use strict";var s=function(e){},c=function(e,t){try{var n=JSON.parse(e);if(n.error&&n.status)switch(n.status){case"400.12":a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"ccsync_failed"});break;default:a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"config"})}else 401===n.status?(a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"unauthorized"}),"401.99"===n["o:errorCode"]&&a.Topic(i.topicNames.SOCIAL_REFRESH_SPACES).publish({})):"403.1"!==n["o:errorCode"]&&"403.2"!==n["o:errorCode"]||o.getInstance().removeItem("social.currentSpaceId")}catch(e){r.warn("swm error occurred, response code: "+t),a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({})}},l=new e(s,c);if(window.externalServiceData){var d=window.externalServiceData.social.scheme+"://"+window.externalServiceData.social.host;"0"!=window.externalServiceData.social.port&&(d+=":"+window.externalServiceData.social.port),l.setSWMHost(d)}return l}),define("swmKoValidateRules",["knockout","jqueryui","koValidate"],function(e,t,r){"use strict";e.validation.rules.multiemail={validator:function(t,r){if(!r)return!0;var i=!0;if(!e.validation.utils.isEmptyVal(t)){var a=t.replace(/,/g,";").split(";");$(a).each(function(t){return i=e.validation.rules.email.validator($.trim(this),r)})}return i},message:"Please enter valid email addresses (separate multiple email addresses using a colon or semicolon)."},e.validation.rules.multiemailmax={validator:function(t,r){if(!r)return!1;if(!e.validation.utils.isEmptyVal(t)){var i=t.trim().replace(/,/g,";"),a=i.split(";"),n=a.length;if(";"==i.charAt(i.length-1)&&(n-=1),n>r)return!1}return!0},message:"Please limit the number of valid email addresses"},e.validation.rules.uniquespacename={validator:function(t,r){var i=e.utils.unwrapObservable(r),a=t.trim().replace(/\s+/g," ");if(Array.isArray(i))for(var n=0;n<i.length;n++){var o;if(o="string"==typeof i[n].spaceNameFull?i[n].spaceNameFull.toUpperCase():i[n].spaceNameFull().toUpperCase(),o==a.toUpperCase())return!1}return!0},message:"Name must be unique"},e.validation.rules.editSpaceNameUniqueRule={validator:function(t,r){var i=t.trim().replace(/\s+/g," "),a=r.currentSpaceId,n=e.utils.unwrapObservable(r.spaces);if(Array.isArray(n))for(var o=0;o<n.length;o++){var s;if(s="string"==typeof n[o].spaceNameFull?n[o].spaceNameFull.toUpperCase():n[o].spaceNameFull().toUpperCase(),s==i.toUpperCase()){if(n[o].spaceid==a)continue;return!1}}return!0},message:"Name must be unique"},e.validation.rules.badrequestinvalidemail={validator:function(e){return!1},message:"Please type in valid email addresses for your recipients."},e.validation.rules.badrequestspacename={validator:function(e){return!1},message:"Name must be unique"},e.validation.registerExtenders()}),define("pageLayout/space",["jquery","knockout","pubsub","notifier","ccLogger","CCi18n","swmRestClient","swmKoValidateRules"],function(e,t,r,i,a,n,o,s){"use strict";function c(e,r){if(c.singleInstance)throw new Error("Cannot instantiate more than one SpaceViewModel, use getInstance(pAdapter, pUserData, pParams)");var i=this;return i.adapter=e,i.id=t.observable(""),i.name=t.observable(""),i.ownerId=t.observable(""),i.ownerFirstName=t.observable(""),i.ownerLastName=t.observable(""),i.ownerMediaId=t.observable(""),i.ownerMediaUrl=t.observable(""),i.accessLevel=t.observable(""),i.siteName=t.observable(""),i.fbAppId=t.observable(""),i.inviteAcceptInProgress=t.observable(!1),i.members=t.observableArray([]),i.ownerFullName=t.computed(function(){return i.ownerFirstName()+" "+i.ownerLastName()},i),i.contextId=t.observable(""),i.showSpace=t.observable(!1),i.spaceProductMediaUrl=t.observable(""),i}return c.prototype.isSpaceOwner=function(e){var t=this;return t.ownerId()===e},c.prototype.isMember=function(t){var r=this,i=!1;return e.each(r.members(),function(e,r){if(r.userId==t)return i=!0,!1}),i},c.prototype.isPrivate=function(){var e=this,t=!1;return"0"===e.accessLevel()&&(t=!0),t},c.prototype.isGroup=function(){var e=this,t=!1;return"2"===e.accessLevel()&&(t=!0),t},c.prototype.isShared=function(){var e=this,t=!1;return"1"===e.accessLevel()&&(t=!0),t},c.prototype.isPrivateOrGroup=function(){var e=this,t=!1;return(e.isPrivate()||e.isGroup())&&(t=!0),t},c.prototype.updateSpace=function(e){var t=this;e.id&&t.id(e.id),e.name&&t.name(e.name),e.ownerId&&t.ownerId(e.ownerId),e.ownerFirstName&&t.ownerFirstName(e.ownerFirstName),e.ownerLastName&&t.ownerLastName(e.ownerLastName),e.ownerMediaId&&t.ownerMediaId(e.ownerMediaId),e.ownerMediaUrl&&t.ownerMediaUrl(e.ownerMediaUrl),e.accessLevel&&t.accessLevel(e.accessLevel),e.siteName&&t.siteName(e.siteName),e.fbAppId&&t.fbAppId(e.fbAppId),e.spaceProductMediaUrl&&t.spaceProductMediaUrl(e.spaceProductMediaUrl)},c.prototype.updateMembers=function(t){var i=this;i.members.removeAll(),i.members(t),e.Topic(r.topicNames.SOCIAL_SPACE_MODEL_MEMBERS_CHANGED).publish()},c.getInstance=function(e,t,r){return c.singleInstance||(c.singleInstance=new c(e,t)),c.singleInstance},c}),define("viewModels/orderDetailsViewModel",["knockout","ccConstants","CCi18n","ccRestClient","notifier","ccStoreUtils"],function(e,t,r,i,a,n){"use strict";function o(t){var i=this;i.CCi18n=r,n.fromJS(t,i,!0),i.getReturnhistoryInvoked=e.observable(!1),i.returnRequesthistoryArray=e.observableArray([])}return o.prototype.getReturnhistory=function(e,r,a){var n=this,o={};i.request(t.ENDPOINT_LIST_RETURN_REQUESTS,o,function(e){n.getReturnhistorySuccess(e,r)}.bind(n),function(e){n.getReturnhistoryFailure(e,a)}.bind(n),e,"returnRequests")},o.prototype.getReturnhistorySuccess=function(e,t){"function"==typeof t&&t(e)},o.prototype.getReturnhistoryFailure=function(e,t){"function"==typeof t&&t(e)},o.prototype.populateReturnHistory=function(e){var t=this;t.returnRequesthistoryArray(e.items);var r,i,a,n,o=t.order.items;for(i=0;i<t.returnRequesthistoryArray().length;i++)for(r=t.returnRequesthistoryArray()[i].returnItems,a=0;a<r.length;a++)for(n=0;n<o.length;n++)if(o[n].productId==r[a].productId&&o[n].catRefId==r[a].catRefId){r[a].itemInfo=o[n];break}},o}),define("pageLayout/css-loader",["module","jquery","ccConstants","ccRestClient"],function(e,t,r,i){function a(e){var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);t=(t<<5)-t+i,t&=t}return t}function n(){this.loadingOptimizedCSS=e.config().optimizingCSS}var o="/ccstoreui/v1/pages/css/",s="style",c="text/css";return n.prototype.loadCssForLayout=function(e){var n=o+e,l=t.Deferred(),d={},u={};return u[r.AUTHORIZATION_HEADER]=r.BEARER="Bearer "+i.tokenSecret,u=i.updateHeaderWithViewport(u),u=i.updateHeaderWithSelectedOrganization(u),u=i.updateHeaderWithPriceListGroupId(u),u=i.updateHeaderWithShopperContext(u),window.siteId&&(d[r.URL_SITE_PARAM]=window.siteId),this.loadingOptimizedCSS?t.ajax({url:n,data:d,headers:u}).then(function(e,t,r){if(200===r.status){var i=a(e);if(!document.getElementById(i)){var n=document.createElement(s);n.type=c,n.id=i,n.appendChild(document.createTextNode(e)),document.head.appendChild(n)}}l.resolve()}).fail(function(){l.resolve()}):l.resolve(),l},new n}),define("pageLayout/layout-container",["knockout","pageLayout/data","pageLayout/layout","pageLayout/region","pageLayout/widget","pageLayout/cart","pageLayout/order","pageLayout/layout-mapping","pageLayout/simple-cache","pageLayout/context-handler","pageLayout/view-model-builder","pageLayout/search","pageLayout/shippingmethods","pageLayout/payment-auth-response","pageLayout/user","pageLayout/product","pageLayout/space","pageViewTracker","viewModels/paymentDetails","pubsub","CCi18n","ccConstants","ccLogger","jquery","notifier","pageLayout/site","sfExceptionHandler","ccStoreServerLogger","viewportHelper","navigation","ccRestClient","ccPreviewBar","ccStoreConfiguration","viewModels/orderDetailsViewModel","pageLayout/css-loader"],function(e,t,r,i,a,n,o,s,c,l,d,u,p,h,f,m,g,v,y,b,E,I,T,P,C,S,A,_,O,R,N,D,L,w,M){"use strict";function x(t,r){var i=this;this.isPreview,this.layoutMapping=new s(this),this.masterViewModel=e.observable(),this.basePath=r,this.adapter=t,this.cache=new c,this.widgetCache=new c,this.contextHandler=new l,this.viewModelBuilder=d,this.contextDataSet=P.Deferred(),this.contextDataSetSubscriber=this.contextDataSet.promise(),this.networkErrorMessage,this.networkErrorReloadText,i.storeServerLog=_.getInstance(),this.storeConfiguration=L.getInstance(),this.currentPage=null,this.pendingWidgets=e.observableArray().extend({deferred:!0}),P.Topic(b.topicNames.PAGE_VIEW_CHANGED).subscribe(i.pageViewChanged.bind(i)),P.Topic(b.topicNames.PAGE_CONTEXT_CHANGED).subscribe(i.pageContextChanged.bind(i)),P.Topic(b.topicNames.PAGE_PARAMETERS_CHANGED).subscribe(i.pageParametersChanged.bind(i)),P.Topic(b.topicNames.PAGE_READY).subscribe(i.pageReady.bind(i)),P.Topic(b.topicNames.RECORD_PAGINATION_PAGE_CHANGE).subscribe(i.pageReady.bind(i)),P.Topic(b.topicNames.USER_NETWORK_ERROR).subscribe(i.networkError.bind(i));var a=!0;return a&&(this.exceptionHandler=new A,this.exceptionHandler.subscribe&&this.exceptionHandler.subscribe()),this}function k(t,r){if(!t||!r)return!0;if(t.stackType&&t.stackType()==I.STACK_TYPE_POPUP&&r.stackType==I.STACK_TYPE_POPUP&&t.regions().length&&t.regions()[0].widgets().length&&t.regions()[0].widgets()[0].WIDGET_ID==I.WIDGET_ID_PRODUCT_LISTING&&t.regions()[0].widgets()[0].listType()!=r.regions[0].widgets[0].listType)return!0;if(t.similarRegions&&Object.keys(t.similarRegions).length>0&&t.similarRegions.hasOwnProperty(r.id))return!1;if(r.similarRegions&&Object.keys(r.similarRegions).length>0&&r.similarRegions.hasOwnProperty(t.id))return!1;var i=e.isObservable(t.widgets)?t.widgets():t.widgets,a=i?i.length:0;if(i&&a>0){if(r.widgets&&r.widgets.length>0){if(a!==r.widgets.length)return!0;var n=e.isObservable(t.width)?t.width():t.width;if(n!==r.width)return!0;for(var o=0;o<a;o++){var s=e.isObservable(i[o].id)?i[o].id():i[o].id;if(s!==r.widgets[o].id)return!0}return!(!t.metadata()||!r.metadata||t.id()==r.id)}return!0}return r.widgets,!0}function U(e,t){for(var r=-1,i=0;i<t.length;i++)if(!k(e,t[i])){r=i;break}return r}return x.prototype.getViewModelBuilder=function(e){var t=this.viewModelBuilder[e];return null==t&&(t={scope:"page",cacheable:!1,load:!0,create:!0}),t},x.prototype.setContextData=function(e){var t,r,i=0,a=this,n=function(){for(t=["global","page"],i=0;i<t.length;i++)for(r in e[t[i]])e[t[i]].hasOwnProperty(r)&&"__ko_mapping__"!==r&&a.loadCurrentFromJSON(r,e[t[i]][r],e);a.contextDataSet.resolve(),a.contextDataSet=P.Deferred(),a.contextDataSetSubscriber=a.contextDataSet.promise()},o=e.global.locale;o&&null!==o?E.setLocaleOnce(o,n):n()},x.prototype.pageContextChanged=function(e){var t=this;t.currentPage=e;var r=e.pageId,i={};i[I.PAGE_PARAM]=e.contextId,i[I.DATA_ONLY]=!0,this.load("layout",r,i,function(r){t.setContextData(r.data),t.updatePageEventData(r.data,e),r.data&&r.data.global&&r.data.global.site&&r.data.global.site.tenantId&&v.tenantId(r.data.global.site.tenantId),P.Topic(b.topicNames.PAGE_METADATA_CHANGED).publish(r),P.Topic(b.topicNames.PAGE_READY).publish(e)},t.handleServerError)},x.prototype.updatePageEventData=function(e,t){e.page&&e.page.repositoryId&&(t.pageRepositoryId=e.page.repositoryId)},x.prototype.handleServerError=function(e){this.networkError()},x.prototype.pageParametersChanged=function(e){var t=this.getParameterData(e.parameters);P.Topic(b.topicNames.PAGE_PARAMETERS).publishWith({pageId:e.pageId,seoslug:e.seoslug,parameters:t},[{message:"success"}])},x.prototype.pageViewChanged=function(e){var t=this;t.shouldPageBeRefreshed(e.path),t.currentPage=e;var r="home/",i=null;e.pageId&&(r=e.pageId),e.contextId&&(r=e.pageId,i={},i[I.PAGE_PARAM]=e.contextId,i[I.DATA_ONLY]=!1),e.path&&(r=e.path);var a=window.siteBaseURLPath;a&&"/"!==a&&("/"===a.substr(0,1)&&(a=a.substr(1)),"/"===a.substring(a.length-1,1)&&(a=a.substr(0,a.length-1)),r.indexOf(a)!==-1&&(r=r.replace(a,""),"/"===r.substr(0,1)&&(r=r.substr(1)),""===r&&(r="home")));var n=window.location.href.split("?"),o=null,s=void 0;if(n.length>1&&(s=n[1],o=n[1].split("&")),o){null==i&&(i={});for(var c in o){var l=o[c].split("=");!e.path||"404"!==e.path||e.parameters&&""!==e.parameters?"occsite"!==l[0]&&(i[l[0]]=l[1]):"usePageId"!==l[0]&&"usePreviewData"!==l[0]&&(i[l[0]]=l[1])}}null==i&&(i={}),i.dataOnly||(i.dataOnly=!1),this.load("layout",r,i,function(r){t.isPreview=r.isPreview(),r.data.page.pageId&&(e.pageId=r.data.page.pageId),r.data.page.contextId&&(e.contextId=r.data.page.contextId);var i;t.setContextData(r.data),t.updatePageEventData(r.data,e),r.data&&r.data.global&&r.data.global.site&&r.data.global.site.tenantId&&v.tenantId(r.data.global.site.tenantId),e.parameters&&P.Topic(b.topicNames.PAGE_PARAMETERS).publishWith({pageId:e.pageId,seoslug:e.seoslug,parameters:t.getParameterData(e.parameters)},[{message:"success"}]),P.Topic(b.topicNames.PAGE_CHANGED).publish(e),P.Topic(b.topicNames.PAGE_LAYOUT_LOADED).publish(r,e);var a={pageId:e.pageId};t.storeServerLog.logInfo("getPage",t.storeServerLog.getMessage("getPage",a)),0===t.pendingWidgets().length?P.Topic(b.topicNames.PAGE_READY).publish(e):i=t.pendingWidgets.subscribe(function(t){0===t.length&&(P.Topic(b.topicNames.PAGE_READY).publish(e),i.dispose())})},t.handleServerError)},x.prototype.create=function(e,t,r,i,a,n,o){var s,c,l,d=this;if(P.isFunction(i)?(P.isFunction(a)?(o=n,n=a):o=a,a=i,i=null):P.isFunction(n)||(o=n,n=null),s=this.getViewModelBuilder(e),s&&s.create){if(s.cachable){var u=d.idAndParamsToCacheKey(t,i);d.cache.set(e,u,r)}if(c=s.create,!c)throw"Loading of resource type: "+e+" forbidden";l=c===!0?r:c(r,i,o),this.adapter.persistCreate(e,t,l,i,function(e){a&&a(e,o)},function(e){n&&n(e,o)})}},x.prototype.update=function(e,t,r,i,a,n,o){var s,c,l;if(P.isFunction(i)?(P.isFunction(a)?(o=n,n=a):o=a,a=i,i=null):P.isFunction(n)||(o=n,n=null),s=this.getViewModelBuilder(e),s&&s.update){if(c=s.update,!c)throw"Updating of resource type: "+e+" forbidden";l=c===!0?r:c(r,i,o),this.adapter.persistUpdate(e,t,l,i,function(e){a&&a(e,o)},function(e){n&&n(e,o)})}},x.prototype.remove=function(e,t,r,i,a,n){var o,s,c=this;if(P.isFunction(r)?(P.isFunction(i)?(n=a,a=i):n=i,i=r,r=null):P.isFunction(a)||(n=a,a=null),o=this.getViewModelBuilder(e),o&&o.remove){if(o.cachable){var l=c.idAndParamsToCacheKey(t,r);this.cache.set(e,l,null)}if(s=o.remove,!s)throw"Deleting of resource type: "+e+" forbidden";this.adapter.persistDelete(e,t,r,function(e){i&&i(e,n)},function(e){a&&a(e,n)})}},x.prototype.loadRequestForLayout=function(e,t,r,i,a,n,o){var s=P.Deferred(),c=this;return N.request(e,t,function(e){c.shouldPageBeRefreshed(r),s.resolve(e)},function(e){s.reject(e),e.status==I.HTTP_NOT_FOUND&&R.goTo("/404",!0,!0)},r,i,a,n,o),s},e.observableArray.fn.setAt=function(e,t){this.valueWillMutate(),this()[e]=t,this.valueHasMutated()},x.prototype.loadDataForLayout=function(e,t,r,i,a,n){var o=this,s=e,c=a.load,l=P.extend({},e);l.hasOwnProperty(I.DATA_ONLY)&&delete l[I.DATA_ONLY];var d=O.viewportDesignation();if(o.storeConfiguration.enableLayoutsRenderedForLayout===!0){var u=o.storeConfiguration.getLayoutIdsRendered();u.length>0&&(l[I.LAYOUTS_RENDERED]=u.toString())}d&&(l.ccvp=d);var p=P.extend({},e,{cacheableDataOnly:!0}),h=!0;void 0!=o.contextHandler.get(I.PRODUCT_TYPES,"page")()&&(h=!1),p.productTypesRequired=h;var f={};f[I.ENDPOINT_KEY]=I.ENDPOINT_PAGES_GET_PAGE,f[I.PAGE_KEY]=t,f[I.IDENTIFIER_KEY]="layoutOnly";var m=o.storeConfiguration.getFilterToUse(f);m&&(l[I.FILTER_KEY]=m),N.previewMode&&(l[I.DISABLE_MINIFY]=D.getInstance().isDisableMinifyJs()),f[I.IDENTIFIER_KEY]="cachableData";var g=o.storeConfiguration.getFilterToUse(f);g&&(p[I.FILTER_KEY]=g);var v={currentDataOnly:!0};f[I.IDENTIFIER_KEY]="currentData";var y=o.storeConfiguration.getFilterToUse(f);y&&(v[I.FILTER_KEY]=y),P.when(this.loadRequestForLayout(I.ENDPOINT_GET_LAYOUT,l,t),this.loadRequestForLayout(I.ENDPOINT_PAGES_GET_PAGE,p,t),this.loadRequestForLayout(I.ENDPOINT_PAGES_GET_PAGE,P.extend({},e,{currentDataOnly:!0}),t),M.loadCssForLayout(t)).done(function(e,l,d){if(r){d.data.global.user.parentOrganization&&(l.data.global.site.priceListGroup.defaultPriceListGroup=d.data.global.user.priceListGroup,l.data.global.site.priceListGroup.activePriceListGroups=[d.data.global.user.priceListGroup],l.data.global.site.currency=d.data.global.user.priceListGroup.currency);var u,p=P.extend(!0,e,l,d);if(s.pageId=t,!p.data.page||"product"!==p.data.page.pageId&&"category"!==p.data.page.pageId||0!=p.data.page.hasOwnProperty(I.PRODUCT_TYPES)||void 0==o.contextHandler.get(I.PRODUCT_TYPES,"page")()||(p.data.page[I.PRODUCT_TYPES]=o.contextHandler.get(I.PRODUCT_TYPES,"page")()),o.storeConfiguration.storeLayoutIdsRendered(e),c===!0)u=p;else{u=c(p,o,s);var h=o.masterViewModel().regions(),f=p.regions,m=0;h.length=f.length;var g=new Array(h.length);for(o.masterViewModel().regions.valueWillMutate(),m=0;m<h.length;m++){var v=k(h[m],f[m]);if(v){var y=U(h[m],f);if(y!=-1&&(g[y]=h[m]),!g[m]){var T=o.getViewModelBuilder("region"),C=T.load(f[m],o,s);h[m]=C}}else h[m].similarRegions[f[m].id]={}}for(m=0;m<g.length;m++)void 0!==g[m]&&(o.masterViewModel().regions()[m]=g[m]);o.masterViewModel().regions.valueHasMutated(),o.masterViewModel().buildRows()}if(o.masterViewModel().title(u.title()),o.masterViewModel().keywords(u.keywords()),o.masterViewModel().description(u.description()),o.masterViewModel().metaTags(u.metaTags()),o.masterViewModel().isPreview(u.isPreview()),o.masterViewModel().noindex(u.noindex()),O.layoutViewports(u.viewports?u.viewports():""),P.Topic(b.topicNames.PAGE_LAYOUT_UPDATED).publish(p,s),p.data.page.category?o.masterViewModel().pageChangeMessage(E.t("ns.common:resources.categoryPageLoadedText",{collection:p.data.page.category.displayName})):p.data.page.product?o.masterViewModel().pageChangeMessage(E.t("ns.common:resources.productPageLoadedText",{product:p.data.page.product.displayName})):"userSpacesPage"===p.data.page.repositoryId?o.masterViewModel().pageChangeMessage(E.t("ns.common:resources.wishlistPageLoadedText")):"searchResultsPage"!=p.data.page.repositoryId&&o.masterViewModel().pageChangeMessage(E.t("ns.common:resources.pageLoadedText",{page:p.data.page.repositoryId})),""===o.masterViewModel().pageChangeMessage()&&o.masterViewModel().dataForPageChangeMessage(p.data),a.cachable){var S=o.idAndParamsToCacheKey(t,s);o.cache.set(type,S,u)}r(u,n)}else 404==u.status?R.goTo("/404",!0,!0):i&&pResult&&i(pResult,n)})},x.prototype.load=function(e,t,r,i,a,n){var o,s,c,l=this;if(P.isFunction(r)?(P.isFunction(i)?(n=a,a=i):n=i,i=r,r=null):P.isFunction(a)||(n=a,a=null),o=this.getViewModelBuilder(e),o&&o.load){if(o.cachable){var d=l.idAndParamsToCacheKey(t,r);if(c=this.cache.get(e,d),c.hit===!0)return void(i&&i(c.result,n))}if(s=o.load,!s)throw"Loading of resource type: "+e+" forbidden";var u=r?r:{};"layout"==e&&u.dataOnly===!1?this.loadDataForLayout(u,t,i,a,o,n):this.adapter.loadJSON(e,t,r,function(a){var c;if(c=s===!0?a:s(a,l,r),o.cachable){var d=l.idAndParamsToCacheKey(t,r);l.cache.set(e,d,c)}i&&i(c,n)},function(e){a&&a(e,n)})}},x.prototype.loadCurrentFromJSON=function(e,t,r,i){var a,n,o;if(n=this.getViewModelBuilder(e),!n)return null;if(a=n.scope?n.scope:"page",n.load){if(n.load===!0){if(this.contextHandler.set(e,t,a),i&&n.cachable){var s=self.idAndParamsToCacheKey(i,r);this.cache.set(e,s,o)}return t}if(o=n.load(t,this,r),this.contextHandler.set(e,o,a),i&&n.cachable){var s=self.idAndParamsToCacheKey(i,r);this.cache.set(e,s,o)}return o}return null},x.prototype.instantiateWidget=function(t){var r,i=new this.WidgetViewModel(this.basePath);for(r in t)t.hasOwnProperty(r)&&(e.isObservable(t[r])&&!e.isComputed(t[r])?t[r].remove?i[r]=e.observableArray(t[r]()):i[r]=e.observable(t[r]()):e.isComputed(t[r])||(i[r]=t[r]));return this.initializeWidget(i,!0),i},x.prototype.initializeWidget=function(e,t,r){var i=this;i.contextDataSetSubscriber.done(function(){i.runWidgetInitialization(e,t,r)})},x.prototype.runWidgetInitialization=function(t,r,i){var a,n,o,s,c=this;if(c.pendingWidgets.push(t),r&&t.imports)for(n=e.utils.unwrapObservable(t.imports),s=n.length-1;s>=0;s-=1)a=n[s],o=this.getViewModelBuilder(a),o&&(o=o.scope||"page"),t[a]=this.contextHandler.get(a,o);if(e.utils.unwrapObservable(t.javascript)){var l=t.jsPath()+"/",d=t.javascript();if(t.assetMappings){var u="/js/"+t.javascript()+".js",p=t.assetMappings[u];if(p){var h=p().lastIndexOf("/");l=p().substring(0,h),d=p()}}requirejs.s.contexts._.nextTick=function(e){e()};var f=requirejs.s.contexts._.config.map?requirejs.s.contexts._.config.map:{};f[d]={};var m=P.Deferred();if(null!==t.javascriptExtension()){var g=t.assetMappings["/js/ext/"+t.javascriptExtension()],v=e.unwrap(g);v&&require([v],function(e){e&&e.onLoad&&"function"==typeof e.onLoad&&e.onLoad.call(t,t),t.__cc__extjs=e,m.resolve(e)})}for(var y in t.assetMappings)if(0===y.indexOf("/js/")&&y.indexOf(t.javascript()+".js")===-1){var E=y.indexOf(".js"),I=t.assetMappings[y](),C=y.substring(1,E);f[d][C]=I}require({baseUrl:l,map:f},[d],function(a){"function"==typeof a&&(a=a().bind(e));var n;for(n in a)a.hasOwnProperty(n)&&(e.isObservable(a[n])&&!e.isComputed(a[n])?a[n].remove?t[n]=e.observableArray(a[n]()):t[n]=e.observable(a[n]()):t[n]=a[n]);t.allPropertiesSet(t),a||T.warn("Failed to execute javascript for widget: "+t.javascript()),r&&a&&a.onLoad&&a.onLoad(t),r&&a&&a.resourcesLoaded&&(t.resources()&&a.resourcesLoaded(t),t.resources.subscribe(function(e){e&&a.resourcesLoaded(t)})),t.initialized(!0),i&&i.call(this,t),c.pendingWidgets.remove(t),
t.hasBeforeAppear()&&P.Topic(b.topicNames.PAGE_READY).subscribe(t.maybeFireBeforeAppearExtJSDeferred(m).bind(t))}),requirejs.s.contexts._.nextTick=requirejs.nextTick}else c.pendingWidgets.remove(t),t.initialized(!0)},x.prototype.idAndParamsToCacheKey=function(e,t){if(null==t)return e;var r=new Array;return r.push(e),t[I.PAGE_PARAM]&&r.push(t[I.PAGE_PARAM]),t[I.DATA_ONLY]&&r.push(t[I.DATA_ONLY]),r},x.prototype.pageReady=function(){var e=this;if(!e.isServerSideProcess()&&!e.isPreview){var t=v.createPageViewEvent(1);v.recordPageChange(t)}},x.prototype.isServerSideProcess=function(){var e=!1,t=window.location.href;return t.indexOf(I.SERVERSIDE_PROCESS_STRING)!=-1&&(e=!0),e},x.prototype.getParameterData=function(e){for(var t=e.split("&"),r={},i=0;i<t.length;i++){var a=t[i].split("=");r[a[0]]=a[1]}return r},x.prototype.networkError=function(){var e=this;e.networkErrorMessage=E.t("ns.common:resources.networkConnectivityError",{}),e.networkErrorReloadText=E.t("ns.common:resources.reloadPage",{}),P(window).scrollTop("0"),P(".modal").modal("hide"),P("#loadingModal").hide(),P("body").removeClass("modal-open"),P(".modal-backdrop").remove(),C.sendTemplateInfo(I.LAYOUT_CONTAIER_ID,e,"notificationsNetworkError")},window.onerror=function(e,t,r,i,a){P.Topic(b.topicNames.ONERROR_EXCEPTION_HANDLER).publish(e,t,r,i,a)},x.prototype.LayoutViewModel=r,x.prototype.RegionViewModel=i,x.prototype.WidgetViewModel=a,x.prototype.CartViewModel=n,x.prototype.OrderViewModel=o,x.prototype.SearchViewModel=u,x.prototype.ShippingMethodsViewModel=p,x.prototype.PaymentDetails=y,x.prototype.PaymentAuthResponseViewModel=h,x.prototype.UserViewModel=f,x.prototype.ProductViewModel=m,x.prototype.OrderDetailsViewModel=w,x.prototype.SpaceViewModel=g,x.prototype.ServerData=t,x.prototype.SiteViewModel=S,x.prototype.shouldPageBeRefreshed=function(e){N.isRefreshRequired&&"payment"!==e&&window.location.reload()},x}),define("pageLayout/scheduled-order",["ccConstants","knockout","ccDate","pageLayout/rest-adapter","pubsub","ccStoreConfiguration"],function(e,t,r,i,a,n){"use strict";function o(e,t){return e-t}function s(e){var r=t.observable(!1);return{isDirty:t.computed(function(){return!!r()||(t.toJS(e),r(!0),!1)}),reset:function(){r(!1)}}}function c(){this.id=t.observable(),this.organizationId=t.observable(),this.name=t.observable(),this.state=t.observable(),this.scheduleType=t.observable(),this.occurrenceInDay=t.observable(),this.daysOfWeek=t.observableArray(),this.daysInMonth=t.observableArray(),this.weeksInMonth=t.observableArray(),this.monthsInYear=t.observableArray(),this.startDate=t.observable(),this.endDate=t.observable(),this.nextScheduledRun=t.observable(),this.profileId=t.observable(),this.templateOrderId=t.observable(),this.templateOrder=t.observable(),this.clonedOrders=t.observableArray(),this.lastError=t.observable(),this.suspend=t.observable(!1),this.scheduleMode=t.observable(),this.executionStatusList=t.observableArray(),this._adapter=new i("/ccstore/v1/"),this._scheduleModes=d,this._scheduleModePatterns=u,this._scheduleSeeds=p,this.dirtyFlag=s(this),this.subscriptions=[],this.storeConfiguration=n.getInstance(),this.period=t.observable(),this.delay=t.observable(),this.catchUp=t.observable()}function l(e){var t=new Date(e),r=""+(t.getMonth()+1),i=""+t.getDate(),a=t.getFullYear();return r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),[a,r,i].join("-")}var d=[e.SCHEDULE_MODE_QUARTERLY,e.SCHEDULE_MODE_BI_MONTHLY,e.SCHEDULE_MODE_ONCE_MONTHLY,e.SCHEDULE_MODE_TWICE_DAILY,e.SCHEDULE_MODE_ONCE_DAILY,e.SCHEDULE_MODE_WEEKLY],u={};u[e.SCHEDULE_MODE_QUARTERLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^([0-9]|1[0-1])(,([0-9]|(1[0-1]))){3,3}$/},u[e.SCHEDULE_MODE_BI_MONTHLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^([0-9]|1[0-1])(,([0-9]|(1[0-1]))){5,5}$/},u[e.SCHEDULE_MODE_ONCE_MONTHLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_TWICE_DAILY]={occurrenceInDay:/^2$/,daysOfWeek:/^.*$/,daysInMonth:/^$/,weeksInMonth:/^1,2,3,4,5$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_ONCE_DAILY]={occurrenceInDay:/^1$/,daysOfWeek:/^1,2,3,4,5,6,7$/,daysInMonth:/^$/,weeksInMonth:/^1,2,3,4,5$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_WEEKLY]={occurrenceInDay:/^1$/,daysOfWeek:/^([1-7])(,[1-7]){0,6}$/,daysInMonth:/^$/,weeksInMonth:/^([1-5])(,[1-5]){0,4}$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/};var p={};return p[e.SCHEDULE_MODE_QUARTERLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,3,6,9]},p[e.SCHEDULE_MODE_BI_MONTHLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,2,4,6,8,10]},p[e.SCHEDULE_MODE_ONCE_MONTHLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},p[e.SCHEDULE_MODE_TWICE_DAILY]={occurrenceInDay:2,daysOfWeek:[],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},p[e.SCHEDULE_MODE_ONCE_DAILY]={occurrenceInDay:1,daysOfWeek:[1,2,3,4,5,6,7],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},p[e.SCHEDULE_MODE_WEEKLY]={occurrenceInDay:1,daysOfWeek:[1],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},p[e.SCHEDULE_MODE_CUSTOM]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[],weeksInMonth:[],monthsInYear:[]},c.prototype.subscribeForChanges=function(){this.subscriptions.push(this.scheduleMode.subscribe(this._setScheduleMode.bind(this),this))},c.prototype.dispose=function(){for(var e=this.subscriptions.length,t=0;t<e;t++)this.subscriptions[t].dispose()},c.prototype.save=function(e,t){var r=this.toJS(),i=function(t){this.fromJS(t),"function"==typeof e&&e(t)}.bind(this),a=function(e){"function"==typeof t&&t(e)}.bind(this);r.id?this._adapter.persistUpdate("scheduledOrder",r.id,r,null,i,a):this._adapter.persistCreate("scheduledOrder",null,r,null,i,a)},c.prototype.remove=function(e,t){var r=this.id(),i=function(t){"function"==typeof e&&e(t)}.bind(this),a=function(e){"function"==typeof t&&t(e)}.bind(this);this._adapter.persistRemove("scheduledOrder",r,null,i,a)},c.prototype.fromJS=function(e){e=e||{},e.schedule=e.schedule||{},this.id(e.id),this.organizationId(e.templateOrder.organizationId),this.name(e.name),this.state(e.state),this.scheduleType(e.schedule.scheduleType||"calendar"),e.schedule.scheduleType&&"calendar"==e.schedule.scheduleType?(this.occurrenceInDay(e.schedule.occurrenceInDay||1),this.daysOfWeek(e.schedule.daysOfWeek||[]),this.daysInMonth(e.schedule.daysInMonth||[]),this.weeksInMonth(e.schedule.weeksInMonth||[]),this.monthsInYear(e.schedule.monthsInYear||[])):e.schedule.scheduleType&&"periodic"==e.schedule.scheduleType&&(this.period(e.schedule.period),this.catchUp(e.schedule.catchUp)),this.startDate(e.startDate),this.endDate(e.endDate||""),this.nextScheduledRun(e.nextScheduledRun),this.profileId(e.profileId),this.templateOrderId(e.templateOrderId),this.templateOrder(e.templateOrder||{}),this.clonedOrders(e.clonedOrders||[]),this.lastError(e.lastError),this.executionStatusList(e.executionStatusList||[]),this.scheduleMode(this._getScheduleMode()),this.dirtyFlag.reset(),this.subscribeForChanges()},c.prototype.toJS=function(){var e={id:this.id(),name:this.name(),state:this.state(),scheduleType:this.scheduleType(),schedule:"periodic"==this.scheduleType()?{period:this.period(),catchUp:this.catchUp(),delay:this.delay()}:{occurrenceInDay:this.occurrenceInDay(),daysOfWeek:this.daysOfWeek(),daysInMonth:0!=this.daysInMonth().length?this.daysInMonth():void 0,weeksInMonth:this.weeksInMonth(),monthsInYear:this.monthsInYear()},startDate:l.call(this,this.startDate()),endDate:this.endDate()?l.call(this,this.endDate()):"",nextScheduledRun:this.nextScheduledRun(),profileId:this.profileId(),templateOrderId:this.templateOrderId(),clonedOrders:this.clonedOrders(),lastError:this.lastError()};return e},c.prototype._getScheduleMode=function(){var t=e.SCHEDULE_MODE_CUSTOM;for(var r in this._scheduleModes){var i=this._scheduleModes[r];if(this._testScheduleMode(i)){t=i;break}}return t},c.prototype._testScheduleMode=function(e){var t=this._scheduleModePatterns[e].occurrenceInDay.test(this.occurrenceInDay())&&this._scheduleModePatterns[e].daysOfWeek.test(this.daysOfWeek.sort(o)())&&this._scheduleModePatterns[e].daysInMonth.test(this.daysInMonth.sort(o)())&&this._scheduleModePatterns[e].weeksInMonth.test(this.weeksInMonth.sort(o)())&&this._scheduleModePatterns[e].monthsInYear.test(this.monthsInYear.sort(o)());return t},c.prototype._setScheduleMode=function(t){var r=this._scheduleSeeds[t]||this._scheduleSeeds[e.SCHEDULE_MODE_CUSTOM];if(this.occurrenceInDay(r.occurrenceInDay),this.daysOfWeek(r.daysOfWeek.slice(0)),this.daysInMonth(r.daysInMonth.slice(0)),this.weeksInMonth(r.weeksInMonth.slice(0)),t===e.SCHEDULE_MODE_BI_MONTHLY){for(var i=new Date(this.startDate()),a=[],n=0,s=i.getMonth();;){if(a[n]=s,s=(s+2)%12,s==i.getMonth())break;n++}this.monthsInYear(a.sort(o))}else this.monthsInYear(r.monthsInYear.slice(0))},c.prototype.reset=function(){var e=this;e.id(""),e.name(""),e.state(""),e.scheduleType(""),e.occurrenceInDay(""),e.daysOfWeek([]),e.daysInMonth([]),e.weeksInMonth([]),e.monthsInYear([]),e.startDate(""),e.endDate(""),e.nextScheduledRun(""),e.profileId(""),e.executionStatusList([]),e.templateOrderId(""),e.templateOrder(""),e.clonedOrders([]),e.lastError(""),e.suspend(""),e.dispose(),e.scheduleMode(""),e.dirtyFlag.reset(),e.period(""),e.delay(""),e.catchUp("")},c.prototype.load=function(t){var r=this,i={};i.orderDetails=!0;var n={};n[e.ENDPOINT_KEY]=e.ENDPOINT_GET_SCHEDULED_ORDER,n[e.IDENTIFIER_KEY]="loadOrder";var o=r.storeConfiguration.getFilterToUse(n);return o&&(i[e.FILTER_KEY]=o),r._adapter.loadJSON("scheduledOrder",t,i,function(e){r.fromJS(e);var t={message:e.errorMessages?e.errorMessages:void 0};$.Topic(a.topicNames.SCHEDULED_ORDER_LOAD_SCUCCESS).publishWith(t)},function(e){$.Topic(a.topicNames.SCHEDULED_ORDER_LOAD_ERROR).publishWith(e)}),this},c.getInstance=function(){return c.singleInstance||(c.singleInstance=new c),c.singleInstance},c}),define("viewModels/guidedNavigationViewModel",["knockout","pubsub","ccConstants","navigation","jquery","spinner","CCi18n","pageLayout/search","storageApi","pageLayout/site"],function(e,t,r,i,a,n,o,s,c,l){"use strict";function d(t,a,n,o){var s=this;s.displayWidget=e.observable(!0),s.maxDimensionCount=t,s.maxRefinementCount=a,s.dimensions=s.collapsibleList([],s.maxDimensionCount),s.allRefinementCrumbs=e.observableArray(),s.searchText=e.observable(""),s.categoryHref=e.observable(""),s.categoryName=e.observable(""),s.categoryDimensionId=e.observable(""),s.categoryRepositoryId=e.observable(""),s.priceRangeDimension=r.GUIDED_NAVIGATION_PRICERANGE,s.categoryDimension=r.GUIDED_NAVIGATION_CATEGORY,d.prototype.locale(n),d.prototype.searchResultsHash=o?o:r.SEARCH_RESULTS_HASH,s.initialize(),s.removeRefinement=function(e){if(d.prototype.createSpinner(),""===s.searchText()&&e.dimensionName===r.GUIDED_NAVIGATION_CATEGORY){for(var t=e.removeAction?e.removeAction.navigationState:void 0,a=t?t.split("&"):void 0,n=!1,o=0;o<a.length;o++)if(a[o].indexOf("N=")!==-1){var c=a[o].substring(a[o].indexOf("N=")+2),l=s.categoryDimensionId()+"+"+c;t=t.replace(c,l),n=!0}0==n?i.goTo(s.categoryHref()):i.goTo(s.searchResultsHash+t+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)}else i.goTo(s.searchResultsHash+e.removeAction.navigationState+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)},s.clearAllRefinements=function(){d.prototype.createSpinner(),s.searchText().trim()?i.goTo(s.searchResultsHash+"?"+r.SEARCH_TERM_KEY+"="+encodeURIComponent(s.searchText().trim())+"&"+r.SEARCH_DYM_SPELL_CORRECTION_KEY+"="+encodeURIComponent(r.DYM_ENABLED)+"&"+r.SEARCH_NAV_ERECS_OFFSET+"=0&"+r.SEARCH_REC_PER_PAGE_KEY+"="+r.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_SIMPLE+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY):i.goTo(s.categoryHref())},s.checkForRange=function(e){var t="dimval.match_type";return!(!e||!e.properties||"range"!==e.properties[t])},s.checkIfUnboundRange=function(e){var t="DGraph.Spec";return!(!e||!e.properties||e.properties[t].indexOf("-unbounded")==-1)},s.getLowerBound=function(e){var t="dimval.prop.lowerBound";return e&&e.properties&&e.properties[t]?e.properties[t]:null},s.getUpperBound=function(e){var t="dimval.prop.upperBound";return e&&e.properties&&e.properties[t]?this.correctUpperBound(e.properties[t]):null},s.correctUpperBound=function(e){for(var t=1,r=0;r<l.getInstance().selectedPriceListGroup().currency.fractionalDigits;r++)t*=.1;return t=t.toFixed(l.getInstance().selectedPriceListGroup().currency.fractionalDigits),e-t},s.getUpperBoundText=function(e){return e.label?e.label.substr(e.label.indexOf(" ")):null}}function u(t,r){var i=this;i.dimensionName=t.dimensionName,i.isExpanded=e.observable(!1),i.shouldDimensionExpand=e.observable(!1),i.ariaLabelText=e.observable("expandText"),i.displayName=t.displayName,"Category"===i.displayName?i.displayName=o.t("ns.common:resources.categoryText"):"Price Range"===i.displayName&&(i.displayName=o.t("ns.common:resources.priceRangeText")),i.refinements=d.prototype.refinementList(t.refinements,r,i.dimensionName,t.multiSelect),i.ancestors=t.ancestors,t.shouldMultiSelectDimensionExpand&&(i.shouldDimensionExpand(!0),i.isExpanded(!0))}var p=s.getInstance();return d.prototype.isSpinnerStarted=e.observable("false"),d.prototype.locale=e.observable(""),d.prototype.searchResultsHash="",d.prototype.refinementIndicatorOptions={parent:"#loadingModal"},d.prototype.destroySpinner=function(){a("#loadingModal").hide(),n.destroy()},d.prototype.createSpinner=function(){a("#loadingModal").removeClass("hide"),a("#loadingModal").show(),d.prototype.isSpinnerStarted("true"),(a(window)[0].innerWidth||a(window).width())<r.VIEWPORT_TABLET_LOWER_WIDTH?(d.prototype.refinementIndicatorOptions.posLeft="40%",d.prototype.refinementIndicatorOptions.posTop="80px"):(a(window)[0].innerWidth||a(window).width())<r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(d.prototype.refinementIndicatorOptions.posLeft="45%",d.prototype.refinementIndicatorOptions.posTop="100px"):(d.prototype.refinementIndicatorOptions.posLeft="50%",d.prototype.refinementIndicatorOptions.posTop="150px"),n.create(d.prototype.refinementIndicatorOptions)},d.prototype.updateWithSearchResultsData=function(i,n,o){var s=[];if(n&&n.breadcrumbs&&n.breadcrumbs.refinementCrumbs){s=n.breadcrumbs.refinementCrumbs.slice(0);for(var c=0;c<s.length;c++){if(1==s[c].multiSelect&&s[c].count>0){for(var l=!1,d=0;d<n.navigation.length;d++)if(n.navigation[d].dimensionName==s[c].dimensionName){n.navigation[d].shouldMultiSelectDimensionExpand=!0,s[c].isSelected=!0,l=!0,n.navigation[d].refinements&&n.navigation[d].refinements instanceof Array&&n.navigation[d].refinements.indexOf(s[c])<0&&n.navigation[d].refinements.push(s[c]);break}if(0==l){s[c].isSelected=!0;var p={multiSelect:!0,name:s[c].name,ancestors:[],shouldMultiSelectDimensionExpand:!0,displayName:s[c].displayName,dimensionName:s[c].dimensionName,refinements:[s[c]]};n.navigation.push(p)}}""===o.searchText()&&s[c].dimensionName==r.GUIDED_NAVIGATION_CATEGORY&&a.Topic(t.topicNames.CATEGORY_CRUMB_UPDATED).publish(o.convertLabel(s[c]))}""===o.searchText()&&s.length>0&&s[0].dimensionName===r.GUIDED_NAVIGATION_CATEGORY&&s[0].properties&&o.categoryRepositoryId()===s[0].properties["dimval.prop.category.repositoryId"]?o.allRefinementCrumbs(s.slice(1)):o.allRefinementCrumbs(s.slice(0))}if(n.searchAdjustments&&n.searchAdjustments.originalTerms&&n.searchAdjustments.originalTerms.length>0&&o.searchText(n.searchAdjustments.originalSearchTerms[0]),i.message!==r.SEARCH_MESSAGE_FAIL&&(n.navigation&&n.navigation.length>0||s.length>0)){o.dimensions(e.utils.arrayMap(n.navigation,function(e){return new u(e,o.maxRefinementCount)}),o.maxDimensionCount),o.dimensions.showAll(!1),o.displayWidget(!0)}else o.displayWidget(!1)},d.prototype.initialize=function(){var e=this;a.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).subscribe(function(t){var r=this;d.prototype.updateWithSearchResultsData(t,r,e),d.prototype.checkSpinner()}),a.Topic(t.topicNames.SEARCH_RESULTS_FOR_CATEGORY_UPDATED).subscribe(function(t){var r=this;d.prototype.updateWithSearchResultsData(t,r,e),d.prototype.checkSpinner()}),a.Topic(t.topicNames.CATEGORY_UPDATED).subscribe(function(t){e.categoryHref(t.categoryRoute),e.categoryName(t.categoryName),e.categoryDimensionId(t.dimensionId),e.categoryRepositoryId(t.repositoryId),e.searchText("")}),a.Topic(t.topicNames.OVERLAYED_GUIDEDNAVIGATION_CLEAR).subscribe(function(){d.prototype.resetViewModel(e)}),e.searchText()||e.categoryName()||e.loadCategoryFromLocalData()},d.prototype.loadCategoryFromLocalData=function(){var e=this,t=null;t=c.getInstance().getItem("category"),t&&"string"==typeof t&&(t=JSON.parse(t)),null!=t&&(e.categoryHref(t.categoryRoute),e.categoryName(t.categoryName),e.categoryRepositoryId(t.repositoryId),e.categoryDimensionId(t.dimensionId))},d.prototype.convertLabel=function(e){var t=e.label,r="dimval.prop.displayName_"+d.prototype.locale();return e&&e.properties&&e.properties[r]&&(t=e.properties[r]),t},d.prototype.checkSpinner=function(){d.prototype.isSpinnerStarted()&&d.prototype.destroySpinner(),d.prototype.isSpinnerStarted("false")},d.prototype.resetViewModel=function(e){e.displayWidget(!1),e.dimensions.removeAll(),e.allRefinementCrumbs.removeAll()},d.prototype.refinementList=function(t,r,i,n){var s=this;a.each(t,function(t,r){r.label=s.convertLabel(r),r.refinementValue=o.t("ns.common:resources.refinementValueText",{dataLabel:r.label,dataCount:r.count}),1==this.multiSelect?(r.checkedValue=e.observable(!1),this.isSelected&&1==this.isSelected&&r.checkedValue(!0),r.checkedValue.subscribe(function(e){e||(this.navigationState=this.removeAction.navigationState),d.prototype.createSpinnerAndHandleRedirect(this.navigationState)},r)):r.clickRefinement=function(){d.prototype.createSpinnerAndHandleRedirect(this.navigationState)}});var c=s.collapsibleList(t,r);return c},d.prototype.createSpinnerAndHandleRedirect=function(e){var t=this;d.prototype.createSpinner(),i.goTo(t.searchResultsHash+p.getFilteredNavState(e)+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)},d.prototype.collapsibleList=function(t,r){var i=e.observableArray(t);return i.limit=e.observable(r),i.showAll=e.observable(!1),i.toggleShowAll=function(){i.showAll(!i.showAll())},i.display=e.computed(function(){return i.showAll()?i():i().slice(0,i.limit())},i),i},d}),define("ccPaginated",["knockout","pubsub","navigation","crossroads","ccConstants","ccNavState"],function(e,t,r,i,a,n){"use strict";function o(){var t=this;t.active=!1,t.pageNumber=1,t.pageId=e.observable(""),t.contextId=e.observable(""),t.paginationOnly=e.observable(!1),t.seoslug=e.observable(""),t.previousHash=e.observable(""),t.currentHash=e.observable(""),t.isMobileView=e.observable(!1),t.paginationType=e.observable(0),t.targetPage=1,t.clearOnLoad=!1,t.itemsPerPage=40,t.blockSize=40,t.pageBatchSize=1,t.data=e.observableArray().extend({deferred:!0}),t.pageWindowSize=5,t.startIndex=0,t.lastIndex=t.pageWindowSize-1,t.pageIndex=0,t.middlePageOffset=0,t.focusPage=!1,t.pages=e.computed(t.pagesFunction,t),t.scrollToTop=!0,t.currentPage(1),t.firstPageIndex(1),t.totalNumber(0),t.sortDirectiveProp("displayName"),t.sortDirectiveOrder("asc"),t.totalNumberOfPages(0),t.clickedPage(-1),t.useGenericSort=!1,t.sortOptions=e.observableArray([]),t.selectedResultsPerPageOption=e.observable(),t.resultsPerPageOptions=e.observableArray([])}return o.prototype.currentPage=e.observable(0),o.prototype.totalNumber=e.observable(0),o.prototype.firstPageIndex=e.observable(1),o.prototype.data=e.observableArray([]).extend({deferred:!0}),o.prototype.sortDirectiveProp=e.observable("displayName"),o.prototype.sortDirectiveOrder=e.observable("asc"),o.prototype.totalNumberOfPages=e.observable(0),o.prototype.pageStartIndex=e.observable(),o.prototype.pageEndIndex=e.observable(),o.prototype.clickedPage=e.observable(-1),o.prototype.updatePagination=function(e){var t="";if(a.ALLOW_HASHBANG&&(t+=a.URL_HASH_SIGN+a.URL_PREPEND_HASH),1==this.paginationType())return t=n.route()+"/"+e,r.getPathWithLocale(t);if(2==this.paginationType()){var o=i.addRoute("/searchresults?{parameters}"),s="",c=!1;for(var l in this.parameters)this.parameters.hasOwnProperty(l)&&("page"==l&&(this.parameters[l]=e,c=!0),s+=l+"="+this.parameters[l]+"&");return s=s.substring(0,s.length-1),c||(s+="&page="+e),t+=o.interpolate({parameters:s}),r.getPathWithLocale(t)}if(3==this.paginationType()){t=a.AGENT_BASE_CONTEXT+"/"+a.URL_HASH_SIGN+a.URL_PREPEND_HASH;var o=i.addRoute("/{pageId}/{contextId}?{parameters}"),s="",c=!1;for(var l in this.parameters)this.parameters.hasOwnProperty(l)&&("page"==l&&(this.parameters[l]=e,c=!0),s+=l+"="+this.parameters[l]+"&");return s=s.substring(0,s.length-1),c||(s&&(s+="&"),s+="page="+e),t+=o.interpolate({pageId:this.pageId(),contextId:this.contextId(),parameters:s}),r.getPathWithLocale(t)}return""},o.prototype.load=function(e){e?(this.clearData(),this.clearOnLoad=!0):(this.clearData(),this.pageNumber&&(this.totalNumberOfPages(this.pageNumber),this.firstPageIndex(null),this.currentPage(this.pageNumber),this.firstPageIndex(1))),this.getPage(this.pageNumber||this.currentPage()||1)},o.prototype.cleanPage=function(){if(1==this.paginationType())o=n.route(),r.goTo(o);else if(2==this.paginationType()){var e=i.addRoute("/searchresults?{parameters}"),t="";for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&("page"==a||(t+=a+"="+this.parameters[a]+"&"));t=t.substring(0,t.length-1),o=e.interpolate({parameters:t}),r.goTo(o)}else if(3==this.paginationType()){var e=i.addRoute("/{pageId}/{contextId}?{parameters}"),t="";for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&("page"==a||(t+=a+"="+this.parameters[a]+"&"));t=t.substring(0,t.length-1);var o=e.interpolate({pageId:this.pageId(),contextId:this.contextId(),parameters:t});r.goTo(o)}},o.prototype.firstPage=function(){return this.updatePagination(this.firstPageIndex())},o.prototype.goToFirstPageControls=function(){return this.initializeIndex(),!0},o.prototype.previousPage=function(){return this.currentPage()>this.startIndex+1?this.updatePagination(this.currentPage()-1):this.updatePagination(this.currentPage())},o.prototype.goToPage=function(e){return this.updatePagination(e.pageNumber)},o.prototype.nextPage=function(){return this.currentPage()<this.totalNumberOfPages()?this.updatePagination(this.currentPage()+1):this.updatePagination(this.currentPage())},o.prototype.lastPage=function(){return this.updatePagination(this.totalNumberOfPages())},o.prototype.incrementPage=function(){this.currentPage()<this.totalNumberOfPages()&&this.getPage(this.currentPage()+1)},o.prototype.getPage=function(e){if(this.totalNumberOfPages()>1&&this.adjustPageIndex(e),this.adjustStartAndEndPageIndex(e),e!==this.currentPage()&&e!==this.targetPage&&this.isMobileView()&&$.Topic(t.topicNames.RECORD_PAGINATION_PAGE_CHANGE).publish(),e===this.targetPage&&null!==this.targetPage&&void 0!==this.targetPage||(this.targetPage=e),this.clearOnLoad)return this.fetchBlock(this.pageStartIndex()),this.clickedPage(e),void this.currentPage(e);for(var r=this.pageStartIndex();r<this.pageEndIndex();r+=1)if("undefined"==typeof this.data()[r])return e!==this.currentPage()&&(this.targetPage=e),void this.fetchBlock(this.pageStartIndex());this.currentPage(e)},o.prototype.pagesFunction=function(){var e,t,r,i,a,n,o,s,c,l=1;for(this.clearOnLoad&&this.adjustStartAndEndPageIndex(this.pageNumber),this.totalNumber()?(t=(this.totalNumber()-this.totalNumber()%this.itemsPerPage)/this.itemsPerPage,r=this.totalNumber()%this.itemsPerPage>0?1:0,e=t+r):e=0,this.prevTotalNumberOfPages=this.totalNumberOfPages(),this.totalNumberOfPages(e),this.adjustPageIndex(this.pageNumber),i=[],s=this.startIndex;s<=this.lastIndex&&s<this.totalNumberOfPages();s+=1)a=s+1,n=a===this.currentPage(),o=!!this.focusPage&&n,c=Math.abs(a-s-l),l+=1,i[c]={pageNumber:a,selected:n,focused:o};return!this.focusPage&&i.length>0&&(this.focusPage=!0),i},o.prototype.adjustPageIndex=function(e){var t=Math.floor(this.pageWindowSize/2);if(e>=this.totalNumberOfPages())e>this.totalNumberOfPages()&&(e=this.totalNumberOfPages()),e==this.totalNumberOfPages()&&(this.lastIndex=this.totalNumberOfPages()-1,this.lastIndex<this.pageWindowSize-1?this.startIndex=0:this.startIndex=this.lastIndex-(this.pageWindowSize-1));else if(e<=t)this.startIndex=0,this.totalNumberOfPages()<=this.pageWindowSize?this.lastIndex=this.totalNumberOfPages()-1:this.lastIndex=this.pageWindowSize-1;else{var r=this.totalNumberOfPages()-e;r>=t?(this.startIndex=e-1-t,this.lastIndex=e-1+t):(this.startIndex=e-1-t-r,this.lastIndex=e-1+t-r),this.startIndex<0&&(this.startIndex=0)}},o.prototype.sort=function(e){var t,r,i;this.sortDirectiveOrder(),e.order();if(!e.notReversible||this.sortDirectiveOrder()!=e.order()){for(e.maintainSortOrder&&e.maintainSortOrder===!0?r=e.order():e.id&&(r="none"===e.order()||"desc"===e.order()?"asc":"desc"),this.sortDirectiveOrder(r),t=0;t<this.sortOptions().length;t+=1)this.sortOptions()[t]===e?this.sortOptions()[t].order(r):this.sortOptions()[t].maintainSortOrder||this.sortOptions()[t].order("none");if(this.sortDirectiveProp(e.id),2==this.paginationType()||3==this.paginationType()){if(this.useGenericSort)var n=e.id+("desc"===r?"|1":"|0");else{var n="product.relevance";"listPrice"===e.id&&(n="sku.activePrice",n+="desc"===r?"|1":"|0")}this.parameters[a.SEARCH_SORT_ORDER]=encodeURIComponent(n)}if(this.data().length<this.totalNumber()||e.serverOnly)return this.clearOnLoad=!0,this.cleanPage(),this.initializeIndex(),this.targetPage=1,void(this.listType&&this.listType===a.LIST_VIEW_SEARCH||this.fetchBlock(0));if($.each(this.data(),function(e,t){if(!t)return i=!0,!1}),i)return this.clearOnLoad=!0,this.targetPage=1,void this.fetchBlock(0);this.data.sort(this.sortFunction.bind(this)),this.getPage(1)}},o.prototype.sortFunction=function(e,t){var r,i,a,n,o;for(o="desc"===this.sortDirectiveOrder()?-1:1,r=this.sortDirectiveProp()&&this.sortDirectiveProp().split("."),a=e,n=t,i=0;i<r.length;i+=1)$.isArray(a)&&(a=a[0]),$.isArray(a)&&(a=a[0]),a=a&&a[r[i]],$.isArray(n)&&(n=n[0]),n=n&&n[r[i]],$.isArray(n)&&(n=n[0]);return(a===n||"string"==typeof a&&a.toLowerCase()===n.toLowerCase())&&(e.displayName&&t.displayName?(a=e.displayName&&e.displayName.toString().toLowerCase(),n=t.displayName&&t.displayName.toString().toLowerCase()):e.dateTime&&t.dateTime&&(a=e.dateTime&&e.dateTime.toLowerCase(),n=t.dateTime&&t.dateTime.toLowerCase(),o=1)),a===n?0:isFinite(a)&&isFinite(n)?(parseFloat(a)-parseFloat(n))*o:a.toString().toLowerCase()>n.toString().toLowerCase()?o:-1*o},o.prototype.adjustStartAndEndPageIndex=function(e){this.pageEndIndex(e*this.itemsPerPage),this.totalNumber()&&this.pageEndIndex()>this.totalNumber()&&this.pageEndIndex(this.totalNumber()),this.pageStartIndex((e-1)*this.itemsPerPage)},o.prototype.initializeIndex=function(){this.startIndex=0,this.lastIndex=this.pageWindowSize-1,this.clickedPage(1)},o.prototype.clearData=function(){this.data([]),this.prevTotalNumber=this.totalNumber(),this.totalNumber(null)},o.prototype.addData=function(e,t,r){var i,a,n;if(this.pageStartIndex()>0&&(t<0||t===r)?(t=this.prevTotalNumber-this.blockSize>=0?this.prevTotalNumber-this.blockSize:0,this.removeLastPage()):t=t<0?0:t,this.totalNumber(t),a=r+this.blockSize*this.pageBatchSize,a>t&&(a=t),this.clearOnLoad?(i=[],this.initializeIndex()):i=this.data(),e)for(n=0;n<e.length;n+=1)i[n+r]=e[n];this.clearOnLoad?(this.data(i),this.clearOnLoad=!1):this.data.valueHasMutated(),this.currentPage()===this.targetPage&&this.currentPage.notifySubscribers(),this.targetPage?(1==this.targetPage&&this.initializeIndex(),this.adjustStartAndEndPageIndex(this.targetPage),this.scrollToTop===!0&&$(window).scrollTop(0),this.firstPageIndex(null),this.currentPage(this.targetPage),this.firstPageIndex(1),this.scrollToTop===!0&&$(window).scrollTop(0),this.targetPage=null):a<this.pageEndIndex()&&this.pageEndIndex(a)},o.prototype.fetchBlock=function(e){throw"Function Not Implemented!"},o.prototype.removeLastPage=function(){this.clearOnLoad=!1,this.startIndex=this.startIndex-1>=0?this.startIndex-1:this.startIndex,this.getPage(this.currentPage()-1)},o.prototype.sortReset=function(){this.sortDirectiveProp("displayName"),this.sortDirectiveOrder("asc"),$.each(this.sortOptions(),function(e,t){"displayName"===t.id?t.order("asc"):t.order("none")})},o}),define("viewModels/productListingViewModel",["knockout","ccPaginated","pubsub","ccRestClient","ccConstants","CCi18n","spinner","ccNumber","pageLayout/product","storageApi","pageLayout/site","navigation","ccStoreConfiguration"],function(e,t,r,i,a,n,o,s,c,l,d,u,p){"use strict";function h(i){var n=this;t.call(this),n.widget=i,n.productGridRefreshOrAppend=!0,n.catalog=e.observable(),n.display=e.observable(!0),n.showInactiveProducts=null,n.showInactiveSkus=null,n.scrolledViewModels=[],n.isLoadOnScroll=e.observable(!1),n.productGridExtension=!1,n.isCacheEnabled=!1,n.cachedViewModels=[],n.viewModelCacheLimit=3,n.refreshValues=!1,n.defaultBlockSize=60,n.selectedSort=e.observable(),n.categoryOrSearchChanged=!1,n.changedViaDropDown=!1,n.pageNumberOffSetIndexMapForCategories=[],this.skipOffSetMapUpdateOnRefresh=!1,this.skipOffSetMapUpdateOnBrowserBack=!1,this.previousGetProductsBlockSize=0,this.handleResultsPerPage=function(e,t){setTimeout(this.doChangeResultsPerPage.bind(this,e,t),200)},this.doChangeResultsPerPage=function(e,t){var r=a.DEFAULT_ITEMS_PER_PAGE,i=this.defaultBlockSize,n=!1;e&&(this.prevTotalNumber=this.totalNumber&&null!==this.totalNumber()?this.totalNumber():this.prevTotalNumber,e.id==a.RESULTS_PER_PAGE_ALL?(r=this.prevTotalNumber,this.blockSize<r&&(i=r)):(r=e.value,this.widget&&this.widget.blockSize&&!isNaN(this.widget.blockSize())&&(i=parseInt(this.widget.blockSize()))),this.blockSize=i),this.itemsPerPage=r,this.widget&&(this.changedViaDropDown=!0,this.widget.listType()===a.LIST_VIEW_PRODUCTS?(this.cleanPage(),this.pageNumber=1,this.currentPage(null),this.getPage(1)):this.widget.listType()===a.LIST_VIEW_SEARCH&&(1==this.currentPage()&&(n=!0),this.pageNumber=1,this.currentPage(null),n?this.getPage(1):u.goTo(this.firstPage(),!1,!0)),this.changedViaDropDown=!1)},($(window)[0].innerWidth||$(window).width())<=a.VIEWPORT_TABLET_UPPER_WIDTH&&n.isLoadOnScroll(!0);n.spanClass=e.computed(function(){var e="",t=0,r=0,i=0,a=0;return this.itemsPerRowInPhoneView&&(t=12/this.itemsPerRowInPhoneView),this.itemsPerRowInTabletView&&(r=12/this.itemsPerRowInTabletView()),this.itemsPerRowInDesktopView&&(i=12/this.itemsPerRowInDesktopView()),this.itemsPerRowInLargeDesktopView&&(a=12/this.itemsPerRowInLargeDesktopView()),t>0&&(e+="col-xs-"+t),r>0&&r!=t&&(e+=" col-sm-"+r),i>0&&i!=r&&(e+=" col-md-"+i),a>0&&a!=i&&(e+=" col-lg-"+a),e},n).extend({deferred:!0}),n.type="ProductListingViewModel",this.productLoadingOptions={},this.productLoadingOptions.parent="#cc-product-spinner",this.productLoadingOptions.selector="#cc-product-spinner-area",this.removeSpinner=function(){setTimeout(function(){$("#cc-product-spinner-area").find(".cc-spinner").remove()},500)},this.handleSorting=function(e,t){setTimeout(this.doSort.bind(this,e,t),200)},this.doSort=function(e,t){if(this.isCacheEnabled){var r=this.findCachedResultIndex(1);if(void 0!=r)return this.sortDirectiveOrder(e.order()),this.sortDirectiveProp(e.id),1===this.currentPage()&&this.currentPage.notifySubscribers(),this.targetPage=1,void this.currentPage(1)}this.sort(e),t&&t(arguments[3])},this.itemsPerPage=a.DEFAULT_ITEMS_PER_PAGE,this.blockSize=this.defaultBlockSize,this.pageProductsTemp=[],this.widget&&this.widget.productsPerPage&&!isNaN(this.widget.productsPerPage())&&(this.itemsPerPage=parseInt(this.widget.productsPerPage())),this.widget&&this.widget.blockSize&&!isNaN(this.widget.blockSize())&&(this.blockSize=parseInt(this.widget.blockSize())),
this.blockSize<=this.itemsPerPage&&(this.blockSize=this.itemsPerPage+1),this.recordsPerPage=e.observable(a.DEFAULT_ITEMS_PER_PAGE),this.lruSize=100,this.numberOfElementsToDelete=20,this.currentProductsComputed=e.observableArray([]),this.currentProducts=e.computed(function(){if(this.widget&&"product"===this.widget.listType()){var t=[];this.productGridRefreshOrAppend=!0;var r,i;r=(this.currentPage()-1)*this.itemsPerPage,i=r+this.itemsPerPage;var o=this.isLoadOnScroll.peek();if(!this.isCacheEnabled){var s=this.data.peek();t=s.slice(r,i)}var d,u,p,h,f,m,g,v=[],y=t.length,b=[];if(this.isCacheEnabled){var E=!0,I=this.findCachedResultIndex();if(void 0!=I){i>this.cachedViewModels[I].totalResults&&(i=this.cachedViewModels[I].totalResults);for(var T=r;T<i;T++)if(void 0==this.cachedViewModels[I].viewModels[T]){E=!1;break}if(E)return this.cachedViewModels[I].visitCount++,v=this.cachedViewModels[I].viewModels.slice(r,i),this.currentProductsComputed(v),o?this.cachedViewModels[I].viewModels:v;t=this.cachedViewModels[I].products.slice(r,i),y=t.length}}for(var P=0;P<y;P++)if(t[P]){if(p=new c(t[P].product),d=this.listingImageSize(),u=p.primarySmallImageURL().match(/.+?(?=&height=)/),u=null==u?p.primarySmallImageURL():u[0],p.listingImageURL=e.observable(u+"&height="+d+"&width="+d),(this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){if(0==P&&this.category()&&!this.skipOffSetMapUpdateOnRefresh&&!this.skipOffSetMapUpdateOnBrowserBack){var f=l.getInstance().getItem(a.LISTING_OFFSET_MAP_KEY);if(f&&"string"==typeof f&&(f=JSON.parse(f)),f){if(m=Object.keys(f),g=m.length,g&&g>this.lruSize){b=m.sort(function(e,t){return f[e].timestamp-f[t].timestamp});for(var C=0;C<this.numberOfElementsToDelete;C++)delete f[b[C]]}}else f={};var S=this.getIndexForOffSetMap();null!=S&&(this.data()[this.getIndexForOffSetMap()].offsetMap.timestamp=Date.now(),f[this.category().route+"/"+this.pageNumber]=this.data()[this.getIndexForOffSetMap()].offsetMap,l.getInstance().setItem(a.LISTING_OFFSET_MAP_KEY,JSON.stringify(f)))}h=n.widget.productListingTypes[p.type()],p.listingSku=t[P].listingSku,h&&(!h.variantBasedDisplay&&t[P].product.defaultProductListingSku&&t[P].product.defaultProductListingSku.images&&t[P].product.defaultProductListingSku.images.length>0&&(p.listingSku=t[P].product.defaultProductListingSku),p.listingSku&&(p.listingSku.route=t[P].product.route+"?variantName="+h.id+"&variantValue="+p.listingSku[h.id]))}v.push(p),this.pageProductsTemp.push(p),(this.pageProductsTemp.length>0&&this.pageProductsTemp.length%this.itemsPerRow()===0||o&&this.totalNumber.peek()===this.pageProductsTemp.length+this.scrolledViewModels.length||!o&&P+1===y)&&(this.scrolledViewModels.push.apply(this.scrolledViewModels,this.pageProductsTemp),this.productGridExtension||this.viewportMode()!=a.TABLET_VIEW&&this.viewportMode()!=a.PHONE_VIEW?this.currentProductsComputed(this.pageProductsTemp.splice(0)):this.currentProductsComputed(this.scrolledViewModels),this.pageProductsTemp=[],this.productGridRefreshOrAppend=!1)}var A=this.category();if(A&&void 0!=I&&this.isCacheEnabled)for(var T=0;T<v.length;T++)this.cachedViewModels[I].viewModels[T+r]=v[T];return o?this.scrolledViewModels:v}},this).extend({deferred:!0}),this.checkResponsiveFeatures=function(e){e>a.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?n.viewportMode()!=a.LARGE_DESKTOP_VIEW&&(n.viewportMode(a.LARGE_DESKTOP_VIEW),n.handleViewportChange(a.LARGE_DESKTOP_VIEW)):e>a.VIEWPORT_TABLET_UPPER_WIDTH&&e<=a.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?n.viewportMode()!=a.DESKTOP_VIEW&&(n.viewportMode(a.DESKTOP_VIEW),n.handleViewportChange(a.DESKTOP_VIEW)):e>=a.VIEWPORT_TABLET_LOWER_WIDTH&&e<=a.VIEWPORT_TABLET_UPPER_WIDTH?n.viewportMode()!=a.TABLET_VIEW&&(n.viewportMode(a.TABLET_VIEW),n.handleViewportChange(a.TABLET_VIEW)):n.viewportMode()!=a.PHONE_VIEW&&(n.viewportMode(a.PHONE_VIEW),n.handleViewportChange(a.PHONE_VIEW))},this.getIndexForOffSetMap=function(){if(this.itemsPerPage!==parseInt(this.widget.productsPerPage()))return null;for(var e=null,t=0;t<this.pageNumberOffSetIndexMapForCategories.length;t++)if(this.pageNumberOffSetIndexMapForCategories[t].categoryId===this.category().id){e=this.pageNumberOffSetIndexMapForCategories[t].pageNumberOffSetIndexMap;break}if(!e)return null;if(this.totalExpandedResults===this.data().length&&e.length>0||1==e.length)return e[e.length-1].offSetIndex;for(var r=0;r<e.length;r++){var i=null;if(r>0&&(i=e[r-1].offSetIndex),this.pageNumber===e[r].pageNumber)return e[r].offSetIndex;if(this.pageNumber<e[r].pageNumber&&i&&e[r-1].pageNumber>=this.pageNumber)return i}return null},this.handleResponsiveViewports=function(){n.viewportMode()==a.TABLET_VIEW&&(n.itemsPerRow(n.itemsPerRowInTabletView()),n.isMobileView(!0),n.isLoadOnScroll(!0)),n.viewportMode()==a.PHONE_VIEW&&(n.itemsPerRow(n.itemsPerRowInPhoneView),n.isMobileView(!0),n.isLoadOnScroll(!0)),n.refreshValues=!0,n.scrolledViewModels=[],n.isLoadOnScroll()?(n.productGridExtension&&(1===n.currentPage()?n.currentPage.notifySubscribers():n.currentPage(1)),n.scrollToTop=!1):n.scrollToTop=!0},this.handleViewportChange=function(e){n.itemsPerRow();e!=n._internalViewportMode()&&(e&&n._internalViewportMode(e),n.viewportMode()==a.DESKTOP_VIEW?(n.itemsPerRow(n.itemsPerRowInDesktopView()),n.clearOnLoad=!0,n.targetPage=1,n.fetchBlock(0),n.isMobileView(!1),n.isLoadOnScroll(!1)):n.viewportMode()==a.LARGE_DESKTOP_VIEW&&(n.itemsPerRow(n.itemsPerRowInLargeDesktopView()),n.clearOnLoad=!0,n.targetPage=1,n.fetchBlock(0),n.isMobileView(!1),n.isLoadOnScroll(!1)),n.handleResponsiveViewports())},this.pageNumberDeferred=$.Deferred(),this.handleLinks=function(e,t){var i,a,n=e.totalNumberOfPages(),o=parseInt(t.page)||(t.paginationOnly?1:e.pageNumber);1==n||1==o?(a=null,i=""):(a="/"+(o-1),i="/"+o),$.Topic(r.topicNames.PAGE_PAGINATION_CALCULATED).publish({currPageNo:i,prevPageNo:a,nextPageNo:1==n||o==n?null:"/"+(o+1)})},this.handlePaginationChange=function(e){this.pageNumberDeferred.resolve(this,e),e.paginationOnly&&this.handleLinks(this,e)},$.Topic(r.topicNames.PAGE_PAGINATION_CHANGE).subscribe(this.handlePaginationChange.bind(this)),this.checkResponsiveFeatures($(window)[0].innerWidth||$(window).width()),this.handleResponsiveViewports(),this._internalViewportMode(this.viewportMode()),this.resultsText=e.computed(this.getResultsText,this),this.storeConfiguration=p.getInstance()}var f=function(){};return f.prototype=t.prototype,h.prototype=new f,h.prototype.constructor=h,h.prototype.category=e.observable(),h.prototype.resultsText=e.observable(),h.prototype.titleText=e.observable(),h.prototype.itemsPerRow=e.observable(4),h.prototype.itemsPerRowInTabletView=e.observable(4),h.prototype.itemsPerRowInPhoneView=2,h.prototype.itemsPerRowInDesktopView=e.observable(4),h.prototype.itemsPerRowInLargeDesktopView=e.observable(4),h.prototype._internalViewportMode=e.observable(4),h.prototype.viewportMode=e.observable(4),h.prototype.spanClass=e.observable(),h.prototype.listingImageSize=e.observable(300),h.prototype.resetSortOptions=function(){var e=this.sortOptions()[0];this.selectedSort(e),this.sortDirectiveProp(e.id),this.sortDirectiveOrder(e.order("none"))},h.prototype.clearData=function(){this.data([]),this.prevTotalNumber=this.totalNumber(),this.totalNumber(null),this.actualOffset=0,this.expandedOffset=0,this.scrolledViewModels=[]},h.prototype.getPage=function(e){if(this.totalNumberOfPages()>1&&this.adjustPageIndex(e),this.adjustStartAndEndPageIndex(e),e!==this.currentPage()&&e!==this.targetPage&&this.isMobileView()&&$.Topic(r.topicNames.RECORD_PAGINATION_PAGE_CHANGE).publish(),e===this.targetPage&&null!==this.targetPage&&void 0!==this.targetPage||(this.targetPage=e),this.isCacheEnabled){var t=!1,i=this.findCachedResultIndex(e);if(void 0==i)t=!0;else{var a=this.pageEndIndex();a>this.cachedViewModels[i].totalResults&&(a=this.cachedViewModels[i].totalResults);for(var n=this.pageStartIndex();n<a;n+=1)if("undefined"==typeof this.cachedViewModels[i].products[n]){t=!0;break}}if(t)return e!==this.currentPage()&&(this.targetPage=e),void this.fetchBlock(this.pageStartIndex());this.currentPage()===e&&this.currentPage.notifySubscribers(),this.totalNumber(this.cachedViewModels[i].totalResults),$.when(this.pageNumberDeferred).done(this.handleLinks),this.titleText(this.getTitleText())}else{if(this.clearOnLoad)return this.fetchBlock(this.pageStartIndex()),this.clickedPage(e),void this.currentPage(e);for(var n=this.pageStartIndex();n<this.pageEndIndex();n+=1)if("undefined"==typeof this.data()[n])return e!==this.currentPage()&&(this.targetPage=e),void this.fetchBlock(this.pageStartIndex())}this.currentPage(e)},h.prototype.findCachedResultIndex=function(){for(var e,t=this.category.peek(),r=this.selectedSort.peek(),i=0;i<this.cachedViewModels.length;i++)if(this.cachedViewModels[i]&&this.cachedViewModels[i].categoryId==t.repositoryId&&this.cachedViewModels[i].sortKey==r.id&&this.cachedViewModels[i].sortOrder==r.order()){e=i;break}return e},h.prototype.fetchBlock=function(e){var t,r;if(this.clearOnLoad&&(this.titleText(""),this.clearData()),r={},r[a.TOTAL_RESULTS]=!0,r[a.TOTAL_EXPANDED_RESULTS]=!0,this.catalog&&(r[a.CATALOG]=this.catalog()),this.widget.user&&this.widget.user().catalogId&&(r[a.CATALOG]=this.widget.user().catalogId()),r[a.LIMIT]=this.blockSize,(this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){if(0==e)this.actualOffset=0,this.expandedOffset=0,r[a.OFFSET]=this.actualOffset;else{for(var n=1;n<=this.blockSize;n++)if(this.data()[e+this.itemsPerPage-n]){this.skipOffSetMapUpdateOnRefresh?this.actualOffset=this.data()[e+this.itemsPerPage-n].offsetMap.actualOffset+this.previousGetProductsBlockSize:this.actualOffset=this.data()[e+this.itemsPerPage-n].offsetMap.actualOffset+this.blockSize,this.expandedOffset=e+this.itemsPerPage+1-n,r[a.OFFSET]=this.actualOffset;break}if(void 0==r[a.OFFSET])for(var n=1;n<=this.blockSize;n++)if(this.data()[e+n]){this.actualOffset=this.data()[e+n].offsetMap.actualOffset-this.blockSize<0?0:this.data()[e+n].offsetMap.actualOffset-this.blockSize,this.expandedOffset=-1*(e+n-1),r[a.OFFSET]=this.actualOffset;break}}if(void 0==r[a.OFFSET]){var s,c;if(this.itemsPerPage===parseInt(this.widget.productsPerPage())&&(c=l.getInstance().getItem(a.LISTING_OFFSET_MAP_KEY),c&&"string"==typeof c&&(c=JSON.parse(c))),c&&(s=c[this.category().route+"/"+this.pageNumber]),s&&void 0!==s){var u=0;if(0!=s.actualOffset&&(u=this.itemsPerPage>this.blockSize?this.itemsPerPage%this.blockSize:this.blockSize%this.itemsPerPage),0===u)this.actualOffset=s.actualOffset,this.expandedOffset=s.expandedOffset,r[a.OFFSET]=this.actualOffset;else{var p=c[this.category().route+"/"+(this.pageNumber-1)];this.actualOffset=p.actualOffset,this.expandedOffset=p.expandedOffset,r[a.OFFSET]=this.actualOffset,r[a.LIMIT]=2*this.blockSize,this.skipOffSetMapUpdateOnBrowserBack=!0}}else 0==this.data().length&&(this.actualOffset=0,this.expandedOffset=0,r[a.OFFSET]=this.actualOffset,r[a.LIMIT]=this.itemsPerPage*(this.pageNumber||1),this.skipOffSetMapUpdateOnRefresh=!0)}}void 0==r[a.OFFSET]&&(this.actualOffset=e,this.expandedOffset=e,r[a.OFFSET]=this.actualOffset),"default"!==this.sortDirectiveProp()&&(r[a.SORTS]=this.sortDirectiveProp()+":"+this.sortDirectiveOrder()),t=a.ENDPOINT_PRODUCTS_LIST_PRODUCTS,this.category()&&(this.requesting||(this.requesting=!0,o.create(this.productLoadingOptions),r[a.CATEGORY]=this.category().id,r.includeChildren=!0,null!=this.showInactiveProducts&&null!=this.showInactiveSkus&&(r.showInactiveProducts=this.showInactiveProducts,r.showInactiveSkus=this.showInactiveSkus),this.widget&&this.widget.fields&&this.widget.fields()&&(r.fields=this.widget.fields()),this.requesting=!0,r[a.STORE_PRICELISTGROUP_ID]=d.getInstance().selectedPriceListGroup().id,this.widget&&this.widget.productListing&&this.widget.productListing.filterKey&&(r[a.FILTER_KEY]=this.widget.productListing.filterKey),i.request(t,r,function(e){this.successFunc(e)}.bind(this),this.errorFunc.bind(this))))},h.prototype.buildResultsPerPageOption=function(e,t){return{id:t?a.RESULTS_PER_PAGE_ALL:"rec-per-page-"+e,displayText:t?n.t("ns.productlisting:resources.resultsPerPageOptionAll"):e,value:e}},h.prototype.buildResultsPerPage=function(e,t,r){var i=this;if(i.widget.showResultsPerPageSection&&i.widget.showResultsPerPageSection()){var n=[],o=0,s=i.widget.productsPerPage&&i.widget.productsPerPage()||a.DEFAULT_ITEMS_PER_PAGE;this.resultsPerPageOptions().length&&!this.categoryOrSearchChanged||(this.categoryOrSearchChanged=!1,$.each(a.RESULTS_PER_PAGE_SERIES,function(t,r){0!=t&&(o=s*r,o<e&&n.push(i.buildResultsPerPageOption(o)))}),n.push(i.buildResultsPerPageOption(e,!0)),this.resultsPerPageOptions(n))}},h.prototype.successFunc=function(e){var t=this.selectedResultsPerPageOption(),r=this.prevTotalNumber;if((this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){this.totalExpandedResults=e.totalExpandedResults,this.totalResults=e.totalResults,this.previousGetProductsBlockSize=e.limit,this.skipOffSetMapUpdateOnBrowserBack=!1,this.buildResultsPerPage(this.totalExpandedResults,r,t);var i={};i.actualOffset=e.offset;var a,n=this.expandProducts(e.items,i);if(a=this.expandedOffset>=0?this.expandedOffset:Math.abs(this.expandedOffset)-n.length,i.expandedOffset=a,n&&n.length>0){if(this.isCacheEnabled&&this.populateData(n,e.totalExpandedResults,a),this.addData(n,e.totalExpandedResults<0?0:e.totalExpandedResults,a),this.pageNumberOffSetIndexMapForCategories){for(var o=!1,s=0;s<this.pageNumberOffSetIndexMapForCategories.length;s++)if(this.pageNumberOffSetIndexMapForCategories[s].categoryId===this.category().id){this.pageNumberOffSetIndexMapForCategories[s].pageNumberOffSetIndexMap.push({pageNumber:this.pageNumber,offSetIndex:this.data().length-1}),o=!0;break}o||this.pageNumberOffSetIndexMapForCategories.push({categoryId:this.category().id,pageNumberOffSetIndexMap:[{pageNumber:this.pageNumber,offSetIndex:this.data().length-1}]})}}else u.goTo(this.widget.links()[404].route,!0,!0)}else{this.totalResults=e.totalResults,this.buildResultsPerPage(this.totalResults,r,t);var c=[];if(e&&e.items&&e.items.length>0)for(var s=0,l=e.items.length;s<l;s++){var d={};d.product=e.items[s],c[s]=d}else u.goTo(this.widget.links()[404].route,!0,!0);this.isCacheEnabled&&this.populateData(c,e.totalResults,e.offset),this.addData(c,e.totalResults<0?0:e.totalResults,e.offset)}$.when(this.pageNumberDeferred).done(this.handleLinks),this.removeSpinner(),this.titleText(this.getTitleText()),this.requesting=!1},h.prototype.errorFunc=function(e){this.removeSpinner(),this.requesting=!1},h.prototype.populateData=function(e,t,r){var i,a,n=this.findCachedResultIndex();if(void 0==n){for(a=[],i=0;i<e.length;i+=1)a[i+r]=e[i];this.cachedViewModels.push({categoryId:this.category().repositoryId,viewModels:[],visitCount:0,sortKey:this.selectedSort().id,sortOrder:this.selectedSort().order(),products:a,totalResults:t,scrollPosition:0}),this.cachedViewModels.length>this.viewModelCacheLimit&&this.cachedViewModels.splice(0,1)}else{for(a=this.cachedViewModels[n].products,i=0;i<e.length;i+=1)a[i+r]=e[i];this.cachedViewModels[n].products=a,this.cachedViewModels[n].viewModels.splice(r)}},h.prototype.expandProducts=function(e,t){var r,i,a,n,o=[],s=this.widget.productListingTypes,c=[],l=[],d=0;if(e)for(var u=0,p=e.length;u<p;u++)if(r=e[u],r.childSKUs.length>0&&s[r.type]&&s[r.type].variantBasedDisplay){a={},n=s[r.type].id,l=r.variantValuesOrder[n],c=s[r.type].values;for(var h=0,f=r.childSKUs.length;h<f;h++)if(i=r.childSKUs[h],!a[i[n]]||i.productListingSku){var m={};m.product=e[u],m.listingSku=i,a[i[n]]=m}var g=[];g=l&&l.length>0?l:c;for(var v=0;v<g.length;v++)a[g[v]]&&(o[d]=a[g[v]],o[d].offsetMap=t,d++)}else{var m={};m.product=e[u],o[d]=m,o[d].offsetMap=t,d++}return o},h.prototype.getResultsText=function(){var e,t=this.pageStartIndex();return this.isLoadOnScroll()&&(t=0),s.formatNumber(this.totalNumber())&&(e=this.totalNumber()>0?n.t("ns.common:resources.productresultsText",{startIndex:s.formatNumber(t+1),endIndex:s.formatNumber(this.pageEndIndex()),totalProducts:s.formatNumber(this.totalNumber())}):n.t("ns.common:resources.emptyProductresultsText")),"ns.common:resources.productresultsText"===e&&(e=""),e},h.prototype.getTitleText=function(){var e="";return e=this.category()?this.category().displayName:n.t("ns.common:resources.TitleText")},h}),define("viewModels/productListingSearchViewModel",["knockout","viewModels/productListingViewModel","pubsub","CCi18n","ccConstants","ccNumber","navigation","pageLayout/product","pageLayout/search"],function(e,t,r,i,a,n,o,s,c){"use strict";function l(r){var i=this;i.initializationComplete=e.observable(!1),t.call(this),i.widget=r,i.initialize(),i.itemsPerRowInDesktopView=e.observable(4),i.itemsPerPage=a.DEFAULT_ITEMS_PER_PAGE,i.blockSize=a.DEFAULT_ITEMS_PER_PAGE,i.currentProductsComputed=e.observableArray([]),i.currentProducts=e.computed(function(){var t;this.productGridRefreshOrAppend=!0;var r,i;r=(this.currentPage()-1)*this.itemsPerPage,i=r+this.itemsPerPage;var n=this.data.peek();t=n.slice(r,i);for(var o,c,l=this.isLoadOnScroll.peek(),d=[],u=t.length,p=0;p<u;p++)t[p]&&(o=new s(t[p]),c=this.listingImageSize(),o.listingImageURL=e.observable(o.primaryFullImageURL()+"&width="+c+"&height="+c),o.listingSku&&(o.listingSku.route=o.listingSku.route(),o.listingSku.images=o.listingSku.images()),d.push(o),this.pageProductsTemp.push(o),(this.pageProductsTemp.length>0&&this.pageProductsTemp.length%this.itemsPerRow()===0||l&&this.totalNumber.peek()-this.scrolledViewModels.length===this.pageProductsTemp.length||!l&&p+1===u)&&(this.scrolledViewModels.push.apply(this.scrolledViewModels,this.pageProductsTemp),this.productGridExtension||this.viewportMode()!=a.TABLET_VIEW&&this.viewportMode()!=a.PHONE_VIEW?this.currentProductsComputed(this.pageProductsTemp.splice(0)):this.currentProductsComputed(this.scrolledViewModels),this.pageProductsTemp=[],this.productGridRefreshOrAppend=!1));return $("#typeaheadDropdown").hide(),this.setFocus(),this.isLoadOnScroll.peek()?this.scrolledViewModels:d},this).extend({deferred:!0})}var d=c.getInstance(),u=function(){};return u.prototype=t.prototype,l.prototype=new u,l.prototype.constructor=l,l.base=t.prototype,l.prototype.itemsPerRowInTabletView=e.observable(4),l.prototype.itemsPerRowInPhoneView=2,l.prototype.itemsPerRowInDesktopView=e.observable(4),l.prototype.itemsPerRowInLargeDesktopView=e.observable(4),l.prototype.itemsPerRow=e.observable(4),l.prototype.type="ProductListingSearchViewModel",l.prototype.searchFailed=e.observable(!1),l.prototype.idToSearchIdMap={displayName:"product.relevance",listPrice:"sku.activePrice"},l.prototype.category=e.observable(),l.prototype.listingImageSize=e.observable(300),l.prototype.initialize=function(){var t=this;t.searchResults=[],t.recordsPerPage=e.observable(a.DEFAULT_SEARCH_RECORDS_PER_PAGE),t.searchAdjustments={},t.breadcrumbs={},t.navigation={},t.pageCount=0,t.recordOffSet=0,t.searchTerms=e.observableArray([]),t.adjustedSearchTerms=e.observableArray([]),t.suggestedSearches=e.observableArray([]),t.navigationDescriptors=e.observable(),t.display=e.observable(!0),t.totalNumber(0),t.pageStartIndex(0),t.pageEndIndex(0),t.searchText=e.observable(),t.resultsText=e.observable(),t.categoryName=e.observable(),t.noSearchResultsText=e.observable(),t.pageLoadedText=e.observable();$.Topic(r.topicNames.CATEGORY_CRUMB_UPDATED).subscribe(function(e){t.categoryName(e)}),$.Topic(r.topicNames.SEARCH_RESULTS_UPDATED).subscribe(function(e){if(t.noSearchResultsText(""),e.message===a.SEARCH_MESSAGE_FAIL)t.searchFailed(!0),o.goTo(t.widget.links().noSearchResults.route,!1,!0),$.Topic(r.topicNames.SEARCH_FAILED_TO_PERFORM).publish();else{if(0===this.totalRecordsFound&&!this.searchAdjustments.suggestedSearches)return o.goTo(t.widget.links().noSearchResults.route,!1,!0),$.Topic(r.topicNames.SEARCH_TERM).publishWith(this.searchAdjustments.originalTerms,[{message:"success"}]),void t.display(!1);t.display(!0),t.buildResultsPerPage(this.totalRecordsFound,t.prevTotalNumber,t.selectedResultsPerPageOption()),t.totalNumber(this.totalRecordsFound),t.searchTerms(this.searchAdjustments.originalTerms),this.searchAdjustments.adjustedSearches?t.adjustedSearchTerms(this.searchAdjustments.adjustedSearches[t.getSearchTerms()]):t.adjustedSearchTerms([]),this.searchAdjustments.suggestedSearches?(t.formatSuggestedSearches(this.searchAdjustments.suggestedSearches[t.getSearchTerms()]),t.suggestedSearches(this.searchAdjustments.suggestedSearches[t.getSearchTerms()])):t.suggestedSearches([]),t.searchFailed(!1),this.pagingActionTemplate&&t.navigationDescriptors(t.getParameterByName(this.pagingActionTemplate.navigationState,a.SEARCH_NAV_DESCRIPTORS_KEY)),this.isNewSearch===!0?(t.clearOnLoad=!0,"displayName"!==t.sortDirectiveProp()&&t.selectedSort(t.sortOptions()[0])):t.clearOnLoad=!1,this.searchResults&&this.searchResults.length>0?t.addData(this.searchResults,t.totalNumber(),this.recordOffSet):(t.targetPage=1,this.searchAdjustments.suggestedSearches||o.goTo(t.widget.links()[404].route,!0,!0)),t.titleText(t.getTitleText(this.searchResults.length)),t.resultsText(t.getResultsText()),t.pageLoadedText(t.getPageLoadedText())}}),t.initializationComplete(!0)},l.prototype.getPageLoadedText=function(){var e=i.t("ns.common:resources.searchPageLoadedText",{results:this.resultsText(),searchTerm:this.searchTerms()[0]});return e},l.prototype.getPage=function(e){this.resultsText(""),this.clickedPage(e),this.adjustStartAndEndPageIndex(e),e!==this.currentPage()&&e!==this.targetPage&&this.isMobileView()&&$.Topic(r.topicNames.RECORD_PAGINATION_PAGE_CHANGE).publish(),e===this.currentPage()&&null!==this.targetPage&&void 0!==this.targetPage||(this.targetPage=e),(this.parameters||"product.relevance"!==l.prototype.idToSearchIdMap[this.sortDirectiveProp()])&&this.fetchBlock(this.pageStartIndex()),this.setFocus()},l.prototype.getParameterByName=function(e,t){var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=r.exec(e);return null===i?"":i[1]},l.prototype.fetchBlock=function(e){this.initializationComplete()&&(this.recordOffSet=e,this.searchText(this.searchTerms().length>0?this.searchTerms()[0]:""),this.blockSize=this.itemsPerPage,($(window)[0].innerWidth||$(window).width())<a.VIEWPORT_TABLET_UPPER_WIDTH&&(this.recordOffSet=0,this.blockSize=e+this.recordsPerPage()),this.submitSearch())},l.prototype.submitSearch=function(){var e="",t="";this.searchText().trim()&&(e=a.PRODUCT_DISPLAYABLE+a.SEARCH_PROPERTY_SEPARATOR+this.searchText().trim()),this.parameters&&this.parameters.searchType&&(t=this.parameters.searchType);var i={getFromUrlParam:!0,newSearch:!1,recordsPerPage:this.blockSize,recordOffSet:this.recordOffSet,recDYMSuggestionKey:this.recDYMSuggestionKey,searchType:t};if(this.parameters.Ns){var n=decodeURIComponent(this.parameters.Ns).split("|");2===n.length&&(i.sortDirectiveProperty=n[0],i.sortDirectiveOrder="1"==n[1]?"desc":"asc")}else this.sortDirectiveProp("displayName");this.useGenericSort||"product.relevance"===l.prototype.idToSearchIdMap[this.sortDirectiveProp()]||(i.sortDirectiveProperty=l.prototype.idToSearchIdMap[this.sortDirectiveProp()],i.sortDirectiveOrder="product.relevance"==i.sortDirectiveProperty?"none":this.sortDirectiveOrder()),$.Topic(r.topicNames.SEARCH_CREATE).publishWith(i,[{message:"success"}])},l.prototype.getResultsText=function(){var e=this.pageStartIndex(),t="";if(0!==this.totalNumber()){if(this.isLoadOnScroll()&&(e=0),this.searchFailed&&!this.searchFailed()){var r=this.getSearchTerms(),a="ns.common:resources.searchresultsText",o=this.pageEndIndex();this.pageEndIndex()>this.totalNumber()&&(o=this.totalNumber()),n.formatNumber(this.totalNumber())&&(t=i.t(a,{count:n.formatNumber(this.totalNumber()),searchterm:r,startIndex:n.formatNumber(e+1),endIndex:n.formatNumber(o)}))}else t=i.t("ns.common:resources.searchFailedText");return t}},l.prototype.getSearchTerms=function(){var t="",r=0;return this.searchTerms&&e.utils.arrayForEach(this.searchTerms(),function(e){t=0===r?e:t+" "+e,r++}),t},l.prototype.getTitleText=function(e){var t="";return""==this.getSearchTerms()?t=this.categoryName():this.adjustedSearchTerms().length>0?(t=i.t("ns.common:resources.searchText",{searchTerm:'"'+this.adjustedSearchTerms()[0].adjustedTerms+'"'}),this.noSearchResultsText(i.t("ns.common:resources.noSearchResultsText",{searchTerm:'"'+this.getSearchTerms()+'"'}))):this.suggestedSearches().length>0&&0===e?this.noSearchResultsText(i.t("ns.common:resources.noSearchResultsText",{searchTerm:'"'+this.getSearchTerms()+'"'})):t=i.t("ns.common:resources.searchText",{searchTerm:'"'+this.getSearchTerms()+'"'}),t},l.prototype.pagesFunction=function(){var e,t,r,i;this.clearOnLoad&&this.adjustStartAndEndPageIndex(this.pageNumber),this.totalNumber()?(t=(this.totalNumber()-this.totalNumber()%this.itemsPerPage)/this.itemsPerPage,r=this.totalNumber()%this.itemsPerPage>0?1:0,e=t+r):e=0,d.contextData&&"/"+o.getPath()==d.contextData.global.links.searchresults.route&&this.totalNumberOfPages(e),this.adjustPageIndex(this.pageNumber);var a=[];for(i=0;i<e;i++){var n={};n.pageNumber=i+1,n.selected=n.pageNumber===this.currentPage(),a.push(n)}var s=[];if(this.pageWindowSize>=e)s=a.slice(0);else{var c=this.startIndex+this.pageWindowSize;c>e&&(c=e),s=a.slice(this.startIndex,c)}return s},l.prototype.formatSuggestedSearches=function(e){$.each(e,function(e,t){t.clickSuggestion=function(){o.goTo(a.SEARCH_RESULTS_HASH+d.getFilteredNavState(this.navigationState)+"&"+a.SEARCH_TYPE+"="+a.SEARCH_TYPE_SIMPLE+"&"+a.PARAMETERS_TYPE+"="+a.PARAMETERS_SEARCH_QUERY)}})},l.prototype.setFocus=function(){var e=$("#region-megaMenu").next().attr("id"),t="#"+e+" :focusable";$(t).first().focus()},l}),define("viewModels/productListingViewModelFactory",["viewModels/productListingViewModel","viewModels/productListingSearchViewModel","ccConstants"],function(e,t,r){"use strict";function i(){if(null!==a)throw new Error("Cannot instantiate more than one ProductListingViewModelFactory, use ProductListingViewModelFactory.getInstance()")}var a=null;return i.prototype={createListingViewModel:function(e){var t,i=e.listType();return i===r.LIST_VIEW_PRODUCTS&&(t=this.createProductListingViewModel(e)),i===r.LIST_VIEW_SEARCH&&(t=this.createProductListingSearchViewModel(e)),t.listType=i,t},createProductListingViewModel:function(t){return new e(t)},createProductListingSearchViewModel:function(e){return new t(e)}},i.getInstance=function(){return null===a&&(a=new i),a},i.getInstance()}),define("viewModels/searchTypeahead",["knockout","pubsub","ccConstants","CCi18n","navigation","jquery","ccNumber","pageLayout/product","pageLayout/site","ccRestClient","bstypeahead","bootstrap"],function(e,t,r,i,a,n,o,s,c,l){"use strict";function d(e,t,i,a,n,o){if(null!==u)throw new Error("Cannot instantiate more than one SearchTypeahead, use SearchTypeahead.getInstance()");E=t.symbol,E.match(/^[0-9a-zA-Z]+$/)&&(E+=" "),I=t.fractionalDigits,this.productURLRoot=i?i:p,this.searchResultPage=a?a:r.SEARCH_RESULTS_HASH,A=null!=n&&n,S=null==o?null:o,this.initialize(e)}var u=null,p="/product/";r.ALLOW_HASHBANG&&(p="#!"+p);var h="ns.common:resources.",f="--noMatchesFound--",m="close",g="showall",v=2,y=l.getStoredValue(r.LOCAL_STORAGE_USER_CONTENT_LOCALE);y=null!=y?JSON.parse(y)[0].name:n(":root").attr("lang"),"zh_CN"!=y&&"zh_TW"!=y||(v=1);var b,E,I,T=5,P=300,C=10,S=e.observable(null),A=e.observable(!1),_=e.observable(!1),O=e.observable(!1),R=e.observable("/img/no-image.jpg");return n.fn.typeahead.Constructor.prototype.keyup=function(e){switch(e.keyCode){case 9:case 40:case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;_(!0),this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},n.fn.typeahead.Constructor.prototype.move=function(e){if(this.shown){switch(e.keyCode){case 13:case 27:e.preventDefault();break;case 38:"keyup"==e.type&&(e.preventDefault(),this.prev());break;case 9:if(e.preventDefault(),e.stopPropagation(),e.shiftKey){var t=this.$menu.find(".active").removeClass("active"),r=t.prev();if(!r.length){if(!this.shown)return;this.hide()}r.addClass("active")}else{var t=this.$menu.find(".active").removeClass("active"),i=t.next();i.length||(0==i.prevObject.length&&this.$menu.find("li").length>1?i=n(this.$menu.find("li")[0]):this.$element.next().next().focus()),0===i.length?n("#desktopSearchSubmit").focus():i.addClass("active")}break;case 40:"keydown"==e.type&&(e.preventDefault(),this.next())}e.stopPropagation()}},n.fn.typeahead.Constructor.prototype.blur=function(e){if(this.focused=!1,!this.mousedover&&this.shown)return this.$menu.hide(),this},d.prototype={initialize:function(e){if(void 0===e)throw new Error("Cannot instantiate SearchTypeahead, without a selector");n(e).typeahead({source:this.typeaheadSource,minLength:v,items:T,matcher:this.typeaheadMatch,sorter:this.typeaheadSort,updater:this.typeaheadUpdater,highlighter:this.typeaheadHighlight,render:this.typeaheadRender,select:this.typeaheadSelect,hide:this.typeaheadHide,menu:"<ul id='typeaheadDropdown' class='typeahead dropdown-menu' aria-live='polite'></ul>",item:"<li class='typeaheadProduct'><a href='#' onclick = $('#typeaheadDropdown').hide()>                                           <img class='typeaheadProductThumbnail visible-md visible-lg img-responsive'/>                                           <span class='typeaheadProductName'></span>                                           <span class='typeaheadProductPrice'></span>                                         </a></li>"}),n.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).subscribe(this.typeaheadResults),n.Topic(t.topicNames.SEARCH_TYPEAHEAD_CANCEL).subscribe(this.typeaheadCancel.bind(this))},typeaheadUpdater:function(e){return e},typeaheadSource:function(e,r){b=this,this.render=this.options.render||this.render,this.select=this.options.select||this.select,this.hide=this.options.hide||this.hide;var i=b.query;if(this.searchQuery="",this.$menu.css("width",this.$element.width()-C/2),this.$menu.css("margin-left",C),c.getInstance().noImageSrc()&&""!=c.getInstance().noImageSrc()){R(c.getInstance().noImageSrc());var a=new Image;a.onerror=function(){R("/img/no-image.jpg")},a.src=c.getInstance().noImageSrc()}this.timer&&clearTimeout(this.timer);var o=function(){b.callback=r,b.query=b.query?b.query:i,b.searchQuery=b.query,n.Topic(t.topicNames.SEARCH_TYPEAHEAD).publishWith({searchText:b.query,recordsPerPage:T,recordOffSet:0},[{message:"success"}])};this.timer=setTimeout(o,P)},typeaheadResults:function(e){if(b&&b.focused&&!O()&&"none"==n("#typeaheadDropdown").css("display")&&(n("#alert-modal-change").text(i.t("ns.common:resources.searchDropdownOpenedText")),O(!0)),b&&b.focused&&b.options){var t,a,o=[],s=this[0]?this[0]:[],c=this[1]?this[1]:[];n.each(c,function(e,i){if(i.records[0]){var s=i.records[0],c={};c.id=s.attributes["product.repositoryId"][0],s.attributes["product.displayName"]?c.name=s.attributes["product.displayName"][0]:c.name="",(n(window)[0].innerWidth||n(window).width())>r.VIEWPORT_TABLET_LOWER_WIDTH&&(c.thumb=s.attributes["sku.listingThumbImageURL"]?s.attributes["sku.listingThumbImageURL"]:s.attributes["product.primaryThumbImageURL"]?s.attributes["product.primaryThumbImageURL"][0]:R(),c.noImageSrc='src="'+R()+'"',"/img/no-image.jpg"==c.thumb&&(c.thumb=R(),c.noImageSrc='src="/img/no-image.jpg"')),s.attributes["product.primaryImageTitle"]&&(c.primaryImageTitle=s.attributes["product.primaryImageTitle"][0]),(c.primaryImageAltText=s.attributes["product.primaryImageAltText"])&&(c.primaryImageAltText=s.attributes["product.primaryImageAltText"][0]),c.link=s.attributes["product.route"][0],Array.isArray(s.attributes["sku.styleProperty"])&&(t=s.attributes["sku.styleProperty"][0],t&&(Array.isArray(s.attributes["sku."+t])&&(a=s.attributes["sku."+t][0]),a&&(c.link=c.link+"?variantName="+t+"&variantValue="+a))),c.price="",o.push(c)}}),n.each(s,function(e,t){if(t.id[0]===o[e].id){var r=function(e){var t,r,i,a,n,o=e.childSKUs?e.childSKUs.length:0;
if(e.minActivePrice)return e.minActivePrice;if(t=e.salePrice||0===e.salePrice?e.salePrice:e.listPrice,e.childSKUs)if(o>0)for(var n in e.childSKUs)i=e.childSKUs[n],a=i.salePrice||0===i.salePrice?i.salePrice:i.listPrice,a||0==a||(a=t),(!r&&0!=r||a<r)&&(r=a);else r=t;return r}(t);o[e].price=r}}),o.length||o.push({id:f,name:"",price:"",thumb:"",link:""}),b.callback&&"function"==typeof b.callback&&b.callback(o)}},typeaheadCancel:function(){b=this,b.timer&&clearTimeout(b.timer)},typeaheadMatch:function(e){return!0},typeaheadSort:function(e){return e},typeaheadHighlight:function(e){return e},typeaheadRender:function(e){if(1===e.length&&e[0].id===f){var t=i.t(h+"noMatchesFound");return this.$menu.html(n("<li class='typeaheadTop' disabled>").text(t)),this}e=n(e).map(function(e,t){e=n(b.options.item).attr("data-value",t.name),A?null!=S&&e.find("a").attr("href","#").on("click",function(e){return S.getProductDetails.call(S,t.id,A),e.preventDefault(),!1}):e.find("a").attr("href",a.getPathWithLocale(t.link)).on("click",function(e){var t=n(this).attr("href");return a.goTo(t),e.preventDefault(),!1}),e.find("a").attr("title",t.name),e.find("a").attr("id",t.id),e.find(".typeaheadProductThumbnail").attr("src",t.thumb),e.find(".typeaheadProductThumbnail").attr("alt",t.primaryImageAltText),e.find(".typeaheadProductThumbnail").attr("title",t.primaryImageTitle),e.find(".typeaheadProductThumbnail").attr("onError",t.noImageSrc),e.find(".typeaheadProductName").html(t.name);var r,s=parseFloat(t.price).toFixed(I).toString();if("NaN"===s||""===s||null===s)r=i.t(h+"priceUnavailable");else{var c=s.split(".");r=o.formatNumber(c[0],!0),0===I?r=r.substring(0,r.length-3):(r=r.substring(0,r.length-2),r+=c[1]),r=E+r}return e.find(".typeaheadProductPrice").text(r),e[0]}),e.first().addClass("firstResult");var r=i.t(h+"closeText"),s=i.t(h+"showAllResultsText");return this.$menu.html(e),this.$menu.prepend(n("<li/>").attr({class:"typeaheadClose","data-value":m}).append(n("<a/>").attr({href:"#",tabindex:"0"}).text(r))),this.$menu.prepend(n("<li/>").attr({class:"typeaheadAllProducts visible-lg visible-md","data-value":g}).append(n("<a/>").attr({href:"#",title:"Show all results"}).text(s))),this},typeaheadSelect:function(){var e=this.$menu.find(".active"),t=e.children("a").attr("href"),i=e.children("a").attr("id");if(t&&""!==t&&"#"!==t)window.location=t;else if(t&&"#"===t&&A&&null!=S&&null!=i)S.getProductDetails.call(S,i,A);else{var o=e.attr("data-value");if(o===g||!e.length){u.typeaheadCancel(),this.searchQuery=this.query;var s;_()?(s=n.trim(this.query),_(!1)):s=this.query.trim()+r.SEARCH_WILDCARD,0!=s.length&&a.goTo(u.searchResultPage+"?"+r.SEARCH_TERM_KEY+"="+encodeURIComponent(s)+"&"+r.SEARCH_DYM_SPELL_CORRECTION_KEY+"="+encodeURIComponent(r.DYM_ENABLED)+"&"+r.SEARCH_NAV_ERECS_OFFSET+"=0&"+r.SEARCH_REC_PER_PAGE_KEY+"="+r.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+r.SEARCH_RANDOM_KEY+"="+Math.floor(1e3*Math.random())+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_SIMPLE+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)}}return this.hide()},typeaheadHide:function(){return this.$element.val()===this.searchQuery&&this.$element.val("").change(),this.$menu.hide(),this.shown=!1,O()&&"none"==n("#typeaheadDropdown").css("display")&&(n("#alert-modal-change").text(i.t("ns.common:resources.searchDropdownClosedText")),O(!1)),this}},d.performTypeAhead=function(e){this.timer&&clearTimeout(this.timer);var r=function(){n.Topic(t.topicNames.SEARCH_TYPEAHEAD).publishWith({typeaheadConfig:e},[{message:"success"}])};this.timer=setTimeout(r,P)},d.getTypeAheadDefaultQueryParams=function(){var e=new Map;return e.set("Ntk","TypeAhead"),e.set("Ntx","mode matchany"),e.set("No","0"),e.set("Nrpp","5"),e.set("typeaheadMinLength",v),e},d.getInstance=function(e,t,r,i,a,n){return u=null,u=new d(e,t,r,i,a,n)},d}),define("viewModels/giftProductListingViewModel",["knockout","pubsub","ccConstants","pageLayout/product","ccRestClient","ccStoreConfiguration"],function(e,t,r,i,a,n){"use strict";function o(e,t){var r=this;return r.products=r.getProductsInfo(e),r}return o.prototype.storeConfiguration=n.getInstance(),o.prototype.getProductsInfo=function(e){for(var t=[],a=0;a<e.length;a++){var n={};e[a].hasOwnProperty(r.INVENTORY_PRODUCT_TYPE)&&(n=new i(e[a][r.INVENTORY_PRODUCT_TYPE])),t[a]={},t[a]=n}return t},o.prototype.getGiftProductChoices=function(e){if(null!=e.giftWithPurchaseDetail&&null!=e.giftWithPurchaseType){var t,i={};i[r.GIFT_WITH_PURCHASE_DETAIL]=e.giftWithPurchaseDetail,i[r.GIFT_WITH_PURCHASE_TYPE]=e.giftWithPurchaseType;var n={};n[r.ENDPOINT_KEY]=r.ENDPOINT_GET_GIFT_CHOICES;var o=this.storeConfiguration.getFilterToUse(n);o&&(i[r.FILTER_KEY]=o),t=r.ENDPOINT_GET_GIFT_CHOICES,a.request(t,i,this.getGiftChoicesSuccessFunc.bind(this,e.id),this.getGiftChoicesFailureFunc.bind(this))}},o.prototype.getGiftChoicesSuccessFunc=function(e,r){if(r&&r.length>0){var i=new o(r);$.Topic(t.topicNames.GET_GIFT_CHOICES_SUCCESSFUL).publishWith([i,e],[{message:"success"}])}else $.Topic(t.topicNames.GIFT_CHOICES_NOT_AVAILABLE).publish()},o.prototype.getGiftChoicesFailureFunc=function(e){$.Topic(t.topicNames.GET_GIFT_CHOICES_FAILURE).publishWith(e,[{message:"failure"}])},o});
//# sourceMappingURL=main.js.map